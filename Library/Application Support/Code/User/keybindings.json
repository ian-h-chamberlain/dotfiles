[
    {
        "command": "cursorWordPartStartLeft",
        "key": "alt+left",
        "when": "textInputFocus && editorLangId != 'org'",
    },
    {
        "command": "cursorWordPartRight",
        "key": "alt+right",
        "when": "textInputFocus && editorLangId != 'org'",
    },
    {
        "command": "cursorWordPartStartLeftSelect",
        "key": "alt+shift+left",
        "when": "textInputFocus",
    },
    {
        "command": "cursorWordPartRightSelect",
        "key": "alt+shift+right",
        "when": "textInputFocus",
    },
    {
        "command": "deleteWordPartLeft",
        "key": "alt+backspace",
        "when": "textInputFocus",
    },
    {
        "command": "deleteWordPartRight",
        "key": "alt+delete",
        "when": "textInputFocus",
    },
    {
        "command": "workbench.action.nextEditorInGroup",
        "key": "ctrl+tab",
    },
    {
        "command": "-workbench.action.openNextRecentlyUsedEditorInGroup",
        "key": "ctrl+tab",
    },
    {
        "command": "-workbench.action.openPreviousRecentlyUsedEditorInGroup",
        "key": "ctrl+shift+tab",
    },
    {
        "command": "workbench.action.previousEditorInGroup",
        "key": "ctrl+shift+tab",
    },
    {
        "command": "-workbench.action.focusNextGroup",
        "key": "cmd+k cmd+right",
    },
    {
        "command": "workbench.action.focusNextGroup",
        "key": "alt+cmd+right",
    },
    {
        "key": "alt+cmd+up",
        "command": "-editor.action.insertCursorAbove",
        "when": "editorTextFocus",
    },
    {
        "key": "alt+cmd+up",
        "command": "workbench.action.focusAboveGroup",
        "when": "editorFocus",
    },
    {
        "key": "alt+cmd+down",
        "command": "-editor.action.insertCursorBelow",
        "when": "editorTextFocus",
    },
    {
        "key": "alt+cmd+down",
        "command": "workbench.action.focusBelowGroup",
        "when": "editorFocus",
    },
    {
        "command": "-workbench.action.focusPreviousGroup",
        "key": "cmd+k cmd+left",
    },
    {
        "command": "workbench.action.focusPreviousGroup",
        "key": "alt+cmd+left",
    },
    {
        "command": "-workbench.action.previousEditor",
        "key": "shift+cmd+[",
    },
    {
        "command": "-workbench.action.nextEditor",
        "key": "shift+cmd+]",
    },
    {
        "command": "editor.action.triggerSuggest",
        "key": "alt+space",
        "when": "editorHasCompletionItemProvider && editorTextFocus && !editorReadonly",
    },
    {
        "command": "-editor.action.triggerSuggest",
        "key": "ctrl+space",
        "when": "editorHasCompletionItemProvider && editorTextFocus && !editorReadonly",
    },
    {
        "command": "-editor.action.outdentLines",
        "key": "cmd+[",
        "when": "editorTextFocus && !editorReadonly",
    },
    {
        "command": "editor.fold",
        "key": "cmd+[",
        "when": "editorTextFocus",
    },
    {
        "command": "-editor.fold",
        "key": "alt+cmd+[",
        "when": "editorTextFocus",
    },
    {
        "command": "-editor.action.indentLines",
        "key": "cmd+]",
        "when": "editorTextFocus && !editorReadonly",
    },
    {
        "command": "editor.unfold",
        "key": "cmd+]",
        "when": "editorTextFocus",
    },
    {
        "command": "-editor.unfold",
        "key": "alt+cmd+]",
        "when": "editorTextFocus",
    },
    {
        "command": "workbench.action.splitEditor",
        "key": "cmd+k cmd+\\",
    },
    {
        "command": "workbench.action.splitEditor",
        "key": "cmd+k \\",
    },
    {
        "command": "-workbench.action.splitEditor",
        "key": "cmd+\\",
    },
    {
        "command": "workbench.action.moveEditorToNextGroup",
        "key": "cmd+\\",
        "when": "editorFocus",
    },
    {
        "key": "shift+cmd+\\",
        "command": "-editor.action.jumpToBracket",
        "when": "editorFocus",
    },
    {
        "key": "shift+cmd+\\",
        "command": "workbench.action.splitEditorOrthogonal",
        "when": "editorFocus",
    },
    {
        "command": "-workbench.action.closeOtherEditors",
        "key": "alt+cmd+t",
    },
    {
        "command": "workbench.action.tasks.test",
        "key": "alt+cmd+t",
    },
    {
        "command": "workbench.action.terminal.focusNext",
        "key": "ctrl+tab",
        "when": "terminalFocus",
    },
    {
        "command": "workbench.action.terminal.kill",
        "key": "cmd+w",
        "when": "terminalFocus",
    },
    {
        "command": "workbench.action.terminal.focus",
        "key": "ctrl+`",
        "when": "!terminalFocus",
    },
    {
        "command": "workbench.action.terminal.scrollToBottom",
        "key": "end",
        "when": "terminalFocus",
    },
    {
        "command": "-workbench.action.terminal.scrollToBottom",
        "key": "cmd+end",
        "when": "terminalFocus",
    },
    {
        "command": "workbench.action.terminal.scrollToTop",
        "key": "home",
        "when": "terminalFocus",
    },
    {
        "command": "-workbench.action.terminal.scrollToTop",
        "key": "cmd+home",
        "when": "terminalFocus",
    },
    {
        "command": "workbench.action.terminal.focusPrevious",
        "key": "ctrl+shift+tab",
        "when": "terminalFocus",
    },
    {
        "command": "-workbench.action.gotoSymbol",
        "key": "cmd+shift+o",
    },
    {
        "command": "workbench.action.output.toggleOutput",
        "key": "cmd+shift+o",
    },
    {
        "command": "workbench.action.gotoSymbol",
        "key": "cmd+p",
    },
    {
        "command": "-workbench.action.showAllSymbols",
        "key": "cmd+t",
    },
    {
        "command": "workbench.action.quickOpenNavigateNextInFilePicker",
        "key": "cmd+p",
        "when": "inFilesPicker && inQuickOpen",
    },
    {
        "command": "-workbench.action.quickOpenNavigateNextInFilePicker",
        "key": "cmd+p",
        "when": "inFilesPicker && inQuickOpen",
    },
    {
        "command": "workbench.action.quickOpen",
        "key": "cmd+t",
    },
    {
        "command": "-workbench.action.quickOpen",
        "key": "cmd+p",
    },
    {
        "command": "workbench.action.closeMessages",
        "key": "escape",
        "when": "globalMessageVisible && neovim.mode == 'normal'",
    },
    // =========================================================================
    // Bindings for vscode-neovim
    // =========================================================================
    {
        "key": "escape",
        "command": "closeFindWidget",
        "when": "neovim.mode == 'normal' && editorFocus && findWidgetVisible",
    },
    {
        "key": "escape",
        "command": "workbench.action.closePanel",
        "when": "neovim.mode == 'normal' && !terminalFocus && activePanel",
    },
    {
        "key": "escape",
        "command": "workbench.action.closeQuickOpen",
        "when": "inQuickOpen",
    },
    {
        "key": "cmd+/",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.init",
        "args": "<C-/>"
    },
    {
        "key": "cmd+a",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.init",
        "args": "<D-a>"
    },
    // Copy-paste behavior
    {
        "key": "cmd+c",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.mode == 'visual'",
        "args": "\"+ygv",
    },
    {
        "key": "cmd+c",
        "command": "-vscode-neovim.send",
        "when": "neovim.mode != 'visual'",
    },
    {
        "key": "cmd+v",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && !neovim.recording && neovim.mode != 'insert'",
        "args": "\"+p",
    },
    // Pass through cmd+shift+p since neovim defaults binding ctrl+p
    {
        "key": "cmd+shift+p",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.mode == 'visual'",
        "args": "<C-P>",
    },
    // The below keybinds have !isInDiffEditor to allow rebinding for diff mode
    {
        "key": "n",
        "command": "vscode-neovim.send",
        "args": "n",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "p",
        "command": "vscode-neovim.send",
        "args": "p",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "j",
        "command": "vscode-neovim.send",
        "args": "j",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "k",
        "command": "vscode-neovim.send",
        "args": "k",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "m",
        "command": "vscode-neovim.send",
        "args": "m",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "shift+d",
        "command": "vscode-neovim.send",
        "args": "<S-d>",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "shift+e",
        "command": "vscode-neovim.send",
        "args": "<S-e>",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "shift+e",
        "command": "vscode-neovim.send",
        "args": "<S-e>",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "[",
        "command": "vscode-neovim.send",
        "args": "[",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },
    {
        "key": "shift+[",
        "command": "vscode-neovim.send",
        "args": "{",
        "when": "editorTextFocus && neovim.mode != 'insert' && !isInDiffEditor",
    },

    // Find + replace keybinds, required to send selection back to VSCode
    {
        "key": "cmd+f",
        "command": "-actions.find",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    {
        "key": "cmd+f",
        "command": "-settings.action.search",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    {
        "key": "cmd+f",
        "command": "-keybindings.editor.searchKeybindings",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    {
        "key": "cmd+f",
        "command": "vscode-neovim.send",
        "args": "\\f",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    {
        "key": "cmd+r",
        "command": "editor.action.startFindReplaceAction",
        "when": "editorFocus && findWidgetVisible || editorTextFocus && neovim.mode != 'visual'"
    },
    {
        "key": "cmd+r",
        "command": "-workbench.action.reloadWindow",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    {
        "key": "cmd+r",
        "command": "vscode-neovim.send",
        "args": "\\r",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },

    // // Rebind findNext and findPrev so that neovim cursor will move
    // {
    //     "key": "enter",
    //     "command": "-editor.action.nextMatchFindAction",
    //     "when": "editorFocus && findInputFocussed && neovim.mode != 'insert'"
    // },
    // {
    //     "key": "enter",
    //     "command": "vscode-neovim.send",
    //     "args": "ni<Esc>l",
    //     "when": "editorFocus && findInputFocussed && neovim.mode != 'insert'"
    // },
    // {
    //     "key": "shift+enter",
    //     "command": "-editor.action.previousMatchFindAction",
    // },
    // {
    //     "key": "shift+enter",
    //     "command": "vscode-neovim.send",
    //     "args": "Ni<Esc>l",
    //     "when": "editorFocus && findInputFocussed && neovim.mode != 'insert'"
    // },

    {
        "key": "up",
        "command": "-vscode-neovim.send",
        "when": "suggestWidgetMultipleSuggestions && suggestWidgetVisible && neovim.recording || editorTextFocus && neovim.init && neovim.mode != 'insert",
    },
    {
        "key": "down",
        "command": "-vscode-neovim.send",
        "when": "suggestWidgetMultipleSuggestions && suggestWidgetVisible && neovim.recording || editorTextFocus && neovim.init && neovim.mode != 'insert",
    },
    // =========================================================================
    // End bindings for vscode-neovim
    // =========================================================================

    // =========================================================================
    // Rust-analyzer keybinds. Mostly compatible with vim
    // =========================================================================
    {
        "key": "shift+j",
        "command": "rust-analyzer.joinLines",
        "when": "editorTextFocus && neovim.mode != 'insert' && editorLangId == 'rust'"
    },
    {
        "key": "shift+5",
        "command": "rust-analyzer.matchingBrace",
        "when": "editorTextFocus && (neovim.mode == 'normal' || neovim.mode == 'visual') && editorLangId == 'rust'"
    },
    {
        "key": "enter",
        "command": "rust-analyzer.onEnter",
        "when": "editorTextFocus && neovim.mode == 'insert' && editorLangId == 'rust' && !suggestWidgetVisible"
    },
    // =========================================================================
    // End rust-analyzer keybinds
    // =========================================================================

    // =========================================================================
    // Begin bindings for code review / diff mode
    // These should work for Github and for Bitbucket
    // =========================================================================
    {
        "key": "escape",
        "command": "-workbench.action.hideComment",
        "when": "commentEditorFocused"
    },
    {
        "key": "shift+escape",
        "command": "-workbench.action.hideComment",
        "when": "commentEditorFocused"
    },
    {
        "key": "n",
        "command": "workbench.action.compareEditor.nextChange",
        "when": "editorTextFocus && isInDiffEditor",
    },
    {
        "key": "p",
        "command": "workbench.action.compareEditor.previousChange",
        "when": "editorTextFocus && isInDiffEditor",
    },
    {
        "key": "j",
        "command": "macros.atlascode.bb.pullRequest.nextFile",
        "when": "editorTextFocus && isInDiffEditor && resourceScheme == 'atlascode.bbpr'",
    },
    {
        "key": "j",
        "command": "macros.githubPullRequest.nextFile",
        "when": "editorTextFocus && isInDiffEditor && resourceScheme == 'pr'",
    },
    {
        "key": "k",
        "command": "macros.atlascode.bb.pullRequest.previousFile",
        "when": "editorTextFocus && isInDiffEditor && resourceScheme == 'atlascode.bbpr'",
    },
    {
        "key": "k",
        "command": "macros.githubPullRequest.previousFile",
        "when": "editorTextFocus && isInDiffEditor && resourceScheme == 'pr'",
    },
    {
        "key": "m",
        "command": "atlascode.bb.addComment",
        "when": "editorTextFocus && resourceScheme == 'atlascode.bbpr'",
    },
    {
        "key": "m",
        "command": "pr.createComment",
        "when": "editorTextFocus && resourceScheme == 'pr'",
    },
    {
        "key": "shift+d",
        "command": "toggle.diff.renderSideBySide",
        "when": "editorTextFocus && isInDiffEditor",
    },
    {
        "key": "shift+e",
        "command": "toggle.diff.ignoreTrimWhitespace",
        "when": "editorTextFocus && isInDiffEditor",
    },
    {
        "key": "[",
        "command": "workbench.action.toggleSidebarVisibility",
        "when": "editorTextFocus && isInDiffEditor",
    },
    {
        "key": "shift+[",
        "command": "workbench.action.toggleSidebarVisibility",
        "when": "editorTextFocus && isInDiffEditor",
    },

    // =========================================================================
    // End bindings for code review / diff mode
    // =========================================================================
    {
        "command": "workbench.action.editor.changeLanguageMode",
        "key": "cmd+l",
    },
    {
        "command": "editor.action.indentUsingSpaces",
        "key": "cmd+shift+l",
    },
    {
        "command": "-workbench.action.editor.changeLanguageMode",
        "key": "cmd+k m",
    },
    {
        "command": "-cursorWordPartRight",
        "key": "ctrl+alt+right",
        "when": "textInputFocus",
    },
    {
        "command": "-cursorWordPartRightSelect",
        "key": "ctrl+shift+alt+right",
        "when": "textInputFocus",
    },
    {
        "command": "-cursorWordPartStartLeft",
        "key": "ctrl+alt+left",
        "when": "textInputFocus",
    },
    {
        "command": "-cursorWordPartStartLeftSelect",
        "key": "ctrl+shift+alt+left",
        "when": "textInputFocus",
    },
    {
        "command": "-deleteWordPartLeft",
        "key": "ctrl+alt+backspace",
        "when": "textInputFocus && !editorReadonly",
    },
    {
        "command": "-deleteWordPartRight",
        "key": "ctrl+alt+delete",
        "when": "textInputFocus && !editorReadonly",
    },
    {
        "command": "-editor.action.startFindReplaceAction",
        "key": "alt+cmd+f",
    },
    {
        "command": "-workbench.action.nextEditor",
        "key": "alt+cmd+right",
    },
    {
        "command": "-workbench.action.previousEditor",
        "key": "alt+cmd+left",
    },
    {
        "command": "-workbench.action.focusSideBar",
        "key": "cmd+0",
    },
    {
        "command": "workbench.action.zoomReset",
        "key": "cmd+0",
    },
    {
        "key": "shift+cmd+enter",
        "command": "-editor.action.insertLineBefore",
        "when": "editorTextFocus && !editorReadonly",
    },
    {
        "key": "shift+cmd+enter",
        "command": "workbench.action.toggleEditorWidths",
        "when": "editorFocus",
    },
    {
        "key": "shift+cmd+enter",
        "command": "workbench.action.toggleMaximizedPanel",
        "when": "panelFocus",
    },
    {
        "command": "-python.execSelectionInTerminal",
        "key": "shift+enter",
    },
    {
        "command": "-workbench.action.terminal.split",
        "key": "cmd+\\",
        "when": "terminalFocus",
    },
    {
        "command": "workbench.action.terminal.splitInActiveWorkspace",
        "key": "cmd+\\",
        "when": "terminalFocus",
    },
    {
        "command": "-search.action.openInEditor",
        "key": "cmd+enter",
        "when": "hasSearchResult && searchViewletFocus",
    },
    {
        "key": "cmd+enter",
        "command": "search.action.replaceAll",
        "when": "replaceActive && searchViewletFocus && !findWidgetVisible",
    },
    {
        "command": "-workbench.action.openGlobalKeybindings",
        "key": "cmd+k cmd+s",
    },
    {
        "command": "workbench.action.openGlobalKeybindingsFile",
        "key": "cmd+k cmd+s",
    },
    {
        "command": "clangd.switchheadersource",
        "key": "alt+o",
        "when": "editorTextFocus",
    },
    {
        "key": "cmd+shift+d",
        "command": "fileutils.duplicateFile"
    },
    {
        "key": "ctrl+cmd+t",
        "command": "workbench.action.tasks.reRunTask"
    },

    // =========================================================================
    // Explorer bindings
    // =========================================================================
    {
        "key": "cmd+ctrl+r",
        "command": "revealInExplorer"
    },
    {
        "key": "enter",
        "command": "renameFile",
        "when": "explorerViewletVisible && filesExplorerFocus && !explorerResourceIsRoot && !explorerResourceReadonly && !inputFocus"
    },
]
