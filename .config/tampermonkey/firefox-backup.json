{
    "version": "1",
    "created_by": "Tampermonkey",
    "scripts": [
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/38582-wanikani-open-framework/code/Wanikani%20Open%20Framework.user.js",
            "name": "Wanikani Open Framework",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "https://www.wanikani.com/*",
                        "https://preview.wanikani.com/*"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-start",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "sandbox": null,
                "tab_types": null,
                "unwrap": null
            },
            "position": 1,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFdhbmlrYW5pIE9wZW4gRnJhbWV3b3JrCi8vIEBuYW1lc3BhY2UgICByZmluZGxleQovLyBAZGVzY3JpcHRpb24gRnJhbWV3b3JrIGZvciB3cml0aW5nIHNjcmlwdHMgZm9yIFdhbmlrYW5pCi8vIEB2ZXJzaW9uICAgICAxLjAuNjAKLy8gQG1hdGNoICAgICAgIGh0dHBzOi8vd3d3LndhbmlrYW5pLmNvbS8qCi8vIEBtYXRjaCAgICAgICBodHRwczovL3ByZXZpZXcud2FuaWthbmkuY29tLyoKLy8gQGNvcHlyaWdodCAgIDIwMjIrLCBSb2JpbiBGaW5kbGV5Ci8vIEBsaWNlbnNlICAgICBNSVQ7IGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKGdsb2JhbCkgewoJJ3VzZSBzdHJpY3QnOwoKCS8qIGVzbGludCBuby1tdWx0aS1zcGFjZXM6IG9mZiAqLwoJLyogZ2xvYmFscyB3a29mICovCgoJdmFyIHZlcnNpb24gPSAnMS4wLjU5JzsKCXZhciBpZ25vcmVfbWlzc2luZ19pbmRleGVkZGIgPSBmYWxzZTsKCgkvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFN1cHBvcnRlZCBNb2R1bGVzCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJdmFyIHN1cHBvcnRlZF9tb2R1bGVzID0gewoJCUFwaXYyOiAgICB7IHVybDogJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zODU4MS13YW5pa2FuaS1vcGVuLWZyYW1ld29yay1hcGl2Mi1tb2R1bGUvY29kZS9XYW5pa2FuaSUyME9wZW4lMjBGcmFtZXdvcmslMjAtJTIwQXBpdjIlMjBtb2R1bGUuanM/dmVyc2lvbj0xMDkxNzg1J30sCgkJSXRlbURhdGE6IHsgdXJsOiAnaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM4NTgwLXdhbmlrYW5pLW9wZW4tZnJhbWV3b3JrLWl0ZW1kYXRhLW1vZHVsZS9jb2RlL1dhbmlrYW5pJTIwT3BlbiUyMEZyYW1ld29yayUyMC0lMjBJdGVtRGF0YSUyMG1vZHVsZS5qcz92ZXJzaW9uPTEwMzAxNTknfSwKCQlKcXVlcnk6ICAgeyB1cmw6ICdodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvNDUxMDc4LXdhbmlrYW5pLW9wZW4tZnJhbWV3b3JrLWpxdWVyeS1tb2R1bGUvY29kZS9XYW5pa2FuaSUyME9wZW4lMjBGcmFtZXdvcmslMjAtJTIwSnF1ZXJ5JTIwbW9kdWxlLmpzP3ZlcnNpb249MTA5MTc5NCd9LAoJCU1lbnU6ICAgICB7IHVybDogJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zODU3OC13YW5pa2FuaS1vcGVuLWZyYW1ld29yay1tZW51LW1vZHVsZS9jb2RlL1dhbmlrYW5pJTIwT3BlbiUyMEZyYW1ld29yayUyMC0lMjBNZW51JTIwbW9kdWxlLmpzP3ZlcnNpb249MTA5MTc4Nyd9LAoJCVByb2dyZXNzOiB7IHVybDogJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zODU3Ny13YW5pa2FuaS1vcGVuLWZyYW1ld29yay1wcm9ncmVzcy1tb2R1bGUvY29kZS9XYW5pa2FuaSUyME9wZW4lMjBGcmFtZXdvcmslMjAtJTIwUHJvZ3Jlc3MlMjBtb2R1bGUuanM/dmVyc2lvbj0xMDkxNzkyJ30sCgkJU2V0dGluZ3M6IHsgdXJsOiAnaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM4NTc2LXdhbmlrYW5pLW9wZW4tZnJhbWV3b3JrLXNldHRpbmdzLW1vZHVsZS9jb2RlL1dhbmlrYW5pJTIwT3BlbiUyMEZyYW1ld29yayUyMC0lMjBTZXR0aW5ncyUyMG1vZHVsZS5qcz92ZXJzaW9uPTEwOTE3OTMnfSwKCX07CgoJLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBQdWJsaXNoZWQgaW50ZXJmYWNlCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJdmFyIHB1Ymxpc2hlZF9pbnRlcmZhY2UgPSB7CgkJaW5jbHVkZTogaW5jbHVkZSwgICAgICAgICAgICAgIC8vIGluY2x1ZGUobW9kdWxlX2xpc3QpICAgICAgICA9PiBQcm9taXNlCgkJcmVhZHk6ICAgcmVhZHksICAgICAgICAgICAgICAgIC8vIHJlYWR5KG1vZHVsZV9saXN0KSAgICAgICAgICA9PiBQcm9taXNlCgoJCWxvYWRfZmlsZTogICBsb2FkX2ZpbGUsICAgICAgICAvLyBsb2FkX2ZpbGUodXJsLCB1c2VfY2FjaGUpICAgPT4gUHJvbWlzZQoJCWxvYWRfY3NzOiAgICBsb2FkX2NzcywgICAgICAgICAvLyBsb2FkX2Nzcyh1cmwsIHVzZV9jYWNoZSkgICAgPT4gUHJvbWlzZQoJCWxvYWRfc2NyaXB0OiBsb2FkX3NjcmlwdCwgICAgICAvLyBsb2FkX3NjcmlwdCh1cmwsIHVzZV9jYWNoZSkgPT4gUHJvbWlzZQoKCQlmaWxlX2NhY2hlOiB7CgkJCWRpcjogICAge30sICAgICAgICAgICAgICAgIC8vIE9iamVjdCBjb250YWluaW5nIGRpcmVjdG9yeSBvZiBmaWxlcy4KCQkJbHM6ICAgICBmaWxlX2NhY2hlX2xpc3QsICAgLy8gbHMoKQoJCQljbGVhcjogIGZpbGVfY2FjaGVfY2xlYXIsICAvLyBjbGVhcigpICAgICAgICAgICAgID0+IFByb21pc2UKCQkJZGVsZXRlOiBmaWxlX2NhY2hlX2RlbGV0ZSwgLy8gZGVsZXRlKG5hbWUpICAgICAgICA9PiBQcm9taXNlCgkJCWZsdXNoOiAgZmlsZV9jYWNoZV9mbHVzaCwgIC8vIGZsdXNoKCkgICAgICAgICAgICAgPT4gUHJvbWlzZQoJCQlsb2FkOiAgIGZpbGVfY2FjaGVfbG9hZCwgICAvLyBsb2FkKG5hbWUpICAgICAgICAgID0+IFByb21pc2UKCQkJc2F2ZTogICBmaWxlX2NhY2hlX3NhdmUsICAgLy8gc2F2ZShuYW1lLCBjb250ZW50KSA9PiBQcm9taXNlCgkJCW5vX2NhY2hlOmZpbGVfbm9jYWNoZSwgICAgIC8vIG5vX2NhY2hlKG1vZHVsZXMpCgkJfSwKCgkJb246ICAgICAgd2FpdF9ldmVudCwgICAgICAgICAgIC8vIG9uKGV2ZW50LCBjYWxsYmFjaykKCQl0cmlnZ2VyOiB0cmlnZ2VyX2V2ZW50LCAgICAgICAgLy8gdHJpZ2dlcihldmVudFssIGRhdGExWywgZGF0YTJbLCAuLi5dXV0pCgoJCWdldF9zdGF0ZTogIGdldF9zdGF0ZSwgICAgICAgICAvLyBnZXQoc3RhdGVfdmFyKQoJCXNldF9zdGF0ZTogIHNldF9zdGF0ZSwgICAgICAgICAvLyBzZXQoc3RhdGVfdmFyLCB2YWx1ZSkKCQl3YWl0X3N0YXRlOiB3YWl0X3N0YXRlLCAgICAgICAgLy8gd2FpdChzdGF0ZV92YXIsIHZhbHVlWywgY2FsbGJhY2tbLCBwZXJzaXN0ZW50XV0pID0+IGlmIG5vIGNhbGxiYWNrLCByZXR1cm4gb25lLXNob3QgUHJvbWlzZQoKCQl2ZXJzaW9uOiB7CgkJCXZhbHVlOiB2ZXJzaW9uLAoJCQljb21wYXJlX3RvOiBjb21wYXJlX3RvLCAgICAvLyBjb21wYXJlX3ZlcnNpb24odmVyc2lvbikKCQl9Cgl9OwoKCXB1Ymxpc2hlZF9pbnRlcmZhY2Uuc3VwcG9ydF9maWxlcyA9IHsKCQknanF1ZXJ5LmpzJzogJ2h0dHBzOi8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzMuNi4xL2pxdWVyeS5taW4uanMnLAoJCSdqcXVlcnlfdWkuanMnOiAnaHR0cHM6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9qcXVlcnl1aS8xLjEyLjEvanF1ZXJ5LXVpLm1pbi5qcycsCgkJJ2pxdWlfd2ttYWluLmNzcyc6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcmZpbmRsZXkvd2FuaWthbmktb3Blbi1mcmFtZXdvcmsvMTU1MGFmODM4M2VjMjhhZDQwNmNmNDAxYWVlMmRlNGM1MjQ0NmY2Yy9qcXVpLXdrbWFpbi5jc3MnLAoJfTsKCgkvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCWZ1bmN0aW9uIHNwbGl0X2xpc3Qoc3RyKSB7cmV0dXJuIHN0ci5yZXBsYWNlKC/jgIEvZywnLCcpLnJlcGxhY2UoL1tcc+OAgF0rL2csJyAnKS50cmltKCkucmVwbGFjZSgvICosICovZywgJywnKS5zcGxpdCgnLCcpLmZpbHRlcihmdW5jdGlvbihuYW1lKSB7cmV0dXJuIChuYW1lLmxlbmd0aCA+IDApO30pO30KCWZ1bmN0aW9uIHByb21pc2UoKXt2YXIgYSxiLGM9bmV3IFByb21pc2UoZnVuY3Rpb24oZCxlKXthPWQ7Yj1lO30pO2MucmVzb2x2ZT1hO2MucmVqZWN0PWI7cmV0dXJuIGM7fQoKCS8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIENvbXBhcmUgdGhlIGZyYW1ld29yayB2ZXJzaW9uIGFnYWluc3QgYSBzcGVjaWZpYyB2ZXJzaW9uLgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGNvbXBhcmVfdG8oY2xpZW50X3ZlcnNpb24pIHsKCQl2YXIgY2xpZW50X3ZlciA9IGNsaWVudF92ZXJzaW9uLnNwbGl0KCcuJykubWFwKGQgPT4gTnVtYmVyKGQpKTsKCQl2YXIgd2tvZl92ZXIgPSB2ZXJzaW9uLnNwbGl0KCcuJykubWFwKGQgPT4gTnVtYmVyKGQpKTsKCQl2YXIgbGVuID0gTWF0aC5tYXgoY2xpZW50X3Zlci5sZW5ndGgsIHdrb2ZfdmVyLmxlbmd0aCk7CgkJZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuOyBpZHgrKykgewoJCQl2YXIgYSA9IGNsaWVudF92ZXJbaWR4XSB8fCAwOwoJCQl2YXIgYiA9IHdrb2ZfdmVyW2lkeF0gfHwgMDsKCQkJaWYgKGEgPT09IGIpIGNvbnRpbnVlOwoJCQlpZiAoYSA8IGIpIHJldHVybiAnbmV3ZXInOwoJCQlyZXR1cm4gJ29sZGVyJzsKCQl9CgkJcmV0dXJuICdzYW1lJzsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gSW5jbHVkZSBhIGxpc3Qgb2YgbW9kdWxlcy4KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgl2YXIgaW5jbHVkZV9wcm9taXNlcyA9IHt9OwoKCWZ1bmN0aW9uIGluY2x1ZGUobW9kdWxlX2xpc3QpIHsKCQlpZiAod2tvZi5nZXRfc3RhdGUoJ3drb2Yud2tvZicpICE9PSAncmVhZHknKSB7CgkJCXJldHVybiB3a29mLnJlYWR5KCd3a29mJykudGhlbihmdW5jdGlvbigpe3JldHVybiB3a29mLmluY2x1ZGUobW9kdWxlX2xpc3QpO30pOwoJCX0KCQl2YXIgaW5jbHVkZV9wcm9taXNlID0gcHJvbWlzZSgpOwoJCXZhciBtb2R1bGVfbmFtZXMgPSBzcGxpdF9saXN0KG1vZHVsZV9saXN0KTsKCQl2YXIgc2NyaXB0X2NudCA9IG1vZHVsZV9uYW1lcy5sZW5ndGg7CgkJaWYgKHNjcmlwdF9jbnQgPT09IDApIHsKCQkJaW5jbHVkZV9wcm9taXNlLnJlc29sdmUoe2xvYWRlZDpbXSwgZmFpbGVkOltdfSk7CgkJCXJldHVybiBpbmNsdWRlX3Byb21pc2U7CgkJfQoKCQl2YXIgZG9uZV9jbnQgPSAwOwoJCXZhciBsb2FkZWQgPSBbXSwgZmFpbGVkID0gW107CgkJdmFyIG5vX2NhY2hlID0gc3BsaXRfbGlzdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnd2tvZi5pbmNsdWRlLm5vY2FjaGUnKSB8fCAnJyk7CgkJZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbW9kdWxlX25hbWVzLmxlbmd0aDsgaWR4KyspIHsKCQkJdmFyIG1vZHVsZV9uYW1lID0gbW9kdWxlX25hbWVzW2lkeF07CgkJCXZhciBtb2R1bGUgPSBzdXBwb3J0ZWRfbW9kdWxlc1ttb2R1bGVfbmFtZV07CgkJCWlmICghbW9kdWxlKSB7CgkJCQlmYWlsZWQucHVzaCh7bmFtZTptb2R1bGVfbmFtZSwgdXJsOnVuZGVmaW5lZH0pOwoJCQkJY2hlY2tfZG9uZSgpOwoJCQkJY29udGludWU7CgkJCX0KCQkJdmFyIGF3YWl0X2xvYWQgPSBpbmNsdWRlX3Byb21pc2VzW21vZHVsZV9uYW1lXTsKCQkJdmFyIHVzZV9jYWNoZSA9IChub19jYWNoZS5pbmRleE9mKG1vZHVsZV9uYW1lKSA8IDApICYmIChub19jYWNoZS5pbmRleE9mKCcqJykgPCAwKTsKCQkJaWYgKCF1c2VfY2FjaGUpIGZpbGVfY2FjaGVfZGVsZXRlKG1vZHVsZS51cmwpOwoJCQlpZiAoYXdhaXRfbG9hZCA9PT0gdW5kZWZpbmVkKSBpbmNsdWRlX3Byb21pc2VzW21vZHVsZV9uYW1lXSA9IGF3YWl0X2xvYWQgPSBsb2FkX3NjcmlwdChtb2R1bGUudXJsLCB1c2VfY2FjaGUpOwoJCQlhd2FpdF9sb2FkLnRoZW4ocHVzaF9sb2FkZWQsIHB1c2hfZmFpbGVkKTsKCQl9CgoJCXJldHVybiBpbmNsdWRlX3Byb21pc2U7CgoJCWZ1bmN0aW9uIHB1c2hfbG9hZGVkKHVybCkgewoJCQlsb2FkZWQucHVzaCh1cmwpOwoJCQljaGVja19kb25lKCk7CgkJfQoKCQlmdW5jdGlvbiBwdXNoX2ZhaWxlZCh1cmwpIHsKCQkJZmFpbGVkLnB1c2godXJsKTsKCQkJY2hlY2tfZG9uZSgpOwoJCX0KCgkJZnVuY3Rpb24gY2hlY2tfZG9uZSgpIHsKCQkJaWYgKCsrZG9uZV9jbnQgPCBzY3JpcHRfY250KSByZXR1cm47CgkJCWlmIChmYWlsZWQubGVuZ3RoID09PSAwKSBpbmNsdWRlX3Byb21pc2UucmVzb2x2ZSh7bG9hZGVkOmxvYWRlZCwgZmFpbGVkOmZhaWxlZH0pOwoJCQllbHNlIGluY2x1ZGVfcHJvbWlzZS5yZWplY3Qoe2Vycm9yOidGYWlsdXJlIGxvYWRpbmcgbW9kdWxlJywgbG9hZGVkOmxvYWRlZCwgZmFpbGVkOmZhaWxlZH0pOwoJCX0KCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gV2FpdCBmb3IgYWxsIG1vZHVsZXMgdG8gcmVwb3J0IHRoYXQgdGhleSBhcmUgcmVhZHkKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiByZWFkeShtb2R1bGVfbGlzdCkgewoJCXZhciBtb2R1bGVfbmFtZXMgPSBzcGxpdF9saXN0KG1vZHVsZV9saXN0KTsKCgkJdmFyIHJlYWR5X3Byb21pc2VzID0gWyBdOwoJCWZvciAodmFyIGlkeCBpbiBtb2R1bGVfbmFtZXMpIHsKCQkJdmFyIG1vZHVsZV9uYW1lID0gbW9kdWxlX25hbWVzW2lkeF07CgkJCXJlYWR5X3Byb21pc2VzLnB1c2god2FpdF9zdGF0ZSgnd2tvZi4nICsgbW9kdWxlX25hbWUsICdyZWFkeScpKTsKCQl9CgoJCWlmIChyZWFkeV9wcm9taXNlcy5sZW5ndGggPT09IDApIHsKCQkJcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwoJCX0gZWxzZSBpZiAocmVhZHlfcHJvbWlzZXMubGVuZ3RoID09PSAxKSB7CgkJCXJldHVybiByZWFkeV9wcm9taXNlc1swXTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gUHJvbWlzZS5hbGwocmVhZHlfcHJvbWlzZXMpOwoJCX0KCX0KCS8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIExvYWQgYSBmaWxlIGFzeW5jaHJvbm91c2x5LCBhbmQgcGFzcyB0aGUgZmlsZSBhcyByZXNvbHZlZCBQcm9taXNlIGRhdGEuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gbG9hZF9maWxlKHVybCwgdXNlX2NhY2hlKSB7CgkJdmFyIGZldGNoX3Byb21pc2UgPSBwcm9taXNlKCk7CgkJdmFyIG5vX2NhY2hlID0gc3BsaXRfbGlzdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnd2tvZi5sb2FkX2ZpbGUubm9jYWNoZScpIHx8ICcnKTsKCQlpZiAobm9fY2FjaGUuaW5kZXhPZih1cmwpID49IDAgfHwgbm9fY2FjaGUuaW5kZXhPZignKicpID49IDApIHVzZV9jYWNoZSA9IGZhbHNlOwoJCWlmICh1c2VfY2FjaGUgPT09IHRydWUpIHsKCQkJcmV0dXJuIGZpbGVfY2FjaGVfbG9hZCh1cmwsIHVzZV9jYWNoZSkuY2F0Y2goZmV0Y2hfdXJsKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gZmV0Y2hfdXJsKCk7CgkJfQoKCQkvLyBSZXRyaWV2ZSBmaWxlIGZyb20gc2VydmVyCgkJZnVuY3Rpb24gZmV0Y2hfdXJsKCl7CgkJCXZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgkJCXJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gcHJvY2Vzc19yZXN1bHQ7CgkJCXJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTsKCQkJcmVxdWVzdC5zZW5kKCk7CgkJCXJldHVybiBmZXRjaF9wcm9taXNlOwoJCX0KCgkJZnVuY3Rpb24gcHJvY2Vzc19yZXN1bHQoZXZlbnQpewoJCQlpZiAoZXZlbnQudGFyZ2V0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjsKCQkJaWYgKGV2ZW50LnRhcmdldC5zdGF0dXMgPj0gNDAwIHx8IGV2ZW50LnRhcmdldC5zdGF0dXMgPT09IDApIHJldHVybiBmZXRjaF9wcm9taXNlLnJlamVjdChldmVudC50YXJnZXQuc3RhdHVzKTsKCQkJaWYgKHVzZV9jYWNoZSkgewoJCQkJZmlsZV9jYWNoZV9zYXZlKHVybCwgZXZlbnQudGFyZ2V0LnJlc3BvbnNlKQoJCQkJLnRoZW4oZmV0Y2hfcHJvbWlzZS5yZXNvbHZlLmJpbmQobnVsbCxldmVudC50YXJnZXQucmVzcG9uc2UpKTsKCQkJfSBlbHNlIHsKCQkJCWZldGNoX3Byb21pc2UucmVzb2x2ZShldmVudC50YXJnZXQucmVzcG9uc2UpOwoJCQl9CgkJfQoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBMb2FkIGFuZCBpbnN0YWxsIGEgc3BlY2lmaWMgZmlsZSB0eXBlIGludG8gdGhlIERPTS4KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBsb2FkX2FuZF9hcHBlbmQodXJsLCB0YWdfbmFtZSwgbG9jYXRpb24sIHVzZV9jYWNoZSkgewoJCXVybCA9IHVybC5yZXBsYWNlKC8iL2csJ1wnJyk7CgkJaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFnX25hbWUrJ1t1aWQ9IicrdXJsKyciXScpICE9PSBudWxsKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CgkJcmV0dXJuIGxvYWRfZmlsZSh1cmwsIHVzZV9jYWNoZSkudGhlbihhcHBlbmRfdG9fdGFnKTsKCgkJZnVuY3Rpb24gYXBwZW5kX3RvX3RhZyhjb250ZW50KSB7CgkJCXZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ19uYW1lKTsKCQkJdGFnLmlubmVySFRNTCA9IGNvbnRlbnQ7CgkJCXRhZy5zZXRBdHRyaWJ1dGUoJ3VpZCcsIHVybCk7CgkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobG9jYXRpb24pLmFwcGVuZENoaWxkKHRhZyk7CgkJCXJldHVybiB1cmw7CgkJfQoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBMb2FkIGFuZCBpbnN0YWxsIGEgQ1NTIGZpbGUuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gbG9hZF9jc3ModXJsLCB1c2VfY2FjaGUpIHsKCQlyZXR1cm4gbG9hZF9hbmRfYXBwZW5kKHVybCwgJ3N0eWxlJywgJ2hlYWQnLCB1c2VfY2FjaGUpOwoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBMb2FkIGFuZCBpbnN0YWxsIEphdmFzY3JpcHQuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gbG9hZF9zY3JpcHQodXJsLCB1c2VfY2FjaGUpIHsKCQlyZXR1cm4gbG9hZF9hbmRfYXBwZW5kKHVybCwgJ3NjcmlwdCcsICdib2R5JywgdXNlX2NhY2hlKTsKCX0KCS8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoJdmFyIHN0YXRlX2xpc3RlbmVycyA9IHt9OwoJdmFyIHN0YXRlX3ZhbHVlcyA9IHt9OwoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBHZXQgdGhlIHZhbHVlIG9mIGEgc3RhdGUgdmFyaWFibGUsIGFuZCBub3RpZnkgbGlzdGVuZXJzLgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGdldF9zdGF0ZShzdGF0ZV92YXIpIHsKCQlyZXR1cm4gc3RhdGVfdmFsdWVzW3N0YXRlX3Zhcl07Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFNldCB0aGUgdmFsdWUgb2YgYSBzdGF0ZSB2YXJpYWJsZSwgYW5kIG5vdGlmeSBsaXN0ZW5lcnMuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gc2V0X3N0YXRlKHN0YXRlX3ZhciwgdmFsdWUpIHsKCQl2YXIgb2xkX3ZhbHVlID0gc3RhdGVfdmFsdWVzW3N0YXRlX3Zhcl07CgkJaWYgKG9sZF92YWx1ZSA9PT0gdmFsdWUpIHJldHVybjsKCQlzdGF0ZV92YWx1ZXNbc3RhdGVfdmFyXSA9IHZhbHVlOwoKCQkvLyBEbyBsaXN0ZW5lciBjYWxsYmFja3MsIGFuZCByZW1vdmUgbm9uLXBlcnNpc3RlbnQgbGlzdGVuZXJzCgkJdmFyIGxpc3RlbmVycyA9IHN0YXRlX2xpc3RlbmVyc1tzdGF0ZV92YXJdOwoJCXZhciBwZXJzaXN0ZW50X2xpc3RlbmVycyA9IFsgXTsKCQlmb3IgKHZhciBpZHggaW4gbGlzdGVuZXJzKSB7CgkJCXZhciBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpZHhdOwoJCQl2YXIga2VlcCA9IHRydWU7CgkJCWlmIChsaXN0ZW5lci52YWx1ZSA9PT0gdmFsdWUgfHwgbGlzdGVuZXIudmFsdWUgPT09ICcqJykgewoJCQkJa2VlcCA9IGxpc3RlbmVyLnBlcnNpc3RlbnQ7CgkJCQl0cnkgewoJCQkJCWxpc3RlbmVyLmNhbGxiYWNrKHZhbHVlLCBvbGRfdmFsdWUpOwoJCQkJfSBjYXRjaCAoZSkge30KCQkJfQoJCQlpZiAoa2VlcCkgcGVyc2lzdGVudF9saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CgkJfQoJCXN0YXRlX2xpc3RlbmVyc1tzdGF0ZV92YXJdID0gcGVyc2lzdGVudF9saXN0ZW5lcnM7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFdoZW4gc3RhdGUgb2Ygc3RhdGVfdmFyIGNoYW5nZXMgdG8gdmFsdWUsIGNhbGwgY2FsbGJhY2suCgkvLyBJZiBwZXJzaXN0ZW50ID09PSB0cnVlLCBjb250aW51ZSBsaXN0ZW5pbmcgZm9yIGFkZGl0aW9uYWwgc3RhdGUgY2hhbmdlcwoJLy8gSWYgdmFsdWUgaXMgJyonLCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBmb3IgYWxsIHN0YXRlIGNoYW5nZXMuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gd2FpdF9zdGF0ZShzdGF0ZV92YXIsIHZhbHVlLCBjYWxsYmFjaywgcGVyc2lzdGVudCkgewoJCXZhciBwcm9taXNlOwoJCWlmIChjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7CgkJCXByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKCQkJCWNhbGxiYWNrID0gcmVzb2x2ZTsKCQkJfSk7CgkJfQoJCWlmIChzdGF0ZV9saXN0ZW5lcnNbc3RhdGVfdmFyXSA9PT0gdW5kZWZpbmVkKSBzdGF0ZV9saXN0ZW5lcnNbc3RhdGVfdmFyXSA9IFsgXTsKCQlwZXJzaXN0ZW50ID0gKHBlcnNpc3RlbnQgPT09IHRydWUpOwoJCXZhciBjdXJyZW50X3ZhbHVlID0gc3RhdGVfdmFsdWVzW3N0YXRlX3Zhcl07CgkJaWYgKHBlcnNpc3RlbnQgfHwgdmFsdWUgIT09IGN1cnJlbnRfdmFsdWUpIHN0YXRlX2xpc3RlbmVyc1tzdGF0ZV92YXJdLnB1c2goe2NhbGxiYWNrOmNhbGxiYWNrLCBwZXJzaXN0ZW50OnBlcnNpc3RlbnQsIHZhbHVlOnZhbHVlfSk7CgoJCS8vIElmIGl0J3MgYWxyZWFkeSBhdCB0aGUgZGVzaXJlZCBzdGF0ZSwgY2FsbCB0aGUgY2FsbGJhY2sgaW1tZWRpYXRlbHkuCgkJaWYgKHZhbHVlID09PSBjdXJyZW50X3ZhbHVlKSB7CgkJCXRyeSB7CgkJCQljYWxsYmFjayh2YWx1ZSwgY3VycmVudF92YWx1ZSk7CgkJCX0gY2F0Y2ggKGVycikge30KCQl9CgkJcmV0dXJuIHByb21pc2U7Cgl9CgkvLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCXZhciBldmVudF9saXN0ZW5lcnMgPSB7fTsKCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gRmlyZSBhbiBldmVudCwgd2hpY2ggdGhlbiBjYWxscyBjYWxsYmFja3MgZm9yIGFueSBsaXN0ZW5lcnMuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gdHJpZ2dlcl9ldmVudChldmVudCkgewoJCXZhciBsaXN0ZW5lcnMgPSBldmVudF9saXN0ZW5lcnNbZXZlbnRdOwoJCWlmIChsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgcmV0dXJuOwoJCXZhciBhcmdzID0gW107CgkJQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoYXJncyxhcmd1bWVudHMpOwoJCWFyZ3Muc2hpZnQoKTsKCQlmb3IgKHZhciBpZHggaW4gbGlzdGVuZXJzKSB0cnkgewoJCQlsaXN0ZW5lcnNbaWR4XS5hcHBseShudWxsLGFyZ3MpOwoJCX0gY2F0Y2ggKGVycikge30KCQlyZXR1cm4gZ2xvYmFsLndrb2Y7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIEFkZCBhIGxpc3RlbmVyIGZvciBhbiBldmVudC4KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiB3YWl0X2V2ZW50KGV2ZW50LCBjYWxsYmFjaykgewoJCWlmIChldmVudF9saXN0ZW5lcnNbZXZlbnRdID09PSB1bmRlZmluZWQpIGV2ZW50X2xpc3RlbmVyc1tldmVudF0gPSBbXTsKCQlldmVudF9saXN0ZW5lcnNbZXZlbnRdLnB1c2goY2FsbGJhY2spOwoJCXJldHVybiBnbG9iYWwud2tvZjsKCX0KCS8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoJdmFyIGZpbGVfY2FjaGVfb3Blbl9wcm9taXNlOwoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBPcGVuIHRoZSBmaWxlX2NhY2hlIGRhdGFiYXNlIChvciByZXR1cm4gaGFuZGxlIGlmIG9wZW4pLgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGZpbGVfY2FjaGVfb3BlbigpIHsKCQlpZiAoZmlsZV9jYWNoZV9vcGVuX3Byb21pc2UpIHJldHVybiBmaWxlX2NhY2hlX29wZW5fcHJvbWlzZTsKCQl2YXIgb3Blbl9wcm9taXNlID0gcHJvbWlzZSgpOwoJCWZpbGVfY2FjaGVfb3Blbl9wcm9taXNlID0gb3Blbl9wcm9taXNlOwoJCXZhciByZXF1ZXN0OwoJCXJlcXVlc3QgPSBpbmRleGVkREIub3Blbignd2tvZi5maWxlX2NhY2hlJyk7CgkJcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSB1cGdyYWRlX2RiOwoJCXJlcXVlc3Qub25zdWNjZXNzID0gZ2V0X2RpcjsKCQlyZXF1ZXN0Lm9uZXJyb3IgPSBlcnJvcjsKCQlyZXR1cm4gb3Blbl9wcm9taXNlOwoKCQlmdW5jdGlvbiBlcnJvcigpIHsKCQkJY29uc29sZS5sb2coJ2luZGV4ZWREQiBjb3VsZCBub3Qgb3BlbiEnKTsKCQkJd2tvZi5maWxlX2NhY2hlLmRpciA9IHt9OwoJCQlpZiAoaWdub3JlX21pc3NpbmdfaW5kZXhlZGRiKSB7CgkJCQlvcGVuX3Byb21pc2UucmVzb2x2ZShudWxsKTsKCQkJfSBlbHNlIHsKCQkJCW9wZW5fcHJvbWlzZS5yZWplY3QoKTsKCQkJfQoJCX0KCgkJZnVuY3Rpb24gdXBncmFkZV9kYihldmVudCl7CgkJCXZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CgkJCXZhciBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdmaWxlcycsIHtrZXlQYXRoOiduYW1lJ30pOwoJCX0KCgkJZnVuY3Rpb24gZ2V0X2RpcihldmVudCl7CgkJCXZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7CgkJCXZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCdmaWxlcycsICdyZWFkb25seScpOwoJCQl2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnZmlsZXMnKTsKCQkJdmFyIHJlcXVlc3QgPSBzdG9yZS5nZXQoJ1tkaXJdJyk7CgkJCXJlcXVlc3Qub25zdWNjZXNzID0gcHJvY2Vzc19kaXI7CgkJCXRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBvcGVuX3Byb21pc2UucmVzb2x2ZS5iaW5kKG51bGwsIGRiKTsKCQkJb3Blbl9wcm9taXNlLnRoZW4oc2V0VGltZW91dC5iaW5kKG51bGwsIGZpbGVfY2FjaGVfY2xlYW51cCwgMTAwMDApKTsKCQl9CgoJCWZ1bmN0aW9uIHByb2Nlc3NfZGlyKGV2ZW50KXsKCQkJaWYgKGV2ZW50LnRhcmdldC5yZXN1bHQgPT09IHVuZGVmaW5lZCkgewoJCQkJd2tvZi5maWxlX2NhY2hlLmRpciA9IHt9OwoJCQl9IGVsc2UgewoJCQkJd2tvZi5maWxlX2NhY2hlLmRpciA9IEpTT04ucGFyc2UoZXZlbnQudGFyZ2V0LnJlc3VsdC5jb250ZW50KTsKCQkJfQoJCX0KCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gTGlzdHMgdGhlIGNvbnRlbnQgb2YgdGhlIGZpbGVfY2FjaGUuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gZmlsZV9jYWNoZV9saXN0KCkgewoJCWNvbnNvbGUubG9nKE9iamVjdC5rZXlzKHdrb2YuZmlsZV9jYWNoZS5kaXIpLnNvcnQoKS5qb2luKCdcbicpKTsKCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gQ2xlYXIgdGhlIGZpbGVfY2FjaGUgZGF0YWJhc2UuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gZmlsZV9jYWNoZV9jbGVhcigpIHsKCQlyZXR1cm4gZmlsZV9jYWNoZV9vcGVuKCkudGhlbihjbGVhcik7CgoJCWZ1bmN0aW9uIGNsZWFyKGRiKSB7CgkJCXZhciBjbGVhcl9wcm9taXNlID0gcHJvbWlzZSgpOwoJCQl3a29mLmZpbGVfY2FjaGUuZGlyID0ge307CgkJCWlmIChkYiA9PT0gbnVsbCkgcmV0dXJuIGNsZWFyX3Byb21pc2UucmVzb2x2ZSgpOwoJCQl2YXIgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbignZmlsZXMnLCAncmVhZHdyaXRlJyk7CgkJCXZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdmaWxlcycpOwoJCQlzdG9yZS5jbGVhcigpOwoJCQl0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gY2xlYXJfcHJvbWlzZS5yZXNvbHZlOwoJCX0KCX0KCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJLy8gRGVsZXRlIGEgZmlsZSBmcm9tIHRoZSBmaWxlX2NhY2hlIGRhdGFiYXNlLgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGZpbGVfY2FjaGVfZGVsZXRlKHBhdHRlcm4pIHsKCQlyZXR1cm4gZmlsZV9jYWNoZV9vcGVuKCkudGhlbihkZWwpOwoKCQlmdW5jdGlvbiBkZWwoZGIpIHsKCQkJdmFyIGRlbF9wcm9taXNlID0gcHJvbWlzZSgpOwoJCQlpZiAoZGIgPT09IG51bGwpIHJldHVybiBkZWxfcHJvbWlzZS5yZXNvbHZlKCk7CgkJCXZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCdmaWxlcycsICdyZWFkd3JpdGUnKTsKCQkJdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoJ2ZpbGVzJyk7CgkJCXZhciBmaWxlcyA9IE9iamVjdC5rZXlzKHdrb2YuZmlsZV9jYWNoZS5kaXIpLmZpbHRlcihmdW5jdGlvbihmaWxlKXsKCQkJCWlmIChwYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKSB7CgkJCQkJcmV0dXJuIGZpbGUubWF0Y2gocGF0dGVybikgIT09IG51bGw7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiAoZmlsZSA9PT0gcGF0dGVybik7CgkJCQl9CgkJCX0pOwoJCQlmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZpbGUpewoJCQkJc3RvcmUuZGVsZXRlKGZpbGUpOwoJCQkJZGVsZXRlIHdrb2YuZmlsZV9jYWNoZS5kaXJbZmlsZV07CgkJCX0pOwoJCQlmaWxlX2NhY2hlX2Rpcl9zYXZlKCk7CgkJCXRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBkZWxfcHJvbWlzZS5yZXNvbHZlLmJpbmQobnVsbCwgZmlsZXMpOwoJCQlyZXR1cm4gZGVsX3Byb21pc2U7CgkJfQoJfQoKCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkvLyBGb3JjZSBpbW1lZGlhdGUgc2F2ZSBvZiBmaWxlX2NhY2hlIGRpcmVjdG9yeS4KCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCglmdW5jdGlvbiBmaWxlX2NhY2hlX2ZsdXNoKCkgewoJCWZpbGVfY2FjaGVfZGlyX3NhdmUodHJ1ZSAvKiBpbW1lZGlhdGVseSAqLyk7Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIExvYWQgYSBmaWxlIGZyb20gdGhlIGZpbGVfY2FjaGUgZGF0YWJhc2UuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gZmlsZV9jYWNoZV9sb2FkKG5hbWUpIHsKCQl2YXIgbG9hZF9wcm9taXNlID0gcHJvbWlzZSgpOwoJCXJldHVybiBmaWxlX2NhY2hlX29wZW4oKS50aGVuKGxvYWQpOwoKCQlmdW5jdGlvbiBsb2FkKGRiKSB7CgkJCWlmICh3a29mLmZpbGVfY2FjaGUuZGlyW25hbWVdID09PSB1bmRlZmluZWQpIHsKCQkJCWxvYWRfcHJvbWlzZS5yZWplY3QobmFtZSk7CgkJCQlyZXR1cm4gbG9hZF9wcm9taXNlOwoJCQl9CgkJCXZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCdmaWxlcycsICdyZWFkb25seScpOwoJCQl2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnZmlsZXMnKTsKCQkJdmFyIHJlcXVlc3QgPSBzdG9yZS5nZXQobmFtZSk7CgkJCXdrb2YuZmlsZV9jYWNoZS5kaXJbbmFtZV0ubGFzdF9sb2FkZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CgkJCWZpbGVfY2FjaGVfZGlyX3NhdmUoKTsKCQkJcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmaW5pc2g7CgkJCXJlcXVlc3Qub25lcnJvciA9IGVycm9yOwoJCQlyZXR1cm4gbG9hZF9wcm9taXNlOwoKCQkJZnVuY3Rpb24gZmluaXNoKGV2ZW50KXsKCQkJCWlmIChldmVudC50YXJnZXQucmVzdWx0ID09PSB1bmRlZmluZWQgfHwgZXZlbnQudGFyZ2V0LnJlc3VsdCA9PT0gbnVsbCkgewoJCQkJCWxvYWRfcHJvbWlzZS5yZWplY3QobmFtZSk7CgkJCQl9IGVsc2UgewoJCQkJCWxvYWRfcHJvbWlzZS5yZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQuY29udGVudCk7CgkJCQl9CgkJCX0KCgkJCWZ1bmN0aW9uIGVycm9yKGV2ZW50KXsKCQkJCWxvYWRfcHJvbWlzZS5yZWplY3QobmFtZSk7CgkJCX0KCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFNhdmUgYSBmaWxlIGludG8gdGhlIGZpbGVfY2FjaGUgZGF0YWJhc2UuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gZmlsZV9jYWNoZV9zYXZlKG5hbWUsIGNvbnRlbnQsIGV4dHJhX2F0dHJpYnMpIHsKCQlyZXR1cm4gZmlsZV9jYWNoZV9vcGVuKCkudGhlbihzYXZlKTsKCgkJZnVuY3Rpb24gc2F2ZShkYikgewoJCQl2YXIgc2F2ZV9wcm9taXNlID0gcHJvbWlzZSgpOwoJCQlpZiAoZGIgPT09IG51bGwpIHJldHVybiBzYXZlX3Byb21pc2UucmVzb2x2ZShuYW1lKTsKCQkJdmFyIHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oJ2ZpbGVzJywgJ3JlYWR3cml0ZScpOwoJCQl2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnZmlsZXMnKTsKCQkJc3RvcmUucHV0KHtuYW1lOm5hbWUsY29udGVudDpjb250ZW50fSk7CgkJCXZhciBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CgkJCXdrb2YuZmlsZV9jYWNoZS5kaXJbbmFtZV0gPSBPYmplY3QuYXNzaWduKHthZGRlZDpub3csIGxhc3RfbG9hZGVkOm5vd30sIGV4dHJhX2F0dHJpYnMpOwoJCQlmaWxlX2NhY2hlX2Rpcl9zYXZlKHRydWUgLyogaW1tZWRpYXRlbHkgKi8pOwoJCQl0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gc2F2ZV9wcm9taXNlLnJlc29sdmUuYmluZChudWxsLCBuYW1lKTsKCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFNhdmUgYSB0aGUgZmlsZV9jYWNoZSBkaXJlY3RvcnkgY29udGVudHMuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJdmFyIGZjX3N5bmNfdGltZXI7CglmdW5jdGlvbiBmaWxlX2NhY2hlX2Rpcl9zYXZlKGltbWVkaWF0ZWx5KSB7CgkJaWYgKGZjX3N5bmNfdGltZXIgIT09IHVuZGVmaW5lZCkgY2xlYXJUaW1lb3V0KGZjX3N5bmNfdGltZXIpOwoJCXZhciBkZWxheSA9IChpbW1lZGlhdGVseSA/IDAgOiAyMDAwKTsKCQlmY19zeW5jX3RpbWVyID0gc2V0VGltZW91dChzYXZlLCBkZWxheSk7CgoJCWZ1bmN0aW9uIHNhdmUoKXsKCQkJZmlsZV9jYWNoZV9vcGVuKCkudGhlbihzYXZlMik7CgkJfQoKCQlmdW5jdGlvbiBzYXZlMihkYil7CgkJCWZjX3N5bmNfdGltZXIgPSB1bmRlZmluZWQ7CgkJCXZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCdmaWxlcycsICdyZWFkd3JpdGUnKTsKCQkJdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoJ2ZpbGVzJyk7CgkJCXN0b3JlLnB1dCh7bmFtZTonW2Rpcl0nLGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkod2tvZi5maWxlX2NhY2hlLmRpcil9KTsKCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFJlbW92ZSBmaWxlcyB0aGF0IGhhdmVuJ3QgYmVlbiBhY2Nlc3NlZCBpbiBhIHdoaWxlLgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIGZpbGVfY2FjaGVfY2xlYW51cCgpIHsKCQl2YXIgdGhyZXNob2xkID0gbmV3IERhdGUoKSAtIDE0Kjg2NDAwMDAwOyAvLyAxNCBkYXlzCgkJdmFyIG9sZF9maWxlcyA9IFtdOwoJCWZvciAodmFyIGZuYW1lIGluIHdrb2YuZmlsZV9jYWNoZS5kaXIpIHsKCQkJaWYgKGZuYW1lLm1hdGNoKC9ed2tvZlwuc2V0dGluZ3NcLi8pKSBjb250aW51ZTsgLy8gRG9uJ3QgZmx1c2ggc2V0dGluZ3MgZmlsZXMuCgkJCXZhciBmZGF0ZSA9IG5ldyBEYXRlKHdrb2YuZmlsZV9jYWNoZS5kaXJbZm5hbWVdLmxhc3RfbG9hZGVkKTsKCQkJaWYgKGZkYXRlIDwgdGhyZXNob2xkKSBvbGRfZmlsZXMucHVzaChmbmFtZSk7CgkJfQoJCWlmIChvbGRfZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47CgkJY29uc29sZS5sb2coJ0NsZWFuaW5nIG91dCAnK29sZF9maWxlcy5sZW5ndGgrJyBvbGQgZmlsZShzKSBmcm9tICJ3a29mLmZpbGVfY2FjaGUiOicpOwoJCWZvciAodmFyIGZudW0gaW4gb2xkX2ZpbGVzKSB7CgkJCWNvbnNvbGUubG9nKCcgICcrKE51bWJlcihmbnVtKSsxKSsnOiAnK29sZF9maWxlc1tmbnVtXSk7CgkJCXdrb2YuZmlsZV9jYWNoZS5kZWxldGUob2xkX2ZpbGVzW2ZudW1dKTsKCQl9Cgl9CgoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCS8vIFByb2Nlc3Mgbm8tY2FjaGUgcmVxdWVzdHMuCgkvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJZnVuY3Rpb24gZmlsZV9ub2NhY2hlKGxpc3QpIHsKCQlpZiAobGlzdCA9PT0gdW5kZWZpbmVkKSB7CgkJCWxpc3QgPSBzcGxpdF9saXN0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3a29mLmluY2x1ZGUubm9jYWNoZScpIHx8ICcnKTsKCQkJbGlzdCA9IGxpc3QuY29uY2F0KHNwbGl0X2xpc3QobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3drb2YubG9hZF9maWxlLm5vY2FjaGUnKSB8fCAnJykpOwoJCQljb25zb2xlLmxvZyhsaXN0LmpvaW4oJywnKSk7CgkJfSBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gJ3N0cmluZycpIHsKCQkJdmFyIG5vX2NhY2hlID0gc3BsaXRfbGlzdChsaXN0KTsKCQkJdmFyIGlkeCwgbW9kdWxlcyA9IFtdLCB1cmxzID0gW107CgkJCWZvciAoaWR4ID0gMDsgaWR4IDwgbm9fY2FjaGUubGVuZ3RoOyBpZHgrKykgewoJCQkJdmFyIGl0ZW0gPSBub19jYWNoZVtpZHhdOwoJCQkJaWYgKHN1cHBvcnRlZF9tb2R1bGVzW2l0ZW1dICE9PSB1bmRlZmluZWQpIHsKCQkJCQltb2R1bGVzLnB1c2goaXRlbSk7CgkJCQl9IGVsc2UgewoJCQkJCXVybHMucHVzaChpdGVtKTsKCQkJCX0KCQkJfQoJCQljb25zb2xlLmxvZygnTW9kdWxlczogJyttb2R1bGVzLmpvaW4oJywnKSk7CgkJCWNvbnNvbGUubG9nKCcgICBVUkxzOiAnK3VybHMuam9pbignLCcpKTsKCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3drb2YuaW5jbHVkZS5ub2NhY2hlJywgbW9kdWxlcy5qb2luKCcsJykpOwoJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnd2tvZi5sb2FkX2ZpbGUubm9jYWNoZScsIHVybHMuam9pbignLCcpKTsKCQl9Cgl9CgoJZnVuY3Rpb24gZG9jX3JlYWR5KCkgewoJCXdrb2Yuc2V0X3N0YXRlKCd3a29mLmRvY3VtZW50JywgJ3JlYWR5Jyk7Cgl9CgoJLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCS8vIEJvb3Rsb2FkZXIgU3RhcnR1cAoJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCWZ1bmN0aW9uIHN0YXJ0dXAoKSB7CgkJZ2xvYmFsLndrb2YgPSBwdWJsaXNoZWRfaW50ZXJmYWNlOwoKCQkvLyBNYXJrIGRvY3VtZW50IHN0YXRlIGFzICdyZWFkeScuCgkJaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHsKCQkJZG9jX3JlYWR5KCk7CgkJfSBlbHNlIHsKCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBkb2NfcmVhZHksIGZhbHNlKTsgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgdGhhdCB3ZSBhcmUgcmVhZHkuCgkJfQoKCQkvLyBPcGVuIGNhY2hlLCBzbyB3a29mLmZpbGVfY2FjaGUuZGlyIGlzIGF2YWlsYWJsZSB0byBjb25zb2xlIGltbWVkaWF0ZWx5LgoJCWZpbGVfY2FjaGVfb3BlbigpOwoJCXdrb2Yuc2V0X3N0YXRlKCd3a29mLndrb2YnLCAncmVhZHknKTsKCX0KCXN0YXJ0dXAoKTsKCn0pKHdpbmRvdyk7Cg==",
            "storage": {
                "data": {},
                "ts": 1607436649580
            },
            "uuid": "e6f9fcca-44eb-425c-b066-541eb962863d"
        },
        {
            "enabled": false,
            "file_url": "https://userscripts-mirror.org/scripts/source/174135.user.js",
            "name": "WaniKani Improve",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://www.wanikani.com/review/session",
                        "http://www.wanikani.com/review/session"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-end",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 2,
            "requires": [],
            "resources": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgV2FuaUthbmkgSW1wcm92ZQovLyBAbmFtZXNwYWNlIGh0dHA6Ly93d3cubWljaGFlbGZyYW5rLmNvbS5ici93YW5pa2FuaV9pbXByb3ZlLwovLyBAaW5jbHVkZSBodHRwczovL3d3dy53YW5pa2FuaS5jb20vcmV2aWV3L3Nlc3Npb24KLy8gQGluY2x1ZGUgaHR0cDovL3d3dy53YW5pa2FuaS5jb20vcmV2aWV3L3Nlc3Npb24KLy8gQHZlcnNpb24gMi4yLjIKLy8gQGdyYW50IEdNX2FkZFN0eWxlCi8vIEBncmFudCBHTV9nZXRSZXNvdXJjZVRleHQKLy8gQHJ1bi1hdCBkb2N1bWVudC1lbmQKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzIuMC4zL2pxdWVyeS5taW4uanMKLy8gQHJlcXVpcmUgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcXRpcDIvMi4yLjAvanF1ZXJ5LnF0aXAubWluLmpzCi8vIEByZXNvdXJjZSBxdGlwQ1NTIGh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3F0aXAyLzIuMi4wL2pxdWVyeS5xdGlwLm1pbi5jc3MKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIgcXRpcENTUyA9IEdNX2dldFJlc291cmNlVGV4dCgicXRpcENTUyIpOwpHTV9hZGRTdHlsZShxdGlwQ1NTKTsKCiQualN0b3JhZ2UgPSB1bnNhZmVXaW5kb3cuJC5qU3RvcmFnZTsKCnZhciB3a2lfc2V0dGluZ3MgPSAkLmpTdG9yYWdlLmdldCgnd2tpX3NldHRpbmdzJyk7CgppZih3a2lfc2V0dGluZ3MgPT09IG51bGwpCnsKICAgIHdraV9zZXR0aW5ncyA9ICh7CiAgICAgICAgJ3draV90aW1lcl9zaG93X25leHRfaXRlbScgOiAwLAogICAgICAgICd3a2lfYnV0dG9uX2xhYmVsX2JnY29sb3InOiAnI0EyQTJBMicsCiAgICAgICAgJ3draV9idXR0b25fbGFiZWxfdGV4dGNvbG9yJyA6ICcjRkZGRkZGJywKICAgICAgICAnd2tpX2NvbWJvX2Rpc3BsYXknIDogdHJ1ZSwKICAgICAgICAnd2tpX3Nyc19sZXZlbHVwX2Rpc3BsYXknIDogdHJ1ZSwKICAgICAgICAnd2tpX2F1dG9fc2hvd19pbmZvJyA6IHRydWUsCiAgICAgICAgJ3draV9hdWRpb19hdXRvcGxheScgOiBmYWxzZQogICAgfSk7CiAgICBjb25zb2xlLmxvZygnV0tJOiBTZXR0aW5ncyBub3QgZm91bmQnKTsKfQplbHNlCnsKICAgIGNvbnNvbGUubG9nKCdXS0k6IFNldHRpbmdzIGZvdW5kJyk7CiAgICB3a2lfc2V0dGluZ3MgPSAkLnBhcnNlSlNPTih3a2lfc2V0dGluZ3MpOwp9Cgp2YXIgd2tpX2hpdF9jb21ibyA9IDA7CnZhciB3a2lfY29tYm9fcmVjb3JkID0gJC5qU3RvcmFnZS5nZXQoJ3draV9jb21ib19yZWNvcmQnKTsKCnZhciB3a2lfY3VycmVudF9pdGVtID0gJyc7CnZhciB3a2lfY3VycmVudF90eXBlID0gJyc7CnZhciB3a2lfY3VycmVudF9xdWVzdGlvbl90eXBlID0gJyc7CnZhciB3a2lfcHJldmlvdXNfaXRlbSA9ICcnOwp2YXIgd2tpX3ByZXZpb3VzX3R5cGUgPSAnJzsKdmFyIHdraV9wcmV2aW91c19xdWVzdGlvbl90eXBlID0gJyc7CnZhciB3a2lfcHJldmlvdXNfaXRlbV91cmwgPSAnJzsKdmFyIHdraV9zdWJtaXR0ZWRfYW5zd2VyID0gJyc7Cgp2YXIgd2tpX2pzdG9yZWRfY3VycmVudF9pdGVtID0gJyc7CnZhciB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtID0gJyc7Cgp2YXIgd2tpX2l0ZW1zX2FycmF5ID0gbmV3IEFycmF5KCk7Cgp2YXIgd2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3JlY2VpdmVkID0gZmFsc2U7CnZhciB3a2lfZXhjZXB0aW9uX21lc3NhZ2VfdHlwZSA9IDA7CnZhciB3a2lfYW5zd2VyX2V4Y2VwdGlvbl9tZXNzYWdlID0gbmV3IEFycmF5KCk7CndraV9hbnN3ZXJfZXhjZXB0aW9uX21lc3NhZ2VbMF0gPSAnQ2hlY2sgdGhlIHByZXZpb3VzIGl0ZW0nOwp3a2lfYW5zd2VyX2V4Y2VwdGlvbl9tZXNzYWdlWzFdID0gJ1lvdXIgYW5zd2VyIHdhcyBhIGJpdCBvZmYnOwp3a2lfYW5zd2VyX2V4Y2VwdGlvbl9tZXNzYWdlWzJdID0gJ1RoZXJlIGFyZSBvdGhlciBwb3NzaWJsZSByZWFkaW5ncyc7CndraV9hbnN3ZXJfZXhjZXB0aW9uX21lc3NhZ2VbM10gPSAnVGhlcmUgYXJlIG90aGVyIHBvc3NpYmxlIG1lYW5pbmdzJzsKCnZhciB3a2lfc3JzX2xldmVsID0gbmV3IEFycmF5KCk7CndraV9zcnNfbGV2ZWxbMF0gPSAnJzsgLy8gRXZlcnkgaXRlbSBzdGFydHMgb24gMQp3a2lfc3JzX2xldmVsWzFdID0gJyc7CndraV9zcnNfbGV2ZWxbMl0gPSAnJzsKd2tpX3Nyc19sZXZlbFszXSA9ICcnOwp3a2lfc3JzX2xldmVsWzRdID0gJyc7CndraV9zcnNfbGV2ZWxbNV0gPSAnR3VydSc7CndraV9zcnNfbGV2ZWxbNl0gPSAnJzsKd2tpX3Nyc19sZXZlbFs3XSA9ICdNYXN0ZXInOwp3a2lfc3JzX2xldmVsWzhdID0gJ0VubGlnaHRlbmVkJzsKd2tpX3Nyc19sZXZlbFs5XSA9ICdCdXJuZWQnOwp3a2lfc3JzX2xldmVsWzEwXSA9ICcnOyAvLyBTUlMgMTAgZG9lcyBub3QgZXhpc3QKCnZhciBzcnNfd3JhcHBlcl90b3AgPSAwOwp2YXIgc3JzX3dyYXBwZXJfdXBwZXIgPSAwOwoKJCgnPGxpIGlkPSJ3a2lfYnV0dG9uIiBjbGFzcz0id2tpX2RlZmF1bHRfY3Vyc29yIGRpc2FibGVkIj48ZGl2IGlkPSJ3a2lfbWltaWNfYnV0dG9uIj48ZGl2IGNsYXNzPSJ3a2lfaXRlbV93cmFwcGVyIj48ZGl2IGxhbmc9ImphIiBjbGFzcz0id2tpX2J1dHRvbl9pdGVtX2xhYmVsIj48ZGl2IGNsYXNzPSJ3a2lfc3RhcnRfbWVzc2FnZSI+UHJldmlvdXMgaXRlbTwvZGl2PjwvZGl2PjwvZGl2PjxpIGNsYXNzPSJpY29uLWluZm8tc2lnbiI+PC9pPjwvbGk+JykuaW5zZXJ0QWZ0ZXIoJyNvcHRpb24td3JhcC11cCcpOwokKCc8ZGl2IGlkPSJ3a2lfc3JzX3BvcHVwX3dyYXBwZXIiPjxkaXYgY2xhc3M9IndraV9zcnNfcG9wdXBfaWNvbiI+PGkgY2xhc3M9Imljb24tYXJyb3ctdXAiPjwvaT48L2Rpdj48ZGl2IGlkPSJ3a2lfc3JzX3BvcHVwX21lc3NhZ2UiPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKCdib2R5Jyk7CgokKCc8c3BhbiBpZD0id2tpX2NvbWJvX2Rpc3BsYXkiPjxpIGNsYXNzPSJpY29uLXRyb3BoeSI+PC9pPjxzcGFuIGlkPSJ3a2lfY29tYm8iIHRpdGxlPSJDdXJyZW50IGNvbWJvIG9mIHJpZ2h0IGFuc3dlcnMiPjA8L3NwYW4+IDxzcGFuIGlkPSJ3a2lfY29tYm9fcmVjb3JkIiB0aXRsZT0iUmVjb3JkIG9mIHJpZ2h0IGFuc3dlcnMgaW4gYSByb3ciPjwvc3Bhbj48L3NwYW4+ICcpLmluc2VydEJlZm9yZSgnI3N0YXRzIGkuaWNvbi10aHVtYnMtdXAnKTsKCiQoJzxkaXYgaWQ9IndraV9jb25maWdfYnV0dG9uIj48c3BhbiBjbGFzcz0id2tpX3Rvb2x0aXAiIHJlbD0id2tpX3NldHRpbmdzX2luZm8iPjxzcGFuIGlkPSJ3a2lfc2V0dGluZ3NfaW5mbyIgY2xhc3M9IndraV9oaWRkZW4iPkNsaWNrIHRvIGFjY2VzcyBXYW5pS2FuaSBJbXByb3ZlIHNldHRpbmdzIG1lbnU8L3NwYW4+PGkgY2xhc3M9Imljb24tY29ncyI+PC9pPiBXS0kgMi4yLjI8L3NwYW4+PC9kaXY+JykuaW5zZXJ0QmVmb3JlKCcjaG90a2V5cycpOwoKJCgnPGRpdiBpZD0id2tpX21vZGFsX2JhY2tncm91bmQiPjwvZGl2PicpLmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLCBsZWZ0OiAwLCBoZWlnaHQ6ICQoZG9jdW1lbnQpLmhlaWdodCgpLCB3aWR0aDogJzEwMCUnLCBvcGFjaXR5OiAwLjcsIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnLCB6SW5kZXg6IDUwMDAsIGRpc3BsYXk6ICdub25lJyB9KS5hcHBlbmRUbygnYm9keScpOwoKJCgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj4ud2tpX2hpZGRlbiB7IGRpc3BsYXk6IG5vbmU7IH0gLndraV9zZXR0aW5nc19zYXZlZCB7IHdpZHRoOiAzNTBweDsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAxNnB4OyBkaXNwbGF5OiBub25lOyB9IC53a2lfc2V0dGluZ3NfZGlzY2FyZGVkIHsgd2lkdGg6IDM1MHB4OyBwYWRkaW5nOiAxMHB4OyBmb250LXNpemU6IDE2cHg7IGRpc3BsYXk6IG5vbmU7ICB9ICAud2tpX2NsZWFyIHsgY2xlYXI6IGJvdGg7fSAud2tpX2J0biB7IGNvbG9yOiByZ2IoMTUzLCAxNTMsIDE1Myk7IGZvbnQtZmFtaWx5OiAiVWJ1bnR1IixIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjsgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMTUpIHJnYmEoMCwgMCwgMCwgMC4xNSkgcmdiYSgwLCAwLCAwLCAwLjI1KTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiA0cHggMTJweDsgbWFyZ2luOiA1cHggMCAwOyBmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IGN1cnNvcjogcG9pbnRlcjsgIHRleHQtc2hhZG93OiAwcHggMXB4IDFweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQ1LCAyNDUsIDI0NSk7IGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYigyNTUsIDI1NSwgMjU1KSwgcmdiKDIzMCwgMjMwLCAyMzApKTsgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OyBib3JkZXItd2lkdGg6IDFweDsgYm9yZGVyLXN0eWxlOiBzb2xpZDsgYm9yZGVyLWNvbG9yOiByZ2IoMTg3LCAxODcsIDE4NykgcmdiKDE4NywgMTg3LCAxODcpIHJnYigxNjIsIDE2MiwgMTYyKTsgLW1vei1ib3JkZXItdG9wLWNvbG9yczogbm9uZTsgLW1vei1ib3JkZXItcmlnaHQtY29sb3JzOiBub25lOyAtbW96LWJvcmRlci1ib3R0b20tY29sb3JzOiBub25lOyAtbW96LWJvcmRlci1sZWZ0LWNvbG9yczogbm9uZTsgYm9yZGVyLWltYWdlOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGJveC1zaGFkb3c6IDBweCAxcHggMHB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSBpbnNldCwgMHB4IDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjA1KTt9IC53a2lfYnRuOmhvdmVyIHsgY29sb3I6ICM3Nzc3Nzc7IGJveC1zaGFkb3c6IDBweCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4zKTsgfSAud2tpX3NldHRpbmdzX2Zvcm0geyB3aWR0aDogMzUwcHg7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgbGlzdC1zdHlsZS10eXBlOiBub25lO30gLndraV9zZXR0aW5nc19mb3JtIGxpIHsgcGFkZGluZzogMTBweCAwcHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWRlZGVkOyB9IC53a2lfc2V0dGluZ3NfZm9ybSBsaTpsYXN0LWNoaWxkIHsgYm9yZGVyLWJvdHRvbTogMDt9IC53a2lfc2V0dGluZ3NfZm9ybSBpbnB1dFt0eXBlPSJ0ZXh0Il0geyB3aWR0aDogOTglOyBtYXJnaW46IDhweCAwIDAgMDsgfSAud2tpX3NldHRpbmdzX2Zvcm0gaW5wdXRbdHlwZT0iY2hlY2tib3giXSB7IG1hcmdpbjogM3B4IDVweCA1cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0gICN3a2lfY29uZmlnX2J1dHRvbiB7Y3Vyc29yOiBwb2ludGVyOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDEwcHg7IGNvbG9yOiByZ2IoMTM2LCAxMzYsIDEzNik7IGZvbnQtc2l6ZTogMC44MTI1ZW07IHZlcnRpY2FsLWFsaWduOiBib3R0b207fSAjd2tpX3Nyc19wb3B1cF93cmFwcGVyIHt3aWR0aDogMTIxcHg7IGhlaWdodDogMzBweDsgcG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiAxMTsgb3BhY2l0eTogMDsgfSAud2tpX3Nyc19wb3B1cF9pY29uIHsgd2lkdGg6IDMwcHg7IGJhY2tncm91bmQtY29sb3I6ICNlZmVmZWY7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogNXB4IDA7IGZsb2F0OiBsZWZ0OyB9ICN3a2lfc3JzX3BvcHVwX21lc3NhZ2UgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiB3aGl0ZTsgZmxvYXQ6IHJpZ2h0OyBwYWRkaW5nOiA1cHg7IHdpZHRoOiA4MXB4OyB0ZXh0LXNoYWRvdzogMXB4IDFweCAwcHggcmdiYSgwLCAwLCAwLCAwLjEpOyB9IC53a2lfc3JzX2FwcHJlbnRpY2UgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjRjMwMEEyOyB9IC53a2lfc3JzX2d1cnUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjOUUzNEI3OyB9IC53a2lfc3JzX21hc3RlciB7IGJhY2tncm91bmQtY29sb3I6ICM0OTY3RTA7IH0gLndraV9zcnNfZW5saWdodG5lZCB7IGJhY2tncm91bmQtY29sb3I6ICMwMEEyRjM7IH0gLndraV9zcnNfYnVybmVkIHsgYmFja2dyb3VuZC1jb2xvcjogIzRFNEU0RTsgfSAud2tpX2RlZmF1bHRfY3Vyc29yIHsgY3Vyc29yOiBkZWZhdWx0ICFpbXBvcnRhbnQ7IH0gLndraV9zdGFydF9tZXNzYWdleyBjb2xvcjogYmxhY2s7IGRpc3BsYXk6IGlubGluZTt9ICAjd2tpX2J1dHRvbiB7IHZlcnRpY2FsLWFsaWduOiBib3R0b207IGN1cnNvcjogcG9pbnRlcjsgfSAjd2tpX2J1dHRvbiBpIHttYXJnaW46IDEzcHggYXV0bzsgd2lkdGg6IDE4JTsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogMTBweDsgdG9wOiAwOyB9ICN3a2lfbWltaWNfYnV0dG9uIHttYXJnaW4tcmlnaHQ6IDEwcHg7IGJhY2tncm91bmQtY29sb3I6IHJnYigyNTEsIDI1MSwgMjUxKTsgY29sb3I6IHJnYigxMzYsIDEzNiwgMTM2KTsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3gtc2hhZG93OiAzcHggM3B4IDBweCByZ2IoMjI1LCAyMjUsIDIyNSk7fSAud2tpX2J1dHRvbl9pdGVtX2xhYmVsIHsgcGFkZGluZzogMTBweCAwIDZweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogJyArIHdraV9zZXR0aW5ncy53a2lfYnV0dG9uX2xhYmVsX3RleHRjb2xvciArICc7IHRleHQtc2hhZG93OiAxcHggMXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMSk7IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyBvcGFjaXR5OiAwLjU7IH0gLndraV9idXR0b25faXRlbV9sYWJlbDpob3ZlciB7IG9wYWNpdHk6IDE7IH0gLndraV9pdGVtX3dyYXBwZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOyB3aWR0aDogODAlOyB9IC53a2lfdm9jYWJ1bGFyeSB7IGJhY2tncm91bmQtY29sb3I6ICNBQTAwRkY7IH0gLndraV9rYW5qaSB7IGJhY2tncm91bmQtY29sb3I6ICNGRjAwQUE7IH0gLndraV9yYWRpY2FsIHsgYmFja2dyb3VuZC1jb2xvcjogIzAwQUFGRjsgfSAud2tpX2NpbnphIHsgYmFja2dyb3VuZC1jb2xvcjogJyArIHdraV9zZXR0aW5ncy53a2lfYnV0dG9uX2xhYmVsX2JnY29sb3IgKyAnOyB9IC5xdGlweyBtYXgtd2lkdGg6IDM4MHB4ICFpbXBvcnRhbnQ7IH0gI2FkZGl0aW9uYWwtY29udGVudCB1bCBsaSB7IHdpZHRoOiAxNi42JSAhaW1wb3J0YW50OyB9ICNhZGRpdGlvbmFsLWNvbnRlbnQge3RleHQtYWxpZ246IGNlbnRlcjt9ICN3a2lfYnV0dG9uIGltZyB7IG1heC13aWR0aDogMTQlOyBtYXJnaW46IC0xMHB4OyB9ICNhZGRpdGlvbmFsLWNvbnRlbnQgI2Fuc3dlci1leGNlcHRpb24ge2xlZnQ6IDguMyUgIWltcG9ydGFudDt9IEBtZWRpYSAobWF4LXdpZHRoOiA3NjdweCkgeyN3a2lfbWltaWNfYnV0dG9uIHtwYWRkaW5nOiA1cHg7IGZvbnQtc2l6ZTogMC43NWVtO30gLndraV9pdGVtX3dyYXBwZXIgeyBkaXNwbGF5OiBub25lOyBwYWRkaW5nOiA0cHggNHB4IDNweDsgbWFyZ2luOiAtNHB4OyB9ICN3a2lfYnV0dG9uIGkgeyBwb3NpdGlvbjogcmVsYXRpdmU7IHdpZHRoOiBhdXRvOyByaWdodDogYXV0bzsgbWFyZ2luOiAwOyB9IH0gQG1lZGlhIChtYXgtd2lkdGg6IDEyODBweCkgeyAjd2tpX2J1dHRvbiBpbWcgeyBtYXgtd2lkdGg6IDIyJTsgbWFyZ2luOiAtMTFweDsgfSBAbWVkaWEgKG1heC13aWR0aDogMTAyNHB4KSB7ICN3a2lfYnV0dG9uIGltZyB7IG1heC13aWR0aDogMjklOyBtYXJnaW46IC0xMXB4OyB9fSAgfSA8L3N0eWxlPicpLmFwcGVuZFRvKCdoZWFkJyk7CgoKaWYod2tpX3NldHRpbmdzLndraV9jb21ib19kaXNwbGF5ICE9PSB0cnVlKQp7CiAgICAkKCcjd2tpX2NvbWJvX2Rpc3BsYXknKS5oaWRlKCk7Cn0KCmlmKHdraV9zZXR0aW5ncy53a2lfc3JzX2xldmVsdXBfZGlzcGxheSAhPT0gdHJ1ZSkKewogICAgJCgnI3draV9zcnNfcG9wdXBfd3JhcHBlcicpLmhpZGUoKTsKfQoKaWYod2tpX2NvbWJvX3JlY29yZCA9PT0gbnVsbCkKewogICAgd2tpX2NvbWJvX3JlY29yZCA9IDA7Cn0KZWxzZQp7CiAgICBpZih3a2lfY29tYm9fcmVjb3JkICE9PSAwKQogICAgewogICAgICAgICQoJyN3a2lfY29tYm9fcmVjb3JkJykudGV4dCgnKCcgKyB3a2lfY29tYm9fcmVjb3JkICsgJyknKTsKICAgIH0KfQoKZnVuY3Rpb24gY2hlY2tBbnN3ZXIoKQp7CiAgICB3a2lfc3VibWl0dGVkX2Fuc3dlciA9ICQoJyN1c2VyLXJlc3BvbnNlJykudmFsKCk7CgogICAgaWYoIXdraV9zdWJtaXR0ZWRfYW5zd2VyKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB2YXIgYW5zd2VyRXhjZXB0aW9uID0gJC50cmltKCQoJyNhbnN3ZXItZXhjZXB0aW9uJykudGV4dCgpKTsKCiAgICBpZihhbnN3ZXJFeGNlcHRpb24uaW5kZXhPZignV2FuaUthbmkgaXMgbG9va2luZyBmb3IgdGhlJykgIT09IC0xKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygnd2tpX3N1Ym1pdHRlZF9hbnN3ZXI6ICcgKyB3a2lfc3VibWl0dGVkX2Fuc3dlcik7CgogICAgaWYoYW5zd2VyRXhjZXB0aW9uLmxlbmd0aCA+IDApCiAgICB7CiAgICAgICAgd2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3JlY2VpdmVkID0gdHJ1ZTsKCiAgICAgICAgaWYoYW5zd2VyRXhjZXB0aW9uLmluZGV4T2YoJ2Fuc3dlciB3YXMgYSBiaXQgb2ZmJykgIT09IC0xKQogICAgICAgIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1dLSTogW2Fuc3dlckV4Y2VwdGlvbl0geW91ciBhbnN3ZXIgd2FzIGEgYml0IG9mZicpOwogICAgICAgICAgICAkKCcjd2tpX21pbWljX2J1dHRvbicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcjRjVGN0FCJyk7IC8vIHllbGxvdwogICAgICAgICAgICAkKCcjd2tpX2J1dHRvbiBpJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbi13YXJuaW5nLXNpZ24nKS5mYWRlT3V0KCkuZmFkZUluKCkuZmFkZU91dCgpLmZhZGVJbigpOwogICAgICAgICAgICB3a2lfZXhjZXB0aW9uX21lc3NhZ2VfdHlwZSA9IDE7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoYW5zd2VyRXhjZXB0aW9uLmluZGV4T2YoJ3Bvc3NpYmxlIHJlYWRpbmdzJykgIT09IC0xKQogICAgICAgIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1dLSTogW2Fuc3dlckV4Y2VwdGlvbl0gb3RoZXIgcG9zc2libGUgcmVhZGluZ3MnKTsKICAgICAgICAgICAgJCgnI3draV9idXR0b24gaScpLnJlbW92ZUNsYXNzKCkuYWRkQ2xhc3MoJ2ljb24tYXN0ZXJpc2snKTsKICAgICAgICAgICAgJCgnI3draV9taW1pY19idXR0b24nKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnI0NERTBGNycpOyAvLyBibHVlCiAgICAgICAgICAgIHdraV9leGNlcHRpb25fbWVzc2FnZV90eXBlID0gMjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihhbnN3ZXJFeGNlcHRpb24uaW5kZXhPZigncG9zc2libGUgbWVhbmluZ3MnKSAhPT0gLTEpCiAgICAgICAgewogICAgICAgICAgICBjb25zb2xlLmxvZygnV0tJOiBbYW5zd2VyRXhjZXB0aW9uXSBvdGhlciBwb3NzaWJsZSBtZWFuaW5ncycpOwogICAgICAgICAgICAkKCcjd2tpX2J1dHRvbiBpJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbi1hc3RlcmlzaycpOwogICAgICAgICAgICAkKCcjd2tpX21pbWljX2J1dHRvbicpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsICcjQ0RFMEY3Jyk7IC8vIGJsdWUKICAgICAgICAgICAgd2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3R5cGUgPSAzOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGFuc3dlckV4Y2VwdGlvbi5pbmRleE9mKCdWaWV3IHRoZSBjb3JyZWN0JykgIT09IC0xKQogICAgICAgIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1dLSTogW2Fuc3dlckV4Y2VwdGlvbl0gd3JvbmcgYW5zd2VyJyk7CiAgICAgICAgICAgICQoJyN3a2lfbWltaWNfYnV0dG9uJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGQkZCRkInKTsgLy8gZGVmYXVsdCBncmV5IGNvbG9yCgogICAgICAgICAgICBpZih3a2lfc2V0dGluZ3Mud2tpX2F1dG9fc2hvd19pbmZvID09PSB0cnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkKCcjb3B0aW9uLWl0ZW0taW5mbycpLmNsaWNrKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdraV9leGNlcHRpb25fbWVzc2FnZV90eXBlID0gMDsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgLy8gdW5rbm93biBtZXNzYWdlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXS0k6IFthbnN3ZXJFeGNlcHRpb25dICcgKyBhbnN3ZXJFeGNlcHRpb24pOwogICAgICAgICAgICAkKCcjd2tpX2J1dHRvbiBpJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbi1pbmZvLXNpZ24nKTsKICAgICAgICAgICAgJCgnI3draV9taW1pY19idXR0b24nKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCAnI0Y3RDRDRCcpOyAvLyByZWQKICAgICAgICAgICAgd2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3R5cGUgPSAwOwogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICB3a2lfZXhjZXB0aW9uX21lc3NhZ2VfcmVjZWl2ZWQgPSBmYWxzZTsKICAgICAgICAkKCcjd2tpX2J1dHRvbiBpJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbi1vaycpOwogICAgICAgICQoJyN3a2lfbWltaWNfYnV0dG9uJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGQkZCRkInKTsgLy8gZGVmYXVsdCBncmV5IGNvbG9yCiAgICB9CgogICAgaWYod2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3JlY2VpdmVkID09PSBmYWxzZSB8fCB3a2lfZXhjZXB0aW9uX21lc3NhZ2VfdHlwZSA+IDApCiAgICB7CiAgICAgICAgd2tpX2hpdF9jb21ibysrOwogICAgICAgICQoJyN3a2lfY29tYm8nKS50ZXh0KHdraV9oaXRfY29tYm8pOwogICAgICAgIGlmKHdraV9oaXRfY29tYm8gPiB3a2lfY29tYm9fcmVjb3JkKQogICAgICAgIHsKICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ3draV9jb21ib19yZWNvcmQnLCB3a2lfaGl0X2NvbWJvKTsKICAgICAgICAgICAgJCgnI3draV9jb21ibycpLmZhZGVPdXQoKS5mYWRlSW4oKTsKICAgICAgICAgICAgJCgnI3draV9jb21ib19yZWNvcmQnKS5oaWRlKCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHdraV9oaXRfY29tYm8gPSAwOwogICAgICAgICQoJyN3a2lfY29tYm8nKS50ZXh0KHdraV9oaXRfY29tYm8pOwogICAgICAgICQoJyN3a2lfY29tYm9fcmVjb3JkJykudGV4dCgnKCcgKyAkLmpTdG9yYWdlLmdldCgnd2tpX2NvbWJvX3JlY29yZCcsIHdraV9oaXRfY29tYm8pICsgJyknKS5zaG93KCk7CiAgICB9CgogICAgaWYgKCQoJyNhbnN3ZXItZm9ybSBmb3JtIGZpZWxkc2V0JykuaGFzQ2xhc3MoJ2NvcnJlY3QnKSkKICAgIHsKICAgICAgICBjb25zb2xlLmxvZygnV0tJOiBDb3JyZWN0IGFuc3dlcicpOwoKICAgICAgICBpZiAod2tpX3NldHRpbmdzLndraV9hdWRpb19hdXRvcGxheSA9PT0gdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkKCcjb3B0aW9uLWF1ZGlvJykuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1vdmVOZXh0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkKCIjb3B0aW9uLWF1ZGlvIikuY2xpY2soKTsKCiAgICAgICAgICAgICAgICAkKCcjb3B0aW9uLWF1ZGlvIGF1ZGlvJykuYmluZCgiZW5kZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbW92ZU5leHQoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIG1vdmVOZXh0KCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSBpZiAoJCgnI2Fuc3dlci1mb3JtIGZvcm0gZmllbGRzZXQnKS5oYXNDbGFzcygnaW5jb3JyZWN0JykpCiAgICB7CiAgICAgICAgY29uc29sZS5sb2coJ1dLSTogV3JvbmcgYW5zd2VyJyk7CiAgICB9Cn0KCmZ1bmN0aW9uIG1vdmVOZXh0KCkKewogICAgY29uc29sZS5sb2coJ1dLSTogTW92aW5nIHRvIG5leHQgcXVlc3Rpb24nKTsKICAgICQoJyNhbnN3ZXItZm9ybSBidXR0b24nKS50cmlnZ2VyKCdjbGljaycpOwp9CgokKCcjYW5zd2VyLWZvcm0gYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7CiAgICBpZiAoZS5vcmlnaW5hbEV2ZW50ICE9PSB1bmRlZmluZWQgJiYgZS5vcmlnaW5hbEV2ZW50LnNjcmVlblggJiYgZS5vcmlnaW5hbEV2ZW50LnNjcmVlblkpCiAgICB7CiAgICAgICAgaWYoJCgnI3VzZXItcmVzcG9uc2UnKS52YWwoKSkKICAgICAgICB7CiAgICAgICAgCXNldFRpbWVvdXQoY2hlY2tBbnN3ZXIsIHdraV9zZXR0aW5ncy53a2lfdGltZXJfc2hvd19uZXh0X2l0ZW0pOwogICAgICAgIH0KICAgIH0KfSk7CgokKCcjcXVlc3Rpb24tdHlwZScpLmJpbmQoJ0RPTU5vZGVJbnNlcnRlZCcsIGZ1bmN0aW9uIChldmVudCkKewogICAgaWYoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lICE9ICdTVFJPTkcnKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB3a2lfanN0b3JlZF9jdXJyZW50X2l0ZW0gPSAkLmpTdG9yYWdlLmdldCgnY3VycmVudEl0ZW0nKTsKICAgIHdraV9jdXJyZW50X3F1ZXN0aW9uX3R5cGUgPSAkLmpTdG9yYWdlLmdldCgncXVlc3Rpb25UeXBlJyk7CgogICAgaWYod2tpX2pzdG9yZWRfY3VycmVudF9pdGVtWydrYW4nXSkKICAgIHsKICAgICAgICB3a2lfY3VycmVudF90eXBlID0gJ2thbmppJzsKICAgICAgICB3a2lfY3VycmVudF9pdGVtID0gd2tpX2pzdG9yZWRfY3VycmVudF9pdGVtWydrYW4nXTsKICAgIH0KICAgIGVsc2UgaWYod2tpX2pzdG9yZWRfY3VycmVudF9pdGVtWyd2b2MnXSkKICAgIHsKICAgICAgICB3a2lfY3VycmVudF90eXBlID0gJ3ZvY2FidWxhcnknOwogICAgICAgIHdraV9jdXJyZW50X2l0ZW0gPSB3a2lfanN0b3JlZF9jdXJyZW50X2l0ZW1bJ3ZvYyddOwogICAgfQogICAgZWxzZSBpZih3a2lfanN0b3JlZF9jdXJyZW50X2l0ZW1bJ3JhZCddKQogICAgewogICAgICAgIHdraV9jdXJyZW50X3R5cGUgPSAncmFkaWNhbCc7CiAgICAgICAgaWYod2tpX2pzdG9yZWRfY3VycmVudF9pdGVtWydyYWQnXS5pbmRleE9mKCcucG5nJykgIT09IC0xKQogICAgICAgIHsKICAgICAgICAgICAgd2tpX2N1cnJlbnRfaXRlbSA9ICc8aW1nIHNyYz0iaHR0cDovL3MzLndhbmlrYW5pLmNvbS9pbWFnZXMvcmFkaWNhbHMvJyt3a2lfanN0b3JlZF9jdXJyZW50X2l0ZW1bJ3JhZCddKyciIC8+JzsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgd2tpX2N1cnJlbnRfaXRlbSA9IHdraV9qc3RvcmVkX2N1cnJlbnRfaXRlbVsncmFkJ107CiAgICAgICAgfQogICAgfQoKICAgIGNvbnNvbGUubG9nKCd3a2lfY3VycmVudF9pdGVtOiAnICsgd2tpX2N1cnJlbnRfaXRlbSk7CiAgICBjb25zb2xlLmxvZygnd2tpX2N1cnJlbnRfdHlwZTogJyArIHdraV9jdXJyZW50X3R5cGUpOwogICAgY29uc29sZS5sb2coJ3draV9jdXJyZW50X3F1ZXN0aW9uX3R5cGU6ICcgKyB3a2lfY3VycmVudF9xdWVzdGlvbl90eXBlKTsKCiAgICBpZih3a2lfc3JzX2xldmVsW3draV9qc3RvcmVkX2N1cnJlbnRfaXRlbVsnc3JzJ10gKyAxXSkKICAgIHsKICAgICAgICBjb25zb2xlLmxvZygnV0tJOiB0aGlzIGl0ZW0gd2lsbCBsZXZlbCB1cCB0byAnICsgd2tpX3Nyc19sZXZlbFt3a2lfanN0b3JlZF9jdXJyZW50X2l0ZW1bJ3NycyddICsgMV0gKyAnJyk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgY29uc29sZS5sb2coJ1dLSTogdGhpcyBpdGVtIHdpbGwgbm90IGxldmVsIHVwIHRvIGEgbmV3IFNSUyBjbGFzcycpOwogICAgfQoKICAgIGlmICgod2tpX3ByZXZpb3VzX2l0ZW0gIT0gd2tpX2N1cnJlbnRfaXRlbSkgfHwgKHdraV9wcmV2aW91c19pdGVtID09IHdraV9jdXJyZW50X2l0ZW0gJiYgd2tpX2N1cnJlbnRfcXVlc3Rpb25fdHlwZSAhPSB3a2lfcHJldmlvdXNfcXVlc3Rpb25fdHlwZSkpCiAgICB7CiAgICAgICAgaWYgKHdraV9wcmV2aW91c19pdGVtICE9ICcnKQogICAgICAgIHsKICAgICAgICAgICAgaWYoIXdraV9pdGVtc19hcnJheVt3a2lfcHJldmlvdXNfdHlwZSArICdfJyArIHdraV9qc3RvcmVkX3ByZXZpb3VzX2l0ZW1bJ2lkJ11dKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3a2lfaXRlbXNfYXJyYXlbd2tpX3ByZXZpb3VzX3R5cGUgKyAnXycgKyB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydpZCddXSA9IHt9OwogICAgICAgICAgICAgICAgd2tpX2l0ZW1zX2FycmF5W3draV9wcmV2aW91c190eXBlICsgJ18nICsgd2tpX2pzdG9yZWRfcHJldmlvdXNfaXRlbVsnaWQnXV1bJ3ZpZXdzJ10gPSAxOwogICAgICAgICAgICAgICAgd2tpX2l0ZW1zX2FycmF5W3draV9wcmV2aW91c190eXBlICsgJ18nICsgd2tpX2pzdG9yZWRfcHJldmlvdXNfaXRlbVsnaWQnXV1bJ2NvcnJlY3RfYW5zd2VycyddID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHdraV9pdGVtc19hcnJheVt3a2lfcHJldmlvdXNfdHlwZSArICdfJyArIHdraV9qc3RvcmVkX3ByZXZpb3VzX2l0ZW1bJ2lkJ11dWyd2aWV3cyddKys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKHdraV9leGNlcHRpb25fbWVzc2FnZV9yZWNlaXZlZCA9PT0gZmFsc2UgfHwgd2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3R5cGUgPiAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3a2lfaXRlbXNfYXJyYXlbd2tpX3ByZXZpb3VzX3R5cGUgKyAnXycgKyB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydpZCddXVsnY29ycmVjdF9hbnN3ZXJzJ10rKzsKCiAgICAgICAgICAgICAgICBpZigod2tpX2l0ZW1zX2FycmF5W3draV9wcmV2aW91c190eXBlICsgJ18nICsgd2tpX2pzdG9yZWRfcHJldmlvdXNfaXRlbVsnaWQnXV1bJ3ZpZXdzJ10gPT0gMiAmJiB3a2lfaXRlbXNfYXJyYXlbd2tpX3ByZXZpb3VzX3R5cGUgKyAnXycgKyB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydpZCddXVsnY29ycmVjdF9hbnN3ZXJzJ10gPT0gMikgfHwgd2tpX2pzdG9yZWRfcHJldmlvdXNfaXRlbVsncmFkJ10pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYod2tpX3Nyc19sZXZlbFt3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydzcnMnXSArIDFdKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3draV9zcnNfcG9wdXBfbWVzc2FnZScpLnRleHQod2tpX3Nyc19sZXZlbFt3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydzcnMnXSArIDFdKS5yZW1vdmVDbGFzcygpLmFkZENsYXNzKCd3a2lfc3JzXycgKyB3a2lfc3JzX2xldmVsW3draV9qc3RvcmVkX3ByZXZpb3VzX2l0ZW1bJ3NycyddICsgMV0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3draV9zcnNfcG9wdXBfd3JhcHBlcicpLmFuaW1hdGUoeyd0b3AnOiBzcnNfd3JhcHBlcl91cHBlciwgJ29wYWNpdHknOiAxfSwgODAwLCBmdW5jdGlvbigpIHsgICQodGhpcykuZGVsYXkoODAwKS5hbmltYXRlKHsnb3BhY2l0eSc6IDB9LCA1MDAsIGZ1bmN0aW9uKCkgeyAkKHRoaXMpLmNzcygndG9wJywgc3JzX3dyYXBwZXJfdG9wKTsgfSApOyB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICQoJyN3a2lfbWltaWNfYnV0dG9uJykucXRpcCgnZGVzdHJveScsIHRydWUpOwogICAgICAgICAgICAkKCcjd2tpX2J1dHRvbicpLnJlbW92ZUNsYXNzKCk7CgogICAgICAgICAgICAkKCcjd2tpX2J1dHRvbiAud2tpX2J1dHRvbl9pdGVtX2xhYmVsJykuaHRtbCh3a2lfcHJldmlvdXNfaXRlbSkucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnd2tpX2J1dHRvbl9pdGVtX2xhYmVsIHdraV9jaW56YScpOwoKICAgICAgICAgICAgaWYod2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3JlY2VpdmVkID09PSB0cnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkKCcjd2tpX21pbWljX2J1dHRvbicpLnF0aXAoe2NvbnRlbnQ6IHsgdGV4dDogd2tpX2Fuc3dlcl9leGNlcHRpb25fbWVzc2FnZVt3a2lfZXhjZXB0aW9uX21lc3NhZ2VfdHlwZV0gfSwgcG9zaXRpb246IHsgbXk6ICdib3R0b20gY2VudGVyJywgYXQ6ICd0b3AgY2VudGVyJywgdmlld3BvcnQ6ICQod2luZG93KX0sIHN0eWxlOiAncXRpcC1ib290c3RyYXAnfSk7CgogICAgICAgICAgICAgICAgaWYod2tpX2V4Y2VwdGlvbl9tZXNzYWdlX3R5cGUgPT0gMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkKCcjd2tpX2J1dHRvbiBpJykucmVtb3ZlQ2xhc3MoKS5hZGRDbGFzcygnaWNvbi1yZW1vdmUnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL3Jlc2V0IHRoZSB2YXIKICAgICAgICAgICAgICAgIHdraV9leGNlcHRpb25fbWVzc2FnZV9yZWNlaXZlZCA9IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3a2lfcHJldmlvdXNfaXRlbV91cmwgPSAnaHR0cHM6Ly93d3cud2FuaWthbmkuY29tLyc7CgogICAgICAgICAgICBpZiAod2tpX3ByZXZpb3VzX3R5cGUgPT0gJ2thbmppJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgd2tpX3ByZXZpb3VzX2l0ZW1fdXJsICs9ICdrYW5qaS8nICsgd2tpX3ByZXZpb3VzX2l0ZW0gKyAnLyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAod2tpX3ByZXZpb3VzX3R5cGUgPT0gJ3ZvY2FidWxhcnknKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3a2lfcHJldmlvdXNfaXRlbV91cmwgKz0gJ3ZvY2FidWxhcnkvJyArIHdraV9wcmV2aW91c19pdGVtICsgJy8nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdmFyIHJhZGljYWxOYW1lID0gd2tpX2pzdG9yZWRfcHJldmlvdXNfaXRlbS5lblswXTsKICAgICAgICAgICAgICAgIHdraV9wcmV2aW91c19pdGVtX3VybCArPSAncmFkaWNhbHMvJyArIHJhZGljYWxOYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnICcsICctJykgKyAnLyc7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgc3JzX3dyYXBwZXJfdG9wID0gcGFyc2VJbnQoJCgiI3draV9taW1pY19idXR0b24iKS5vZmZzZXQoKS50b3AgKyAkKCIjd2tpX21pbWljX2J1dHRvbiIpLm91dGVySGVpZ2h0KCkpOwogICAgICAgICAgICBzcnNfd3JhcHBlcl91cHBlciA9IHBhcnNlSW50KHNyc193cmFwcGVyX3RvcCAtICgkKCIjd2tpX21pbWljX2J1dHRvbiIpLm91dGVySGVpZ2h0KCkgKiAyKSk7CgogICAgICAgICAgICAkKCcjd2tpX3Nyc19wb3B1cF93cmFwcGVyJykuY3NzKHsndG9wJzogc3JzX3dyYXBwZXJfdG9wICsgJ3B4JywgJ2xlZnQnOiBwYXJzZUludCgkKCIjd2tpX21pbWljX2J1dHRvbiIpLm91dGVyV2lkdGgoKSAvIDMgKyAkKCIjd2tpX21pbWljX2J1dHRvbiIpLm9mZnNldCgpLmxlZnQpICsgJ3B4J30pOwogICAgICAgIH0KCgogICAgICAgICQoJyN3a2lfYnV0dG9uJykubm90KCcuZGlzYWJsZWQnKS5xdGlwKAogICAgICAgIHsKICAgICAgICAgICAgaGlkZToKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZXZlbnQ6ICdjbGljayB1bmZvY3VzJwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY29udGVudDoKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICdQcmV2aW91cyAnICsgd2tpX3ByZXZpb3VzX3R5cGUgKyAnLiBZb3UgYW5zd2VyZWQgPHN0cm9uZz4nICsgd2tpX3N1Ym1pdHRlZF9hbnN3ZXIgKyAnPC9zdHJvbmc+JywKICAgICAgICAgICAgICAgIHRleHQ6ICc8aWZyYW1lIGlkPSJ3a2lfaWZyYW1lX3ByZXZpb3VzX2l0ZW0iIHNyYz0iJyArIHdraV9wcmV2aW91c19pdGVtX3VybCArICciIGZyYW1lYm9yZGVyPSIwIiBtYXJnaW5oZWlnaHQ9IjAiIHN0eWxlPSJ3aWR0aDozNTBweDsgaGVpZ2h0OiAyNTBweDsgb3ZlcmZsb3cteDogaGlkZGVuOyBvdmVyZmxvdy15OiBzY3JvbGw7IG9wYWNpdHk6IDA7Ij48L2lmcmFtZT4nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBvc2l0aW9uOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBteTogJ2JvdHRvbSBjZW50ZXInLAogICAgICAgICAgICAgICAgYXQ6ICd0b3AgY2VudGVyJywKICAgICAgICAgICAgICAgIHZpZXdwb3J0OiAkKHdpbmRvdyksCiAgICAgICAgICAgICAgICBhZGp1c3Q6IHsgbWV0aG9kOiAnc2hpZnQgZmxpcCcgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93OgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBldmVudDogJ2NsaWNrJywKICAgICAgICAgICAgICAgIHNvbG86IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXZlbnRzOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbihldmVudCwgYXBpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICQoJ2lmcmFtZSN3a2lfaWZyYW1lX3ByZXZpb3VzX2l0ZW0nKS5sb2FkKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2tpX2lmcmFtZV9jb250ZW50ID0gJCh0aGlzKS5jb250ZW50cygpLmZpbmQoJ2JvZHknKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHdraV9pZnJhbWVfY29udGVudC5hcHBlbmQoJzxzdHlsZT4uZm9vdGVyLWFkanVzdG1lbnQsIGZvb3RlciB7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50fSBib2R5IHttYXJnaW46IDEwcHggIWltcG9ydGFudDt9IHNlY3Rpb24ge21hcmdpbjogMCAhaW1wb3J0YW50OyB9IC5jb250YWluZXIge21hcmdpbjogMCAhaW1wb3J0YW50OyB9IC5sZXZlbC1pY29uIHsgbWluLWhlaWdodDogNTJweDsgZmxvYXQ6IGxlZnQ7fSAudm9jYWJ1bGFyeS1pY29uLCAua2FuamktaWNvbiwgLnJhZGljYWwtaWNvbiB7ZmxvYXQ6IHJpZ2h0OyB3aWR0aDogODMlOyBoZWlnaHQ6IGF1dG87IHBhZGRpbmctbGVmdDogMCAhaW1wb3J0YW50OyBwYWRkaW5nLXJpZ2h0OiAwICFpbXBvcnRhbnQ7IG1pbi1oZWlnaHQ6IDUycHg7fSAud2tpX2lmcmFtZV9oZWFkZXIge2ZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiA1NXB4fSAud2tpX2lmcmFtZV9zZWN0aW9uIHttYXJnaW46IDMwcHggMCAwICFpbXBvcnRhbnR9IC53a2lfaWZyYW1lX3NlY3Rpb246YWZ0ZXIge2NsZWFyOiBib3RoOyB9IC53a2lfaWZyYW1lX3NlY3Rpb24gaDIge2JvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2IoMjEyLCAyMTIsIDIxMikgIWltcG9ydGFudDsgbWFyZ2luOiAxNXB4IDAgN3B4ICFpbXBvcnRhbnQ7fSAud2tpX2lmcmFtZV9oZWFkZXIgLmVubGFyZ2UtaG92ZXIgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0gPC9zdHlsZT4nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3a2lfaWZyYW1lX2l0ZW0gPSB3a2lfaWZyYW1lX2NvbnRlbnQuZmluZCgnaGVhZGVyPmgxJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3a2lfaWZyYW1lX2l0ZW1fcHJvZ3Jlc3MgPSB3a2lfaWZyYW1lX2NvbnRlbnQuZmluZCgnI3Byb2dyZXNzJykuYWRkQ2xhc3MoJ3draV9pZnJhbWVfc2VjdGlvbicpLndyYXAoJzxkaXY+PC9kaXY+JykucGFyZW50KCkuaHRtbCgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2tpX2lmcmFtZV9pdGVtX2FsdGVybmF0aXZlX21lYW5pbmcgPSB3a2lfaWZyYW1lX2NvbnRlbnQuZmluZCgnI2luZm9ybWF0aW9uJykuYWRkQ2xhc3MoJ2luZGl2aWR1YWwtaXRlbScpLndyYXAoJzxkaXY+PC9kaXY+JykucGFyZW50KCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZih3a2lfaXRlbXNfYXJyYXlbd2tpX3ByZXZpb3VzX3R5cGUgKyAnXycgKyB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtWydpZCddXVsnY29ycmVjdF9hbnN3ZXJzJ10gPT0gMikKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdraV9yZWFkaW5nc19hbmRfbWVhbmluZ3MgPSB3a2lfaWZyYW1lX2NvbnRlbnQuZmluZCgnaDI6Y29udGFpbnMoIlJlYWRpbmciKSxoMjpjb250YWlucygiTWVhbmluZyIpLGgyOmNvbnRhaW5zKCJOYW1lIiknKS5wYXJlbnQoJ3NlY3Rpb24nKS5hZGRDbGFzcygnd2tpX2lmcmFtZV9zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3a2lfaWZyYW1lX2NvbnRlbnQuYXBwZW5kKCc8aDIgY2xhc3M9IndraV9pZnJhbWVfaGVhZGVyIj4nICsgd2tpX2lmcmFtZV9pdGVtLmh0bWwoKSArICc8L2gyPicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2tpX2lmcmFtZV9jb250ZW50LmFwcGVuZCh3a2lfaWZyYW1lX2l0ZW1fYWx0ZXJuYXRpdmVfbWVhbmluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3a2lfaWZyYW1lX2NvbnRlbnQuYXBwZW5kKHdraV9yZWFkaW5nc19hbmRfbWVhbmluZ3MpOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih3a2lfcHJldmlvdXNfcXVlc3Rpb25fdHlwZS5pbmRleE9mKCdyZWFkaW5nJykgIT09IC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3a2lfaWZyYW1lX2l0ZW1fcmVhZGluZyA9IHdraV9pZnJhbWVfY29udGVudC5maW5kKCdoMjpjb250YWlucygiUmVhZGluZyIpJykucGFyZW50KCdzZWN0aW9uJykuYWRkQ2xhc3MoJ3draV9pZnJhbWVfc2VjdGlvbicpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8aDI+JywgeydjbGFzcycgOiAnd2tpX2lmcmFtZV9oZWFkZXInfSkuYXBwZW5kVG8od2tpX2lmcmFtZV9jb250ZW50KS5hcHBlbmQod2tpX2lmcmFtZV9pdGVtLmNoaWxkcmVuKCkpLmFwcGVuZCgnPGJyIHN0eWxlPSJjbGVhcjogYm90aDsiIC8+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2tpX2lmcmFtZV9jb250ZW50LmFwcGVuZCh3a2lfaWZyYW1lX2l0ZW1fcmVhZGluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHdraV9wcmV2aW91c19xdWVzdGlvbl90eXBlLmluZGV4T2YoJ21lYW5pbmcnKSAhPT0gLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYod2tpX3ByZXZpb3VzX3R5cGUgPT0gJ3JhZGljYWwnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdraV9pZnJhbWVfaXRlbV9tZWFuaW5nID0gd2tpX2lmcmFtZV9jb250ZW50LmZpbmQoJ2gyOmNvbnRhaW5zKCJOYW1lIiknKS5wYXJlbnQoJ3NlY3Rpb24nKS5hZGRDbGFzcygnd2tpX2lmcmFtZV9zZWN0aW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3a2lfaWZyYW1lX2l0ZW1fbWVhbmluZyA9IHdraV9pZnJhbWVfY29udGVudC5maW5kKCdoMjpjb250YWlucygiTWVhbmluZyIpJykucGFyZW50KCdzZWN0aW9uJykuYWRkQ2xhc3MoJ3draV9pZnJhbWVfc2VjdGlvbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2tpX2lmcmFtZV9jb250ZW50LmFwcGVuZCgnPGgyIGNsYXNzPSJ3a2lfaWZyYW1lX2hlYWRlciI+JyArIHdraV9pZnJhbWVfaXRlbS5odG1sKCkgKyAnPC9oMj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3a2lfaWZyYW1lX2NvbnRlbnQuYXBwZW5kKHdraV9pZnJhbWVfaXRlbV9hbHRlcm5hdGl2ZV9tZWFuaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3a2lfaWZyYW1lX2NvbnRlbnQuYXBwZW5kKHdraV9pZnJhbWVfaXRlbV9tZWFuaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgd2tpX2lmcmFtZV9jb250ZW50LmFwcGVuZCh3a2lfaWZyYW1lX2l0ZW1fcHJvZ3Jlc3MpOwoKICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ29wYWNpdHknLCAnMScpOwoKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3R5bGU6ICdxdGlwLWJvb3RzdHJhcCcKICAgICAgICB9KTsKCiAgICB9Cn0pOwoKCiQoJyNxdWVzdGlvbi10eXBlJykuYmluZCgnRE9NTm9kZVJlbW92ZWQnLCBmdW5jdGlvbiAoZXZlbnQpCnsKICAgIGlmKGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PSAnU1RST05HJykKICAgIHsKICAgICAgICB3a2lfcHJldmlvdXNfaXRlbSA9IHdraV9jdXJyZW50X2l0ZW07CiAgICAgICAgd2tpX3ByZXZpb3VzX3R5cGUgPSB3a2lfY3VycmVudF90eXBlOwogICAgICAgIHdraV9wcmV2aW91c19xdWVzdGlvbl90eXBlID0gd2tpX2N1cnJlbnRfcXVlc3Rpb25fdHlwZTsKICAgICAgICB3a2lfanN0b3JlZF9wcmV2aW91c19pdGVtID0gd2tpX2pzdG9yZWRfY3VycmVudF9pdGVtOwoKICAgICAgICBjb25zb2xlLmxvZygnV0tJOiBQcmV2aW91cyBpdGVtIHJlZ2lzdGVyZWQnKTsKICAgIH0KfSk7CgokKCcjdXNlci1yZXNwb25zZScpLmtleWRvd24oIGZ1bmN0aW9uKGUpIHsKICAgIHZhciBrZXkgPSBlLmNoYXJDb2RlID8gZS5jaGFyQ29kZSA6IGUua2V5Q29kZSA/IGUua2V5Q29kZSA6IDA7CgogICAgaWYgKGtleSA9PSAxMykKICAgIHsKICAgICAgICBzZXRUaW1lb3V0KGNoZWNrQW5zd2VyLCB3a2lfc2V0dGluZ3Mud2tpX3RpbWVyX3Nob3dfbmV4dF9pdGVtKTsKICAgIH0KfSk7CgoKdmFyIGxhYmVsX3RvZ2dsZSA9IDA7CiQoIiN3a2lfYnV0dG9uIikuYmluZCh7CiAgICBtb3VzZWVudGVyOiBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIGl0ZW1fbGFiZWwgPSAkKHRoaXMpLmZpbmQoIi53a2lfaXRlbV93cmFwcGVyIik7CiAgICAgICAgaWYoaXRlbV9sYWJlbC5vdXRlcldpZHRoKCkgPCBpdGVtX2xhYmVsWzBdLnNjcm9sbFdpZHRoKQogICAgICAgIHsKICAgICAgICAgICAgaXRlbV9sYWJlbC5hbmltYXRlKAogICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIDIwMAogICAgICAgICAgICApOwogICAgICAgICAgICAkKHRoaXMpLmZpbmQoImkiKS5mYWRlT3V0KDEwMCk7CiAgICAgICAgICAgIGxhYmVsX3RvZ2dsZSA9IDE7CiAgICAgICAgfQoKICAgIH0sCiAgICBtb3VzZWxlYXZlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIGl0ZW1fbGFiZWwgPSAkKHRoaXMpLmZpbmQoIi53a2lfaXRlbV93cmFwcGVyIik7CiAgICAgICAgaWYobGFiZWxfdG9nZ2xlID09PSAxKQogICAgICAgIHsKICAgICAgICAgICAgaXRlbV9sYWJlbC5hbmltYXRlKAogICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICB3aWR0aDogIjgwJSIKICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgMjAwCiAgICAgICAgICAgICk7CiAgICAgICAgICAgICQodGhpcykuZmluZCgiaSIpLmZhZGVJbigxMDApOwogICAgICAgICAgICBsYWJlbF90b2dnbGUgPSAwOwogICAgICAgIH0KICAgIH0KfSk7CgoKJCgnI3draV9jb25maWdfYnV0dG9uJykucXRpcCh7CiAgICBzaG93OgogICAgewogICAgICAgIGV2ZW50OiAnY2xpY2snLAogICAgICAgIGVmZmVjdDogZnVuY3Rpb24oKQogICAgICAgIHsKICAgICAgICAgICAgJCgnI3draV9tb2RhbF9iYWNrZ3JvdW5kJykuZmFkZUluKCk7CiAgICAgICAgICAgICQodGhpcykuZmFkZUluKCk7CiAgICAgICAgfQogICAgfSwKICAgIGhpZGU6CiAgICB7CiAgICAgICAgZXZlbnQ6ICd1bmZvY3VzJywKICAgICAgICBlZmZlY3Q6IGZ1bmN0aW9uKCkKICAgICAgICB7CiAgICAgICAgICAgICQoJyN3a2lfbW9kYWxfYmFja2dyb3VuZCcpLmZhZGVPdXQoKTsKICAgICAgICAgICAgJCh0aGlzKS5mYWRlT3V0KCk7CiAgICAgICAgfQogICAgfSwKICAgIGV2ZW50czogewoJICAgcmVuZGVyOiBmdW5jdGlvbihldmVudCwgYXBpKSB7CgkgICAgICAgJCgnI3draV9zZXR0aW5nc19jYW5jZWwnKS5iaW5kKCdjbGljaycsIHNldHRpbmdzQ2FuY2VsKTsKICAgICAgICAgICAkKCcjd2tpX3NldHRpbmdzX3NhdmUnKS5iaW5kKCdjbGljaycsIHNldHRpbmdzU2F2ZSk7CiAgICAgICB9CiAgICB9LAogICAgY29udGVudDoKICAgIHsKICAgICAgICB0aXRsZTogJzxoMiBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyI+V2FuaUthbmkgSW1wcm92ZTwvaDI+JywKICAgICAgICB0ZXh0OiAnPHVsIGNsYXNzPSJ3a2lfc2V0dGluZ3NfZm9ybSI+PGxpPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9IndraV9zZXR0aW5nc19hdWRpb19hdXRvcGxheSIgJysod2tpX3NldHRpbmdzLndraV9hdWRpb19hdXRvcGxheSA9PT0gdHJ1ZSA/ICdjaGVja2VkJyA6ICcnKSsnIC8+IDxsYWJlbCBmb3I9IndraV9zZXR0aW5nc19hdWRpb19hdXRvcGxheSI+UGxheSB2b2NhYnVsYXJ5IGF1ZGlvIHdoZW4gYXZhaWxhYmxlPC9sYWJlbD48L2xpPjxsaT48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ3a2lfc2V0dGluZ3NfY29tYm9fZGlzcGxheSIgJysod2tpX3NldHRpbmdzLndraV9jb21ib19kaXNwbGF5ID09PSB0cnVlID8gJ2NoZWNrZWQnIDogJycpKycgLz4gPGxhYmVsIGZvcj0id2tpX3NldHRpbmdzX2NvbWJvX2Rpc3BsYXkiPlNob3cgY29tYm8gaW5mb3JtYXRpb248L2xhYmVsPjwvbGk+PGxpPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9IndraV9zZXR0aW5nc19zcnNfbGV2ZWx1cF9kaXNwbGF5IiAnKyh3a2lfc2V0dGluZ3Mud2tpX3Nyc19sZXZlbHVwX2Rpc3BsYXkgPT09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykrJyAvPiA8bGFiZWwgZm9yPSJ3a2lfc2V0dGluZ3Nfc3JzX2xldmVsdXBfZGlzcGxheSI+V2hlbiBhbiBpdGVtIGxldmVsIHVwLCBkaXNwbGF5IHRoZSBuZXcgU1JTIGxldmVsPC9sYWJlbD48L2xpPjxsaT48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJ3a2lfc2V0dGluZ3NfYXV0b19zaG93X2luZm8iICcrKHdraV9zZXR0aW5ncy53a2lfYXV0b19zaG93X2luZm8gPT09IHRydWUgPyAnY2hlY2tlZCcgOiAnJykrJyAvPiA8bGFiZWwgZm9yPSJ3a2lfc2V0dGluZ3NfYXV0b19zaG93X2luZm8iPkRpc3BsYXkgdGhlIGl0ZW0gaW5mb3JtYXRpb24gYWZ0ZXIgYSB3cm9uZyBhbnN3ZXI8L2xhYmVsPjwvbGk+PGxpPkJ1dHRvblwncyBiYWNrZ3JvdW5kIGNvbG9yIChkZWZhdWx0OiAjQTJBMkEyKTxiciAvPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0id2tpX3NldHRpbmdzX2J1dHRvbl9sYWJlbF9iZ2NvbG9yIiB2YWx1ZT0iJyt3a2lfc2V0dGluZ3Mud2tpX2J1dHRvbl9sYWJlbF9iZ2NvbG9yKyciIC8+PC9saT48bGk+QnV0dG9uXCdzIHRleHQgY29sb3IgIChkZWZhdWx0OiAjRkZGRkZGKTxiciAvPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0id2tpX3NldHRpbmdzX2J1dHRvbl9sYWJlbF90ZXh0Y29sb3IiIHZhbHVlPSInK3draV9zZXR0aW5ncy53a2lfYnV0dG9uX2xhYmVsX3RleHRjb2xvcisnIiAvPjwvbGk+PGxpPlRpbWUgdG8gd2FpdCBiZWZvcmUgbW92aW5nIHRvIHRoZSBuZXh0IHF1ZXN0aW9uIChtaWxpc2Vjb25kcywgZGVmYXVsdDogMCk8aW5wdXQgdHlwZT0idGV4dCIgaWQ9IndraV9zZXR0aW5nc190aW1lcl9zaG93X25leHRfaXRlbSIgdmFsdWU9Iicrd2tpX3NldHRpbmdzLndraV90aW1lcl9zaG93X25leHRfaXRlbSsnIiAvPjwvbGk+PGxpPjxhIGlkPSJ3a2lfc2V0dGluZ3NfY2FuY2VsIiBjbGFzcz0id2tpX2J0biIgc3R5bGU9ImZsb2F0OiBsZWZ0OyI+Q2FuY2VsPC9hPjxhIGlkPSJ3a2lfc2V0dGluZ3Nfc2F2ZSIgY2xhc3M9IndraV9idG4iIHN0eWxlPSJmbG9hdDogcmlnaHQ7Ij5TYXZlPC9hPjxiciBjbGFzcz0id2tpX2NsZWFyIiAvPjwvbGk+PC91bD48ZGl2IGNsYXNzPSJ3a2lfc2V0dGluZ3Nfc2F2ZWQiPlNldHRpbmdzIHNhdmVkPC9kaXY+PGRpdiBjbGFzcz0id2tpX3NldHRpbmdzX2Rpc2NhcmRlZCI+Q2hhbmdlcyBkaXNjYXJkZWQ8L2Rpdj4nCiAgICB9LAogICAgcG9zaXRpb246CiAgICB7CiAgICAgICAgbXk6ICdjZW50ZXInLCBhdDogJ2NlbnRlcicsCiAgICAgICAgdGFyZ2V0OiAkKHdpbmRvdykKICAgIH0sCiAgICBzdHlsZTogewogICAgICAgIGNsYXNzZXM6ICdxdGlwLWJvb3RzdHJhcCcKICAgIH0KfSk7CgpmdW5jdGlvbiBzZXR0aW5nc0NhbmNlbCgpCnsKICAgIGNvbnNvbGUubG9nKCdXS0k6IHNldHRpbmdzIG5vdCBzYXZlZCcpOwogICAgJCgnLndraV9zZXR0aW5nc19mb3JtJykuc2xpZGVVcCgpOwogICAgJCgnLndraV9zZXR0aW5nc19kaXNjYXJkZWQnKS5zbGlkZURvd24oKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgJCgnI3draV9jb25maWdfYnV0dG9uJykucXRpcCgiaGlkZSIpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQoJy53a2lfc2V0dGluZ3NfZm9ybScpLnNob3coKTsKICAgICAgICAgICAgJCgnLndraV9zZXR0aW5nc19zYXZlZCcpLmhpZGUoKTsKICAgICAgICAgICAgJCgnLndraV9zZXR0aW5nc19kaXNjYXJkZWQnKS5oaWRlKCk7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9LCAxMzAwKTsKfQoKZnVuY3Rpb24gc2V0dGluZ3NTYXZlKCkKewogICAgd2tpX3NldHRpbmdzLndraV9hdWRpb19hdXRvcGxheSA9ICQoIiN3a2lfc2V0dGluZ3NfYXVkaW9fYXV0b3BsYXkiKS5pcygiOmNoZWNrZWQiKSA/IHRydWUgOiBmYWxzZTsKICAgIHdraV9zZXR0aW5ncy53a2lfdGltZXJfc2hvd19uZXh0X2l0ZW0gPSAkKCcjd2tpX3NldHRpbmdzX3RpbWVyX3Nob3dfbmV4dF9pdGVtJykudmFsKCk7CiAgICB3a2lfc2V0dGluZ3Mud2tpX2J1dHRvbl9sYWJlbF9iZ2NvbG9yID0gJCgnI3draV9zZXR0aW5nc19idXR0b25fbGFiZWxfYmdjb2xvcicpLnZhbCgpOwogICAgd2tpX3NldHRpbmdzLndraV9idXR0b25fbGFiZWxfdGV4dGNvbG9yID0gJCgnI3draV9zZXR0aW5nc19idXR0b25fbGFiZWxfdGV4dGNvbG9yJykudmFsKCk7CiAgICB3a2lfc2V0dGluZ3Mud2tpX2NvbWJvX2Rpc3BsYXkgPSAkKCIjd2tpX3NldHRpbmdzX2NvbWJvX2Rpc3BsYXkiKS5pcygiOmNoZWNrZWQiKSA/IHRydWUgOiBmYWxzZTsKICAgIHdraV9zZXR0aW5ncy53a2lfc3JzX2xldmVsdXBfZGlzcGxheSA9ICQoIiN3a2lfc2V0dGluZ3Nfc3JzX2xldmVsdXBfZGlzcGxheSIpLmlzKCI6Y2hlY2tlZCIpID8gdHJ1ZSA6IGZhbHNlOwogICAgd2tpX3NldHRpbmdzLndraV9hdXRvX3Nob3dfaW5mbyA9ICQoIiN3a2lfc2V0dGluZ3NfYXV0b19zaG93X2luZm8iKS5pcygiOmNoZWNrZWQiKSA/IHRydWUgOiBmYWxzZTsKCiAgICAkLmpTdG9yYWdlLnNldCgnd2tpX3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkod2tpX3NldHRpbmdzKSk7CgogICAgJCgnLndraV9idXR0b25faXRlbV9sYWJlbCcpLmNzcyh7J2NvbG9yJyA6IHdraV9zZXR0aW5ncy53a2lfYnV0dG9uX2xhYmVsX3RleHRjb2xvciwgJ2JhY2tncm91bmQtY29sb3InOiB3a2lfc2V0dGluZ3Mud2tpX2J1dHRvbl9sYWJlbF9iZ2NvbG9yfSk7CgogICAgaWYod2tpX3NldHRpbmdzLndraV9jb21ib19kaXNwbGF5ICE9PSB0cnVlKQogICAgewogICAgICAgICQoJyN3a2lfY29tYm9fZGlzcGxheScpLmhpZGUoKTsKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkKCcjd2tpX2NvbWJvX2Rpc3BsYXknKS5zaG93KCk7CiAgICB9CgogICAgaWYod2tpX3NldHRpbmdzLndraV9zcnNfbGV2ZWx1cF9kaXNwbGF5ICE9PSB0cnVlKQogICAgewogICAgICAgICQoJyN3a2lfc3JzX3BvcHVwX3dyYXBwZXInKS5oaWRlKCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJCgnI3draV9zcnNfcG9wdXBfd3JhcHBlcicpLnNob3coKTsKICAgIH0KCiAgICAkKCcud2tpX3NldHRpbmdzX2Zvcm0nKS5zbGlkZVVwKCk7CiAgICAkKCcud2tpX3NldHRpbmdzX3NhdmVkJykuc2xpZGVEb3duKCk7CgogICAgY29uc29sZS5sb2coJ1dLSTogc2V0dGluZ3Mgc2F2ZWQnKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgJCgnI3draV9jb25maWdfYnV0dG9uJykucXRpcCgiaGlkZSIpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQoJy53a2lfc2V0dGluZ3NfZm9ybScpLnNob3coKTsKICAgICAgICAgICAgJCgnLndraV9zZXR0aW5nc19zYXZlZCcpLmhpZGUoKTsKICAgICAgICAgICAgJCgnLndraV9zZXR0aW5nc19kaXNjYXJkZWQnKS5oaWRlKCk7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9LCAxMzAwKTsKfQoKCiQoJyNyZXBvcnQtZXJyb3JzIGEnKS5hdHRyKCdocmVmJywgJ2phdmFzY3JpcHQ6dm9pZCgwKTsnKTsKJCgnI3JlcG9ydC1lcnJvcnMnKS5hZGRDbGFzcygnd2tpX3Rvb2x0aXAnKS5hdHRyKCdyZWwnLCAnd2tpX2J1Z19tZXNzYWdlJykuYXBwZW5kKCc8c3BhbiBjbGFzcz0id2tpX2hpZGRlbiIgaWQ9IndraV9idWdfbWVzc2FnZSI+QmVmb3JlIHNlbmRpbmcgYSBidWcgcmVwb3J0LCBkaXNhYmxlIFdhbmlLYW5pIEltcHJvdmUgYW5kIGFsbCBvdGhlciBzY3JpcHRzIHJ1bm5pbmcgaW4gdGhlIHBhZ2UuIElmIHRoZSBlcnJvciBwZXJzaXN0cywgY29udGFjdCBXYW5pS2FuaSBhbmQgcmVwb3J0IHRoZSBwcm9ibGVtLjwvc3Bhbj4nKTsKCiQoJy53a2lfdG9vbHRpcCcpLmVhY2goZnVuY3Rpb24oKSB7CiAgICBpZigkKHRoaXMpLmF0dHIoJ3JlbCcpKQogICAgewogICAgICAgIHZhciBxdGlwX2NvbnRlbnQgPSAkKCcjJyskKHRoaXMpLmF0dHIoJ3JlbCcpKS5odG1sKCk7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgdmFyIHF0aXBfY29udGVudCA9ICQodGhpcykuYXR0cigndGl0bGUnKTsKICAgIH0KICAgICQodGhpcykucXRpcCh7CiAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIGNsYXNzZXM6ICdxdGlwLWJvb3RzdHJhcCBxdGlwLXNoYWRvdycKICAgICAgICAgICB9LAogICAgICAgICAgIGhpZGU6IHsKICAgIAkJCWRlbGF5OiAxMDAsCiAgICAJCQlldmVudDogJ3VuZm9jdXMgbW91c2VsZWF2ZScsCiAgICAJCQlmaXhlZDogdHJ1ZQogICAgCQl9LAogICAgICAgICAgICBwb3NpdGlvbjoKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbXk6ICdib3R0b20gY2VudGVyJywKICAgICAgICAgICAgICAgIGF0OiAndG9wIGNlbnRlcicsCiAgICAgICAgICAgICAgICB2aWV3cG9ydDogJCh3aW5kb3cpLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnc2hpZnQgbm9uZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29udGVudDogcXRpcF9jb250ZW50CiAgICB9KTsKfSk7CgokKHdpbmRvdykudW5sb2FkKGZ1bmN0aW9uKCl7CiAgICBpZih3a2lfaGl0X2NvbWJvID4gd2tpX2NvbWJvX3JlY29yZCkKICAgIHsKICAgICAgICAkLmpTdG9yYWdlLnNldCgnd2tpX2NvbWJvX3JlY29yZCcsIHdraV9oaXRfY29tYm8pOwogICAgICAgIGNvbnNvbGUubG9nKCdXS0k6IENvbWJvIHJlY29yZCBzYXZlZCcpOwogICAgfQp9KTs=",
            "storage": {
                "data": {},
                "ts": 1607436649591
            },
            "uuid": "38820d1c-0915-49b6-a73f-2b2d2f9cfbd9"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/23696-wanikani-override/code/Wanikani%20Override.user.js",
            "name": "Wanikani Override",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [
                        "http://www.wanikani.com/review/session*",
                        "https://www.wanikani.com/review/session*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 3,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFdhbmlrYW5pIE92ZXJyaWRlCi8vIEBuYW1lc3BhY2UgICB3a292ZXJyaWRlCi8vIEBkZXNjcmlwdGlvbiBBZGRzIGFuICJJZ25vcmUgQW5zd2VyIiBidXR0b24gZHVyaW5nIHJldmlld3MgdGhhdCBtYWtlcyBXYW5pS2FuaSBpZ25vcmUgdGhlIGN1cnJlbnQgYW5zd2VyICh1c2VmdWwgaWYsIGZvciBleGFtcGxlLCB5b3UgbWFkZSBhIHN0dXBpZCB0eXBvKQovLyBAaW5jbHVkZSAgICAgaHR0cDovL3d3dy53YW5pa2FuaS5jb20vcmV2aWV3L3Nlc3Npb24qCi8vIEBpbmNsdWRlICAgICBodHRwczovL3d3dy53YW5pa2FuaS5jb20vcmV2aWV3L3Nlc3Npb24qCi8vIEB2ZXJzaW9uICAgICAxLjIKLy8gQGF1dGhvciAgICAgIE1lbXBvCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEByZXF1aXJlICAgICBodHRwOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjExLjIubWluLmpzCi8vIEBsaWNlbnNlICAgICBHUEwgdmVyc2lvbiAzIG9yIGFueSBsYXRlciB2ZXJzaW9uOyBodHRwOi8vd3d3LmdudS5vcmcvY29weWxlZnQvZ3BsLmh0bWwKLy8gPT0vVXNlclNjcmlwdD09CgovL09yaWdpbmFsIGF1dGhvcjogUnVpIFBpbmhlaXJvCgovLyBFU0Mgc2hvcnRjdXQKCgovKgogKiBEZWJ1ZyBTZXR0aW5ncwogKi8KdmFyIGRlYnVnTG9nRW5hYmxlZCA9IHRydWU7CnZhciBzY3JpcHRTaG9ydE5hbWUgPSAnV0tPJzsKc2NyaXB0TG9nID0gZGVidWdMb2dFbmFibGVkID8gZnVuY3Rpb24gKG1zZykgewogIGlmICh0eXBlb2YgbXNnID09PSAnc3RyaW5nJykgewogICAgY29uc29sZS5sb2coc2NyaXB0U2hvcnROYW1lICsgJzogJyArIG1zZyk7CiAgfSBlbHNlIHsKICAgIGNvbnNvbGUubG9nKG1zZyk7CiAgfQp9CiA6IGZ1bmN0aW9uICgpIHsKfTsKLyoKICogT3RoZXIgc2V0dGluZ3MKICovCnZhciBwcmVmQWxsb3dVbmlnbm9yZSA9IHRydWU7Ci8qCiAqICJJZ25vcmUgQW5zd2VyIiBCdXR0b24gQ2xpY2sKICovCnZhciBBY3Rpb25FbnVtID0gT2JqZWN0LmZyZWV6ZSh7CiAgaWdub3JlOiAwLAogIHVuaWdub3JlOiAxCn0pOwpmdW5jdGlvbiBXS09faWdub3JlQW5zd2VyKCkKewogIHRyeQogIHsKICAgIC8qIENoZWNrIGlmIHRoZSBjdXJyZW50IGl0ZW0gd2FzIGFuc3dlcmVkIGluY29ycmVjdGx5ICovCiAgICB2YXIgZWxtbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaW5jb3JyZWN0Jyk7CiAgICB2YXIgZWxtbnRzMiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ1dLT19pZ25vcmVkJyk7CiAgICAKICAgIHZhciBjdXJBY3Rpb247CiAgICBpZiAoIWlzRW1wdHkoZWxtbnRzWzBdKSkgLy8gQ3VycmVudCBhbnN3ZXIgaXMgd3JvbmcKICAgIGN1ckFjdGlvbiA9IEFjdGlvbkVudW0uaWdub3JlOwogICAgIGVsc2UgaWYgKHByZWZBbGxvd1VuaWdub3JlICYmICFpc0VtcHR5KGVsbW50czJbMF0pKSAvLyBDdXJyZW50IGFuc3dlciBpcyBpZ25vcmVkCiAgICBjdXJBY3Rpb24gPSBBY3Rpb25FbnVtLnVuaWdub3JlOwogICAgIGVsc2UKICAgIC8vIEVpdGhlciB0aGVyZSBpcyBubyBjdXJyZW50IGFuc3dlciwgb3IgaXQncyBjb3JyZWN0CiAgICB7CiAgICAgIGFsZXJ0KCdXS086IEN1cnJlbnQgaXRlbSB3YXNuXCd0IGFuc3dlcmVkIGluY29ycmVjdGx5LCBub3IgaWdub3JlZCBwcmV2aW91c2x5IScpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAKICAgIC8qIEdyYWIgaW5mb3JtYXRpb24gYWJvdXQgY3VycmVudCBxdWVzdGlvbiAqLwogCiAgICB2YXIgY3VySXRlbSA9ICQualN0b3JhZ2UuZ2V0KCdjdXJyZW50SXRlbScpOwogICAgdmFyIHF1ZXN0aW9uVHlwZSA9ICQualN0b3JhZ2UuZ2V0KCdxdWVzdGlvblR5cGUnKTsKIAogICAgLyogQnVpbGQgaXRlbSBuYW1lICovCiAgICB2YXIgaXRlbU5hbWU7CiAgICBpZiAoY3VySXRlbS5yYWQpCiAgICBpdGVtTmFtZSA9ICdyJzsKICAgICBlbHNlIGlmIChjdXJJdGVtLmthbikKICAgIGl0ZW1OYW1lID0gJ2snOwogICAgIGVsc2UKICAgIGl0ZW1OYW1lID0gJ3YnOwogICAgaXRlbU5hbWUgKz0gY3VySXRlbS5pZDsKICAgIHNjcmlwdExvZyhpdGVtTmFtZSk7CiAgICAvKiBHcmFiIGl0ZW0gZnJvbSBqU3RvcmFnZS4KICAgICAgICAgKiAKICAgICAgICAgKiBpdGVtLnJjIGFuZCBpdGVtLm1jID0+IFJlYWRpbmcvTWVhbmluZyBDb21wbGV0ZWQgKGlmIGFuc3dlcmVkIHRoZSBpdGVtIGNvcnJlY3RseSkKICAgICAgICAgKiBpdGVtLnJpIGFuZCBpdGVtLm1pID0+IFJlYWRpbmcvTWVhbmluZyBJbnZhbGlkIChudW1iZXIgb2YgbWlzdGFrZXMgYmVmb3JlIGFuc3dlcmluZyBjb3JyZWN0bHkpCiAgICAgICAgICovCiAgICB2YXIgaXRlbSA9ICQualN0b3JhZ2UuZ2V0KGl0ZW1OYW1lKSB8fCB7CiAgICB9OwogICAgLyogVXBkYXRlIHRoZSBpdGVtIGRhdGEgKi8KICAgIGlmIChxdWVzdGlvblR5cGUgPT09ICdtZWFuaW5nJykKICAgIHsKICAgICAgaWYgKCEoJ21pJyBpbiBpdGVtKSB8fCBpc0VtcHR5KGl0ZW0ubWkpKQogICAgICB7CiAgICAgICAgdGhyb3cgRXJyb3IoJ2l0ZW0ubWkgdW5kZWZpbmVkJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IAogICAgICBlbHNlIGlmIChpdGVtLm1pIDwgMCB8fCAoaXRlbS5taSA9PSAwICYmIGN1ckFjdGlvbiA9PSBBY3Rpb25FbnVtLmlnbm9yZSkpCiAgICAgIHsKICAgICAgICB0aHJvdyBFcnJvcignaXRlbS5taSB0b28gc21hbGwnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKGN1ckFjdGlvbiA9PSBBY3Rpb25FbnVtLmlnbm9yZSkKICAgICAgaXRlbS5taSAtPSAxOwogICAgICAgZWxzZQogICAgICBpdGVtLm1pICs9IDE7CiAgICAgIGRlbGV0ZSBpdGVtLm1jOwogICAgfSAKICAgIGVsc2UKICAgIHsKICAgICAgaWYgKCEoJ3JpJyBpbiBpdGVtKSB8fCBpc0VtcHR5KGl0ZW0ucmkpKQogICAgICB7CiAgICAgICAgdGhyb3cgRXJyb3IoJ2l0ZW0ucmkgdW5kZWZpbmVkJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IAogICAgICBlbHNlIGlmIChpdGVtLnJpIDwgMCB8fCAoaXRlbS5yaSA9PSAwICYmIGN1ckFjdGlvbiA9PSBBY3Rpb25FbnVtLmlnbm9yZSkpCiAgICAgIHsKICAgICAgICB0aHJvdyBFcnJvcignaS5yaSB0b28gc21hbGwnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKGN1ckFjdGlvbiA9PSBBY3Rpb25FbnVtLmlnbm9yZSkKICAgICAgaXRlbS5yaSAtPSAxOwogICAgICAgZWxzZQogICAgICBpdGVtLnJpICs9IDE7CiAgICAgIGRlbGV0ZSBpdGVtLnJjOwogICAgfQogICAgLyogU2F2ZSB0aGUgbmV3IHN0YXRlIGJhY2sgaW50byBqU3RvcmFnZSAqLwogCiAgICAkLmpTdG9yYWdlLnNldChpdGVtTmFtZSwgaXRlbSk7CiAgICAvKiBNb2RpZnkgdGhlIHF1ZXN0aW9ucyBjb3VudGVyIGFuZCB3cm9uZyBjb3VudGVyIGFuZCBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBhbnN3ZXIgZmllbGQgKi8KICAgIHZhciB3cm9uZ0NvdW50ID0gJC5qU3RvcmFnZS5nZXQoJ3dyb25nQ291bnQnKTsKICAgIHZhciBxdWVzdGlvbkNvdW50ID0gJC5qU3RvcmFnZS5nZXQoJ3F1ZXN0aW9uQ291bnQnKTsKICAgIGlmIChjdXJBY3Rpb24gPT0gQWN0aW9uRW51bS5pZ25vcmUpCiAgICB7CiAgICAgICQualN0b3JhZ2Uuc2V0KCd3cm9uZ0NvdW50Jywgd3JvbmdDb3VudCAtIDEpOwogICAgICAkLmpTdG9yYWdlLnNldCgncXVlc3Rpb25Db3VudCcsIHF1ZXN0aW9uQ291bnQgLSAxKTsKICAgICAgJCgnI2Fuc3dlci1mb3JtIGZpZWxkc2V0JykucmVtb3ZlQ2xhc3MoJ2luY29ycmVjdCcpOwogICAgICAkKCcjYW5zd2VyLWZvcm0gZmllbGRzZXQnKS5hZGRDbGFzcygnV0tPX2lnbm9yZWQnKTsKICAgIH0gCiAgICBlbHNlCiAgICB7CiAgICAgICQualN0b3JhZ2Uuc2V0KCd3cm9uZ0NvdW50Jywgd3JvbmdDb3VudCArIDEpOwogICAgICAkLmpTdG9yYWdlLnNldCgncXVlc3Rpb25Db3VudCcsIHF1ZXN0aW9uQ291bnQgKyAxKTsKICAgICAgJCgnI2Fuc3dlci1mb3JtIGZpZWxkc2V0JykucmVtb3ZlQ2xhc3MoJ1dLT19pZ25vcmVkJyk7CiAgICAgICQoJyNhbnN3ZXItZm9ybSBmaWVsZHNldCcpLmFkZENsYXNzKCdpbmNvcnJlY3QnKTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0gCiAgY2F0Y2ggKGVycikgewogICAgbG9nRXJyb3IoZXJyKTsKICB9Cn0KLyoKICogQmluZCAnficgYXMgYSBob3RrZXkgCiAqLwogCmZ1bmN0aW9uIGJpbmRIb3RrZXkoKQp7CiAgalF1ZXJ5KGRvY3VtZW50KS5vbigna2V5ZG93bi5yZXZpZXdTY3JlZW4nLCBmdW5jdGlvbiAoZXZlbnQpCiAgewogICAgaWYgKCQoJyNyZXZpZXdzJykuaXMoJzp2aXNpYmxlJykgJiYgISQoJyo6Zm9jdXMnKS5pcygndGV4dGFyZWEsIGlucHV0JykpCiAgICB7CiAgICAgIC8vYWxlcnQoJ2tleWNvZGU6ICcgKyBldmVudC5rZXlDb2RlKTsKICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7CiAgICAgICAgLy9jYXNlIDE3NjogLy9GaXJlZm94ICd+JwogICAgICAgIC8vY2FzZSAxOTI6IC8vQ2hyb21lICd+JwogICAgICAgIGNhc2UgMjc6IC8vIEVTQyBCdXR0b24KICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGlmICgkKCcjdXNlci1yZXNwb25zZScpLmlzKCc6ZGlzYWJsZWQnKSkKICAgICAgICAgICBXS09faWdub3JlQW5zd2VyKCk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0pOwp9Ci8qCiAqIEluamVjdCBJZ25vcmUgQnV0dG9uCiAqLwogCmZ1bmN0aW9uIGFkZElnbm9yZUFuc3dlckJ0bigpCnsKICB2YXIgZm9vdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Zvb3RlcicpLAogICAgICAkYnRuID0galF1ZXJ5KCc8ZGl2IGlkPSJXS09fYnV0dG9uIiB0aXRsZT0iSWdub3JlIEFuc3dlciI+SWdub3JlIEFuc3dlcjwvZGl2PicpLm9uKCdjbGljaycsIFdLT19pZ25vcmVBbnN3ZXIpOwogIGpRdWVyeShmb290ZXJbMF0pLnByZXBlbmQoJGJ0bik7Cn0KLyoKICogUHJlcGFyZXMgdGhlIHNjcmlwdAogKi8KIApmdW5jdGlvbiBzY3JpcHRJbml0KCkKewogIC8vIEFkZCBnbG9iYWwgQ1NTIHN0eWxlcwogIEdNX2FkZFN0eWxlKCcjV0tPX2J1dHRvbiB7YmFja2dyb3VuZC1jb2xvcjogI0NDMDAwMDsgY29sb3I6ICNGRkZGRkY7IGN1cnNvcjogcG9pbnRlcjsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDAuODEyNWVtOyBwYWRkaW5nOiAxMHB4OyB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO30nKTsKICBHTV9hZGRTdHlsZSgnI2Fuc3dlci1mb3JtIGZpZWxkc2V0LldLT19pZ25vcmVkIGlucHV0W3R5cGU9InRleHQiXTotbW96LXBsYWNlaG9sZGVyLCAjYW5zd2VyLWZvcm0gZmllbGRzZXQuV0tPX2lnbm9yZWQgaW5wdXRbdHlwZT0idGV4dCJdOi1tb3otcGxhY2Vob2xkZXIge2NvbG9yOiAjRkZGRkZGOyBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyIsc2Fucy1zZXJpZjsgZm9udC13ZWlnaHQ6IDMwMDsgdGV4dC1zaGFkb3c6IG5vbmU7IHRyYW5zaXRpb246IGNvbG9yIDAuMTVzIGxpbmVhciAwczsgfSAjYW5zd2VyLWZvcm0gZmllbGRzZXQuV0tPX2lnbm9yZWQgYnV0dG9uLCAjYW5zd2VyLWZvcm0gZmllbGRzZXQuV0tPX2lnbm9yZWQgaW5wdXRbdHlwZT0idGV4dCJdLCAjYW5zd2VyLWZvcm0gZmllbGRzZXQuV0tPX2lnbm9yZWQgaW5wdXRbdHlwZT0idGV4dCJdOmRpc2FibGVkIHsgYmFja2dyb3VuZC1jb2xvcjogI0ZGQ0MwMCAhaW1wb3J0YW50OyB9Jyk7CiAgc2NyaXB0TG9nKCdsb2FkZWQnKTsKICAvLyBTZXQgdXAgaG9va3MKICB0cnkKICB7CiAgICBhZGRJZ25vcmVBbnN3ZXJCdG4oKTsKICAgIGJpbmRIb3RrZXkoKTsKICB9IAogIGNhdGNoIChlcnIpIHsKICAgIGxvZ0Vycm9yKGVycik7CiAgfQp9Ci8qCiAqIEhlbHBlciBGdW5jdGlvbnMvVmFyaWFibGVzCiAqLwogCi8vdXNlICdqUXVlcnknIGZvciBncmVhc2Vtb25rZXkncyB2ZXJzaW9uLCAkIGlzIFdLJ3MgalF1ZXJ5CiAKJCA9IHVuc2FmZVdpbmRvdy4kOwpmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7CiAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09PSBudWxsKTsKfQovKgogKiBFcnJvciBoYW5kbGluZwogKiBDYW4gdXNlICdlcnJvci5zdGFjaycsIG5vdCBjcm9zcy1icm93c2VyICh0aG91Z2ggaXQgc2hvdWxkIHdvcmsgb24gRmlyZWZveCBhbmQgQ2hyb21lKQogKi8KIApmdW5jdGlvbiBsb2dFcnJvcihlcnJvcikKewogIHZhciBzdGFja01lc3NhZ2UgPSAnJzsKICBpZiAoJ3N0YWNrJyBpbiBlcnJvcikKICBzdGFja01lc3NhZ2UgPSAnXG5cdFN0YWNrOiAnICsgZXJyb3Iuc3RhY2s7CiAgY29uc29sZS5lcnJvcihzY3JpcHRTaG9ydE5hbWUgKyAnIEVycm9yOiAnICsgZXJyb3IubmFtZSArICdcblx0TWVzc2FnZTogJyArIGVycm9yLm1lc3NhZ2UgKyBzdGFja01lc3NhZ2UpOwp9Ci8qCiAqIFN0YXJ0IHRoZSBzY3JpcHQKICovCiAKc2NyaXB0SW5pdCgpOwoKLy8gSG9vayBpbnRvIEFwcCBTdG9yZQp0cnkgeyAkKCcuYXBwLXN0b3JlLW1lbnUtaXRlbScpLnJlbW92ZSgpOyAkKCc8bGkgY2xhc3M9ImFwcC1zdG9yZS1tZW51LWl0ZW0iPjxhIGhyZWY9Imh0dHBzOi8vY29tbXVuaXR5LndhbmlrYW5pLmNvbS90L3RoZXJlLWFyZS1zby1tYW55LXVzZXItc2NyaXB0cy1ub3ctdGhhdC1kaXNjb3ZlcmluZy10aGVtLWlzLWhhcmQvMjA3MDkiPkFwcCBTdG9yZTwvYT48L2xpPicpLmluc2VydEJlZm9yZSgkKCcubmF2YmFyIC5kcm9wZG93bi1tZW51IC5uYXYtaGVhZGVyOmNvbnRhaW5zKCJBY2NvdW50IiknKSk7IHdpbmRvdy5hcHBTdG9yZVJlZ2lzdHJ5ID0gd2luZG93LmFwcFN0b3JlUmVnaXN0cnkgfHwge307IHdpbmRvdy5hcHBTdG9yZVJlZ2lzdHJ5W0dNX2luZm8uc2NyaXB0LnV1aWRdID0gR01faW5mbzsgbG9jYWxTdG9yYWdlLmFwcFN0b3JlUmVnaXN0cnkgPSBKU09OLnN0cmluZ2lmeShhcHBTdG9yZVJlZ2lzdHJ5KTsgfSBjYXRjaCAoZSkge30=",
            "storage": {
                "data": {},
                "ts": 1607436649612
            },
            "uuid": "7da2a58d-d2aa-4e58-81fd-d5c8b940fca5"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/13475-wanikani-ultimate-timeline/code/Wanikani%20Ultimate%20Timeline.user.js",
            "name": "Wanikani Ultimate Timeline",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [
                        "/^https://(www|preview).wanikani.com/(dashboard)?$/"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-end",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 4,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFdhbmlrYW5pIFVsdGltYXRlIFRpbWVsaW5lCi8vIEBuYW1lc3BhY2UgICByZmluZGxleQovLyBAZGVzY3JpcHRpb24gUmV2aWV3IHNjaGVkdWxlIGV4cGxvcmVyIGZvciBXYW5pS2FuaQovLyBAdmVyc2lvbiAgICAgNy4wLjMwCi8vIEBpbmNsdWRlICAgICAvXmh0dHBzOi8vKHd3d3xwcmV2aWV3KS53YW5pa2FuaS5jb20vKGRhc2hib2FyZCk/JC8KLy8gQGNvcHlyaWdodCAgIDIwMTgrLCBSb2JpbiBGaW5kbGV5Ci8vIEBsaWNlbnNlICAgICBNSVQ7IGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyBAZ3JhbnQgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCndpbmRvdy50aW1lbGluZSA9IHt9OwoKKGZ1bmN0aW9uKGdvYmopIHsKCiAgICAvKiBnbG9iYWwgJCwgd2tvZiAqLwogICAgLyogZXNsaW50IG5vLW11bHRpLXNwYWNlczogIm9mZiIgKi8KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEluaXRpYWxpemF0aW9uIG9mIHRoZSBXYW5pa2FuaSBPcGVuIEZyYW1ld29yay4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFyIHNjcmlwdF9uYW1lID0gJ1VsdGltYXRlIFRpbWVsaW5lJzsKICAgIHZhciB3a29mX3ZlcnNpb25fbmVlZGVkID0gJzEuMC4yNyc7CiAgICBpZiAoIXdpbmRvdy53a29mKSB7CiAgICAgICAgaWYgKGNvbmZpcm0oc2NyaXB0X25hbWUrJyByZXF1aXJlcyBXYW5pa2FuaSBPcGVuIEZyYW1ld29yay5cbkRvIHlvdSB3YW50IHRvIGJlIGZvcndhcmRlZCB0byB0aGUgaW5zdGFsbGF0aW9uIGluc3RydWN0aW9ucz8nKSkgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwczovL2NvbW11bml0eS53YW5pa2FuaS5jb20vdC9pbnN0cnVjdGlvbnMtaW5zdGFsbGluZy13YW5pa2FuaS1vcGVuLWZyYW1ld29yay8yODU0OSc7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh3a29mLnZlcnNpb24uY29tcGFyZV90byh3a29mX3ZlcnNpb25fbmVlZGVkKSA9PT0gJ29sZGVyJykgewogICAgICAgIGlmIChjb25maXJtKHNjcmlwdF9uYW1lKycgcmVxdWlyZXMgV2FuaWthbmkgT3BlbiBGcmFtZXdvcmsgdmVyc2lvbiAnK3drb2ZfdmVyc2lvbl9uZWVkZWQrJy5cbkRvIHlvdSB3YW50IHRvIGJlIGZvcndhcmRlZCB0byB0aGUgdXBkYXRlIHBhZ2U/JykpIHsKICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9zY3JpcHRzLzM4NTgyLXdhbmlrYW5pLW9wZW4tZnJhbWV3b3JrJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIHdrb2YuaW5jbHVkZSgnSXRlbURhdGEsTWVudSxTZXR0aW5ncycpOwogICAgd2tvZi5yZWFkeSgnZG9jdW1lbnQsSXRlbURhdGEsTWVudSxTZXR0aW5ncycpLnRoZW4obG9hZF9zZXR0aW5ncykudGhlbihzdGFydHVwKTsKCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIENoYXJ0IGRlZmluaW5nIHRoZSBhdXRvLXNjYWxpbmcgZmFjdG9ycyBvZiB0aGUgWC1heGlzLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgeHNjYWxlID0gewogICAgICAgIC8vIFNjYWxpbmcgY2hhcnQuICBFYWNoIGNvbHVtbiByZXByZXNlbnRzIGEgc2NhbGluZyByYW5nZSwKICAgICAgICAvLyBhbmQgZWFjaCByb3cgaXMgc29tZXRoaW5nIHRoYXQgd2UgYXJlIHNjYWxpbmcuCiAgICAgICAgaG91cnNfcGVyX2xhYmVsOiAgIFsgIDEgLCAgMyAsICA2ICwgIDEyICwgIDI0ICwgIDQ4ICwgNzIwIF0sCiAgICAgICAgcmVkX3RpY19jaG9pY2VzOiAgIFsnMWQnLCcxZCcsJzFkJywgJzFkJywgJzF3JywnMXdzJywgJzFtJ10sIC8vIFJlZCBtYWpvciB0aWNzIChyZWQgbGFiZWwpCiAgICAgICAgbWFqb3JfdGljX2Nob2ljZXM6IFsnMWgnLCczaCcsJzZoJywnMTJoJywgJzFkJywnMWRzJywgJzVEJ10sIC8vIE1ham9yIHRpY3MgKGhhcyBsYWJlbCkKICAgICAgICBtaW5vcl90aWNfY2hvaWNlczogWyAnLScsJzFoJywnMWgnLCAnM2gnLCAnNmgnLCcxMmgnLCAnMWQnXSwgLy8gTWlub3IgdGljcyAobm8gbGFiZWwpCiAgICAgICAgYnVuZGxlX2Nob2ljZXMgICA6IFsgIDEgLCAgMSAsICAxICwgICAzICwgICA2ICwgIDEyICwgIDI0IF0sIC8vIEhvdyBtYW55IGhvdXJzIGFyZSBidW5kbGVkIHRvZ2V0aGVyLgogICAgICAgIGlkeDogMAogICAgfTsKCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEludGVyYWwgZ2xvYmFsIG9iamVjdCBmb3IgY2VudHJhbGl6aW5nIGRhdGEgYW5kIGNvbmZpZ3VyYXRpb24uCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHZhciBncmFwaCA9IHsKICAgICAgICBlbGVtOiBudWxsLAogICAgICAgIG1hcmdpbjogewogICAgICAgICAgICB0b3A6IDE2LAogICAgICAgICAgICBsZWZ0OiAyOCwKICAgICAgICAgICAgYm90dG9tOiAxNiwKICAgICAgICB9LAogICAgICAgIHhfYXhpczogewogICAgICAgICAgICB3aWR0aDogMCwKICAgICAgICAgICAgbWF4X2hvdXJzOiAwLAogICAgICAgICAgICBwaXhlbHNfcGVyX3RpYzogMCwKICAgICAgICB9LAogICAgICAgIHlfYXhpczogewogICAgICAgICAgICBoZWlnaHQ6IDEwMCwKICAgICAgICAgICAgbWluX2hlaWdodDogODAsCiAgICAgICAgICAgIG1heF9oZWlnaHQ6IDMwMCwKICAgICAgICAgICAgbWF4X3Jldmlld3M6IDAsCiAgICAgICAgfSwKICAgICAgICByYWRpY2FsX2NhY2hlOiB7fSwKICAgIH07CiAgICBnb2JqLmdyYXBoID0gZ3JhcGg7CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBHbG9iYWwgdXRpbGl0eSBmdW5jdGlvbnMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRvX3RpdGxlX2Nhc2Uoc3RyKSB7cmV0dXJuIHN0ci5yZXBsYWNlKC9cd1xTKi9nLCBmdW5jdGlvbih0eHQpe3JldHVybiB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCk7fSk7fQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gR2xvYmFsIHZhcmlhYmxlcwogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgc2V0dGluZ3MsIHNldHRpbmdzX2RpYWxvZzsKICAgIHZhciB0el9vZnMgPSBuZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgICB2YXIgdGltZV9zaGlmdCA9IE1hdGguY2VpbCh0el9vZnMgLyA2MCkgKiA2MCAtIHR6X29mczsKCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gTG9hZCB0aGUgc2NyaXB0IHNldHRpbmdzLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBsb2FkX3NldHRpbmdzKCkgewogICAgICAgIHZhciBkZWZhdWx0cyA9IHsKICAgICAgICAgICAgbWluaW1pemVkOiBmYWxzZSwKICAgICAgICAgICAgcGxhY2VtZW50OiAnYmVmb3JlX25leHRyZXZpZXcnLAogICAgICAgICAgICB0aW1lX2Zvcm1hdDogJzEyaG91cicsCiAgICAgICAgICAgIGdyYXBoX2hlaWdodDogMTAwLAogICAgICAgICAgICBtYXhfZGF5czogMTQsCiAgICAgICAgICAgIGRheXM6IDMuNSwKICAgICAgICAgICAgbWF4X2Jhcl93aWR0aDogNDAsCiAgICAgICAgICAgIG1heF9iYXJfaGVpZ2h0OiAwLAogICAgICAgICAgICBmaXhlZF9iYXJfaGVpZ2h0OiBmYWxzZSwKICAgICAgICAgICAgYmFyX3N0eWxlOiAnaXRlbV90eXBlJywKICAgICAgICAgICAgc3JzX2N1cnJfbmV4dDogJ2N1cnInLAogICAgICAgICAgICBjdXJyZW50X2xldmVsX21hcmtlcnM6ICdya3YnLAogICAgICAgICAgICBidXJuX21hcmtlcnM6ICdzaG93JywKICAgICAgICAgICAgc2hvd19yZXZpZXdfZGV0YWlsczogJ2Z1bGwnLAogICAgICAgICAgICByZXZpZXdfZGV0YWlsc19zdW1tYXJ5OiAnaXRlbV90eXBlJywKICAgICAgICAgICAgcmV2aWV3X2RldGFpbHNfYnV0dG9uczogdHJ1ZSwKICAgICAgICAgICAgc2hvd19iYXJfc3R5bGVfZHJvcGRvd246IHRydWUsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gd2tvZi5TZXR0aW5ncy5sb2FkKCd0aW1lbGluZScsIGRlZmF1bHRzKS50aGVuKGZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICBzZXR0aW5ncyA9IHdrb2Yuc2V0dGluZ3MudGltZWxpbmU7CiAgICAgICAgICAgIHN3aXRjaCAoc2V0dGluZ3Muc2hvd19tYXJrZXJzKSB7CiAgICAgICAgICAgICAgICBjYXNlICdub25lJzoKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5jdXJyZW50X2xldmVsX21hcmtlcnMgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYnVybl9tYXJrZXJzID0gJ2hpZGUnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnY3Vycic6CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuY3VycmVudF9sZXZlbF9tYXJrZXJzID0gJ3Jrdic7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYnVybl9tYXJrZXJzID0gJ2hpZGUnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnYnVybic6CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuY3VycmVudF9sZXZlbF9tYXJrZXJzID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmJ1cm5fbWFya2VycyA9ICdzaG93JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2JvdGgnOgogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmN1cnJlbnRfbGV2ZWxfbWFya2VycyA9ICdya3YnOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmJ1cm5fbWFya2VycyA9ICdzaG93JzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWxldGUgc2V0dGluZ3Muc2hvd19tYXJrZXJzOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBTdGFydHVwCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHN0YXJ0dXAoKSB7CiAgICAgICAgaW5zdGFsbF9jc3MoKTsKICAgICAgICBpbnN0YWxsX21lbnVfbGluaygpOwogICAgICAgIHBsYWNlX3RpbWVsaW5lKHRydWUgLyogZmlyc3RfdGltZSAqLyk7CiAgICAgICAgZmV0Y2hfYW5kX3VwZGF0ZSgpOwogICAgICAgIHN0YXJ0X3JlZnJlc2hfdGltZXIoKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEluc3RhbGwgYSBsaW5rIHRvIHRoZSBzZXR0aW5ncyBpbiB0aGUgbWVudS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gaW5zdGFsbF9tZW51X2xpbmsoKQogICAgewogICAgICAgIHdrb2YuTWVudS5pbnNlcnRfc2NyaXB0X2xpbmsoewogICAgICAgICAgICBuYW1lOiAndGltZWxpbmUnLAogICAgICAgICAgICBzdWJtZW51OiAnU2V0dGluZ3MnLAogICAgICAgICAgICB0aXRsZTogJ1VsdGltYXRlIFRpbWVsaW5lJywKICAgICAgICAgICAgb25fY2xpY2s6IG9wZW5fc2V0dGluZ3MKICAgICAgICB9KTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIFRvcC1sZXZlbCBIVE1MIGZvciB0aGUgc2NyaXB0LgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgdGltZWxpbmVfaHRtbCA9CiAgICAgICAgJzxzZWN0aW9uIGlkPSJ0aW1lbGluZSI+JysKICAgICAgICAnICA8aDQgY2xhc3M9Im5vX21pbiI+UmV2aWV3cyBUaW1lbGluZTwvaDQ+JysKICAgICAgICAnICA8aSBjbGFzcz0ibGluayBvcGVuIG5vc2VsZWN0IG5vX21pbiBmYSBmYS1jaGV2cm9uLXVwIiB0aXRsZT0iT3BlbiB0aGUgdGltZWxpbmUiPjwvaT4nKwogICAgICAgICcgIDxpIGNsYXNzPSJsaW5rIG1pbmltaXplIG5vc2VsZWN0IGZhIGZhLWNoZXZyb24tZG93biIgdGl0bGU9Ik1pbmltaXplIHRoZSB0aW1lbGluZSI+PC9pPicrCiAgICAgICAgJyAgPGkgY2xhc3M9ImxpbmsgcmVmcmVzaCBub3NlbGVjdCBmYSBmYS1yZWZyZXNoIiB0aXRsZT0iUmVmcmVzaCI+PC9pPicrCiAgICAgICAgJyAgPGkgY2xhc3M9Imxpbmsgc2V0dGluZ3Mgbm9zZWxlY3QgZmEgZmEtZ2VhciIgdGl0bGU9IkNoYW5nZSB0aW1lbGluZSBzZXR0aW5ncyI+PC9pPicrCiAgICAgICAgJyAgPHNwYW4gY2xhc3M9ImJhcl9zdHlsZSBoaWRkZW4iPjxsYWJlbD5CYXIgU3R5bGU6IDwvbGFiZWw+PHNlbGVjdD4nKwogICAgICAgICcgICAgPG9wdGlvbiBuYW1lPSJjb3VudCI+UmV2aWV3IENvdW50PC9vcHRpb24+JysKICAgICAgICAnICAgIDxvcHRpb24gbmFtZT0iaXRlbV90eXBlIj5JdGVtIFR5cGU8L29wdGlvbj4nKwogICAgICAgICcgICAgPG9wdGlvbiBuYW1lPSJzcnNfc3RhZ2UiPlNSUyBMZXZlbDwvb3B0aW9uPicrCiAgICAgICAgJyAgICA8b3B0aW9uIG5hbWU9ImxldmVsIj5MZXZlbDwvb3B0aW9uPicrCiAgICAgICAgJyAgPC9zZWxlY3Q+PC9zcGFuPicrCiAgICAgICAgJyAgPGZvcm0gY2xhc3M9InJhbmdlX2Zvcm0iIGNsYXNzPSJoaWRkZW4iPjxsYWJlbD48c3BhbiBjbGFzcz0icmFuZ2VfcmV2aWV3cyI+MDwvc3Bhbj4gcmV2aWV3cyBpbiA8c3BhbiBjbGFzcz0icmFuZ2VfZGF5cyI+MyBkYXlzPC9zcGFuPiA8aW5wdXQgY2xhc3M9InJhbmdlX2lucHV0IiB0eXBlPSJyYW5nZSIgbWluPSIwLjI1IiBtYXg9IjciIHZhbHVlPSIzIiBzdGVwPSIwLjI1IiBuYW1lPSJyYW5nZV9pbnB1dCI+PC9sYWJlbD48L2Zvcm0+PGJyIGNsZWFyPSJhbGwiIGNsYXNzPSJub19taW4iPicrCiAgICAgICAgJyAgPGRpdiBjbGFzcz0iZ3JhcGhfd3JhcCI+JysKICAgICAgICAnICAgIDxkaXYgY2xhc3M9InJldmlld19pbmZvIGhpZGRlbiI+PGRpdiBjbGFzcz0iaW5uZXIiPjwvZGl2PjwvZGl2PicrCiAgICAgICAgJyAgICA8ZGl2IGNsYXNzPSJncmFwaF9wYW5lbCI+PC9kaXY+JysKICAgICAgICAnICA8L2Rpdj4nKwogICAgICAgICc8L3NlY3Rpb24+JzsKCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEluc3RhbGwgdGhlIHN0eWxlIHNoZWV0IGZvciB0aGUgc2NyaXB0LgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBpbnN0YWxsX2NzcygpIHsKICAgICAgICB2YXIgdGltZWxpbmVfY3NzID0KICAgICAgICAgICAgJy5ub3NlbGVjdCB7LXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsgLWtodG1sLXVzZXItc2VsZWN0Om5vbmU7IC1tb3otdXNlci1zZWxlY3Q6bm9uZTsgLW1zLXVzZXItc2VsZWN0Om5vbmU7IHVzZXItc2VsZWN0Om5vbmU7IGN1cnNvcjpkZWZhdWx0O30nKwogICAgICAgICAgICAnLmRhc2hib2FyZCBzZWN0aW9uLnJldmlldy1zdGF0dXMge2JvcmRlci10b3A6IDFweCBzb2xpZCAjZmZmZmZmO30nKwogICAgICAgICAgICAnLmRhc2hib2FyZCBzZWN0aW9uLnJldmlldy1zdGF0dXMgdWwgbGkgdGltZSB7d2hpdGUtc3BhY2U6IG5vd3JhcDsgb3ZlcmZsb3cteDogaGlkZGVuOyBoZWlnaHQ6IDEuNWVtOyBtYXJnaW4tYm90dG9tOiAwO30nKwoKICAgICAgICAgICAgJyN0aW1lbGluZSB7bWFyZ2luLWJvdHRvbTogMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Q0ZDRkNDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSA+IGg0IHtjbGVhcjpub25lOyBmbG9hdDpsZWZ0OyBoZWlnaHQ6MjBweDsgbWFyZ2luLXRvcDowcHg7IG1hcmdpbi1ib3R0b206NHB4OyBmb250LXdlaWdodDpub3JtYWw7IG1hcmdpbi1yaWdodDoxMnB4O30nKwogICAgICAgICAgICAnQG1lZGlhIChtYXgtd2lkdGg6IDc2N3B4KSB7I3RpbWVsaW5lIGg0IHtkaXNwbGF5OiBub25lO319JysKICAgICAgICAgICAgJyN0aW1lbGluZSA+IC5saW5rIHtjb2xvcjpyZ2JhKDAsMCwwLDAuMyk7IGZvbnQtc2l6ZToxLjFlbTsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IGN1cnNvcjpwb2ludGVyOyBtYXJnaW4tcmlnaHQ6NHB4O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lID4gLmxpbms6aG92ZXIge2NvbG9yOnJnYmEoMjU1LDMxLDMxLDAuNSk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmU6bm90KC5taW4pID4gLmxpbmsub3BlbiwgI3RpbWVsaW5lLm1pbiA+IDpub3QoLm5vX21pbikge2Rpc3BsYXk6bm9uZTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSA+IC5yYW5nZV9mb3JtIHtmbG9hdDpyaWdodDsgbWFyZ2luLWJvdHRvbTowcHg7IHRleHQtYWxpZ246cmlnaHQ7fScrCgogICAgICAgICAgICAnI3RpbWVsaW5lIC5iYXJfc3R5bGUgbGFiZWwge2Rpc3BsYXk6aW5saW5lOyBtYXJnaW4tbGVmdDo4MHB4O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5iYXJfc3R5bGUgc2VsZWN0IHtoZWlnaHQ6YXV0bzsgcGFkZGluZzowOyB3aWR0aDphdXRvOyB2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZTsgYmFja2dyb3VuZC1jb2xvcjojZTNlM2UzOyBib3JkZXI6MXB4IHNvbGlkICNhYWE7IGJvcmRlci1yYWRpdXM6MnB4O30nKwogICAgICAgICAgICAnQG1lZGlhIChtYXgtd2lkdGg6IDk3OXB4KSB7JysKICAgICAgICAgICAgJyAgI3RpbWVsaW5lIC5iYXJfc3R5bGUge2Zsb2F0OmxlZnQ7IGNsZWFyOmJvdGg7IG1hcmdpbi1sZWZ0OmluaGVyaXQ7fScrCiAgICAgICAgICAgICcgICN0aW1lbGluZSAuYmFyX3N0eWxlIGxhYmVsIHttYXJnaW4tbGVmdDppbmhlcml0O30nKwogICAgICAgICAgICAnfScrCiAgICAgICAgICAgICdAbWVkaWEgKG1heC13aWR0aDogNzY3cHgpIHsjdGltZWxpbmUgLmxpbmsge2Zsb2F0OmxlZnQ7fX0nKwoKICAgICAgICAgICAgJyN0aW1lbGluZSA+IC5ncmFwaF9wYW5lbCBkaXYsICN0aW1lbGluZSA+IC5ncmFwaF9wYW5lbCBjYW52YXMge2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgPiAuZ3JhcGhfcGFuZWwgZGl2IHtib3JkZXI6MXB4IHNvbGlkICNkNGQ0ZDQ7fScrCgogICAgICAgICAgICAnI3RpbWVsaW5lIC5ncmFwaF93cmFwIHtwb3NpdGlvbjpyZWxhdGl2ZTt9JysKCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIHtwb3NpdGlvbjphYnNvbHV0ZTsgcGFkZGluZy1ib3R0b206MTUwcHg7IHotaW5kZXg6NTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm8gLmlubmVyIHtwYWRkaW5nOjRweCA4cHggOHB4IDhweDsgY29sb3I6I2VlZWVlZTsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDAuOCk7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXdlaWdodDpib2xkOyB6LWluZGV4OjI7IGJveC1zaXppbmc6Ym9yZGVyLWJveDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm8gLnN1bW1hcnkge2ZvbnQtZmFtaWx5OiJPcGVuIFNhbnMiLCJIZWx2ZXRpY2EgTmV1ZSIsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7IGZvbnQtc2l6ZToxM3B4OyBkaXNwbGF5OmlubGluZS1ibG9jazt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm8gLnN1bW1hcnkgZGl2IHtwYWRkaW5nOjBweCA4cHg7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIC5zdW1tYXJ5IC5pbmRlbnQge3BhZGRpbmc6MDsgbWFyZ2luLWJvdHRvbTo4cHg7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIC5zdW1tYXJ5IC5pbmRlbnQ6bGFzdC1jaGlsZCB7bWFyZ2luLWJvdHRvbTowO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbyAuc3VtbWFyeSAuZml4ZWQge3RleHQtYWxpZ246cmlnaHQ7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIC5zdW1tYXJ5IC50b3Qge2NvbG9yOiMwMDAwMDA7IGJhY2tncm91bmQtY29sb3I6I2VmZWZlZjsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZWZlZmVmLCAjY2ZjZmNmKTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm8gLml0ZW1zX3dyYXAge3Bvc2l0aW9uOnJlbGF0aXZlO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5zdW1tYXJ5IC5maXhlZCB7ZGlzcGxheTppbmxpbmUtYmxvY2s7IHBvc2l0aW9uOnJlbGF0aXZlO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbyAuc3VtbWFyeSAuaW5kZW50PmRpdiB7ZGlzcGxheTpub25lfScrCgogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9Iml0ZW1fdHlwZSJdIC5zdW1tYXJ5IC5pdGVtX3R5cGUge2Rpc3BsYXk6YmxvY2s7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ic3JzX3N0YWdlIl0gLnN1bW1hcnkgLnNyc19zdGFnZSB7ZGlzcGxheTpibG9jazt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJsZXZlbCJdIC5zdW1tYXJ5IC5sZXZlbCB7ZGlzcGxheTpibG9jazt9JysKCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0iY291bnQiXSAuaXRlbV9saXN0ID4gbGkge2JhY2tncm91bmQtY29sb3I6I2VlZTsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZWZlZmVmLCAjY2ZjZmNmKTsgY29sb3I6IzAwMDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJjb3VudCJdIC5pdGVtX2xpc3QgPiBsaSBzdmcge3N0cm9rZTojMDAwO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9Iml0ZW1fdHlwZSJdIC5yYWQge2JhY2tncm91bmQtY29sb3I6IzAwOTZlNzsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMGFmLCAjMDA5M2RkKTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJpdGVtX3R5cGUiXSAua2FuIHtiYWNrZ3JvdW5kLWNvbG9yOiNlZTAwYTE7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2YwYSwgI2RkMDA5Myk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0iaXRlbV90eXBlIl0gLnZvYyB7YmFja2dyb3VuZC1jb2xvcjojOTgwMGU4OyBiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNhMGYsICM5MzAwZGQpO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9InNyc19zdGFnZSJdIC5hcHByIHtiYWNrZ3JvdW5kLWNvbG9yOiNkZDAwOTM7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2ZmMDBhYSwgI2IzMDA3Nyk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ic3JzX3N0YWdlIl0gLmd1cnUge2JhY2tncm91bmQtY29sb3I6Izg4MmQ5ZTsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjYWEzOGM3LCAjNjYyMjc3KTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJzcnNfc3RhZ2UiXSAubWFzdCB7YmFja2dyb3VuZC1jb2xvcjojMjk0ZGRiOyBiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM1MTZlZTEsICMyMTQyYzQpO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9InNyc19zdGFnZSJdIC5lbmxpIHtiYWNrZ3JvdW5kLWNvbG9yOiMwMDkzZGQ7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzAwYWFmZiwgIzAwNzdiMyk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ic3JzX3N0YWdlIl0gLmJ1cm4ge2JhY2tncm91bmQtY29sb3I6IzQzNDM0MzsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjNDM0MzQzLCAjMWExYTFhKTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJzcnNfc3RhZ2UiXSBsaS5idXJuIHtib3JkZXI6MXB4IHNvbGlkICM3Nzc7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ibGV2ZWwiXSAubHZsZ3JwMCB7YmFja2dyb3VuZC1jb2xvcjojNWViNmU4OyBiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM1ZWI2ZTgsICMxZDhhYzkpO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9ImxldmVsIl0gLmx2bGdycDEge2JhY2tncm91bmQtY29sb3I6I2UyNWViYzsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZTI1ZWJjLCAjYzIyNDk1KTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJsZXZlbCJdIC5sdmxncnAyIHtiYWNrZ3JvdW5kLWNvbG9yOiNhZjc5YzM7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2FmNzljMywgIzg3NDc5ZSk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ibGV2ZWwiXSAubHZsZ3JwMyB7YmFja2dyb3VuZC1jb2xvcjojNzY4Y2U3OyBiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM3NjhjZTcsICMyNjRhZDkpO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mb1tkYXRhLW1vZGU9ImxldmVsIl0gLmx2bGdycDQge2JhY2tncm91bmQtY29sb3I6IzVlNWU2NDsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjNWU1ZTY0LCAjMzEzMTM1KTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAucmV2aWV3X2luZm9bZGF0YS1tb2RlPSJsZXZlbCJdIC5sdmxncnA1IHtiYWNrZ3JvdW5kLWNvbG9yOiNmNWM2Njc7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2Y1YzY2NywgI2YwYTUwZik7IGNvbG9yOiMzMzN9JysKCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvW2RhdGEtbW9kZT0ibGV2ZWwiXSAubHZsZ3JwNSBzdmcge3N0cm9rZTojMzMzfScrCgogICAgICAgICAgICAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbyAuc3VtbWFyeSAuaW5kZW50Pi5jdXIge2Rpc3BsYXk6YmxvY2s7IGZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojMDAwMDAwOyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmODg7IGJhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2ZmZmZhYSwgI2VlZWU3Nyk7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIC5zdW1tYXJ5IC5pbmRlbnQ+LmJ1ciB7ZGlzcGxheTpibG9jazsgZm9udC1zdHlsZTppdGFsaWM7IGNvbG9yOiNmZmZmZmY7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMDsgYmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjNDQ0NDQ0LCAjMDAwMDAwKTt9JysKCiAgICAgICAgICAgICcjdGltZWxpbmUgLml0ZW1fbGlzdCB7bWFyZ2luOiA4cHggMCAwIDA7IHBhZGRpbmc6IDBweDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSAuaXRlbV9saXN0ID4gbGkge3BhZGRpbmc6MCAzcHg7IG1hcmdpbjoxcHggMXB4OyBkaXNwbGF5OmlubGluZS1ibG9jazsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZToxNHB4OyBmb250LXdlaWdodDpub3JtYWw7IGN1cnNvcjpkZWZhdWx0OyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgcmdiYSgwLDAsMCwwKTt9JysKCiAgICAgICAgICAgICcjdGltZWxpbmVbZGF0YS1kZXRhaWw9ImZ1bGwiXSAuaXRlbV9saXN0ID4gbGkge2N1cnNvcjpwb2ludGVyO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5pdGVtX2luZm8ge3Bvc2l0aW9uOmFic29sdXRlOyBiYWNrZ3JvdW5kOiMzMzM7IGJvcmRlcjo4cHggc29saWQgcmdiYSgwLDAsMCwwLjcpOyBib3JkZXItcmFkaXVzOjZweDsgbGVmdDo0cHg7IHBhZGRpbmc6MCA4cHg7IHotaW5kZXg6MTA7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLml0ZW1faW5mbyAuaXRlbSB7Zm9udC1zaXplOjJlbTsgbGluZS1oZWlnaHQ6MS4yZW07fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgLnJldmlld19pbmZvIHN2Zy5yYWRpY2FsIHtmaWxsOm5vbmU7c3Ryb2tlOiNmZmY7c3Ryb2tlLXdpZHRoOjg1O3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbWl0ZXJsaW1pdDoyO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5pdGVtX2xpc3Qgc3ZnLnJhZGljYWwge3dpZHRoOjFlbTsgdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMnB4KTsgc3Ryb2tlLXdpZHRoOjg1O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5pdGVtX2luZm8gLml0ZW0gc3ZnLnJhZGljYWwge3dpZHRoOjI4cHg7IHRyYW5zZm9ybTp0cmFuc2xhdGVZKDJweCk7fScrCgogICAgICAgICAgICAnI3RpbWVsaW5lIC5kZXRhaWxfYnV0dG9ucyB7ZGlzcGxheTppbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOnRvcDsgbWFyZ2luLWxlZnQ6OHB4O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIC5kZXRhaWxfYnV0dG9ucyBidXR0b24ge2Rpc3BsYXk6YmxvY2s7IHdpZHRoOjEzMHB4OyBwYWRkaW5nOjA7IG1hcmdpbi1ib3R0b206MnB4OyBjb2xvcjojMDAwMDAwO30nKwoKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcge292ZXJmbG93OmhpZGRlbjt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLmdyaWQge3BvaW50ZXItZXZlbnRzOm5vbmU7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5ncmlkIHBhdGgge2ZpbGw6bm9uZTtzdHJva2U6YmxhY2s7c3Ryb2tlLWxpbmVjYXA6c3F1YXJlO3NoYXBlLXJlbmRlcmluZzpjcmlzcEVkZ2VzO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuZ3JpZCAubGlnaHQge3N0cm9rZTojZmZmZmZmO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuZ3JpZCAuc2hhZG93IHtzdHJva2U6I2Q1ZDVkNTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLmdyaWQgLm1ham9yIHtvcGFjaXR5OjAuMTU7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5ncmlkIC5taW5vciB7b3BhY2l0eTowLjA1O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuZ3JpZCAucmVkdGljIHtzdHJva2U6I2YyMjtvcGFjaXR5OjE7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5ncmlkIC5tYXgge3N0cm9rZTojZjIyO29wYWNpdHk6MC4yO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuYm91bmRhcnkge2ZpbGw6IzAwMDtvcGFjaXR5OjA7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5yZXNpemVfZ3JpcCB7ZmlsbDpub25lO2N1cnNvcjpyb3ctcmVzaXplO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAucmVzaXplX2dyaXAgLmxpZ2h0IHtzdHJva2U6I2ZmZmZmZjt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLnJlc2l6ZV9ncmlwIC5zaGFkb3cge3N0cm9rZTojYmJiO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyB0ZXh0LnJlZHRpYyB7ZmlsbDojZjIyO2ZvbnQtd2VpZ2h0OmJvbGQ7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5sYWJlbC14IHRleHQge3RleHQtYW5jaG9yOnN0YXJ0O2ZvbnQtc2l6ZTowLjhlbTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLmxhYmVsLXkgdGV4dCB7dGV4dC1hbmNob3I6ZW5kO2ZvbnQtc2l6ZTowLjhlbTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgdGV4dCB7cG9pbnRlci1ldmVudHM6bm9uZTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLmJhcnMgcmVjdCB7c3Ryb2tlOm5vbmU7c2hhcGUtcmVuZGVyaW5nOmNyaXNwRWRnZXM7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5iYXIub3ZlcmxheSB7b3BhY2l0eTowO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuYmtnZCB7ZmlsbDojZjdmN2Y3O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAucmFkIHtmaWxsOiMwMGExZjE7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5rYW4ge2ZpbGw6I2YxMDBhMTt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLnZvYyB7ZmlsbDojYTEwMGYxO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuc3VtIHtmaWxsOiMyOTRkZGI7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5hcHByIHtmaWxsOiNkZDAwOTM7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5ndXJ1IHtmaWxsOiM4ODJkOWU7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5tYXN0IHtmaWxsOiMyOTRkZGI7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5lbmxpIHtmaWxsOiMwMDkzZGQ7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5idXJuIHtmaWxsOiM0MzQzNDM7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5jb3VudCB7ZmlsbDojNzc4YWQ4O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwMCB7ZmlsbDojNWViNmU4O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwMSB7ZmlsbDojZTI1ZWJjO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwMiB7ZmlsbDojYWY3OWMzO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwMyB7ZmlsbDojNzY4Y2U3O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwNCB7ZmlsbDojNWU1ZTY0O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAubHZsZ3JwNSB7ZmlsbDojZjVjNjY3O30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuYmFycyAuY3VyIHtmaWxsOiNmZmZmZmY7b3BhY2l0eTowLjY7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5iYXJzIC5idXIge2ZpbGw6IzAwMDAwMDtvcGFjaXR5OjAuNDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLm1hcmtlcnMge3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjU7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5tYXJrZXJzIC5idXIge2ZpbGw6IzAwMDAwMDt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLm1hcmtlcnMgLmN1ciB7ZmlsbDojZmZmZmZmO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2ZyAuaGlnaGxpZ2h0IC5ib3VuZGFyeSB7Y3Vyc29yOnBvaW50ZXI7fScrCiAgICAgICAgICAgICcjdGltZWxpbmVbZGF0YS1kZXRhaWw9Im5vbmUiXSAuaGlnaGxpZ2h0IC5ib3VuZGFyeSB7Y3Vyc29yOmF1dG87fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5oaWdobGlnaHQgLm1hcmtlciB7cG9pbnRlci1ldmVudHM6bm9uZTtzaGFwZS1yZW5kZXJpbmc6Y3Jpc3BFZGdlczt9JysKICAgICAgICAgICAgJyN0aW1lbGluZSBzdmcgLmhpZ2hsaWdodCBwYXRoLm1hcmtlciB7ZmlsbDojMDBhMWYxOyBzdHJva2U6IzAwYTFmMTsgc3Ryb2tlLXdpZHRoOjI7fScrCiAgICAgICAgICAgICcjdGltZWxpbmUgc3ZnIC5oaWdobGlnaHQgcmVjdC5tYXJrZXIge2ZpbGw6cmdiYSgwLDE2MSwyNDEsMC4xKTsgc3Ryb2tlOiMwMGExZjE7IHN0cm9rZS13aWR0aDoxO30nKwogICAgICAgICAgICAnI3RpbWVsaW5lIHN2Zy5saW5rOmhvdmVyICoge2ZpbGw6cmdiKDI1NSwzMSwzMSk7fScrCiAgICAgICAgICAgICdib2R5Lm11dGVfcG9wb3ZlciAucG9wb3Zlci5zcnMge2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30nKwogICAgICAgICAgICAnJzsKCiAgICAgICAgJCgnaGVhZCcpLmFwcGVuZCgnPHN0eWxlPicrdGltZWxpbmVfY3NzKyc8L3N0eWxlPicpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBQbGFjZSB0aGUgdGltZWxpbmUgb24gdGhlIGRhc2hib2FyZCwgb3IgYWRqdXN0IGl0cyBsb2NhdGlvbiBvbiB0aGUgcGFnZS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gcGxhY2VfdGltZWxpbmUoZmlyc3RfdGltZSkgewogICAgICAgIHZhciB0aW1lbGluZSA9IChmaXJzdF90aW1lID8gJCh0aW1lbGluZV9odG1sKSA6ICQoJyN0aW1lbGluZScpKTsKICAgICAgICAkKCcucHJvZ3Jlc3MtYW5kLWZvcmVjYXN0JykuYmVmb3JlKHRpbWVsaW5lKTsKICAgICAgICBpZiAoZmlyc3RfdGltZSkgewogICAgICAgICAgICAvLyBJbml0aWFsaXplIFVJIGZyb20gc2V0dGluZ3MKICAgICAgICAgICAgZ3JhcGguZWxlbSA9IHRpbWVsaW5lLmZpbmQoJy5ncmFwaF9wYW5lbCcpOwogICAgICAgICAgICBncmFwaC54X2F4aXMud2lkdGggPSBncmFwaC5lbGVtLndpZHRoKCkgLSBncmFwaC5tYXJnaW4ubGVmdDsKICAgICAgICAgICAgZ3JhcGgueV9heGlzLmhlaWdodCA9IHNldHRpbmdzLmdyYXBoX2hlaWdodCAtIChncmFwaC5tYXJnaW4udG9wICsgZ3JhcGgubWFyZ2luLmJvdHRvbSk7CiAgICAgICAgICAgIHVwZGF0ZV9taW5pbWl6ZSgpOwogICAgICAgICAgICBpbml0X3VpKCk7CgogICAgICAgICAgICAvLyBJbnN0YWxsIGV2ZW50IGhhbmRsZXJzCiAgICAgICAgICAgIHRpbWVsaW5lLmZpbmQoJy5saW5rLm9wZW4sIC5saW5rLm1pbmltaXplJykub24oJ2NsaWNrJywgdG9nZ2xlX21pbmltaXplKTsKICAgICAgICAgICAgdGltZWxpbmUuZmluZCgnLmxpbmsucmVmcmVzaCcpLm9uKCdjbGljaycsIGZldGNoX2FuZF91cGRhdGUpOwogICAgICAgICAgICB0aW1lbGluZS5maW5kKCcubGluay5zZXR0aW5ncycpLm9uKCdjbGljaycsIG9wZW5fc2V0dGluZ3MpOwogICAgICAgICAgICB0aW1lbGluZS5maW5kKCcuYmFyX3N0eWxlIHNlbGVjdCcpLm9uKCdjaGFuZ2UnLCBiYXJfc3R5bGVfY2hhbmdlZCk7CiAgICAgICAgICAgIHRpbWVsaW5lLmZpbmQoJy5yYW5nZV9pbnB1dCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCBkYXlzX2NoYW5nZWQpOwogICAgICAgICAgICB0aW1lbGluZS5maW5kKCcucmV2aWV3X2luZm8+LmlubmVyJykub24oJ21vdXNlZW50ZXInLCAnLml0ZW1fbGlzdCA+IGxpJywgaXRlbV9ob3Zlcik7CiAgICAgICAgICAgIHRpbWVsaW5lLmZpbmQoJy5yZXZpZXdfaW5mbz4uaW5uZXInKS5vbignbW91c2VsZWF2ZScsICcuaXRlbV9saXN0JywgaXRlbV9ob3Zlcik7CiAgICAgICAgICAgIHRpbWVsaW5lLmZpbmQoJy5yZXZpZXdfaW5mbz4uaW5uZXInKS5vbignY2xpY2snLCAnLmRldGFpbF9idXR0b25zIGJ1dHRvbicsIGRldGFpbF9idXR0b25fY2xpY2tlZCk7CiAgICAgICAgICAgIHRpbWVsaW5lLmZpbmQoJy5yZXZpZXdfaW5mbz4uaW5uZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe3JldHVybiBmYWxzZTt9KTsKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHdpbmRvd19yZXNpemVkKTsKICAgICAgICB9CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIFRvZ2dsZSB3aGV0aGVyIHRoZSB0aW1lbGluZSBpcyBtaW5pbWl6ZWQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRvZ2dsZV9taW5pbWl6ZSgpIHsKICAgICAgICBzZXR0aW5ncy5taW5pbWl6ZWQgPSAhc2V0dGluZ3MubWluaW1pemVkOwogICAgICAgIHVwZGF0ZV9taW5pbWl6ZSgpOwogICAgICAgIHNhdmVfc2V0dGluZ3MoKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gSGlkZSBvciB1bmhpZGUgdGhlIHRpbWVsaW5lIHdoZW4gdGhlIHVzZXIgbWluaW1pemVzL3Jlc3RvcmVzLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB1cGRhdGVfbWluaW1pemUoKSB7CiAgICAgICAgdmFyIHRpbWVsaW5lID0gJCgnI3RpbWVsaW5lJyk7CiAgICAgICAgdmFyIGlzX21pbiA9IHRpbWVsaW5lLmhhc0NsYXNzKCdtaW4nKTsKICAgICAgICBpZiAoc2V0dGluZ3MubWluaW1pemVkICYmICFpc19taW4pIHsKICAgICAgICAgICAgdGltZWxpbmUuYWRkQ2xhc3MoJ21pbicpOwogICAgICAgIH0gZWxzZSBpZiAoIXNldHRpbmdzLm1pbmltaXplZCAmJiBpc19taW4pIHsKICAgICAgICAgICAgdGltZWxpbmUucmVtb3ZlQ2xhc3MoJ21pbicpOwogICAgICAgIH0KICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gVXBkYXRlIHRoZSB0aW1lbGluZSBhZnRlciB0aGUgdXNlciBjaGFuZ2VzIHRoZSBudW1iZXIgb2YgZGF5cyB0byBkaXNwbGF5LgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBkYXlzX2NoYW5nZWQoKSB7CiAgICAgICAgdmFyIGRheXMgPSBOdW1iZXIoJCgnI3RpbWVsaW5lIC5yYW5nZV9pbnB1dCcpLnZhbCgpKTsKICAgICAgICBpZiAoZGF5cyA9PT0gc2V0dGluZ3MuZGF5cykgcmV0dXJuOwogICAgICAgIHNldHRpbmdzLmRheXMgPSBkYXlzOwogICAgICAgIHVwZGF0ZV9zbGlkZXJfZGF5cygpOwogICAgICAgIGJ1bmRsZV9ieV90aW1lc2xvdCgpOwogICAgICAgIHVwZGF0ZV9zbGlkZXJfcmV2aWV3cygpOwogICAgICAgIGRyYXdfdGltZWxpbmUoKTsKICAgICAgICBzYXZlX3NldHRpbmdzKCk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEhhbmRsZXIgZm9yIHdoZW4gdXNlciBjaGFuZ2VzIHRoZSBCYXIgU3R5bGUuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGJhcl9zdHlsZV9jaGFuZ2VkKCkgewogICAgICAgIHNldHRpbmdzLmJhcl9zdHlsZSA9ICQoJyN0aW1lbGluZSAuYmFyX3N0eWxlIHNlbGVjdCA6c2VsZWN0ZWQnKS5hdHRyKCduYW1lJyk7CiAgICAgICAgZHJhd190aW1lbGluZSgpOwogICAgICAgIHNhdmVfc2V0dGluZ3MoKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gSGFuZGxlciBmb3Igd2hlbiB1c2VyIGNsaWNrcyAnU2F2ZScgaW4gdGhlIHNldHRpbmdzIHdpbmRvdy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc2V0dGluZ3Nfc2F2ZWQoKSB7CiAgICAgICAgc2V0dGluZ3MgPSB3a29mLnNldHRpbmdzLnRpbWVsaW5lOwogICAgICAgIHBsYWNlX3RpbWVsaW5lKGZhbHNlIC8qIGZpcnN0X3RpbWUgKi8pOwogICAgICAgIGluaXRfdWkoKTsKICAgICAgICBidW5kbGVfYnlfdGltZXNsb3QoKTsKICAgICAgICBkcmF3X3RpbWVsaW5lKCk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEluaXRpYWxpemUgdGhlIHVzZXIgaW50ZXJmYWNlLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBpbml0X3VpKCkgewogICAgICAgIGluaXRfc2xpZGVyKCk7CiAgICAgICAgaWYgKHNldHRpbmdzLnNob3dfYmFyX3N0eWxlX2Ryb3Bkb3duKSB7CiAgICAgICAgICAgICQoJyN0aW1lbGluZSAuYmFyX3N0eWxlJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICQoJyN0aW1lbGluZSAuYmFyX3N0eWxlJykuYWRkQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgIH0KICAgICAgICAkKCcjdGltZWxpbmUgLmJhcl9zdHlsZSBvcHRpb25bbmFtZT0iJytzZXR0aW5ncy5iYXJfc3R5bGUrJyJdJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpOwogICAgICAgICQoJyN0aW1lbGluZScpLmF0dHIoJ2RhdGEtZGV0YWlsJywgc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyk7CiAgICAgICAgJCgnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbycpLmF0dHIoJ2RhdGEtbW9kZScsIHNldHRpbmdzLnJldmlld19kZXRhaWxzX3N1bW1hcnkpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBJbml0aWFsaXplIHRoZSBzY2FsZSBzbGlkZXIuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGluaXRfc2xpZGVyKCkgewogICAgICAgIHZhciByYW5nZSA9ICQoJyN0aW1lbGluZSAucmFuZ2VfaW5wdXQnKTsKICAgICAgICBpZiAoc2V0dGluZ3MuZGF5cyA+IHNldHRpbmdzLm1heF9kYXlzKSB7CiAgICAgICAgICAgIHNldHRpbmdzLmRheXMgPSBzZXR0aW5ncy5tYXhfZGF5czsKICAgICAgICAgICAgc2F2ZV9zZXR0aW5ncygpOwogICAgICAgIH0KICAgICAgICByYW5nZS5hdHRyKCdtYXgnLCBzZXR0aW5ncy5tYXhfZGF5cyk7CiAgICAgICAgcmFuZ2UuYXR0cigndmFsdWUnLCBzZXR0aW5ncy5kYXlzKTsKICAgICAgICB1cGRhdGVfc2xpZGVyX2RheXMoKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gVXBkYXRlIHRoZSAncmV2aWV3cycgdGV4dCBvZiB0aGUgc2NhbGUgc2xpZGVyLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB1cGRhdGVfc2xpZGVyX3Jldmlld3MoKSB7CiAgICAgICAgdmFyIHJldmlld19jb3VudCA9ICQoJyN0aW1lbGluZSAucmFuZ2VfcmV2aWV3cycpOwogICAgICAgIHJldmlld19jb3VudC50ZXh0KGdyYXBoLnRvdGFsX3Jldmlld3MpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBVcGRhdGUgdGhlICdkYXlzJyB0ZXh0IG9mIHRoZSBzY2FsZSBzbGlkZXIuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHVwZGF0ZV9zbGlkZXJfZGF5cygpIHsKICAgICAgICB2YXIgZGF5cyA9IHNldHRpbmdzLmRheXM7CiAgICAgICAgdmFyIHBlcmlvZCA9ICQoJyN0aW1lbGluZSAucmFuZ2VfZGF5cycpOwogICAgICAgIGlmIChkYXlzIDw9IDEpIHsKICAgICAgICAgICAgcGVyaW9kLnRleHQoKGRheXMqMjQpKycgaG91cnMnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwZXJpb2QudGV4dChkYXlzLnRvRml4ZWQoMikrJyBkYXlzJyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBTYXZlIHRoZSBzY3JpcHQgc2V0dGluZ3MgKGFmdGVyIGEgNTAwbXMgZGVsYXkpLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgc2F2ZV9kZWxheV90aW1lcjsKICAgIGZ1bmN0aW9uIHNhdmVfc2V0dGluZ3MoKSB7CiAgICAgICAgaWYgKHNhdmVfZGVsYXlfdGltZXIgIT09IHVuZGVmaW5lZCkgY2xlYXJUaW1lb3V0KHNhdmVfZGVsYXlfdGltZXIpOwogICAgICAgIHNhdmVfZGVsYXlfdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHdrb2YuU2V0dGluZ3Muc2F2ZSgndGltZWxpbmUnKTsKICAgICAgICB9LCA1MDApOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBIYW5kbGVyIGZvciByZXNpemluZyB0aGUgcGFuZWwgYnkgZHJhZ2dpbmcgdGhlIGJvdHRvbSBvZiB0aGUgZ3JhcGguCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gcmVzaXplX3BhbmVsKGUpIHsKICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjsKICAgICAgICB2YXIgcGFuZWwgPSAkKCcjdGltZWxpbmUgPiAuZ3JhcGhfcGFuZWwnKTsKICAgICAgICB2YXIgc3RhcnRfeSA9IGUucGFnZVk7CiAgICAgICAgdmFyIHN0YXJ0X2hlaWdodCA9IHNldHRpbmdzLmdyYXBoX2hlaWdodDsKICAgICAgICAkKCdib2R5JykKICAgICAgICAuYWRkQ2xhc3MoJ211dGVfcG9wb3ZlcicpCiAgICAgICAgLm9uKCdtb3VzZW1vdmUudGltZWxpbmVfcmVzaXplIHRvdWNobW92ZS50aW1lbGluZV9yZXNpemUnLCBmdW5jdGlvbihlKXsKICAgICAgICAgICAgdmFyIGhlaWdodCA9IHN0YXJ0X2hlaWdodCArIChlLnBhZ2VZIC0gc3RhcnRfeSk7CiAgICAgICAgICAgIGlmIChoZWlnaHQgPCBncmFwaC55X2F4aXMubWluX2hlaWdodCkgaGVpZ2h0ID0gZ3JhcGgueV9heGlzLm1pbl9oZWlnaHQ7CiAgICAgICAgICAgIGlmIChoZWlnaHQgPiBncmFwaC55X2F4aXMubWF4X2hlaWdodCkgaGVpZ2h0ID0gZ3JhcGgueV9heGlzLm1heF9oZWlnaHQ7CiAgICAgICAgICAgIHNldHRpbmdzLmdyYXBoX2hlaWdodCA9IGhlaWdodDsKICAgICAgICAgICAgZ3JhcGgueV9heGlzLmhlaWdodCA9IGhlaWdodCAtIChncmFwaC5tYXJnaW4udG9wICsgZ3JhcGgubWFyZ2luLmJvdHRvbSk7CiAgICAgICAgICAgIGRyYXdfdGltZWxpbmUoKTsKICAgICAgICB9KQogICAgICAgIC5vbignbW91c2V1cC50aW1lbGluZV9yZXNpemUgdG91Y2hlbmQudGltZWxpbmVfcmVzaXplJywgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgIHNhdmVfc2V0dGluZ3MoKTsKICAgICAgICAgICAgJCgnYm9keScpLm9mZignLnRpbWVsaW5lX3Jlc2l6ZScpLnJlbW92ZUNsYXNzKCdtdXRlX3BvcG92ZXInKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgaG92ZXJpbmcgb3ZlciB0aGUgdGltZSBzY2FsZSBmb3IgaGlnaGxpZ2h0aW5nLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHZhciBoaWdobGlnaHQgPSB7c3RhcnQ6MCwgZW5kOjAsIGRyYWdnaW5nOmZhbHNlLCBoaWdobGlnaHRlZDogZmFsc2V9OwogICAgZnVuY3Rpb24gaGlnaGxpZ2h0X2hvdmVyKGUpIHsKICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyA9PT0gJ25vbmUnKSByZXR1cm47CiAgICAgICAgaWYgKGhpZ2hsaWdodC5kcmFnZ2luZykgcmV0dXJuIHRydWU7CiAgICAgICAgdmFyIGJ1bmRsZV9pZHggPSBuZWFyZXN0X2J1bmRsZShlLnBhZ2VYKTsKICAgICAgICB2YXIgeDsKICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICBjYXNlICdtb3VzZWVudGVyJzoKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnbW91c2Vtb3ZlJzoKICAgICAgICAgICAgICAgIGlmIChoaWdobGlnaHQuaGlnaGxpZ2h0ZWQpIHJldHVybjsKICAgICAgICAgICAgICAgIHggPSBidW5kbGVfdG9feChidW5kbGVfaWR4KTsKICAgICAgICAgICAgICAgICQoJyN0aW1lbGluZSAuaGlnaGxpZ2h0IC5tYXJrZXIuc3RhcnQnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcreCsnLDApJyk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ21vdXNlbGVhdmUnOgogICAgICAgICAgICAgICAgaWYgKGhpZ2hsaWdodC5kcmFnZ2luZyB8fCBoaWdobGlnaHQuaGlnaGxpZ2h0ZWQpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgaGlkZV9oaWdobGlnaHQoKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAndG91Y2hzdGFydCc6CiAgICAgICAgICAgIGNhc2UgJ21vdXNlZG93bic6CiAgICAgICAgICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5oaWdobGlnaHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBoaWdobGlnaHQuZHJhZ2dpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgaGlnaGxpZ2h0LnN0YXJ0ID0gYnVuZGxlX2lkeDsKICAgICAgICAgICAgICAgIHggPSBidW5kbGVfdG9feChidW5kbGVfaWR4KTsKICAgICAgICAgICAgICAgICQoJyN0aW1lbGluZSAuaGlnaGxpZ2h0IC5tYXJrZXIuc3RhcnQnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcreCsnLDApJyk7CiAgICAgICAgICAgICAgICAkKCcjdGltZWxpbmUgLmhpZ2hsaWdodCAubWFya2VyLmVuZCcpLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoLTEwMCwwKScpOwogICAgICAgICAgICAgICAgJCgnI3RpbWVsaW5lIC5oaWdobGlnaHQgcmVjdC5tYXJrZXInKS5hdHRyKCd3aWR0aCcsMCkuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnK3grJywwKScpOwogICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCdtb3VzZW1vdmUudGltZWxpbmVfaGlnaGxpZ2h0JywgaGlnaGxpZ2h0X2RyYWcpOwogICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCd0b3VjaGVuZC50aW1lbGluZV9oaWdobGlnaHQgbW91c2V1cC50aW1lbGluZV9oaWdobGlnaHQnLCBoaWdobGlnaHRfcmVsZWFzZSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV2ZW4gaGFuZGxlciBmb3IgZHJhZ2dpbmcgd2hlbiBoaWdobGlnaHRpbmcgYSB0aW1lIHJhbmdlLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGhpZ2hsaWdodF9kcmFnKGUpIHsKICAgICAgICB2YXIgYnVuZGxlX2lkeCA9IG5lYXJlc3RfYnVuZGxlKGUucGFnZVgpOwogICAgICAgIGhpZ2hsaWdodC5lbmQgPSBidW5kbGVfaWR4OwogICAgICAgIHZhciB4MSA9IGJ1bmRsZV90b194KGhpZ2hsaWdodC5zdGFydCk7CiAgICAgICAgdmFyIHgyID0gYnVuZGxlX3RvX3goaGlnaGxpZ2h0LmVuZCk7CiAgICAgICAgJCgnI3RpbWVsaW5lIC5oaWdobGlnaHQgLm1hcmtlci5lbmQnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcreDIrJywwKScpOwogICAgICAgICQoJyN0aW1lbGluZSAuaGlnaGxpZ2h0IHJlY3QubWFya2VyJykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnK01hdGgubWluKHgxLHgyKSsnLjUsMC41KScpLmF0dHIoJ3dpZHRoJyxNYXRoLmFicyh4Mi14MSkpOwogICAgICAgIHNob3dfcmV2aWV3X2luZm8oZmFsc2UgLyogc3RpY2t5ICovKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgdGhlIGVuZCBvZiBhICdkcmFnJyB3aGVuIGhpZ2hsaWdodGluZyBhIHRpbWUgcmFuZ2UuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gaGlnaGxpZ2h0X3JlbGVhc2UoZSkgewogICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuOwogICAgICAgIGhpZ2hsaWdodC5kcmFnZ2luZyA9IGZhbHNlOwogICAgICAgICQoJ2JvZHknKS5vZmYoJy50aW1lbGluZV9oaWdobGlnaHQnKTsKICAgICAgICB2YXIgYnVuZGxlX2lkeCA9IG5lYXJlc3RfYnVuZGxlKGUucGFnZVgpOwogICAgICAgIGhpZ2hsaWdodC5lbmQgPSBidW5kbGVfaWR4OwogICAgICAgIGlmIChoaWdobGlnaHQuc3RhcnQgPT09IGhpZ2hsaWdodC5lbmQpIHsKICAgICAgICAgICAgaGlkZV9oaWdobGlnaHQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgeDEgPSBidW5kbGVfdG9feChNYXRoLm1pbihoaWdobGlnaHQuc3RhcnQsIGhpZ2hsaWdodC5lbmQpKTsKICAgICAgICAgICAgdmFyIHgyID0gYnVuZGxlX3RvX3goTWF0aC5tYXgoaGlnaGxpZ2h0LnN0YXJ0LCBoaWdobGlnaHQuZW5kKSk7CiAgICAgICAgICAgICQoJyN0aW1lbGluZSAuaGlnaGxpZ2h0IC5tYXJrZXIuc3RhcnQnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcreDErJywwKScpOwogICAgICAgICAgICAkKCcjdGltZWxpbmUgLmhpZ2hsaWdodCAubWFya2VyLmVuZCcpLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyt4MisnLDApJyk7CiAgICAgICAgICAgICQoJyN0aW1lbGluZSAuaGlnaGxpZ2h0IHJlY3QubWFya2VyJykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnK3gxKycuNSwwLjUpJykuYXR0cignd2lkdGgnLHgyLXgxKTsKICAgICAgICAgICAgaGlnaGxpZ2h0LmhpZ2hsaWdodGVkID0gdHJ1ZTsKICAgICAgICAgICAgc2hvd19yZXZpZXdfaW5mbyh0cnVlIC8qIHN0aWNreSAqLyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gSGlkZSB0aGUgdGltZWxpbmUncyBoaWdobGlnaHQgY3Vyc29ycy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBoaWRlX2hpZ2hsaWdodCgpIHsKICAgICAgICBoaWdobGlnaHQuc3RhcnQgPSAtMTsKICAgICAgICBoaWdobGlnaHQuZW5kID0gLTE7CiAgICAgICAgaGlnaGxpZ2h0LmhpZ2hsaWdodGVkID0gZmFsc2U7CiAgICAgICAgJCgnI3RpbWVsaW5lIC5oaWdobGlnaHQgcmVjdC5tYXJrZXInKS5hdHRyKCd3aWR0aCcsMCkuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgtMTAwLDAuNSknKTsKICAgICAgICAkKCcjdGltZWxpbmUgLmhpZ2hsaWdodCAubWFya2VyLnN0YXJ0JykuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgtMTAwLDApJyk7CiAgICAgICAgJCgnI3RpbWVsaW5lIC5oaWdobGlnaHQgLm1hcmtlci5lbmQnKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKC0xMDAsMCknKTsKICAgICAgICBoaWRlX3Jldmlld19pbmZvKCk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIG5lYXJlc3RfYnVuZGxlKCkKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBuZWFyZXN0X2J1bmRsZSh4KSB7CiAgICAgICAgdmFyIHBhbmVsX2xlZnQgPSBNYXRoLmZsb29yKCQoJyN0aW1lbGluZSAuZ3JhcGhfcGFuZWwnKS5vZmZzZXQoKS5sZWZ0KTsKICAgICAgICB4IC09IHBhbmVsX2xlZnQgKyBncmFwaC5tYXJnaW4ubGVmdDsKICAgICAgICBpZiAoeCA8IDApIHggPSAwOwogICAgICAgIHZhciB0aWMgPSB4ICogZ3JhcGgueF9heGlzLm1heF9ob3VycyAvIGdyYXBoLnhfYXhpcy53aWR0aDsKICAgICAgICB2YXIgYnVuZGxlX2lkeCA9IGdyYXBoLnRpbWVzbG90c1tNYXRoLm1pbihncmFwaC54X2F4aXMubWF4X2hvdXJzLTEsIE1hdGguZmxvb3IodGljKSldOwogICAgICAgIHZhciBidW5kbGUgPSBncmFwaC5idW5kbGVzW2J1bmRsZV9pZHhdOwogICAgICAgIHZhciBzdGFydCA9IGJ1bmRsZS5zdGFydF90aW1lOwogICAgICAgIHZhciBlbmQgPSBidW5kbGUuZW5kX3RpbWU7CiAgICAgICAgcmV0dXJuICh0aWMgPD0gKChzdGFydCtlbmQpLzIpID8gYnVuZGxlX2lkeCA6IGJ1bmRsZV9pZHgrMSk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIENvbnZlcnQgYSBidW5kbGVfaWR4IHRvIGEgZ3JhcGggaG91ciBvZmZzZXQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYnVuZGxlX3RvX3RpYyhidW5kbGVfaWR4KSB7CiAgICAgICAgaWYgKGJ1bmRsZV9pZHggPj0gZ3JhcGguYnVuZGxlcy5sZW5ndGgpIHJldHVybiBncmFwaC54X2F4aXMubWF4X2hvdXJzOwogICAgICAgIHJldHVybiBncmFwaC5idW5kbGVzW2J1bmRsZV9pZHhdLnN0YXJ0X3RpbWU7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIENvbnZlcnQgYSBidW5kbGVfaWR4IHRvIGEgZ3JhcGggWCBvZmZzZXQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYnVuZGxlX3RvX3goYnVuZGxlX2lkeCkgewogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGJ1bmRsZV90b190aWMoYnVuZGxlX2lkeCkgKiBncmFwaC50aWNfc3BhY2luZyk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIE9wZW4gdGhlIHNldHRpbmdzIGRpYWxvZwogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBvcGVuX3NldHRpbmdzKCkgewogICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICAgIHNjcmlwdF9pZDogJ3RpbWVsaW5lJywKICAgICAgICAgICAgdGl0bGU6ICdVbHRpbWF0ZSBUaW1lbGluZScsCiAgICAgICAgICAgIG9uX3NhdmU6IHNldHRpbmdzX3NhdmVkLAogICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICB0YWJzOiB7dHlwZTondGFic2V0JywgY29udGVudDogewogICAgICAgICAgICAgICAgICAgIHBnR3JhcGg6IHt0eXBlOidwYWdlJywgbGFiZWw6J0dyYXBoJywgaG92ZXJfdGlwOidHcmFwaCBTZXR0aW5ncycsIGNvbnRlbnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgZ3JwVGltZToge3R5cGU6J2dyb3VwJywgbGFiZWw6J1RpbWUnLCBjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVfZm9ybWF0OiB7dHlwZTonZHJvcGRvd24nLCBsYWJlbDonVGltZSBGb3JtYXQnLCBkZWZhdWx0OicxMmhvdXInLCBjb250ZW50OnsnMTJob3VyJzonMTItaG91cicsJzI0aG91cic6JzI0LWhvdXInLCAnaG91cnNfb25seSc6ICdIb3VycyBvbmx5J30sIGhvdmVyX3RpcDonRGlzcGxheSB0aW1lIGluIDEyIG9yIDI0LWhvdXIgZm9ybWF0LCBvciBob3Vycy1mcm9tLW5vdy4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF9kYXlzOiB7dHlwZTonbnVtYmVyJywgbGFiZWw6J1NsaWRlciBSYW5nZSBNYXggKGRheXMpJywgbWluOjEsIG1heDoxMjUsIGRlZmF1bHQ6NywgaG92ZXJfdGlwOidDaG9vc2UgbWF4aW11bSByYW5nZSBvZiB0aGUgdGltZWxpbmUgc2xpZGVyIChpbiBkYXlzKS4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGdycEJhcnM6IHt0eXBlOidncm91cCcsIGxhYmVsOidCYXJzJywgY29udGVudDp7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfYmFyX3dpZHRoOiB7dHlwZTonbnVtYmVyJywgbGFiZWw6J01heCBCYXIgV2lkdGggKHBpeGVscyknLCBkZWZhdWx0OjAsIGhvdmVyX3RpcDonU2V0IHRoZSBtYXhpbXVtIGJhciB3aWR0aCAoaW4gcGl4ZWxzKS5cbigwID0gdW5saW1pdGVkKSd9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4X2Jhcl9oZWlnaHQ6IHt0eXBlOidudW1iZXInLCBsYWJlbDonTWF4IEdyYXBoIEhlaWdodCAocmV2aWV3cyknLCBkZWZhdWx0OjAsIGhvdmVyX3RpcDonU2V0IHRoZSBtYXhpbXVtIGdyYXBoIGhlaWdodCAoaW4gcmV2aWV3cykuXG4oMCA9IHVubGltaXRlZClcblVzZWZ1bCBmb3Igd2hlbiB5b3UgaGF2ZSBhIGh1Z2UgYmFja2xvZy4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkX2Jhcl9oZWlnaHQ6IHt0eXBlOidjaGVja2JveCcsIGxhYmVsOidGb3JjZSBHcmFwaCB0byBNYXggSGVpZ2h0JywgZGVmYXVsdDpmYWxzZSwgaG92ZXJfdGlwOidGb3JjZSB0aGUgZ3JhcGggaGVpZ2h0IHRvIGFsd2F5cyBiZSB0aGUgTWF4IEdyYXBoIEhlaWdodC5cblVzZWZ1bCB3aGVuIGxpbWl0aW5nIHRoZSBudW1iZXIgb2YgcmV2aWV3cyB5b3UgZG8gaW4gb25lIHNpdHRpbmcuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJfc3R5bGU6IHt0eXBlOidkcm9wZG93bicsIGxhYmVsOidCYXIgU3R5bGUnLCBkZWZhdWx0OidpdGVtX3R5cGUnLCBjb250ZW50OnsnY291bnQnOidSZXZpZXcgQ291bnQnLCdpdGVtX3R5cGUnOidJdGVtIFR5cGUnLCdzcnNfc3RhZ2UnOidTUlMgTGV2ZWwnLCdsZXZlbCc6J0xldmVsJ30sIGhvdmVyX3RpcDonQ2hvb3NlIGhvdyBiYXJzIGFyZSBzdWJkaXZpZGVkLid9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JzX2N1cnJfbmV4dDoge3R5cGU6J2Ryb3Bkb3duJywgbGFiZWw6J0N1cnJlbnQgLyBOZXh0IFNSUyBMZXZlbCcsIGRlZmF1bHQ6J2N1cnInLCBjb250ZW50OnsnY3Vycic6J0N1cnJlbnQgU1JTIExldmVsJywnbmV4dCc6J05leHQgU1JTIExldmVsJ30sIGhvdmVyX3RpcDonU2VsZWN0IHdoZXRoZXIgU1JTIGlzIGNvbG9yLWNvZGVkIGJ5XG5jdXJyZW50IFNSUyBsZXZlbCwgb3IgbmV4dCBTUlMgbGV2ZWwuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgICAgICAgICAgICAgICBncnBNYXJrZXJzOiB7dHlwZTonZ3JvdXAnLCBsYWJlbDonTWFya2VycycsIGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudF9sZXZlbF9tYXJrZXJzOiB7dHlwZTonZHJvcGRvd24nLCBsYWJlbDonQ3VycmVudCBMZXZlbCBNYXJrZXJzJywgZGVmYXVsdDoncmt2JywgY29udGVudDp7J25vbmUnOidOb25lJywncmsnOidSYWQgKyBLYW4nLCdya3YnOidSYWQgKyBLYW4gKyBWb2MnfSwgaG92ZXJfdGlwOidTZWxlY3Qgd2hpY2ggaXRlbSB0eXBlcyB3aWxsIHRyaWdnZXIgYSBDdXJyZW50IExldmVsXG5tYXJrZXIgYXQgdGhlIGJvdHRvbSBvZiB0aGUgZ3JhcGguJ30sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXJuX21hcmtlcnM6IHt0eXBlOidkcm9wZG93bicsIGxhYmVsOidCdXJuIE1hcmtlcnMnLCBkZWZhdWx0OidzaG93JywgY29udGVudDp7J3Nob3cnOidTaG93JywnaGlkZSc6J0hpZGUnfSwgaG92ZXJfdGlwOidTZWxlY3Qgd2hldGhlciBCdXJuIG1hcmtlcnMgYXJlIHNob3duXG5hdCB0aGUgYm90dG9tIG9mIHRoZSBncmFwaC4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICAgICAgcGdSZXZpZXdEZXRhaWxzOiB7dHlwZToncGFnZScsIGxhYmVsOidSZXZpZXcgRGV0YWlscycsIGhvdmVyX3RpcDonUmV2aWV3IERldGFpbHMgUG9wLXVwJywgY29udGVudDogewogICAgICAgICAgICAgICAgICAgICAgICBzaG93X3Jldmlld19kZXRhaWxzOiB7dHlwZTonZHJvcGRvd24nLCBsYWJlbDonU2hvdyBSZXZpZXcgRGV0YWlscycsIGRlZmF1bHQ6J2Z1bGwnLCBjb250ZW50Onsnbm9uZSc6J05vbmUnLCdzdW1tYXJ5JzonU3VtbWFyeScsJ2l0ZW1fbGlzdCc6J0l0ZW0gTGlzdCcsJ2Z1bGwnOidGdWxsIEl0ZW0gRGV0YWlscyd9LCBob3Zlcl90aXA6J0Nob29zZSB0aGUgbGV2ZWwgb2YgZGV0YWlsIHRvIGRpc3BsYXlcbndoZW4gYSBiYXIgb3IgdGltZSByYW5nZSBpcyBzZWxlY3RlZC4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3X2RldGFpbHNfc3VtbWFyeToge3R5cGU6J2Ryb3Bkb3duJywgbGFiZWw6J1JldmlldyBEZXRhaWxzIFN1bW1hcnknLCBkZWZhdWx0OidpdGVtX3R5cGUnLCBjb250ZW50OnsnY291bnQnOidSZXZpZXcgQ291bnQnLCdpdGVtX3R5cGUnOidJdGVtIFR5cGUnLCdzcnNfc3RhZ2UnOidTUlMgTGV2ZWwnLCdsZXZlbCc6J0xldmVsJ30sIGhvdmVyX3RpcDonQ2hvb3NlIHdoaWNoIHN1bW1hcnkgaW5mb3JtYXRpb24gdG9cbmRpc3BsYXkgb24gdGhlIFJldmlldyBEZXRhaWxzIHBvcC11cC4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmV2aWV3X2RldGFpbHNfYnV0dG9uczoge3R5cGU6J2NoZWNrYm94JywgbGFiZWw6J1Nob3cgUmV2aWV3IERldGFpbHMgQnV0dG9ucycsIGRlZmF1bHQ6dHJ1ZSwgaG92ZXJfdGlwOidTaG93IGNvbmZpZ3VyYXRpb24gYnV0dG9ucyBvbiBSZXZpZXcgRGV0YWlscyBwb3AtdXAuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dfYmFyX3N0eWxlX2Ryb3Bkb3duOiB7dHlwZTonY2hlY2tib3gnLCBsYWJlbDonU2hvdyBCYXIgU3R5bGUgRHJvcGRvd24nLCBkZWZhdWx0OmZhbHNlLCBob3Zlcl90aXA6J1Nob3cgdGhlIEJhciBTdHlsZSBkcm9wZG93biBhYm92ZSB0aGUgdGltZWxpbmUuJ30sCiAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdmFyIHNldHRpbmdzX2RpYWxvZyA9IG5ldyB3a29mLlNldHRpbmdzKGNvbmZpZyk7CiAgICAgICAgc2V0dGluZ3NfZGlhbG9nLm9wZW4oKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gR2V0IHRoZSBudW1iZXIgb2YgaG91cnMgcGVyIGJhci4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZ2V0X2hvdXJzX3Blcl9iYXIoKSB7CiAgICAgICAgZ3JhcGgueF9heGlzLndpZHRoID0gZ3JhcGguZWxlbS53aWR0aCgpIC0gZ3JhcGgubWFyZ2luLmxlZnQ7CiAgICAgICAgZ3JhcGgueF9heGlzLm1heF9ob3VycyA9IE1hdGgucm91bmQoc2V0dGluZ3MuZGF5cyAqIDI0KTsKCiAgICAgICAgLy8gTm8gbW9yZSB0aGFuIDEgbGFiZWwgZXZlcnkgNTAgcGl4ZWxzCiAgICAgICAgdmFyIG1pbl9waXhlbHNfcGVyX2xhYmVsID0gNTA7CiAgICAgICAgZ3JhcGgubWluX2hvdXJzX3Blcl9sYWJlbCA9IG1pbl9waXhlbHNfcGVyX2xhYmVsICogZ3JhcGgueF9heGlzLm1heF9ob3VycyAvIGdyYXBoLnhfYXhpcy53aWR0aDsKICAgICAgICB4c2NhbGUuaWR4ID0gMDsKICAgICAgICB3aGlsZSAoKHhzY2FsZS5ob3Vyc19wZXJfbGFiZWxbeHNjYWxlLmlkeF0gPD0gZ3JhcGgubWluX2hvdXJzX3Blcl9sYWJlbCkgJiYKICAgICAgICAgICAgICAgKHhzY2FsZS5pZHggPCB4c2NhbGUuaG91cnNfcGVyX2xhYmVsLmxlbmd0aC0xKSkgewogICAgICAgICAgICB4c2NhbGUuaWR4Kys7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4geHNjYWxlLmJ1bmRsZV9jaG9pY2VzW3hzY2FsZS5pZHhdOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBNYXAgbGV0dGVycyBpbiB0aGUgeHNjYWxlIGNoYXJ0IHRvIGNvcnJlc3BvbmRpbmcgbGFiZWwtZ2VuZXJhdGluZyBmdW5jdGlvbnMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHZhciBsYWJlbF9mdW5jdGlvbnMgPSB7CiAgICAgICAgJ20nOiBtb250aF9sYWJlbCwKICAgICAgICAndyc6IHdlZWtfbGFiZWwsCiAgICAgICAgJ0QnOiBtZGF5X2xhYmVsLAogICAgICAgICdkJzogZGF5X2xhYmVsLAogICAgICAgICdoJzogaG91cl9sYWJlbCwKICAgICAgICAnLSc6IG5vX2xhYmVsLAogICAgfTsKCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRnVuY3Rpb25zIGZvciBnZW5lcmF0aW5nIHRpbWUtc2NhbGUgbGFiZWxzCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIG1vbnRoX2xhYmVsKGRhdGUsIHF0eSwgdXNlX3Nob3J0KSB7CiAgICAgICAgaWYgKGRhdGUuZ2V0SG91cnMoKSAhPT0gMCB8fCBkYXRlLmdldERhdGUoKSAhPT0gMSkgcmV0dXJuOwogICAgICAgIHJldHVybiBbJ0phbicsJ0ZlYicsJ01hcicsJ0FwcicsJ01heScsJ0p1bicsJ0p1bCcsJ0F1ZycsJ1NlcCcsJ09jdCcsJ05vdicsJ0RlYyddW2RhdGUuZ2V0TW9udGgoKV07CiAgICB9CiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHdlZWtfbGFiZWwoZGF0ZSwgcXR5LCB1c2Vfc2hvcnQpIHsKICAgICAgICBpZiAoZGF0ZS5nZXRIb3VycygpICE9PSAwIHx8IGRhdGUuZ2V0RGF5KCkgIT09IDApIHJldHVybjsKICAgICAgICByZXR1cm4gKHVzZV9zaG9ydCA/ICdTJyA6ICdTdW4nKTsKICAgIH0KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gbWRheV9sYWJlbChkYXRlLCBxdHksIHVzZV9zaG9ydCkgewogICAgICAgIGlmIChkYXRlLmdldEhvdXJzKCkgIT09IDApIHJldHVybjsKICAgICAgICB2YXIgbWRheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgIGlmIChtZGF5ICUgcXR5ICE9PSAwKSByZXR1cm47CiAgICAgICAgcmV0dXJuIG1kYXk7CiAgICB9CiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGRheV9sYWJlbChkYXRlLCBxdHksIHVzZV9zaG9ydCkgewogICAgICAgIGlmIChkYXRlLmdldEhvdXJzKCkgIT09IDApIHJldHVybjsKICAgICAgICB2YXIgbGFiZWwgPSBbJ1N1bicsJ01vbicsJ1R1ZScsJ1dlZCcsJ1RodScsJ0ZyaScsJ1NhdCddW2RhdGUuZ2V0RGF5KCldOwogICAgICAgIHJldHVybiAodXNlX3Nob3J0ID8gbGFiZWxbMF0gOiBsYWJlbCk7CiAgICB9CiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGhvdXJfbGFiZWwoZGF0ZSwgcXR5LCB1c2Vfc2hvcnQpIHsKICAgICAgICB2YXIgaGggPSBkYXRlLmdldEhvdXJzKCk7CiAgICAgICAgaWYgKChoaCAlIHF0eSkgIT09IDApIHJldHVybjsKICAgICAgICBpZiAoc2V0dGluZ3MudGltZV9mb3JtYXQgPT09ICcyNGhvdXInKSB7CiAgICAgICAgICAgIHJldHVybiAoJzAnK2hoKyc6MDAnKS5zbGljZSgtNSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICgoKGhoICsgMTEpICUgMTIpICsgMSkgKyAnYXAnW01hdGguZmxvb3IoaGgvMTIpXSArICdtJzsKICAgICAgICB9CiAgICB9CiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGhvdXJfb25seV9sYWJlbChkYXRlLCBxdHksIHVzZV9zaG9ydCwgdGljX2lkeCkgewogICAgICAgIGlmICh0aWNfaWR4ICUgcXR5ICE9PSAwKSByZXR1cm47CiAgICAgICAgcmV0dXJuIHRpY19pZHggKyAodXNlX3Nob3J0ID8gJ2gnIDogJyBocnMnKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIG5vX2xhYmVsKCkge3JldHVybjt9CiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRHJhdyB0aGUgdGltZWxpbmUKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZHJhd190aW1lbGluZSgpIHsKICAgICAgICB2YXIgcGFuZWwgPSBncmFwaC5lbGVtLAogICAgICAgICAgICBwYW5lbF9oZWlnaHQgPSBzZXR0aW5ncy5ncmFwaF9oZWlnaHQsCiAgICAgICAgICAgIHBhbmVsX3dpZHRoID0gZ3JhcGguZWxlbS53aWR0aCgpLAogICAgICAgICAgICBncmFwaF9oZWlnaHQgPSBwYW5lbF9oZWlnaHQgLSAoZ3JhcGgubWFyZ2luLnRvcCArIGdyYXBoLm1hcmdpbi5ib3R0b20pOwoKICAgICAgICB2YXIgbWF0Y2ggPSB4c2NhbGUucmVkX3RpY19jaG9pY2VzW3hzY2FsZS5pZHhdLm1hdGNoKC9eKFxkKikoLikocz8pJC8pOwogICAgICAgIHZhciByZWRfcXR5ID0gTnVtYmVyKG1hdGNoWzFdKTsKICAgICAgICB2YXIgcmVkX2Z1bmMgPSBsYWJlbF9mdW5jdGlvbnNbbWF0Y2hbMl1dOwogICAgICAgIHZhciByZWRfdXNlX3Nob3J0ID0gKG1hdGNoWzNdID09PSAncycpOwoKICAgICAgICBtYXRjaCA9IHhzY2FsZS5tYWpvcl90aWNfY2hvaWNlc1t4c2NhbGUuaWR4XS5tYXRjaCgvXihcZCopKC4pKHM/KSQvKTsKICAgICAgICB2YXIgbWFqX3F0eSA9IE51bWJlcihtYXRjaFsxXSk7CiAgICAgICAgdmFyIG1hal9mdW5jID0gbGFiZWxfZnVuY3Rpb25zW21hdGNoWzJdXTsKICAgICAgICB2YXIgbWFqX3VzZV9zaG9ydCA9IChtYXRjaFszXSA9PT0gJ3MnKTsKCiAgICAgICAgbWF0Y2ggPSB4c2NhbGUubWlub3JfdGljX2Nob2ljZXNbeHNjYWxlLmlkeF0ubWF0Y2goL14oXGQqKSguKShzPykkLyk7CiAgICAgICAgdmFyIG1pbl9xdHkgPSBOdW1iZXIobWF0Y2hbMV0pOwogICAgICAgIHZhciBtaW5fZnVuYyA9IGxhYmVsX2Z1bmN0aW9uc1ttYXRjaFsyXV07CiAgICAgICAgdmFyIG1pbl91c2Vfc2hvcnQgPSAobWF0Y2hbM10gPT09ICdzJyk7CgogICAgICAgIGlmIChzZXR0aW5ncy50aW1lX2Zvcm1hdCA9PT0gJ2hvdXJzX29ubHknKSB7CiAgICAgICAgICAgIHJlZF9mdW5jID0gZnVuY3Rpb24oKSB7cmV0dXJuIDA7fTsKICAgICAgICAgICAgbWFqX2Z1bmMgPSBob3VyX29ubHlfbGFiZWw7CiAgICAgICAgICAgIG1pbl9mdW5jID0gaG91cl9vbmx5X2xhYmVsOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJ1bmRsZV9zaXplID0geHNjYWxlLmJ1bmRsZV9jaG9pY2VzW3hzY2FsZS5pZHhdOwoKICAgICAgICAvLyBTdHJpbmcgZm9yIGJ1aWxkaW5nIGh0bWwuCiAgICAgICAgdmFyIGdyaWQgPSAnJzsKICAgICAgICB2YXIgbGFiZWxfeCA9IFtdOwogICAgICAgIHZhciBsYWJlbF95ID0gJyc7CiAgICAgICAgdmFyIGJhcnMgPSAnJywgYmFyX292ZXJsYXlzID0gJyc7CiAgICAgICAgdmFyIG1hcmtlcnMgPSAnJzsKCiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBEcmF3IHZlcnRpY2FsIGF4aXMgZ3JpZAoKICAgICAgICAvLyBDYWxjdWxhdGUgbWFqb3IgYW5kIG1pbm9yIHZlcnRpY2FsIGdyYXBoIHRpY3MuCiAgICAgICAgdmFyIGluY19zID0gMSwgaW5jX2wgPSA1OwogICAgICAgIHZhciBtYXhfcmV2aWV3cyA9IGdyYXBoLm1heF9yZXZpZXdzOwogICAgICAgIGlmIChzZXR0aW5ncy5tYXhfYmFyX2hlaWdodCA+IDApIHsKICAgICAgICAgICAgaWYgKHNldHRpbmdzLmZpeGVkX2Jhcl9oZWlnaHQgfHwgKG1heF9yZXZpZXdzID4gc2V0dGluZ3MubWF4X2Jhcl9oZWlnaHQpKSBtYXhfcmV2aWV3cyA9IHNldHRpbmdzLm1heF9iYXJfaGVpZ2h0OwogICAgICAgIH0KICAgICAgICB3aGlsZSAoTWF0aC5jZWlsKG1heF9yZXZpZXdzIC8gaW5jX3MpID4gNSkgewogICAgICAgICAgICBzd2l0Y2ggKGluY19zLnRvU3RyaW5nKClbMF0pIHsKICAgICAgICAgICAgICAgIGNhc2UgJzEnOiBpbmNfcyAqPSAyOyBpbmNfbCAqPSAyOyBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJzInOiBpbmNfcyA9IE1hdGgucm91bmQoMi41ICogaW5jX3MpOyBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJzUnOiBpbmNfcyAqPSAyOyBpbmNfbCAqPSA1OyBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRHJhdyB2ZXJ0aWNhbCBncmFwaCB0aWNzICgjIG9mIFJldmlld3MpLgogICAgICAgIHZhciB0aWNfY2xhc3MsIHk7CiAgICAgICAgZ3JhcGgueV9heGlzLm1heF9yZXZpZXdzID0gTWF0aC5tYXgoMywgTWF0aC5jZWlsKG1heF9yZXZpZXdzIC8gaW5jX3MpICogaW5jX3MpOwogICAgICAgIGZvciAodmFyIHRpYyA9IDA7IHRpYyA8PSBncmFwaC55X2F4aXMubWF4X3Jldmlld3M7IHRpYyArPSBpbmNfcykgewogICAgICAgICAgICB0aWNfY2xhc3MgPSAoKHRpYyAlIGluY19sKSA9PT0gMCA/ICdtYWpvcicgOiAnbWlub3InKTsKICAgICAgICAgICAgeSA9IChncmFwaC5tYXJnaW4udG9wICsgZ3JhcGhfaGVpZ2h0KSAtIE1hdGgucm91bmQoZ3JhcGhfaGVpZ2h0ICogKHRpYyAvIGdyYXBoLnlfYXhpcy5tYXhfcmV2aWV3cykpOwogICAgICAgICAgICBpZiAodGljID4gMCkgewogICAgICAgICAgICAgICAgZ3JpZCArPSAnPHBhdGggY2xhc3M9IicrdGljX2NsYXNzKyciIGQ9Ik0nK2dyYXBoLm1hcmdpbi5sZWZ0KycsJyt5KydoJytncmFwaC54X2F4aXMud2lkdGgrJyIgLz4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxhYmVsX3kgKz0gJzx0ZXh0IGNsYXNzPSInK3RpY19jbGFzcysnIiB4PSInKyhncmFwaC5tYXJnaW4ubGVmdC00KSsnIiB5PSInK3krJyIgZHk9IjAuNGVtIj4nK3RpYysnPC90ZXh0Pic7CiAgICAgICAgfQoKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIERyYXcgaG9yaXpvbnRhbCBheGlzIGdyaWQKCiAgICAgICAgZ3JhcGgudGljX3NwYWNpbmcgPSAoZ3JhcGgueF9heGlzLndpZHRoKSAvIChncmFwaC54X2F4aXMubWF4X2hvdXJzKTsgLy8gV2lkdGggb2YgYSB0aW1lIHNsb3QuCiAgICAgICAgdmFyIHByZXZfbGFiZWwgPSAtOWUxMDsKICAgICAgICBmb3IgKHZhciB0aWNfaWR4ID0gMDsgdGljX2lkeCA8IGdyYXBoLnhfYXhpcy5tYXhfaG91cnM7IHRpY19pZHgrKykgewogICAgICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKGdyYXBoLnN0YXJ0X3RpbWUuZ2V0VGltZSgpICsgdGljX2lkeCAqIDM2MDAwMDApOwoKICAgICAgICAgICAgdmFyIHJlZF9sYWJlbCA9IHJlZF9mdW5jKHRpbWUsIHJlZF9xdHksIHJlZF91c2Vfc2hvcnQsIHRpY19pZHgpOwogICAgICAgICAgICB2YXIgbWFqX2xhYmVsID0gbWFqX2Z1bmModGltZSwgbWFqX3F0eSwgbWFqX3VzZV9zaG9ydCwgdGljX2lkeCk7CiAgICAgICAgICAgIHZhciBtaW5fbGFiZWwgPSBtaW5fZnVuYyh0aW1lLCBtaW5fcXR5LCBtaW5fdXNlX3Nob3J0LCB0aWNfaWR4KTsKCiAgICAgICAgICAgIHZhciB4ID0gZ3JhcGgubWFyZ2luLmxlZnQgKyBNYXRoLnJvdW5kKCh0aWNfaWR4IC0gdGltZV9zaGlmdC82MCkgKiBncmFwaC50aWNfc3BhY2luZyk7CiAgICAgICAgICAgIHZhciBsYWJlbDsKICAgICAgICAgICAgaWYgKHJlZF9sYWJlbCkgewogICAgICAgICAgICAgICAgaWYgKHRpY19pZHggPiAwKSBncmlkICs9ICc8cGF0aCBjbGFzcz0icmVkdGljIiBkPSJNJyt4KycsMHYnKyhncmFwaC5tYXJnaW4udG9wK2dyYXBoX2hlaWdodC0xKSsnIiAvPic7CiAgICAgICAgICAgICAgICBpZiAoIW1hal91c2Vfc2hvcnQgJiYgdGljX2lkeCAtIHByZXZfbGFiZWwgPCBncmFwaC5taW5faG91cnNfcGVyX2xhYmVsKjAuNTgpIGxhYmVsX3gucG9wKCk7CiAgICAgICAgICAgICAgICBsYWJlbF94LnB1c2goJzx0ZXh0IGNsYXNzPSJyZWR0aWMiIHg9IicrKHgrNCkrJyIgeT0iJysoZ3JhcGgubWFyZ2luLnRvcC04KSsnIj4nK3JlZF9sYWJlbCsnPC90ZXh0PicpOwogICAgICAgICAgICAgICAgcHJldl9sYWJlbCA9IHRpY19pZHg7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobWFqX2xhYmVsKSB7CiAgICAgICAgICAgICAgICBpZiAodGljX2lkeCA+IDApIGdyaWQgKz0gJzxwYXRoIGNsYXNzPSJtYWpvciIgZD0iTScreCsnLDB2JysoZ3JhcGgubWFyZ2luLnRvcCtncmFwaF9oZWlnaHQtMSkrJyIgLz4nOwogICAgICAgICAgICAgICAgaWYgKG1hal91c2Vfc2hvcnQgfHwgdGljX2lkeCAtIHByZXZfbGFiZWwgPiBncmFwaC5taW5faG91cnNfcGVyX2xhYmVsKjAuNTgpIHsKICAgICAgICAgICAgICAgICAgICBsYWJlbF94LnB1c2goJzx0ZXh0IGNsYXNzPSJtYWpvciIgeD0iJysoeCs0KSsnIiB5PSInKyhncmFwaC5tYXJnaW4udG9wLTgpKyciPicrbWFqX2xhYmVsKyc8L3RleHQ+Jyk7CiAgICAgICAgICAgICAgICAgICAgcHJldl9sYWJlbCA9IHRpY19pZHg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAobWluX2xhYmVsKSB7CiAgICAgICAgICAgICAgICBpZiAodGljX2lkeCA+IDApIGdyaWQgKz0gJzxwYXRoIGNsYXNzPSJtaW5vciIgZD0iTScreCsnLCcrKGdyYXBoLm1hcmdpbi50b3AtNikrJ3YnKyhncmFwaF9oZWlnaHQrNikrJyIgLz4nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAgIC8vIERyYXcgYmFycwoKICAgICAgICB2YXIgbWluX2Jhcl9oZWlnaHQgPSBNYXRoLmNlaWwoZ3JhcGgueV9heGlzLm1heF9yZXZpZXdzIC8gZ3JhcGgueV9heGlzLmhlaWdodCk7CiAgICAgICAgZm9yICh2YXIgYnVuZGxlX2lkeCBpbiBncmFwaC5idW5kbGVzKSB7CiAgICAgICAgICAgIHZhciBidW5kbGUgPSBncmFwaC5idW5kbGVzW2J1bmRsZV9pZHhdOwogICAgICAgICAgICB2YXIgYmFyX3BhcnRzID0gW107CiAgICAgICAgICAgIHZhciBzdGF0cyA9IGJ1bmRsZS5zdGF0czsKCiAgICAgICAgICAgIHZhciB4MSA9IE1hdGgucm91bmQoYnVuZGxlLnN0YXJ0X3RpbWUgKiBncmFwaC50aWNfc3BhY2luZyk7CiAgICAgICAgICAgIHZhciB4MiA9IE1hdGgucm91bmQoYnVuZGxlLmVuZF90aW1lICogZ3JhcGgudGljX3NwYWNpbmcpOwogICAgICAgICAgICBpZiAoc2V0dGluZ3MubWF4X2Jhcl93aWR0aCA+IDApIHgyID0gTWF0aC5taW4oeDEgKyBzZXR0aW5ncy5tYXhfYmFyX3dpZHRoLCB4Mik7CgogICAgICAgICAgICBzd2l0Y2ggKHNldHRpbmdzLmJhcl9zdHlsZSkgewogICAgICAgICAgICAgICAgY2FzZSAnY291bnQnOgogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0cy5jb3VudCkgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidjb3VudCcsIGhlaWdodDpzdGF0cy5jb3VudH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgJ2l0ZW1fdHlwZSc6CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzLnJhZCkgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidyYWQnLCBoZWlnaHQ6c3RhdHMucmFkfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzLmthbikgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidrYW4nLCBoZWlnaHQ6c3RhdHMua2FufSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzLnZvYykgYmFyX3BhcnRzLnB1c2goe2NsYXNzOid2b2MnLCBoZWlnaHQ6c3RhdHMudm9jfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAnc3JzX3N0YWdlJzoKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHMuYXBwcikgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidhcHByJywgaGVpZ2h0OnN0YXRzLmFwcHJ9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHMuZ3VydSkgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidndXJ1JywgaGVpZ2h0OnN0YXRzLmd1cnV9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHMubWFzdCkgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidtYXN0JywgaGVpZ2h0OnN0YXRzLm1hc3R9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHMuZW5saSkgYmFyX3BhcnRzLnB1c2goe2NsYXNzOidlbmxpJywgaGVpZ2h0OnN0YXRzLmVubGl9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHMuYnVybikgYmFyX3BhcnRzLnB1c2goe2NsYXNzOididXJuJywgaGVpZ2h0OnN0YXRzLmJ1cm59KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlICdsZXZlbCc6CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZ3JwX2lkeCA9IDA7IGdycF9pZHggPD0gNTsgZ3JwX2lkeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnBfbmFtZSA9ICdsdmxncnAnK2dycF9pZHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0c1tncnBfbmFtZV0pIGJhcl9wYXJ0cy5wdXNoKHtjbGFzczonbHZsZ3JwJytncnBfaWR4LCBoZWlnaHQ6c3RhdHNbZ3JwX25hbWVdfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBiYXJfb2Zmc2V0ID0gMDsKICAgICAgICAgICAgZm9yICh2YXIgcGFydF9pZHggaW4gYmFyX3BhcnRzKSB7CiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IGJhcl9wYXJ0c1twYXJ0X2lkeF07CiAgICAgICAgICAgICAgICBpZiAoKHBhcnRfaWR4ID09IGJhcl9wYXJ0cy5sZW5ndGgtMSkgJiYgKGJhcl9vZmZzZXQgKyBwYXJ0LmhlaWdodCA8IG1pbl9iYXJfaGVpZ2h0KSkgewogICAgICAgICAgICAgICAgICAgIHBhcnQuaGVpZ2h0ID0gbWluX2Jhcl9oZWlnaHQgLSBiYXJfb2Zmc2V0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYmFycyArPSAnPHJlY3QgY2xhc3M9ImJhciAnK3BhcnQuY2xhc3MrJyIgeD0iJysoeDErMSkrJyIgeT0iJytiYXJfb2Zmc2V0KyciIHdpZHRoPSInKyh4Mi14MS0zKSsnIiBoZWlnaHQ9IicrcGFydC5oZWlnaHQrJyIgLz4nOwogICAgICAgICAgICAgICAgYmFyX29mZnNldCArPSBwYXJ0LmhlaWdodDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYmFyX3BhcnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGJhcl9vdmVybGF5cyArPSAnPHJlY3QgY2xhc3M9ImJhciBvdmVybGF5IiB4PSInK3gxKyciIHk9IjAiIHdpZHRoPSInKyh4Mi14MSkrJyIgaGVpZ2h0PSInK2dyYXBoLnlfYXhpcy5tYXhfcmV2aWV3cysnIiBkYXRhLWJ1bmRsZT0iJytidW5kbGVfaWR4KyciIC8+JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG1hcmtlcl94OwogICAgICAgICAgICBtYXJrZXJfeCA9IGdyYXBoLm1hcmdpbi5sZWZ0ICsgTWF0aC5mbG9vcigoeDEreDIpLzIpOwogICAgICAgICAgICBpZiAoYnVuZGxlLnN0YXRzLmhhc19jdXJyX21hcmtlciAmJiBzZXR0aW5ncy5jdXJyZW50X2xldmVsX21hcmtlcnMgIT09ICdub25lJykgewogICAgICAgICAgICAgICAgbWFya2VycyArPSAnPHBhdGggY2xhc3M9ImN1ciIgZD0iTScrbWFya2VyX3grJywnKyhncmFwaC5tYXJnaW4udG9wK2dyYXBoX2hlaWdodCsxKSsnbC0zLDZoNnoiIC8+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIGJ1bmRsZS5zdGF0cy5idXJuX2NvdW50ID4gMCAmJiBzZXR0aW5ncy5idXJuX21hcmtlcnMgPT09ICdzaG93JykgewogICAgICAgICAgICAgICAgbWFya2VycyArPSAnPHBhdGggY2xhc3M9ImJ1ciIgZD0iTScrbWFya2VyX3grJywnKyhncmFwaC5tYXJnaW4udG9wK2dyYXBoX2hlaWdodCs4KSsnbC0zLDZoNnoiIC8+JzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgICAvLyBBc3NlbWJsZSB0aGUgSFRNTAoKICAgICAgICBwYW5lbC5odG1sKAogICAgICAgICAgICAnPHN2ZyBjbGFzcz0iZ3JhcGggbm9zZWxlY3QiIHdpZHRoPSInK3BhbmVsX3dpZHRoKyciIGhlaWdodD0iJytwYW5lbF9oZWlnaHQrJyI+JysKICAgICAgICAgICAgJyAgPHJlY3QgY2xhc3M9ImJrZ2QiIHg9IicrZ3JhcGgubWFyZ2luLmxlZnQrJyIgeT0iJytncmFwaC5tYXJnaW4udG9wKyciIHdpZHRoPSInK2dyYXBoLnhfYXhpcy53aWR0aCsnIiBoZWlnaHQ9IicrZ3JhcGhfaGVpZ2h0KyciIC8+JysKICAgICAgICAgICAgJyAgPGcgY2xhc3M9ImdyaWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNSwwLjUpIj4nKwogICAgICAgICAgICBncmlkKwogICAgICAgICAgICAnICAgIDxwYXRoIGNsYXNzPSJzaGFkb3ciIGQ9Ik0nKyhncmFwaC5tYXJnaW4ubGVmdC0yKSsnLDB2JysoZ3JhcGgubWFyZ2luLnRvcCtncmFwaF9oZWlnaHQpKycsaCcrKGdyYXBoLm1hcmdpbi5sZWZ0K2dyYXBoLnhfYXhpcy53aWR0aCsxKSsnIiAvPicrCiAgICAgICAgICAgICcgICAgPHBhdGggY2xhc3M9ImxpZ2h0IiBkPSJNJysoZ3JhcGgubWFyZ2luLmxlZnQtMSkrJywwdicrKGdyYXBoLm1hcmdpbi50b3ArZ3JhcGhfaGVpZ2h0LTEpKyciIC8+JysKICAgICAgICAgICAgJyAgICA8cGF0aCBjbGFzcz0ibGlnaHQiIGQ9Ik0nKyhncmFwaC5tYXJnaW4ubGVmdC0yKSsnLCcrKGdyYXBoLm1hcmdpbi50b3ArZ3JhcGhfaGVpZ2h0KzEpKydoJysoZ3JhcGgubWFyZ2luLmxlZnQrZ3JhcGgueF9heGlzLndpZHRoKzEpKyciIC8+JysKICAgICAgICAgICAgJyAgPC9nPicrCiAgICAgICAgICAgICcgIDxnIGNsYXNzPSJsYWJlbC14Ij4nKwogICAgICAgICAgICBsYWJlbF94LmpvaW4oJycpKwogICAgICAgICAgICAnICA8L2c+JysKICAgICAgICAgICAgJyAgPGcgY2xhc3M9ImxhYmVsLXkiPicrCiAgICAgICAgICAgIGxhYmVsX3krCiAgICAgICAgICAgICcgIDwvZz4nKwogICAgICAgICAgICAnICA8ZyBjbGFzcz0ibWFya2VycyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41LDAuNSkiPicrCiAgICAgICAgICAgIG1hcmtlcnMrCiAgICAgICAgICAgICcgIDwvZz4nKwogICAgICAgICAgICAnICA8ZyBjbGFzcz0iYmFycyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoJytncmFwaC5tYXJnaW4ubGVmdCsnLCcrKGdyYXBoLm1hcmdpbi50b3ArZ3JhcGhfaGVpZ2h0KSsnKSBzY2FsZSgxLCcrKC0xICogZ3JhcGhfaGVpZ2h0IC8gZ3JhcGgueV9heGlzLm1heF9yZXZpZXdzKSsnKSI+JysKICAgICAgICAgICAgYmFycysKICAgICAgICAgICAgYmFyX292ZXJsYXlzKwogICAgICAgICAgICAnICA8L2c+JysKICAgICAgICAgICAgJyAgPGcgY2xhc3M9InJlc2l6ZV9ncmlwIj4nKwogICAgICAgICAgICAnICAgIDxwYXRoIGNsYXNzPSJzaGFkb3ciIGQ9Ik0nKyhwYW5lbF93aWR0aC0yKSsnLCcrcGFuZWxfaGVpZ2h0KydsMiwtMm0wLC00bC02LDZtLTQsMGwxMCwtMTAiIC8+JysKICAgICAgICAgICAgJyAgICA8cGF0aCBjbGFzcz0ibGlnaHQiIGQ9Ik0nKyhwYW5lbF93aWR0aC0zKSsnLCcrcGFuZWxfaGVpZ2h0KydsMywtM20wLC00bC03LDdtLTQsMGwxMSwtMTEiIC8+JysKICAgICAgICAgICAgJyAgICA8cmVjdCBjbGFzcz0iYm91bmRhcnkiIHg9IjAiIHk9IicrKHBhbmVsX2hlaWdodC0xMykrJyIgd2lkdGg9IicrcGFuZWxfd2lkdGgrJyIgaGVpZ2h0PSIxMyIgLz4nKwogICAgICAgICAgICAnICA8L2c+JysKICAgICAgICAgICAgJyAgPGcgY2xhc3M9ImhpZ2hsaWdodCI+JysKICAgICAgICAgICAgJyAgICA8cmVjdCBjbGFzcz0ibWFya2VyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAwLDAuNSkiIHg9IicrZ3JhcGgubWFyZ2luLmxlZnQrJyIgeT0iJytncmFwaC5tYXJnaW4udG9wKyciIHdpZHRoPSIwIiBoZWlnaHQ9IicrZ3JhcGhfaGVpZ2h0KyciIC8+JysKICAgICAgICAgICAgJyAgICA8cGF0aCBjbGFzcz0ibWFya2VyIHN0YXJ0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTAwLDApIiBkPSJNJytncmFwaC5tYXJnaW4ubGVmdCsnLCcrKGdyYXBoLm1hcmdpbi50b3AtMSkrJ2wtMywtNWg2bC0zLDV2JysoZ3JhcGhfaGVpZ2h0KzEpKyciIC8+JysKICAgICAgICAgICAgJyAgICA8cGF0aCBjbGFzcz0ibWFya2VyIGVuZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwMCwwKSIgZD0iTScrZ3JhcGgubWFyZ2luLmxlZnQrJywnKyhncmFwaC5tYXJnaW4udG9wLTEpKydsLTMsLTVoNmwtMyw1dicrKGdyYXBoX2hlaWdodCsxKSsnIiAvPicrCiAgICAgICAgICAgICcgICAgPHJlY3QgY2xhc3M9ImJvdW5kYXJ5IiB4PSInKyhncmFwaC5tYXJnaW4ubGVmdC0yKSsnIiB5PSIwIiB3aWR0aD0iJysoZ3JhcGgueF9heGlzLndpZHRoKzIpKyciIGhlaWdodD0iJytncmFwaC5tYXJnaW4udG9wKyciIC8+JysKICAgICAgICAgICAgJyAgPC9nPicrCiAgICAgICAgICAgICc8L3N2Zz4nCiAgICAgICAgKTsKICAgICAgICBwYW5lbC5oZWlnaHQocGFuZWxfaGVpZ2h0KTsKCiAgICAgICAgLy8gQXR0YWNoIGV2ZW50IGhhbmRsZXJzCiAgICAgICAgcGFuZWwuZmluZCgnLnJlc2l6ZV9ncmlwIC5ib3VuZGFyeScpLm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHJlc2l6ZV9wYW5lbCk7CiAgICAgICAgcGFuZWwuZmluZCgnLmhpZ2hsaWdodCAuYm91bmRhcnknKS5vbignbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZSBtb3VzZWRvd24gdG91Y2hzdGFydCcsIGhpZ2hsaWdodF9ob3Zlcik7CiAgICAgICAgcGFuZWwuZmluZCgnLmJhci5vdmVybGF5Jykub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIGJhcl9ob3Zlcik7CiAgICAgICAgcGFuZWwuZmluZCgnLmJhci5vdmVybGF5Jykub24oJ2NsaWNrJywgYmFyX2NsaWNrKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgY2xpY2tpbmcgdGltZWxpbmUgYmFycy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gYmFyX2NsaWNrKGUpIHsKICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyA9PT0gJ25vbmUnKSByZXR1cm47CiAgICAgICAgaWYgKGhpZ2hsaWdodC5oaWdobGlnaHRlZCkgaGlkZV9oaWdobGlnaHQoKTsKICAgICAgICB2YXIgYnVuZGxlX2lkeCA9IE51bWJlcihlLnRhcmdldC5hdHRyaWJ1dGVzWydkYXRhLWJ1bmRsZSddLnZhbHVlKTsKICAgICAgICBoaWdobGlnaHQuc3RhcnQgPSBidW5kbGVfaWR4OwogICAgICAgIGhpZ2hsaWdodC5lbmQgPSBidW5kbGVfaWR4ICsgMTsKICAgICAgICBoaWdobGlnaHQuaGlnaGxpZ2h0ZWQgPSB0cnVlOwogICAgICAgIGdyYXBoLmVsZW0ub2ZmKCcuYmFyX2hvdmVyX21vdmUnKTsKICAgICAgICBzaG93X3Jldmlld19pbmZvKHRydWUgLyogc3RpY2t5ICovLCBlKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXZlbnQgaGFuZGxlciBmb3IgaG92ZXJpbmcgb3ZlciB0aW1lbGluZSBiYXJzLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBiYXJfaG92ZXIoZSkgewogICAgICAgIGlmIChzZXR0aW5ncy5zaG93X3Jldmlld19kZXRhaWxzID09PSAnbm9uZScpIHJldHVybjsKICAgICAgICBpZiAoaGlnaGxpZ2h0LmhpZ2hsaWdodGVkKSByZXR1cm47CiAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnbW91c2VlbnRlcic6CiAgICAgICAgICAgICAgICB2YXIgYnVuZGxlX2lkeCA9IE51bWJlcihlLnRhcmdldC5hdHRyaWJ1dGVzWydkYXRhLWJ1bmRsZSddLnZhbHVlKTsKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5zdGFydCA9IGJ1bmRsZV9pZHg7CiAgICAgICAgICAgICAgICBoaWdobGlnaHQuZW5kID0gYnVuZGxlX2lkeCArIDE7CiAgICAgICAgICAgICAgICBzaG93X3Jldmlld19pbmZvKGZhbHNlIC8qIHN0aWNreSAqLywgZSk7CiAgICAgICAgICAgICAgICBncmFwaC5lbGVtLm9uKCdtb3VzZW1vdmUuYmFyX2hvdmVyX21vdmUnLCBmdW5jdGlvbihlKXsKICAgICAgICAgICAgICAgICAgICBncmFwaC5yZXZpZXdfaW5mby5jc3MoJ3RvcCcsIGUuY2xpZW50WSAtIGUudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIDMwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdtb3VzZWxlYXZlJzoKICAgICAgICAgICAgICAgIGdyYXBoLmVsZW0ub2ZmKCcuYmFyX2hvdmVyX21vdmUnKTsKICAgICAgICAgICAgICAgIGhpZGVfcmV2aWV3X2luZm8oKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gQnVpbGQgYW5kIGRpc3BsYXkgdGhlIFJldmlldyBJbmZvIHBvcC11cC4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gc2hvd19yZXZpZXdfaW5mbyhzdGlja3ksIGUpIHsKICAgICAgICB2YXIgaW5mbyA9ICQoJyN0aW1lbGluZSAucmV2aWV3X2luZm8nKTsKICAgICAgICBpZiAoc3RpY2t5KSB7CiAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJy50aW1lbGluZV9oaWRlaW5mbycpOwogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrLnRpbWVsaW5lX2hpZGVpbmZvJywgZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLm9mZignLnRpbWVsaW5lX2hpZGVpbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgaGlkZV9oaWdobGlnaHQoKTsKICAgICAgICAgICAgICAgICAgICBoaWRlX3Jldmlld19pbmZvKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwgMTApOwogICAgICAgIH0KCiAgICAgICAgdmFyIHN0YXJ0ID0gTWF0aC5taW4oaGlnaGxpZ2h0LnN0YXJ0LCBoaWdobGlnaHQuZW5kKTsKICAgICAgICB2YXIgZW5kID0gTWF0aC5tYXgoaGlnaGxpZ2h0LnN0YXJ0LCBoaWdobGlnaHQuZW5kKTsKCiAgICAgICAgdmFyIGJ1bmRsZSA9IHtpdGVtczpbXX07CiAgICAgICAgZm9yICh2YXIgYnVuZGxlX2lkeCA9IHN0YXJ0OyBidW5kbGVfaWR4IDwgZW5kOyBidW5kbGVfaWR4KyspIHsKICAgICAgICAgICAgYnVuZGxlLml0ZW1zID0gYnVuZGxlLml0ZW1zLmNvbmNhdChncmFwaC5idW5kbGVzW2J1bmRsZV9pZHhdLml0ZW1zKTsKICAgICAgICB9CgogICAgICAgIGNhbGNfYnVuZGxlX3N0YXRzKGJ1bmRsZSk7CgogICAgICAgIC8vIFByaW50IHRoZSBkYXRlIG9yIGRhdGUgcmFuZ2UuCiAgICAgICAgdmFyIGFsbG93X25vdyA9ICgoc3RhcnQgPT09IDApICYmIChncmFwaC5idW5kbGVfc2l6ZSA9PT0gMSkpOwogICAgICAgIHZhciBodG1sID0gJzxkaXY+JzsKICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICB2YXIgc3RhcnRfZGF0ZSA9IG5ldyBEYXRlKGdyYXBoLnN0YXJ0X3RpbWUuZ2V0VGltZSgpICsgYnVuZGxlX3RvX3RpYyhzdGFydCkgKiAzNjAwMDAwKTsKICAgICAgICB2YXIgZW5kX2RhdGUgPSBuZXcgRGF0ZShncmFwaC5zdGFydF90aW1lLmdldFRpbWUoKSArIGJ1bmRsZV90b190aWMoZW5kKSAqIDM2MDAwMDAgKyAodGltZV9zaGlmdCAtIDEpICogNjAwMDApOwogICAgICAgIHZhciBzYW1lX2RheSA9IChuZXcgRGF0ZShzdGFydF9kYXRlKS5zZXRIb3VycygwLDAsMCwwKSA9PSBuZXcgRGF0ZShlbmRfZGF0ZSkuc2V0SG91cnMoMCwwLDAsMCkpOwogICAgICAgIHZhciBzaG93X21vbnRoID0gKChub3cuZ2V0TW9udGgoKSAhPSBzdGFydF9kYXRlLmdldE1vbnRoKCkpIHx8ICgobmV3IERhdGUoZW5kX2RhdGUpLnNldEhvdXJzKDAsMCwwLDApIC0gbmV3IERhdGUobm93KS5zZXRIb3VycygwLDAsMCwwKSkgPiAoNi41ICogODY0MDAwMDApKSk7CiAgICAgICAgaWYgKCgoZW5kLXN0YXJ0KSA+IDEpIHx8IChncmFwaC5idW5kbGVfc2l6ZSA+IDEpKSB7CiAgICAgICAgICAgIGh0bWwgKz0gZm9ybWF0X2RhdGUoc3RhcnRfZGF0ZSwgYWxsb3dfbm93LCB0cnVlIC8qIHNob3dfZGF5ICovLCBzaG93X21vbnRoKSArICcgdG8gJyArIGZvcm1hdF9kYXRlKGVuZF9kYXRlLCBmYWxzZSwgIXNhbWVfZGF5IC8qIHNob3dfZGF5ICovLCBzaG93X21vbnRoICYmICFzYW1lX2RheSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaHRtbCArPSBmb3JtYXRfZGF0ZShzdGFydF9kYXRlLCBhbGxvd19ub3csIHRydWUgLyogc2hvd19kYXkgKi8sIHNob3dfbW9udGgpOwogICAgICAgIH0KICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwoKICAgICAgICAvLyBQb3B1bGF0ZSBpdGVtIHR5cGUgc3VtbWFyaWVzLgogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InN1bW1hcnkiPic7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idG90Ij4nKyhidW5kbGUuc3RhdHMuY291bnQpKycgcmV2aWV3czwvZGl2Pic7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iaW5kZW50Ij4nOwoKICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJpdGVtX3R5cGUgcmFkIj48c3BhbiBjbGFzcz0iZml4ZWQiPicrKGJ1bmRsZS5zdGF0cy5yYWQgfHwgMCkrJzwvc3Bhbj4gcmFkaWNhbHM8L2Rpdj4nOwogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9Iml0ZW1fdHlwZSBrYW4iPjxzcGFuIGNsYXNzPSJmaXhlZCI+JysoYnVuZGxlLnN0YXRzLmthbiB8fCAwKSsnPC9zcGFuPiBrYW5qaTwvZGl2Pic7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iaXRlbV90eXBlIHZvYyI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMudm9jIHx8IDApKyc8L3NwYW4+IHZvY2FidWxhcnk8L2Rpdj4nOwoKICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJzcnNfc3RhZ2UgYXBwciI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMuYXBwciB8fCAwKSsnPC9zcGFuPiBhcHByZW50aWNlPC9kaXY+JzsKICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJzcnNfc3RhZ2UgZ3VydSI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMuZ3VydSB8fCAwKSsnPC9zcGFuPiBndXJ1PC9kaXY+JzsKICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJzcnNfc3RhZ2UgbWFzdCI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMubWFzdCB8fCAwKSsnPC9zcGFuPiBtYXN0ZXI8L2Rpdj4nOwogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InNyc19zdGFnZSBlbmxpIj48c3BhbiBjbGFzcz0iZml4ZWQiPicrKGJ1bmRsZS5zdGF0cy5lbmxpIHx8IDApKyc8L3NwYW4+IGVubGlnaHRlbmVkPC9kaXY+JzsKICAgICAgICBpZiAoc2V0dGluZ3Muc3JzX2N1cnJfbmV4dCA9PT0gJ25leHQnKSB7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InNyc19zdGFnZSBidXJuIj48c3BhbiBjbGFzcz0iZml4ZWQiPicrKGJ1bmRsZS5zdGF0cy5idXJuIHx8IDApKyc8L3NwYW4+IGJ1cm48L2Rpdj4nOwogICAgICAgIH0KCiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0ibGV2ZWwgbHZsZ3JwMCI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMubHZsZ3JwMCB8fCAwKSsnPC9zcGFuPiBsZXZlbHMgMS0xMDwvZGl2Pic7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0ibGV2ZWwgbHZsZ3JwMSI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMubHZsZ3JwMSB8fCAwKSsnPC9zcGFuPiBsZXZlbHMgMTEtMjA8L2Rpdj4nOwogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImxldmVsIGx2bGdycDIiPjxzcGFuIGNsYXNzPSJmaXhlZCI+JysoYnVuZGxlLnN0YXRzLmx2bGdycDIgfHwgMCkrJzwvc3Bhbj4gbGV2ZWxzIDIxLTMwPC9kaXY+JzsKICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJsZXZlbCBsdmxncnAzIj48c3BhbiBjbGFzcz0iZml4ZWQiPicrKGJ1bmRsZS5zdGF0cy5sdmxncnAzIHx8IDApKyc8L3NwYW4+IGxldmVscyAzMS00MDwvZGl2Pic7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0ibGV2ZWwgbHZsZ3JwNCI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nKyhidW5kbGUuc3RhdHMubHZsZ3JwNCB8fCAwKSsnPC9zcGFuPiBsZXZlbHMgNDEtNTA8L2Rpdj4nOwogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImxldmVsIGx2bGdycDUiPjxzcGFuIGNsYXNzPSJmaXhlZCI+JysoYnVuZGxlLnN0YXRzLmx2bGdycDUgfHwgMCkrJzwvc3Bhbj4gbGV2ZWxzIDUxLTYwPC9kaXY+JzsKCiAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKCiAgICAgICAgaWYgKChidW5kbGUuc3RhdHMuY3Vycl9jb3VudCA+IDApIHx8IChidW5kbGUuc3RhdHMuYnVybl9jb3VudCA+IDApKSB7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImluZGVudCI+JzsKICAgICAgICAgICAgaWYgKGJ1bmRsZS5zdGF0cy5jdXJyX2NvdW50ID4gMCkgaHRtbCArPSAnPGRpdiBjbGFzcz0iY3VyIj48c3BhbiBjbGFzcz0iZml4ZWQiPicrYnVuZGxlLnN0YXRzLmN1cnJfY291bnQrJzwvc3Bhbj4gQ3VycmVudCBMZXZlbDwvZGl2Pic7CiAgICAgICAgICAgIGlmIChidW5kbGUuc3RhdHMuYnVybl9jb3VudCA+IDApIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImJ1ciI+PHNwYW4gY2xhc3M9ImZpeGVkIj4nK2J1bmRsZS5zdGF0cy5idXJuX2NvdW50Kyc8L3NwYW4+IEJ1cm4gSXRlbScrKGJ1bmRsZS5zdGF0cy5idXJuX2NvdW50ID4gMSA/ICdzJyA6ICcnKSsnPC9kaXY+JzsKICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICB9CgogICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CgogICAgICAgIGlmIChzZXR0aW5ncy5yZXZpZXdfZGV0YWlsc19idXR0b25zKSB7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImRldGFpbF9idXR0b25zIj4nOwogICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIGNsYXNzPSJjb3VudCI+UmV2aWV3IENvdW50PC9idXR0b24+JzsKICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iaXRlbV90eXBlIj5JdGVtIFR5cGU8L2J1dHRvbj4nOwogICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIGNsYXNzPSJzcnNfc3RhZ2UiPlNSUyBMZXZlbDwvYnV0dG9uPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzxidXR0b24gY2xhc3M9ImxldmVsIj5MZXZlbDwvYnV0dG9uPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyA9PT0gJ2l0ZW1fbGlzdCcgfHwgc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyA9PT0gJ2Z1bGwnKSB7CiAgICAgICAgICAgIGh0bWwgPSBwb3B1bGF0ZV9pdGVtX2xpc3QoYnVuZGxlLCBodG1sKTsKICAgICAgICB9CgogICAgICAgIGluZm8uZmluZCgnLmlubmVyJykuaHRtbChodG1sKTsKICAgICAgICBncmFwaC5yZXZpZXdfaW5mbyA9IGluZm87CgogICAgICAgIHZhciBudW1fd2lkdGggPSBidW5kbGUuc3RhdHMuY291bnQudG9TdHJpbmcoKTsKICAgICAgICBpbmZvLmZpbmQoJy5zdW1tYXJ5IC5maXhlZCcpLmNzcygnd2lkdGgnLCAobnVtX3dpZHRoLnRvU3RyaW5nKCkubGVuZ3RoICogOSArIDgpICsgJ3B4Jyk7CgogICAgICAgIHZhciB0b3AsIGxlZnQsIHJpZ2h0LCB3aWR0aDsKICAgICAgICB2YXIgaGFsZl93aWR0aCA9IGdyYXBoLnhfYXhpcy53aWR0aC8yOwogICAgICAgIHZhciB4ID0gYnVuZGxlX3RvX3goc3RhcnQpOwogICAgICAgIGluZm8uY3NzKCdtYXgtd2lkdGgnLCBoYWxmX3dpZHRoKTsKICAgICAgICBpZiAoaGlnaGxpZ2h0LmRyYWdnaW5nKSB7CiAgICAgICAgICAgIHRvcCA9IGdyYXBoLm1hcmdpbi50b3AgKyBncmFwaC55X2F4aXMuaGVpZ2h0ICsgZ3JhcGgubWFyZ2luLmJvdHRvbTsKICAgICAgICAgICAgaWYgKHggPCBoYWxmX3dpZHRoKSB7CiAgICAgICAgICAgICAgICBsZWZ0ID0gZ3JhcGgubWFyZ2luLmxlZnQgKyB4OwogICAgICAgICAgICAgICAgaW5mby5jc3Moe2xlZnQ6bGVmdCwgcmlnaHQ6J2F1dG8nLCB0b3A6dG9wfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByaWdodCA9IDA7CiAgICAgICAgICAgICAgICBpbmZvLmNzcyh7bGVmdDonYXV0bycsIHJpZ2h0OnJpZ2h0LCB0b3A6dG9wfSk7CiAgICAgICAgICAgICAgICBpZiAoeCA8IGdyYXBoLnhfYXhpcy53aWR0aCAtIGluZm8ub3V0ZXJXaWR0aCgpKSB7CiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGdyYXBoLm1hcmdpbi5sZWZ0ICsgeDsKICAgICAgICAgICAgICAgICAgICBpbmZvLmNzcyh7bGVmdDpsZWZ0LCByaWdodDonYXV0bycsIHRvcDp0b3B9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZSkgewogICAgICAgICAgICB0b3AgPSBlLmNsaWVudFkgLSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSAzMDsKICAgICAgICAgICAgaWYgKHggPCBoYWxmX3dpZHRoKSB7CiAgICAgICAgICAgICAgICBsZWZ0ID0gZ3JhcGgubWFyZ2luLmxlZnQgKyBidW5kbGVfdG9feChzdGFydCsxKSArIDQ7CiAgICAgICAgICAgICAgICBpbmZvLmNzcyh7bGVmdDpsZWZ0LCByaWdodDonYXV0bycsIHRvcDp0b3B9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJpZ2h0ID0gZ3JhcGgueF9heGlzLndpZHRoIC0gYnVuZGxlX3RvX3goc3RhcnQpICsgNDsKICAgICAgICAgICAgICAgIGluZm8uY3NzKHtsZWZ0OidhdXRvJywgcmlnaHQ6cmlnaHQsIHRvcDp0b3B9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaW5mby5yZW1vdmVDbGFzcygnaGlkZGVuJyk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIFBvcHVsYXRlIHRoZSBsaXN0IG9mIGl0ZW1zIHByZXNlbnQgaW4gYSB0aW1lIGJ1bmRsZS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gcG9wdWxhdGVfaXRlbV9saXN0KGJ1bmRsZSwgaHRtbCkgewogICAgICAgIHZhciBzcnNfdG9fY2xhc3MgPSB7CiAgICAgICAgICAgIGN1cnI6IFsnYXBwcicsJ2FwcHInLCdhcHByJywnYXBwcicsJ2FwcHInLCdndXJ1JywnZ3VydScsJ21hc3QnLCdlbmxpJ10sCiAgICAgICAgICAgIG5leHQ6IFsnYXBwcicsJ2FwcHInLCdhcHByJywnYXBwcicsJ2d1cnUnLCdndXJ1JywnbWFzdCcsJ2VubGknLCdidXJuJ10KICAgICAgICB9OwogICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9Iml0ZW1faW5mbyBoaWRkZW4iPjwvZGl2Pjx1bCBjbGFzcz0iaXRlbV9saXN0Ij4nOwogICAgICAgIGZvciAodmFyIGl0ZW1faWR4IGluIGJ1bmRsZS5pdGVtcykgewogICAgICAgICAgICB2YXIgaXRlbSA9IGJ1bmRsZS5pdGVtc1tpdGVtX2lkeF07CiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gWwogICAgICAgICAgICAgICAgaXRlbS5vYmplY3Quc2xpY2UoMCwzKSwKICAgICAgICAgICAgICAgIHNyc190b19jbGFzc1tzZXR0aW5ncy5zcnNfY3Vycl9uZXh0XVtpdGVtLmFzc2lnbm1lbnRzLnNyc19zdGFnZV0sCiAgICAgICAgICAgICAgICAnbHZsZ3JwJytNYXRoLmZsb29yKChpdGVtLmRhdGEubGV2ZWwtMSkvMTApCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHZhciBpdGVtX25hbWU7CiAgICAgICAgICAgIGlmIChpdGVtLm9iamVjdCA9PT0gJ3JhZGljYWwnKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kYXRhLmNoYXJhY3RlcnMpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8bGkgY2xhc3M9IicrY2xhc3Nlcy5qb2luKCcgJykrJyI+JytpdGVtLmRhdGEuY2hhcmFjdGVycysnPC9saT4nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8bGkgY2xhc3M9IicrY2xhc3Nlcy5qb2luKCcgJykrJyIgZGF0YS1yYWRuYW1lPSInK2l0ZW0uZGF0YS5zbHVnKyciPi4uLjwvbGk+JzsKICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbyAuaXRlbV9saXN0ID4gbGlbZGF0YS1yYWRuYW1lPSInK2l0ZW0uZGF0YS5zbHVnKyciXSc7CiAgICAgICAgICAgICAgICAgICAgbG9hZF9yYWRpY2FsX3N2ZyhpdGVtKS50aGVuKHBvcHVsYXRlX3JhZGljYWxfc3ZnLmJpbmQobnVsbCwgc2VsZWN0b3IpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxsaSBjbGFzcz0iJytjbGFzc2VzLmpvaW4oJyAnKSsnIj4nK2l0ZW0uZGF0YS5zbHVnKyc8L2xpPic7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaHRtbCArPSAnPC91bD4nOwogICAgICAgIHJldHVybiBodG1sOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBJbnNlcnQgYW4gc3ZnIGludG8gYSBzcGVjaWZpZWQgRE9NIGVsZW1lbnQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHBvcHVsYXRlX3JhZGljYWxfc3ZnKHNlbGVjdG9yLCBzdmcpIHsKICAgICAgICAkKHNlbGVjdG9yKS5odG1sKHN2Zyk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV2ZW50IGhhbmRsZXIgZm9yIGJ1dHRvbnMgb24gdGhlIFJldmlldyBJbmZvIHBvcC11cC4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZGV0YWlsX2J1dHRvbl9jbGlja2VkKGUpIHsKICAgICAgICB2YXIgbW9kZSA9IGUudGFyZ2V0LmNsYXNzTmFtZTsKICAgICAgICAkKCcjdGltZWxpbmUgLnJldmlld19pbmZvJykuYXR0cignZGF0YS1tb2RlJywgbW9kZSk7CiAgICAgICAgc2V0dGluZ3MucmV2aWV3X2RldGFpbHNfc3VtbWFyeSA9IG1vZGU7CiAgICAgICAgc2F2ZV9zZXR0aW5ncygpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBFdmVudCBoYW5kbGVyIGZvciBob3ZlcmluZyBvdmVyIGFuIGl0ZW0gaW4gdGhlIFJldmlldyBEZXRhaWwgcG9wLXVwLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBpdGVtX2hvdmVyKGUpIHsKICAgICAgICBpZiAoc2V0dGluZ3Muc2hvd19yZXZpZXdfZGV0YWlscyAhPT0gJ2Z1bGwnKSByZXR1cm47CiAgICAgICAgdmFyIGluZm8gPSAkKCcjdGltZWxpbmUgLml0ZW1faW5mbycpOwogICAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ21vdXNlZW50ZXInOgogICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTsKICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZ3JhcGguY3VycmVudF9idW5kbGUuaXRlbXNbdGFyZ2V0LmluZGV4KCldOwogICAgICAgICAgICAgICAgdmFyIHBvcyA9IHRhcmdldC5wb3NpdGlvbigpOwogICAgICAgICAgICAgICAgaW5mby5jc3Moe3RvcDpwb3MudG9wK3RhcmdldC5vdXRlckhlaWdodCgpKzN9KTsKICAgICAgICAgICAgICAgIHBvcHVsYXRlX2l0ZW1faW5mbyhpbmZvLCBpdGVtKTsKICAgICAgICAgICAgICAgIGluZm8ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdtb3VzZWxlYXZlJzoKICAgICAgICAgICAgICAgIGluZm8uYWRkQ2xhc3MoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBIYW5kbGVyIGZvciByZXNpemluZyB0aGUgdGltZWxpbmUgd2hlbiB0aGUgd2luZG93IHNpemUgY2hhbmdlcy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gd2luZG93X3Jlc2l6ZWQoKSB7CiAgICAgICAgdmFyIG5ld193aWR0aCA9IGdyYXBoLmVsZW0ud2lkdGgoKTsKICAgICAgICBpZiAobmV3X3dpZHRoICE9IGdyYXBoLnhfYXhpcy53aWR0aCArIGdyYXBoLm1hcmdpbi5sZWZ0KSB7CiAgICAgICAgICAgIGJ1bmRsZV9ieV90aW1lc2xvdCgpOwogICAgICAgICAgICBkcmF3X3RpbWVsaW5lKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBHZW5lcmF0ZSB0aGUgSFRNTCBjb250ZW50IG9mIHRoZSBJdGVtIERldGFpbCBwb3AtdXAuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIHZhciBzcnNfc3RhZ2VzID0gWydJbml0aWF0ZScsICdBcHByZW50aWNlIDEnLCAnQXBwcmVudGljZSAyJywgJ0FwcHJlbnRpY2UgMycsICdBcHByZW50aWNlIDQnLCAnR3VydSAxJywgJ0d1cnUgMicsICdNYXN0ZXInLCAnRW5saWdodGVuZWQnLCAnQnVybmVkJ10KICAgIGZ1bmN0aW9uIHBvcHVsYXRlX2l0ZW1faW5mbyhpbmZvLCBpdGVtKSB7CiAgICAgICAgdmFyIGh0bWw7CiAgICAgICAgc3dpdGNoIChpdGVtLm9iamVjdCkgewogICAgICAgICAgICBjYXNlICdyYWRpY2FsJzoKICAgICAgICAgICAgICAgIGlmIChpdGVtLmRhdGEuY2hhcmFjdGVycykgewogICAgICAgICAgICAgICAgICAgIGh0bWwgPSAnPHNwYW4gY2xhc3M9Iml0ZW0iPlJhZGljYWw6IDxzcGFuIGNsYXNzPSJzbHVnIiBsYW5nPSJqYSI+JytpdGVtLmRhdGEuY2hhcmFjdGVycysnPC9zcGFuPjwvc3Bhbj48YnI+JzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCA9ICc8c3BhbiBjbGFzcz0iaXRlbSI+UmFkaWNhbDogPHNwYW4gY2xhc3M9InNsdWciIGRhdGEtcmFkbmFtZT0iJytpdGVtLmRhdGEuc2x1ZysnIj4uLi48L3NwYW4+PC9zcGFuPjxicj4nOwogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9ICcjdGltZWxpbmUgLml0ZW1faW5mbyBbZGF0YS1yYWRuYW1lPSInK2l0ZW0uZGF0YS5zbHVnKyciXSc7CiAgICAgICAgICAgICAgICAgICAgbG9hZF9yYWRpY2FsX3N2ZyhpdGVtKS50aGVuKHBvcHVsYXRlX3JhZGljYWxfc3ZnLmJpbmQobnVsbCwgc2VsZWN0b3IpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAna2FuamknOgogICAgICAgICAgICAgICAgaHRtbCA9ICc8c3BhbiBjbGFzcz0iaXRlbSI+S2Fuamk6IDxzcGFuIGNsYXNzPSJzbHVnIiBsYW5nPSJqYSI+JytpdGVtLmRhdGEuc2x1ZysnPC9zcGFuPjwvc3Bhbj48YnI+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gZ2V0X2ltcG9ydGFudF9yZWFkaW5nKGl0ZW0pKyc8YnI+JzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAndm9jYWJ1bGFyeSc6CiAgICAgICAgICAgICAgICBodG1sID0gJzxzcGFuIGNsYXNzPSJpdGVtIj5Wb2NhYjogPHNwYW4gY2xhc3M9InNsdWciIGxhbmc9ImphIj4nK2l0ZW0uZGF0YS5zbHVnKyc8L3NwYW4+PC9zcGFuPjxicj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnUmVhZGluZzogJytnZXRfcmVhZGluZyhpdGVtKSsnPGJyPic7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaHRtbCArPSAnTWVhbmluZzogJytnZXRfbWVhbmluZ3MoaXRlbSkrJzxicj4nOwogICAgICAgIGh0bWwgKz0gJ0xldmVsOiAnK2l0ZW0uZGF0YS5sZXZlbCsnPGJyPic7CiAgICAgICAgaHRtbCArPSAnU1JTIExldmVsOiAnK2l0ZW0uYXNzaWdubWVudHMuc3JzX3N0YWdlKycgKCcrc3JzX3N0YWdlc1tpdGVtLmFzc2lnbm1lbnRzLnNyc19zdGFnZV0rJyknOwogICAgICAgIGluZm8uaHRtbChodG1sKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gTG9hZCBhIHJhZGljYWwncyBzdmcgZmlsZS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gbG9hZF9yYWRpY2FsX3N2ZyhpdGVtKSB7CiAgICAgICAgdmFyIHByb21pc2UgPSBncmFwaC5yYWRpY2FsX2NhY2hlW2l0ZW0uZGF0YS5zbHVnXTsKICAgICAgICBpZiAocHJvbWlzZSkgcmV0dXJuIHByb21pc2U7CiAgICAgICAgaWYgKGl0ZW0uZGF0YS5jaGFyYWN0ZXJfaW1hZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHByb21pc2U7CiAgICAgICAgdmFyIHVybCA9IGl0ZW0uZGF0YS5jaGFyYWN0ZXJfaW1hZ2VzLmZpbHRlcihmdW5jdGlvbihpbWcpewogICAgICAgICAgICByZXR1cm4gKGltZy5jb250ZW50X3R5cGUgPT09ICdpbWFnZS9zdmcreG1sJyAmJiAhaW1nLm1ldGFkYXRhLmlubGluZV9zdHlsZXMpOwogICAgICAgIH0pWzBdLnVybDsKICAgICAgICBwcm9taXNlID0gd2tvZi5sb2FkX2ZpbGUodXJsKTsKICAgICAgICBncmFwaC5yYWRpY2FsX2NhY2hlW2l0ZW0uZGF0YS5zbHVnXSA9IHByb21pc2U7CiAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgdGhlIG1lYW5pbmdzIChpbmNsdWRpbmcgc3lub255bXMpIGZyb20gYW4gaXRlbS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZ2V0X21lYW5pbmdzKGl0ZW0pIHsKICAgICAgICB2YXIgbWVhbmluZ3MgPSBbXTsKICAgICAgICBpZiAoaXRlbS5zdHVkeV9tYXRlcmlhbHMgJiYgaXRlbS5zdHVkeV9tYXRlcmlhbHMubWVhbmluZ19zeW5vbnltcykgewogICAgICAgICAgICBtZWFuaW5ncyA9IGl0ZW0uc3R1ZHlfbWF0ZXJpYWxzLm1lYW5pbmdfc3lub255bXM7CiAgICAgICAgfQogICAgICAgIG1lYW5pbmdzID0gbWVhbmluZ3MuY29uY2F0KGl0ZW0uZGF0YS5tZWFuaW5ncy5tYXAobWVhbmluZyA9PiBtZWFuaW5nLm1lYW5pbmcpKTsKICAgICAgICByZXR1cm4gdG9fdGl0bGVfY2FzZShtZWFuaW5ncy5qb2luKCcsICcpKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXh0cmFjdCB0aGUgJ2ltcG9ydGFudCcgcmVhZGluZ3MgZnJvbSBhIGthbmppLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBnZXRfaW1wb3J0YW50X3JlYWRpbmcoaXRlbSkgewogICAgICAgIHZhciByZWFkaW5ncyA9IGl0ZW0uZGF0YS5yZWFkaW5ncy5maWx0ZXIocmVhZGluZyA9PiByZWFkaW5nLnByaW1hcnkpOwogICAgICAgIHJldHVybiB0b190aXRsZV9jYXNlKHJlYWRpbmdzWzBdLnR5cGUpKyc6ICcrcmVhZGluZ3MubWFwKHJlYWRpbmcgPT4gcmVhZGluZy5yZWFkaW5nKS5qb2luKCcsICcpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBFeHRyYWN0IHRoZSBsaXN0IG9mIHJlYWRpbmdzIGZyb20gYW4gaXRlbS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZ2V0X3JlYWRpbmcoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmRhdGEucmVhZGluZ3MubWFwKHJlYWRpbmcgPT4gcmVhZGluZy5yZWFkaW5nKS5qb2luKCcsICcpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBIaWRlIHRoZSBSZXZpZXcgSW5mbyBwb3AtdXAuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGhpZGVfcmV2aWV3X2luZm8oKSB7CiAgICAgICAgJCgnI3RpbWVsaW5lIC5yZXZpZXdfaW5mbycpLmFkZENsYXNzKCdoaWRkZW4nKTsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gR2VuZXJhdGUgYSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGZvcm1hdF9kYXRlKHRpbWUsIGFsbG93X25vdywgc2hvd19kYXksIHNob3dfbW9udGgpIHsKICAgICAgICB2YXIgc3RyID0gJyc7CiAgICAgICAgaWYgKGFsbG93X25vdyAmJiB0aW1lLmdldFRpbWUoKSA+PSBncmFwaC5zdGFydF90aW1lLmdldFRpbWUoKSkgcmV0dXJuICdOb3cnOwogICAgICAgIGlmIChzaG93X2RheSkgewogICAgICAgICAgICBpZiAobmV3IERhdGUodGltZSkuc2V0SG91cnMoMCwwLDAsMCkgPT09IChuZXcgRGF0ZSgpKS5zZXRIb3VycygwLDAsMCwwKSkgewogICAgICAgICAgICAgICAgc3RyID0gJ1RvZGF5JzsKICAgICAgICAgICAgICAgIHNob3dfbW9udGggPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN0ciA9ICdTdW5Nb25UdWVXZWRUaHVGcmlTYXQnLnN1YnN0cih0aW1lLmdldERheSgpKjMsIDMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzaG93X21vbnRoKSB7CiAgICAgICAgICAgICAgICBzdHIgKz0gJywgJyArICdKYW5GZWJNYXJBcHJNYXlKdW5KdWxBdWdTZXBPY3ROb3ZEZWMnLnN1YnN0cih0aW1lLmdldE1vbnRoKCkqMywgMykgKyAnICcgKyB0aW1lLmdldERhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoc2V0dGluZ3MudGltZV9mb3JtYXQgPT09ICcyNGhvdXInKSB7CiAgICAgICAgICAgIHN0ciArPSAnICcgKyAoJzAnICsgdGltZS5nZXRIb3VycygpKS5zbGljZSgtMikgKyAnOicgKyAoJzAnK3RpbWUuZ2V0TWludXRlcygpKS5zbGljZSgtMik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RyICs9ICcgJyArICgnMCcgKyAoKCh0aW1lLmdldEhvdXJzKCkrMTEpJTEyKSsxKSkuc2xpY2UoLTIpICsgJzonKygnMCcrdGltZS5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKSArICdhcCdbTWF0aC5mbG9vcih0aW1lLmdldEhvdXJzKCkvMTIpXSArICdtJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIH0KCiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRmV0Y2ggaXRlbSBpbmZvLCBhbmQgcmVkcmF3IHRoZSB0aW1lbGluZS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZmV0Y2hfYW5kX3VwZGF0ZSgpIHsKICAgICAgICByZXR1cm4gd2tvZi5JdGVtRGF0YS5nZXRfaXRlbXMoJ3N1YmplY3RzLCBhc3NpZ25tZW50cywgc3R1ZHlfbWF0ZXJpYWxzJykKICAgICAgICAudGhlbihwcm9jZXNzX2l0ZW1zKQogICAgICAgIC50aGVuKGRyYXdfdGltZWxpbmUpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBQcm9jZXNzIHRoZSBmZXRjaGVkIGl0ZW1zLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBwcm9jZXNzX2l0ZW1zKGZldGNoZWRfaXRlbXMpIHsKICAgICAgICAvLyBSZW1vdmUgYW55IHVubGVhcm5lZCBpdGVtcy4KICAgICAgICBncmFwaC5pdGVtcyA9IFtdOwogICAgICAgIGZvciAodmFyIGlkeCBpbiBmZXRjaGVkX2l0ZW1zKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gZmV0Y2hlZF9pdGVtc1tpZHhdOwogICAgICAgICAgICBpZiAoIWl0ZW0uYXNzaWdubWVudHMgfHwgIWl0ZW0uYXNzaWdubWVudHMuYXZhaWxhYmxlX2F0IHx8IGl0ZW0uYXNzaWdubWVudHMuc3JzX3N0YWdlIDw9IDApIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoaXRlbS5kYXRhLmxldmVsID4gd2tvZi51c2VyLmxldmVsKSBjb250aW51ZTsKICAgICAgICAgICAgZ3JhcGguaXRlbXMucHVzaChpdGVtKTsKICAgICAgICB9CgogICAgICAgIGdyYXBoLml0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGEuYXNzaWdubWVudHMuYXZhaWxhYmxlX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmFzc2lnbm1lbnRzLmF2YWlsYWJsZV9hdCkuZ2V0VGltZSgpKTsKICAgICAgICB9KTsKCiAgICAgICAgYnVuZGxlX2J5X3RpbWVzbG90KCk7CiAgICAgICAgdXBkYXRlX3NsaWRlcl9yZXZpZXdzKCk7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEJ1bmRsZSB0aGUgaXRlbXMgaW50byB0aW1lc2xvdHMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGJ1bmRsZV9ieV90aW1lc2xvdCgpIHsKICAgICAgICB2YXIgYnVuZGxlX3NpemUgPSBncmFwaC5idW5kbGVfc2l6ZSA9IGdldF9ob3Vyc19wZXJfYmFyKCk7CiAgICAgICAgdmFyIGJ1bmRsZXMgPSBncmFwaC5idW5kbGVzID0gW107CiAgICAgICAgdmFyIHRpbWVzbG90cyA9IGdyYXBoLnRpbWVzbG90cyA9IFtdOwoKICAgICAgICAvLyBSZXdpbmQgdGhlIGNsb2NrIHRvIHRoZSBzdGFydCBvZiBhIGJ1bmRsZSBwZXJpb2QuCiAgICAgICAgdmFyIHN0YXJ0X3RpbWUgPSB0b1N0YXJ0T2ZVVENIb3VyKG5ldyBEYXRlKCkpOwogICAgICAgIHdoaWxlIChzdGFydF90aW1lLmdldEhvdXJzKCkgJSBidW5kbGVfc2l6ZSAhPT0gMCkgc3RhcnRfdGltZSA9IG5ldyBEYXRlKHN0YXJ0X3RpbWUuZ2V0VGltZSgpIC0gMzYwMDAwMCk7CiAgICAgICAgZ3JhcGguc3RhcnRfdGltZSA9IHN0YXJ0X3RpbWU7CgogICAgICAgIC8vIEZpbmQgdGhlIHRpYyBvZiB0aGUgbGFzdCBidW5kbGUgKHJvdW5kIGRvd24gaWYgb25seSBhIHBhcnRpYWwpLgogICAgICAgIGdyYXBoLnRvdGFsX3Jldmlld3MgPSAwOwogICAgICAgIGdyYXBoLm1heF9yZXZpZXdzID0gMDsKICAgICAgICB2YXIgaG91ciA9IDAsIGl0ZW1faWR4ID0gMCwgaXRlbV9jb3VudCA9IDA7CiAgICAgICAgdmFyIGJ1bmRsZSA9IHtzdGFydF90aW1lOmhvdXIsIGl0ZW1zOltdfTsKICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICB0aW1lc2xvdHMucHVzaChidW5kbGVzLmxlbmd0aCk7CiAgICAgICAgICAgIGhvdXIrKzsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgcGFzdCBlbmQgb2YgdGhlIHRpbWVsaW5lIChpbmNsdWRpbmcgcm91bmRpbmcgdXAgdG8gdGhlIG5lYXJlc3QgYnVuZGxlKQogICAgICAgICAgICAvLyBOZWVkIHRvIHVzZSBkYXRlIGZ1bmN0aW9uIHRvIGFjY291bnQgZm9yIHRpbWUgc2hpZnRzIChlLmcuIERheWxpZ2h0IFNhdmluZ3MgVGltZSkKICAgICAgICAgICAgdmFyIHRpbWUgPSBuZXcgRGF0ZShzdGFydF90aW1lLmdldFRpbWUoKSArIGhvdXIgKiAzNjAwMDAwKTsKICAgICAgICAgICAgaWYgKCh0aW1lLmdldEhvdXJzKCkgJSBidW5kbGVfc2l6ZSkgIT09IDApIGNvbnRpbnVlOwoKICAgICAgICAgICAgdmFyIHN0YXJ0X2lkeCA9IGl0ZW1faWR4OwogICAgICAgICAgICB3aGlsZSAoKGl0ZW1faWR4IDwgZ3JhcGguaXRlbXMubGVuZ3RoKSAmJgogICAgICAgICAgICAgICAgICAgKG5ldyBEYXRlKGdyYXBoLml0ZW1zW2l0ZW1faWR4XS5hc3NpZ25tZW50cy5hdmFpbGFibGVfYXQpIDwgdGltZSkpIHsKICAgICAgICAgICAgICAgIGl0ZW1faWR4Kys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJ1bmRsZS5pdGVtcyA9IGdyYXBoLml0ZW1zLnNsaWNlKHN0YXJ0X2lkeCwgaXRlbV9pZHgpOwogICAgICAgICAgICBidW5kbGUuZW5kX3RpbWUgPSBob3VyOwogICAgICAgICAgICBjYWxjX2J1bmRsZV9zdGF0cyhidW5kbGUpOwogICAgICAgICAgICBncmFwaC5idW5kbGVzLnB1c2goYnVuZGxlKTsKCiAgICAgICAgICAgIGdyYXBoLnRvdGFsX3Jldmlld3MgKz0gYnVuZGxlLml0ZW1zLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGJ1bmRsZS5pdGVtcy5sZW5ndGggPiBncmFwaC5tYXhfcmV2aWV3cykgZ3JhcGgubWF4X3Jldmlld3MgPSBidW5kbGUuaXRlbXMubGVuZ3RoOwogICAgICAgICAgICBpZiAoaG91ciA+PSBncmFwaC54X2F4aXMubWF4X2hvdXJzKSBicmVhazsKCiAgICAgICAgICAgIGJ1bmRsZSA9IHtzdGFydF90aW1lOmhvdXIsIGl0ZW1zOltdfTsKICAgICAgICB9CiAgICAgICAgZ3JhcGgueF9heGlzLm1heF9ob3VycyA9IGhvdXI7CiAgICB9CgogICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIENhbGN1bGF0ZSBzdGF0cyBmb3IgYSBidW5kbGUKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gY2FsY19idW5kbGVfc3RhdHMoYnVuZGxlKSB7CiAgICAgICAgdmFyIGl0eXBlX3RvX2ludCA9IHtyYWRpY2FsOjAsIGthbmppOjEsIHZvY2FidWxhcnk6Mn07CiAgICAgICAgdmFyIGl0eXBlX3RvX2NsYXNzID0ge3JhZGljYWw6J3JhZCcsIGthbmppOidrYW4nLCB2b2NhYnVsYXJ5Oid2b2MnfTsKICAgICAgICB2YXIgc3JzX3RvX2NsYXNzID0gewogICAgICAgICAgICBjdXJyOiBbJ2FwcHInLCdhcHByJywnYXBwcicsJ2FwcHInLCdhcHByJywnZ3VydScsJ2d1cnUnLCdtYXN0JywnZW5saSddLAogICAgICAgICAgICBuZXh0OiBbJ2FwcHInLCdhcHByJywnYXBwcicsJ2FwcHInLCdndXJ1JywnZ3VydScsJ21hc3QnLCdlbmxpJywnYnVybiddCiAgICAgICAgfTsKICAgICAgICBidW5kbGUuaXRlbXMuc29ydChmdW5jdGlvbihhLCBiKXsKICAgICAgICAgICAgdmFyIGFfaXR5cGUgPSBpdHlwZV90b19pbnRbYS5vYmplY3RdOwogICAgICAgICAgICB2YXIgYl9pdHlwZSA9IGl0eXBlX3RvX2ludFtiLm9iamVjdF07CiAgICAgICAgICAgIGlmIChhX2l0eXBlICE9PSBiX2l0eXBlKSByZXR1cm4gYV9pdHlwZSAtIGJfaXR5cGU7CiAgICAgICAgICAgIGlmIChhLmRhdGEubGV2ZWwgIT09IGIuZGF0YS5sZXZlbCkgcmV0dXJuIGEuZGF0YS5sZXZlbCAtIGIuZGF0YS5sZXZlbDsKICAgICAgICAgICAgcmV0dXJuIGEuZGF0YS5zbHVnLmxvY2FsZUNvbXBhcmUoYi5kYXRhLnNsdWcpOwogICAgICAgIH0pOwogICAgICAgIGJ1bmRsZS5zdGF0cyA9IHsKICAgICAgICAgICAgY291bnQ6MCwKICAgICAgICAgICAgcmFkOjAsIGthbjowLCB2b2M6MCwKICAgICAgICAgICAgYXBwcjowLCBndXJ1OjAsIG1hc3Q6MCwgZW5saTowLCBidXJuOjAsCiAgICAgICAgICAgIGx2bGdycDA6MCwgbHZsZ3JwMTowLCBsdmxncnAyOjAsIGx2bGdycDM6MCwgbHZsZ3JwNDowLCBsdmxncnA1OjAsCiAgICAgICAgICAgIGN1cnJfY291bnQ6IDAsCiAgICAgICAgICAgIGhhc19jdXJyX21hcmtlcjogZmFsc2UsCiAgICAgICAgICAgIGJ1cm5fY291bnQ6IDAKICAgICAgICB9OwogICAgICAgIHZhciBzdGF0cyA9IGJ1bmRsZS5zdGF0czsKICAgICAgICBmb3IgKHZhciBpdGVtX2lkeCBpbiBidW5kbGUuaXRlbXMpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBidW5kbGUuaXRlbXNbaXRlbV9pZHhdOwogICAgICAgICAgICBzdGF0cy5jb3VudCsrOwogICAgICAgICAgICBzdGF0c1tpdHlwZV90b19jbGFzc1tpdGVtLm9iamVjdF1dKys7CiAgICAgICAgICAgIHN0YXRzW3Nyc190b19jbGFzc1tzZXR0aW5ncy5zcnNfY3Vycl9uZXh0XVtpdGVtLmFzc2lnbm1lbnRzLnNyc19zdGFnZV1dKys7CiAgICAgICAgICAgIHN0YXRzWydsdmxncnAnK01hdGguZmxvb3IoKGl0ZW0uZGF0YS5sZXZlbC0xKS8xMCldKys7CiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEubGV2ZWwgPT09IHdrb2YudXNlci5sZXZlbCkgewogICAgICAgICAgICAgICAgc3RhdHMuY3Vycl9jb3VudCsrOwogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmN1cnJlbnRfbGV2ZWxfbWFya2Vycy5pbmRleE9mKGl0ZW0ub2JqZWN0WzBdKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHMuaGFzX2N1cnJfbWFya2VyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBidW5kbGUuc3RhdHMuYnVybl9jb3VudCA9IGJ1bmRsZS5zdGF0c1tzcnNfdG9fY2xhc3Nbc2V0dGluZ3Muc3JzX2N1cnJfbmV4dF1bOF1dOwogICAgICAgIGdyYXBoLmN1cnJlbnRfYnVuZGxlID0gYnVuZGxlOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBSZXR1cm4gdGhlIHRpbWVzdGFtcCBvZiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjdXJyZW50IFVUQyBob3VyLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB0b1N0YXJ0T2ZVVENIb3VyKGRhdGUpIHsKICAgICAgICB2YXIgZCA9IChkYXRlIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGUuZ2V0VGltZSgpIDogZGF0ZSk7CiAgICAgICAgZCA9IE1hdGguZmxvb3IoZC8zNjAwMDAwKSozNjAwMDAwOwogICAgICAgIHJldHVybiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUgPyBuZXcgRGF0ZShkKSA6IGQpOwogICAgfQoKICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBTdGFydCBhIHRpbWVyIHRvIHJlZnJlc2ggdGhlIHRpbWVsaW5lICh3aXRob3V0IGZldGNoKSBhdCB0aGUgdG9wIG9mIHRoZSBob3VyLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzdGFydF9yZWZyZXNoX3RpbWVyKCkgewogICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpOwogICAgICAgIHZhciBuZXh0X2hvdXIgPSB0b1N0YXJ0T2ZVVENIb3VyKG5vdykgKyAzNjAxMDAwOyAvLyAxIHNlY29uZCBwYXN0IHRoZSBuZXh0IFVUQyBob3VyLgogICAgICAgIHZhciB3YWl0X3RpbWUgPSAobmV4dF9ob3VyIC0gbm93KTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGJ1bmRsZV9ieV90aW1lc2xvdCgpOwogICAgICAgICAgICB1cGRhdGVfc2xpZGVyX3Jldmlld3MoKTsKICAgICAgICAgICAgZHJhd190aW1lbGluZSgpOwogICAgICAgICAgICBzdGFydF9yZWZyZXNoX3RpbWVyKCk7CiAgICAgICAgfSwgd2FpdF90aW1lKTsKICAgIH0KCn0pKHdpbmRvdy50aW1lbGluZSk7Cg==",
            "storage": {
                "data": {},
                "ts": 1607436649623
            },
            "uuid": "898d914c-c6aa-4606-abf9-fcc0e7385841"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/723-wanikani-stroke-order/code/WaniKani%20Stroke%20Order.user.js",
            "name": "WaniKani Stroke Order",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [
                        "http*://*wanikani.com/kanji/*",
                        "http*://*wanikani.com/level/*/kanji/*",
                        "http*://*wanikani.com/review/session",
                        "http*://*wanikani.com/lesson/session"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [
                        "jisho.org"
                    ],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 5,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFdhbmlLYW5pIFN0cm9rZSBPcmRlcgovLyBAbmFtZXNwYWNlICAgamFwYW5lc2UKLy8gQGRlc2NyaXB0aW9uIFNob3dzIGEga2FuamkncyBzdHJva2Ugb3JkZXIgb24gaXRzIHBhZ2UgYW5kIGR1cmluZyBsZXNzb25zIGFuZCByZXZpZXdzLgovLyBAbGljZW5zZSAgICAgR1BMIHZlcnNpb24gMyBvciBhbnkgbGF0ZXIgdmVyc2lvbjsgaHR0cDovL3d3dy5nbnUub3JnL2NvcHlsZWZ0L2dwbC5odG1sCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyp3YW5pa2FuaS5jb20va2FuamkvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qd2FuaWthbmkuY29tL2xldmVsLyova2FuamkvKgovLyBAaW5jbHVkZSAgICAgaHR0cCo6Ly8qd2FuaWthbmkuY29tL3Jldmlldy9zZXNzaW9uCi8vIEBpbmNsdWRlICAgICBodHRwKjovLyp3YW5pa2FuaS5jb20vbGVzc29uL3Nlc3Npb24KLy8gQHZlcnNpb24gICAgIDEuMS4yCi8vIEBncmFudCAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAcmVxdWlyZSAgICAgaHR0cDovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjEwLjIvanF1ZXJ5Lm1pbi5qcwovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qCiAqIFRoYW5rcyBhIGxvdCB0byAuLi4KICogV2FuaWthbmkgUGhvbmV0aWMtU2VtYW50aWMgQ29tcG9zaXRpb24gLSBVc2Vyc2NyaXB0CiAqIGJ5IHJ1aXBncGluaGVpcm8gKExvcmRHcmF2ZXdpc2gpCiAqIC4uLiBmb3IgY29kZSBzaG93aW5nIG1lIGhvdyB0byBpbnNlcnQgc2VjdGlvbnMgZHVyaW5nIGthbmppIHJldmlld3MuCiAqIFRoZSBjb2RlIGhlYXZpbHkgYm9ycm93cyBmcm9tIHRoYXQgc2NyaXB0IQogKiBBbHNvIHRoYW5rcyB0byBIYWxvIGZvciBhIGxvYWRpbmcgYnVnIGZpeCEKICovCgovKgogKiBIZWxwZXIgRnVuY3Rpb25zL1ZhcmlhYmxlcwogKi8KJCA9IHVuc2FmZVdpbmRvdy4kOwoKLyoKICogR2xvYmFsIFZhcmlhYmxlcy9PYmplY3RzL0NsYXNzZXMKICovCnZhciBQYWdlRW51bSA9IE9iamVjdC5mcmVlemUoeyB1bmtub3duOjAsIGthbmppOjEsIHJldmlld3M6MiwgbGVzc29uczozIH0pOwp2YXIgY3VyUGFnZSA9IFBhZ2VFbnVtLnVua25vd247CnZhciBKSVNITyA9ICJodHRwOi8vY2xhc3NpYy5qaXNoby5vcmciOwoKLyoKICogTWFpbgogKi8KZnVuY3Rpb24gaW5pdCgpIHsKICAgIC8vIERldGVybWluZSBwYWdlIHR5cGUKICAgIGlmICgvXC9rYW5qaVwvLi8udGVzdChkb2N1bWVudC5VUkwpKSB7CiAgICAgICAgY3VyUGFnZSA9IFBhZ2VFbnVtLmthbmppOwogICAgfSBlbHNlIGlmICgvXC9yZXZpZXcvLnRlc3QoZG9jdW1lbnQuVVJMKSkgewogICAgICAgIGN1clBhZ2UgPSBQYWdlRW51bS5yZXZpZXdzOwogICAgfSBlbHNlIGlmICgvXC9sZXNzb24vLnRlc3QoZG9jdW1lbnQuVVJMKSkgewogICAgICAgIGN1clBhZ2UgPSBQYWdlRW51bS5sZXNzb25zOwogICAgfQoKICAgIC8vIENyZWF0ZSBhbmQgc3RvcmUgdGhlIGVsZW1lbnQgdGhhdCB3aWxsIGhvbGQgdGhlIGltYWdlCiAgICB1bnNhZmVXaW5kb3cuZGlhZ3JhbSA9IGNyZWF0ZURpYWdyYW1TZWN0aW9uKCk7CgogICAgLy8gUmVnaXN0ZXIgY2FsbGJhY2sgZm9yIHdoZW4gdG8gbG9hZCBzdHJva2Ugb3JkZXIKICAgIHN3aXRjaCAoY3VyUGFnZSkgewogICAgICAgIGNhc2UgUGFnZUVudW0ua2Fuamk6CiAgICAgICAgICAgIGxvYWREaWFncmFtKCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUGFnZUVudW0ucmV2aWV3czoKICAgICAgICAgICAgdmFyIG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHsKICAgICAgICAgICAgICAgLy8gVGhlIGxhc3Qgb25lIGFsd2F5cyBoYXMgMiBtdXRhdGlvbnMsIHNvIGxldCdzIHVzZSB0aGF0CiAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbnMubGVuZ3RoICE9IDIpCiAgICAgICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAgICAvLyBSZXZpZXdzIGR5bmFtaWNhbGx5IGdlbmVyYXRlIHRoZSBET00uIFdlIGFsd2F5cyBuZWVkIHRvIHJlLWluc2VydCB0aGUgZWxlbWVudAogICAgICAgICAgICAgICBpZiAoZ2V0S2FuamkoKSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWFncmFtID0gY3JlYXRlRGlhZ3JhbVNlY3Rpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlhZ3JhbSAhPT0gbnVsbCAmJiBkaWFncmFtLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LmRpYWdyYW0gPSBkaWFncmFtOwogICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRGlhZ3JhbSgpOwogICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIH0sIDE1MCk7CiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG8ub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1pbmZvJyksIHsnYXR0cmlidXRlcycgOiB0cnVlfSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUGFnZUVudW0ubGVzc29uczoKICAgICAgICAgICAgdmFyIG8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihsb2FkRGlhZ3JhbSk7CiAgICAgICAgICAgIG8ub2JzZXJ2ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VwcGxlbWVudC1rYW4nKSwgeydhdHRyaWJ1dGVzJyA6IHRydWV9KTsKICAgICAgICAgICAgbG9hZERpYWdyYW0oKTsKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7CiAgICBpbml0KCk7Cn0gZWxzZSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXQpOwp9CgovKgogKiBSZXR1cm5zIHRoZSBjdXJyZW50IGthbmppCiAqLwpmdW5jdGlvbiBnZXRLYW5qaSgpIHsKICAgIHN3aXRjaChjdXJQYWdlKSB7CiAgICAgICAgY2FzZSBQYWdlRW51bS5rYW5qaToKICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnRpdGxlW2RvY3VtZW50LnRpdGxlLmxlbmd0aCAtIDFdOwoKICAgICAgICBjYXNlIFBhZ2VFbnVtLnJldmlld3M6CiAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJC5qU3RvcmFnZS5nZXQoImN1cnJlbnRJdGVtIik7CiAgICAgICAgICAgIGlmKCJrYW4iIGluIGN1ckl0ZW0pCiAgICAgICAgICAgICAgICByZXR1cm4gY3VySXRlbS5rYW4udHJpbSgpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgY2FzZSBQYWdlRW51bS5sZXNzb25zOgogICAgICAgICAgICB2YXIga2FuamlOb2RlID0gJCgiI2NoYXJhY3RlciIpOwoKICAgICAgICAgICAgaWYoa2FuamlOb2RlID09PSB1bmRlZmluZWQgfHwga2FuamlOb2RlID09PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgICAgICByZXR1cm4ga2FuamlOb2RlLnRleHQoKS50cmltKCk7CiAgICB9CgogICAgcmV0dXJuIG51bGw7Cn0KCi8qCiAqIENyZWF0ZXMgYSBzZWN0aW9uIGZvciB0aGUgZGlhZ3JhbSBhbmQgcmV0dXJucyBhIHBvaW50ZXIgdG8gaXRzIGNvbnRlbnQKICovCmZ1bmN0aW9uIGNyZWF0ZURpYWdyYW1TZWN0aW9uKCkgewoKICAgIC8vIFJldmlld3MgaGFjazogT25seSBkbyBpdCBvbmNlCiAgICBpZiAoJCgnI3N0cm9rZV9vcmRlcicpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdmFyIHNlY3Rpb25IVE1MID0gJzxzZWN0aW9uPjxoMj5TdHJva2UgT3JkZXI8L2gyPjxwIGlkPSJzdHJva2Vfb3JkZXIiPiZuYnNwOzwvcD48L3NlY3Rpb24+JzsKCiAgICAgICAgc3dpdGNoKGN1clBhZ2UpIHsKICAgICAgICAgICAgY2FzZSBQYWdlRW51bS5rYW5qaToKICAgICAgICAgICAgICAgICQoc2VjdGlvbkhUTUwpLmluc2VydEFmdGVyKCcjaW5mb3JtYXRpb24nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFBhZ2VFbnVtLnJldmlld3M6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicHJlcGVuZCIpOwogICAgICAgICAgICAgICAgJCgnI2l0ZW0taW5mby1jb2wyJykucHJlcGVuZChzZWN0aW9uSFRNTCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBQYWdlRW51bS5sZXNzb25zOgogICAgICAgICAgICAgICAgJCgnI3N1cHBsZW1lbnQta2FuLWJyZWFrZG93biAuY29sMScpLmFwcGVuZChzZWN0aW9uSFRNTCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuICQoJyNzdHJva2Vfb3JkZXInKTsKfQoKLyoKICogQWRkcyB0aGUgZGlhZ3JhbSBzZWN0aW9uIGVsZW1lbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxvY2F0aW9uCiAqLwpmdW5jdGlvbiBsb2FkRGlhZ3JhbSgpIHsKCiAgICBpZiAoIXVuc2FmZVdpbmRvdyB8fCAhdW5zYWZlV2luZG93LmRpYWdyYW0ubGVuZ3RoKQogICAgICAgIHJldHVybjsKCiAgICB1bnNhZmVXaW5kb3cuZGlhZ3JhbS5odG1sKCJMb2FkaW5nLi4uIik7CgogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgIHVybDogSklTSE8gKyAiL2thbmppL2RldGFpbHMvIiArIGdldEthbmppKCksCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24oeGhyKSB7CiAgICAgICAgICAgICAgICB2YXIgZGlhZ3JhbSA9IHVuc2FmZVdpbmRvdy5kaWFncmFtOwogICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpYWdyYW1VUkwgPSB4aHIucmVzcG9uc2VUZXh0Lm1hdGNoKC9cL3N0YXRpY1wvaW1hZ2VzXC9zdHJva2VfZGlhZ3JhbXNcL1swLTldK19mcmFtZXNcLnBuZy8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWdyYW0uaHRtbCgnPGltZyBzcmM9IicgKyBKSVNITyArIGRpYWdyYW1VUkxbMF0gKyAnIiBhbHQ9IlN0cm9rZSBvcmRlciBkaWFncmFtIiAvPicpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5kaWFncmFtLmh0bWwoIkVycm9yIHdoaWxlIGxvYWRpbmcgZGlhZ3JhbSIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbih4aHIpIHsKICAgICAgICAgICAgICAgIHVuc2FmZVdpbmRvdy5kaWFncmFtLmh0bWwoIkVycm9yIHdoaWxlIGxvYWRpbmcgZGlhZ3JhbSIpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LCAwKTsKfQ==",
            "storage": {
                "data": {},
                "ts": 1607436649628
            },
            "uuid": "648066f1-2454-460b-9217-49d3d4376da9"
        },
        {
            "enabled": true,
            "file_url": "https://openuserjs.org/install/laidbacktempo/Google_View_Image.user.js",
            "name": "Google View Image",
            "options": {
                "check_for_updates": false,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": false,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "https://**/*",
                        "http://**/*"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": [
                        "https://www.google.com/**"
                    ]
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 6,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBHb29nbGUgVmlldyBJbWFnZQovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly9Hb29nbGVWaWV3SW1hZ2UuY29tLwovLyBAdmVyc2lvbiAgICAgIDAuMQovLyBAZGVzY3JpcHRpb24gIEJyaW5nIGJhY2sgR29vZ2xlIFZpZXcgSW1hZ2UhCi8vIEBhdXRob3IgICAgICAgbGFpZGJhY2tUZW1wbwovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vKiovKgovLyBAbWF0Y2ggICAgICAgIGh0dHA6Ly8qKi8qCi8vIEBsaWNlbnNlIE1JVAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgpmdW5jdGlvbiB0b0kxOG4oc3RyKSB7CiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL19fTVNHXyhcdyspX18vZywgZnVuY3Rpb24gKG1hdGNoLCB2MSkgewogICAgICAgIHJldHVybiB2MSA/IGNocm9tZS5pMThuLmdldE1lc3NhZ2UodjEpIDogJyc7CiAgICB9KTsKfQoKZnVuY3Rpb24gbG9jYWxpc2VPYmplY3Qob2JqLCB0YWcpIHsKICAgIG9iai5pbm5lckhUTUwgPSB0YWc7CiAgICByZXR1cm47CiAgICAvL3ZhciBtc2cgPSB0b0kxOG4odGFnKTsKICAgIC8vaWYgKG1zZyAhPSB0YWcpIG9iai5pbm5lckhUTUwgPSBtc2c7Cn0KCmZ1bmN0aW9uIGFkZExpbmtzKG5vZGUpIHsKICAgIC8vIGNvbnNvbGUubG9nKCJBZGRpbmcgbGluayIpOwogICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJBZGRpbmcgbGluayBpbiIpOwogICAgICAgIGlmICgobm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2lyY19yaXMnKSkgfHwgKG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcmNfbWknKSB8fCAobm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ2lyY190YXMnKSkpKSB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiQWRkaW5nIGxpbmsgT0sgT0sgIik7CiAgICAgICAgICAgIHZhciBvYmplY3QgPSBub2RlLmNsb3Nlc3QoJy5pcmNfYycpOwogICAgICAgICAgICAvLyBSZXRyaXZlIGltYWdlIGxpbmtzLCBhbmQgaW1hZ2UgdXJsCiAgICAgICAgICAgIHZhciBpbWFnZUxpbmtzID0gb2JqZWN0LnF1ZXJ5U2VsZWN0b3IoJy5fRkt3LmlyY19idXRfciA+IHRib2R5ID4gdHInKTsKICAgICAgICAgICAgdmFyIGltYWdlVGV4dCA9IG9iamVjdC5xdWVyeVNlbGVjdG9yKCcuX2NqaiA+IC5pcmNfaXQgPiAuaXJjX2hkID4gLl9yMycpOwoKICAgICAgICAgICAgLy8gUmV0cml2ZSB0aGUgaW1hZ2UgVVJMCiAgICAgICAgICAgIHZhciBpbWFnZVVSTDsKCiAgICAgICAgICAgIHZhciB0aHVtYm5haWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbWdbbmFtZT0iJyArIG9iamVjdC5kYXRhc2V0Lml0ZW1JZCArICciXScpOwogICAgICAgICAgICBpZiAodGh1bWJuYWlsKSB7CiAgICAgICAgICAgICAgICB2YXIgbWV0YSA9IHRodW1ibmFpbC5jbG9zZXN0KCcucmdfYngnKS5xdWVyeVNlbGVjdG9yKCcucmdfbWV0YScpOwogICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhID0gSlNPTi5wYXJzZShtZXRhLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICBpbWFnZVVSTCA9IG1ldGFkYXRhLm91OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW1hZ2VVUkwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdpcmNfbWknKVswXS5zcmM7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFJlbW92ZSBwcmV2aW91c2x5IGdlbmVyYXRlZCB2aWV3IGltYWdlIGJ1dHRvbnMKICAgICAgICAgICAgdmFyIG9sZFZpZXdJbWFnZSA9IGltYWdlTGlua3MucXVlcnlTZWxlY3RvcignLmV4dF9hZGRvbicpOwogICAgICAgICAgICBpZiAob2xkVmlld0ltYWdlKSB7CiAgICAgICAgICAgICAgICBpbWFnZUxpbmtzLnJlbW92ZUNoaWxkKG9sZFZpZXdJbWFnZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHJlbW92ZSBwcmV2aW91c2x5IGdlbmVyYXRlZCBzZWFyY2ggYnkgaW1hZ2UgbGlua3MKICAgICAgICAgICAgdmFyIG9sZFNlYXJjaEJ5SW1hZ2UgPSBpbWFnZVRleHQucXVlcnlTZWxlY3RvcignLmV4dF9hZGRvbicpOwogICAgICAgICAgICBpZiAob2xkU2VhcmNoQnlJbWFnZSkgewogICAgICAgICAgICAgICAgaW1hZ2VUZXh0LnJlbW92ZUNoaWxkKG9sZFNlYXJjaEJ5SW1hZ2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDcmVhdGUgU2VhcmNoIGJ5IGltYWdlIGJ1dHRvbgogICAgICAgICAgICB2YXIgc2VhcmNoQnlJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgc2VhcmNoQnlJbWFnZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAnL3NlYXJjaGJ5aW1hZ2U/JmltYWdlX3VybD0nICsgaW1hZ2VVUkwpOwogICAgICAgICAgICBzZWFyY2hCeUltYWdlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZXh0X2FkZG9uJyk7CiAgICAgICAgICAgIHNlYXJjaEJ5SW1hZ2Uuc2V0QXR0cmlidXRlKCdzdHlsZScsICdtYXJnaW4tbGVmdDo0cHQ7Jyk7CgogICAgICAgICAgICAvLyBJbnNlcnQgdGV4dCBpbnRvIFNlYXJjaCBieSBpbWFnZSBidXR0b24KICAgICAgICAgICAgdmFyIHNlYXJjaEJ5SW1hZ2VUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBsb2NhbGlzZU9iamVjdChzZWFyY2hCeUltYWdlVGV4dCwgJzxzcGFuPlZpZXcgSW1hZ2U8L3NwYW4+Jyk7CiAgICAgICAgICAgIHNlYXJjaEJ5SW1hZ2UuYXBwZW5kQ2hpbGQoc2VhcmNoQnlJbWFnZVRleHQpOwoKICAgICAgICAgICAgLy8gQXBwZW5kIFNlYXJjaCBieSBpbWFnZSBidXR0b24KICAgICAgICAgICAgaW1hZ2VUZXh0LmFwcGVuZENoaWxkKHNlYXJjaEJ5SW1hZ2UpOwoKICAgICAgICAgICAgLy8gQ3JlYXRlIFZpZXcgaW1hZ2UgYnV0dG9uCiAgICAgICAgICAgIHZhciB2aWV3SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB2aWV3SW1hZ2Uuc2V0QXR0cmlidXRlKCdjbGFzcycsICdleHRfYWRkb24nKTsKCiAgICAgICAgICAgIC8vIEFkZCBnbG9iZSB0byBWaWV3IGltYWdlIGJ1dHRvbgogICAgICAgICAgICB2YXIgdmlld0ltYWdlTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgdmFyIGdsb2JlSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5fUkt3Ll93dGYuX1B0ZicpLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgdmlld0ltYWdlTGluay5hcHBlbmRDaGlsZChnbG9iZUljb24pOwoKICAgICAgICAgICAgLy8gYWRkIHRleHQgdG8gdmlldyBpbWFnZSBidXR0b24KICAgICAgICAgICAgdmFyIHZpZXdJbWFnZVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuX1dLdycpLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgbG9jYWxpc2VPYmplY3Qodmlld0ltYWdlVGV4dCwgJ1ZpZXcgSW1hZ2UnKTsKICAgICAgICAgICAgdmlld0ltYWdlTGluay5hcHBlbmRDaGlsZCh2aWV3SW1hZ2VUZXh0KTsKCiAgICAgICAgICAgIC8vIEFkZCBWaWV3IGltYWdlIGJ1dHRvbiBVUkwKICAgICAgICAgICAgdmlld0ltYWdlTGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBpbWFnZVVSTCk7CiAgICAgICAgICAgIHZpZXdJbWFnZUxpbmsuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7CiAgICAgICAgICAgIHZpZXdJbWFnZS5hcHBlbmRDaGlsZCh2aWV3SW1hZ2VMaW5rKTsKCiAgICAgICAgICAgIC8vIEFkZCBWaWV3IGltYWdlIGJ1dHRvbiB0byBJbWFnZSBMaW5rcwogICAgICAgICAgICB2YXIgc2F2ZSA9IGltYWdlTGlua3MuY2hpbGROb2Rlc1sxXTsKICAgICAgICAgICAgaW1hZ2VMaW5rcy5pbnNlcnRCZWZvcmUodmlld0ltYWdlLCBzYXZlKTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJBZGRpbmcgRE9ORSEhISIpOwogICAgICAgIH0KICAgIH0KfQoKCiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7CiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hZGRlZE5vZGVzICYmIG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld05vZGUgPSBtdXRhdGlvbi5hZGRlZE5vZGVzW2ldOwogICAgICAgICAgICAgICAgICAgIGFkZExpbmtzKG5ld05vZGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsKICAgICAgICBjaGlsZExpc3Q6IHRydWUsCiAgICAgICAgc3VidHJlZTogdHJ1ZQogICAgfSk7CgogICAgYWRkTGlua3MoZG9jdW1lbnQuYm9keSk7Cgp9KSgpOw==",
            "storage": {
                "data": {},
                "ts": 1606921521538
            },
            "uuid": "21e7da1a-d1ce-4acf-9838-a7b170386128"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/233-wanikani-levelup-celebrator/code/WaniKani%20LevelUP%20Celebrator.user.js",
            "name": "WaniKani LevelUP Celebrator",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://www.wanikani.com/",
                        "https://www.wanikani.com/dashboard"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-end",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 7,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgV2FuaUthbmkgTGV2ZWxVUCBDZWxlYnJhdG9yCi8vIEBuYW1lc3BhY2UgICAgIGh0dHBzOi8vd3d3LndhbmlrYW5pLmNvbQovLyBAZGVzY3JpcHRpb24gICBUaGlzIHdpbGwgZGlzcGxheSBhICJsZXZlbC11cCIgbm90aWZpY2F0aW9uIG9uIHlvdXIgV0sgRGFzaGJvYXJkIGFmdGVyIHlvdSBsZXZlbCB1cC4gIFlvdSBjYW4gY3VzdG9taXplIHRoZSBpbWFnZSBhbmQgdGV4dCBvZiB0aGUgZGlzcGxheS4gIE90aGVyIGFjaGlldmVtZW50cyBhcmUgYWxzbyBub3RlZC4gIEJ5IFJob3NWZWVkY3kuCi8vIEB2ZXJzaW9uIDIuNC4wCi8vIEBpbmNsdWRlICAgICAgIGh0dHBzOi8vd3d3LndhbmlrYW5pLmNvbS8KLy8gQGluY2x1ZGUgICAgICAgaHR0cHM6Ly93d3cud2FuaWthbmkuY29tL2Rhc2hib2FyZAovLyBAcnVuLWF0CSAgZG9jdW1lbnQtZW5kCi8vIEBncmFudAkgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQKCi8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gZ2V0KGlkKSB7CiAgICBjb25zb2xlLmxvZygnZ2V0IGZjdCcpOwogICAgaWYgKGlkICYmIHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHsKCWNvbnNvbGUubG9nKGlkKTsKICAgICAgICBpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgIH0KICAgIHJldHVybiBpZCB8fCBudWxsOwp9CgoKZnVuY3Rpb24gR01zZXR1cCgpIHsKICBpZiAoR01fcmVnaXN0ZXJNZW51Q29tbWFuZCkgewogICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnV2FuaUthbmkgTGV2ZWxVUCBDZWxlYnJhdG9yOiBTZXQgaW1hZ2UgVVJMJywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjdXJFbnRyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJXS2x2bHVwSW1nVVJMIikgfHwgIiI7CiAgICAgIHZhciBuZXdJbWdVUkwgPSBwcm9tcHQoJ05ldyBJbWFnZSBVUkw6JywgY3VyRW50cnkpOwogICAgICBpZiAobmV3SW1nVVJMICE9IG51bGwpIHsKCWlmICh0eXBlb2YobmV3SW1nVVJMKSAhPT0gInN0cmluZyIpIHsKCQluZXdJbWdVUkwgPSBTdHJpbmcobmV3SW1nVVJMKTsKCX0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cEltZ1VSTCIsIG5ld0ltZ1VSTCk7CiAgICAgIH0KICAgIH0pOwoKICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoJ1dhbmlLYW5pIExldmVsVVAgQ2VsZWJyYXRvcjogU2V0IGltYWdlIHBvc2l0aW9uJywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjdXJFbnRyeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJXS2x2bHVwSW1nUG9zIikgfHwgIkxlZnQiOwogICAgICB2YXIgbmV3SW1nUG9zID0gcHJvbXB0KCdJbWFnZSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0ZXh0IChsZWZ0LCByaWdodCwgYWJvdmUsIGJlbG93KTonLCBjdXJFbnRyeSk7CiAgICAgIGlmIChuZXdJbWdQb3MgIT0gbnVsbCkgewoJaWYgKHR5cGVvZihuZXdJbWdQb3MpICE9PSAic3RyaW5nIikgewoJCW5ld0ltZ1BvcyA9IFN0cmluZyhuZXdJbWdQb3MpOwoJfQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJXS2x2bHVwSW1nUG9zIiwgbmV3SW1nUG9zKTsKICAgICAgfQogICAgfSk7CgogICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgnV2FuaUthbmkgTGV2ZWxVUCBDZWxlYnJhdG9yOiBTZXQgdGV4dCcsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgY3VyRW50cnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cFRleHQiKSB8fCAiIjsKICAgICAgdmFyIG5ld1RleHQgPSBwcm9tcHQoJ05ldyB0ZXh0OicsIGN1ckVudHJ5KTsKICAgICAgaWYgKG5ld1RleHQgIT0gbnVsbCkgewoJaWYgKHR5cGVvZihuZXdUZXh0KSAhPT0gInN0cmluZyIpIHsKCQluZXdUZXh0ID0gU3RyaW5nKG5ld1RleHQpOwoJfQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJXS2x2bHVwVGV4dCIsIG5ld1RleHQpOwogICAgICB9CiAgICB9KTsKCiAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCdXYW5pS2FuaSBMZXZlbFVQIENlbGVicmF0b3I6IFByZXZpZXcnLCBmdW5jdGlvbigpIHsKCXNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIldLbHZsdXBQcmV2aWV3IiwgMSk7Cglsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0pOwoKICB9Cn0KCgpmdW5jdGlvbiBjaGVja0xldmVsKCkgewoKCWNvbnNvbGUubG9nKCJjaGVja0xldmVsKCkgc3RhcnQiKTsKCgl2YXIgbGFzdEtub3duTGV2ZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cFByZXZMZXZlbCIpIHx8IDE7CiAgICB2YXIgbGV2ZWxUZXh0ID0gJCgnbGkudXNlci1zdW1tYXJ5X19hdHRyaWJ1dGUgYScpWzBdLmhyZWYuc3BsaXQoJy9sZXZlbC8nKVsxXTsKICAgIHZhciBjdXJsZXZlbCA9IChsZXZlbFRleHQ/IGxldmVsVGV4dDogbGFzdEtub3duTGV2ZWwpOwoKICAgIGNvbnNvbGUubG9nKCJsZXZlbFRleHQ6ICIsIGxldmVsVGV4dCk7CiAgICBjb25zb2xlLmxvZygiY3VybGV2ZWw6ICIsIGN1cmxldmVsKTsKCgl2YXIgcHJldiA9IE51bWJlcihsYXN0S25vd25MZXZlbCk7Cgl2YXIgY3VyICA9IE51bWJlcihjdXJsZXZlbCk7Cgl2YXIgbmV4dCA9IHByZXYgKyAxOwoKCWlmIChjdXIgPT0gbmV4dCkgeyAKCQljb25zb2xlLmxvZygibGV2ZWxlZCB1cCEiKTsKCQl2YXIgZCA9IG5ldyBEYXRlKCk7CgkJdmFyIG4gPSBkLmdldFRpbWUoKTsKCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cExldlRpbWUiLCBuKTsgLy8gcmVjb3JkIGxldmVsLXVwIHRpbWUKCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cFByZXZMZXZlbCIsIGN1cik7ICAvLyB1cGRhdGUgJ2xhc3RLbm93bkxldmVsJyBmb3IgbmV4dCB0aW1lCgoJfSBlbHNlIGlmIChjdXIgIT0gcHJldikgewoJCS8vIGVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHdlJ3JlIHJ1bm5pbmcsIG9yIHRoZXJlJ3MgYSBkaWZmZXJlbnQgdXNlciBoZXJlLCAKCQkvLyBvciB0aGUgdXNlcidzIHN1YnNjcmlwdGlvbiBzdGF0dXMgaGFzIGNoYW5nZWQsIG9yIHNvbWV0aGluZyBlbHNlIHdlaXJkIGlzIGdvaW5nIG9uOwoKCQkvLyBpZiBjdXIgPT0gMiwgYXNzdW1lIHRoZSB1c2VyJ3Mgc3Vic2NyaXB0aW9uIGV4cGlyZWQ7IGxlYXZlIGV2ZXJ5dGhpbmcgYmUgYW5kIHdhaXQgZm9yIHJlbmV3YWwuIE90aGVyd2lzZSwKCgkJaWYgKGN1ciAhPSAyIHx8ICEgbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBQcmV2TGV2ZWwiKSkgeyAKCgkJCS8vIGNsZWFyIFdLbHZsdXBMZXZUaW1lIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCBkaXNwbGF5IHRoZSBsZXZlbC11cCBtZXNzYWdlCgkJCWNvbnNvbGUubG9nKCJyZWluaXRpYWxpemluZyIpOwoJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cExldlRpbWUiLCAwKTsKCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oIldLbHZsdXBQcmV2TGV2ZWwiLCBjdXIpOyAgLy8gdXBkYXRlICdsYXN0S25vd25MZXZlbCcgZm9yIG5leHQgdGltZQoKCQkJLy8gYWxzbyByZWluaXRpYWxpemUgdGhlIG5leHRNaWxlc3RvbmVzIGFycmF5CgkJCWluaXRpYWxpemVNaWxlc3RvbmVzKCk7CgoJCX0KCgl9IC8vZWxzZSBjdXIgPT0gcHJldiwgc28gJ2xhc3RLbm93bkxldmVsJyBpcyBzdGlsbCBjb3JyZWN0IChvciBpdCB3aWxsIGNvbnRpbnVlIHRvIGRlZmF1bHQgdG8gMSBpZiBpdCBoYXNuJ3QgYmVlbiBzdG9yZWQgeWV0KQoKCWNvbnNvbGUubG9nKCJwcmV2IGxldmVsOiAiLCBwcmV2KTsKCWNvbnNvbGUubG9nKCJjdXIgbGV2ZWw6ICIsIGN1cik7Cgljb25zb2xlLmxvZygibmV4dCBsZXZlbDogIiwgbmV4dCk7Cgljb25zb2xlLmxvZygiY2hlY2tMZXZlbCgpIGVuZCIpOwoKCXJldHVybiBjdXI7Cn0KCgoKZnVuY3Rpb24gc2hvdWxkRGlzcGxheSgpIHsKCgljb25zb2xlLmxvZygnc2hvdWxkRGlzcGxheSgpIHN0YXJ0Jyk7CgoJdmFyIGxldlRpbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cExldlRpbWUiKSB8fCAwOwoJdmFyIHJhd2R1ciA9IDEwOyAgLy8gbmV3IGxldmVsIGRpc3BsYXkgaXMgZW5hYmxlZCBmb3IgMTAgbWludXRlcyBhZnRlciBmaXJzdCBkaXNwbGF5IHRpbWUKCXZhciBkID0gbmV3IERhdGUoKTsKCXZhciBub3cgPSBkLmdldFRpbWUoKTsKCXZhciByZXR2YWw7Cgl2YXIgZHVyYXRpb24gPSBOdW1iZXIocmF3ZHVyKTsKCXZhciBwcmV2aWV3ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cFByZXZpZXciKTsKCgl2YXIgdGhlVHh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBUZXh0Iik7CgoJY29uc29sZS5sb2coIm5vdyA9ICIsIG5vdyk7Cgljb25zb2xlLmxvZygibGV2VGltZSA9ICIsIGxldlRpbWUpOwoJY29uc29sZS5sb2coInJhd2R1ciA9ICIsIHJhd2R1cik7Cgljb25zb2xlLmxvZygiZHVyYXRpb24gbWludXRlcyA9ICIsIGR1cmF0aW9uKTsKCglpZiAocHJldmlldyAmJiBwcmV2aWV3ID09IDEpIHsKCQljb25zb2xlLmxvZygiUHJldmlldyBlbmFibGVkLCBkaXNwbGF5IGl0Iik7CgkJc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cFByZXZpZXciLCAwKTsJLy8gb25jZSBvbmx5CgkJcmV0dXJuIDE7Cgl9CgoJaWYgKHRoZVR4dCAmJiB0aGVUeHQuc3Vic3RyaW5nKDAsIDgpID09ICIlI1RFU1QlIyIpIHsKCQljb25zb2xlLmxvZygidGV4dCBiZWdpbnMgd2l0aCAlI1RFU1QlIywgYWx3YXlzIGRpc3BsYXkiKTsKCQlyZXR1cm4gMTsKCX0KCQoJZHVyYXRpb24gKj0gNjAwMDA7IC8vIGNvbnZlcnQgdG8gbWlsbGlzZWNvbmRzCgoJY29uc29sZS5sb2coImR1cmF0aW9uIG1zZWMgPSAiLCBkdXJhdGlvbik7CgoJY29uc29sZS5sb2coIm5vdyAtIGxldlRpbWUgPSAiLCBub3cgLSBsZXZUaW1lKTsKCglpZiAoKG5vdyAtIGxldlRpbWUpIDw9IGR1cmF0aW9uKSB7CgkJcmV0dmFsID0gMTsKCX0gZWxzZSB7CgkJcmV0dmFsID0gMDsKCX0KCgljb25zb2xlLmxvZygicmV0dmFsID0gIiwgcmV0dmFsKTsKCgljb25zb2xlLmxvZygnc2hvdWxkRGlzcGxheSgpIGVuZCcpOwoJcmV0dXJuIHJldHZhbDsKfQoKCgpmdW5jdGlvbiBkaXNwbGF5TGV2ZWxVcE1lc3NhZ2UgKCBjdXJMZXZlbCApIHsKCWNvbnNvbGUubG9nKCdkaXNwbGF5TGV2ZWxVcE1lc3NhZ2UoKSBzdGFydCcpOwoJdmFyIG1zZyA9IGdldCgic2VhcmNoIik7CiAgICAJdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKIAl2YXIgdGhlSW1nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBJbWdVUkwiKTsKIAl2YXIgdGhlUG9zID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBJbWdQb3MiKSB8fCAiTEVGVCI7Cgl2YXIgdGhlVHh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBUZXh0Iik7CgogICAgc3dpdGNoKHRoZVBvcy50b1VwcGVyQ2FzZSgpKSB7CgogICAgICAgIGNhc2UgIkJFTE9XIjoKICAgICAgICBjYXNlICJVTkRFUiI6CiAgICAgICAgY2FzZSAiVU5ERVJORUFUSCI6CiAgICAgICAgY2FzZSAiRE9XTiI6CiAgICAgICAgY2FzZSAiQk9UVE9NIjoKICAgICAgICBjYXNlICLjgZfjgZ8iOgogICAgICAgIGNhc2UgIuS4iyI6CiAgICAgICAgICAgIHQuaW5uZXJIVE1MID0gJzxkaXYgaWQ9IldLbHZsdXBUeHQiIHN0eWxlPSJtYXJnaW46YXV0bzt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoxMTAlO2ZvbnQtc2l6ZTozMDAlIj4gPC9kaXY+JysKICAgICAgICAgICAgICAgICc8aW1nIGlkPSJXS2x2bHVwSW1nIiBzdHlsZT0iZGlzcGxheTpibG9jazttYXJnaW46YXV0byI+IDwvaW1nPicrCiAgICAgICAgCQknPC9kaXY+JzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFCT1ZFIjoKICAgICAgICBjYXNlICJUT1AiOgogICAgICAgIGNhc2UgIlVQIjoKICAgICAgICBjYXNlICJPVkVSIjoKICAgICAgICBjYXNlICJPTiBUT1AgT0YiOgogICAgICAgIGNhc2UgIkNFTlRFUiI6CiAgICAgICAgY2FzZSAiQ0VOVEVSRUQiOgogICAgICAgIGNhc2UgIuOBhuOBiCI6CiAgICAgICAgY2FzZSAi5LiKIjoKICAgICAgICBjYXNlICLjgarjgYsiOgogICAgICAgIGNhc2UgIuS4rSI6CiAgICAgICAgY2FzZSAi44Gh44KF44GG44GK44GGIjoKICAgICAgICBjYXNlICLkuK3lpK4iOgogICAgICAgICAgICB0LmlubmVySFRNTCA9ICc8aW1nIGlkPSJXS2x2bHVwSW1nIiBzdHlsZT0iZGlzcGxheTpibG9jazttYXJnaW46YXV0byI+IDwvaW1nPicrCiAgICAgICAgICAgICAgICAnPGRpdiBpZD0iV0tsdmx1cFR4dCIgc3R5bGU9Im1hcmdpbjphdXRvO3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjExMCU7Zm9udC1zaXplOjMwMCUiPiA8L2Rpdj4nKwogICAgICAgIAkJJzwvZGl2Pic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJMRUZUIjoKICAgICAgICBjYXNlICJBVCBMRUZUIjoKICAgICAgICBjYXNlICJPTiBMRUZUIjoKICAgICAgICBjYXNlICJPTiBUSEUgTEVGVCI6CiAgICAgICAgY2FzZSAiTEVGVCBPRiI6CiAgICAgICAgY2FzZSAiVE8gVEhFIExFRlQgT0YiOgogICAgICAgIGNhc2UgIuOBsuOBoOOCiiI6CiAgICAgICAgY2FzZSAi5bemIjoKICAgICAgICBjYXNlICLjgbLjgaDjgorjgYzjgo8iOgogICAgICAgIGNhc2UgIuW3puWBtCI6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdC5pbm5lckhUTUwgPSAnPGltZyBpZD0iV0tsdmx1cEltZyIgc3R5bGU9ImZsb2F0OmxlZnQ7bWFyZ2luOjIwcHgiPiA8L2ltZz4nKwogICAgICAgICAgICAgICAgJzxkaXYgaWQ9IldLbHZsdXBUeHQiIHN0eWxlPSJtYXJnaW46MjBweDtmbG9hdDpsZWZ0O3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjExMCU7Zm9udC1zaXplOjMwMCUiPiA8L2Rpdj4nKwogICAgICAgIAkJJzwvZGl2Pic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJSSUdIVCI6CiAgICAgICAgY2FzZSAiQVQgUklHSFQiOgogICAgICAgIGNhc2UgIk9OIFJJR0hUIjoKICAgICAgICBjYXNlICJPTiBUSEUgUklHSFQiOgogICAgICAgIGNhc2UgIlJJR0hUIE9GIjoKICAgICAgICBjYXNlICJUTyBUSEUgUklHSFQgT0YiOgogICAgICAgIGNhc2UgIk1JR0kiOgogICAgICAgIGNhc2UgIuOBv+OBjiI6CiAgICAgICAgY2FzZSAi5Y+zIjoKICAgICAgICBjYXNlICLjgb/jgY7jgYzjgo8iOgogICAgICAgIGNhc2UgIuWPs+WBtCI6CiAgICAgICAgICAgIHQuaW5uZXJIVE1MID0gJzxpbWcgaWQ9IldLbHZsdXBJbWciIHN0eWxlPSJmbG9hdDpyaWdodDttYXJnaW46MjBweCI+IDwvaW1nPicrCiAgICAgICAgICAgICAgICAnPGRpdiBpZD0iV0tsdmx1cFR4dCIgc3R5bGU9Im1hcmdpbjoyMHB4O2Zsb2F0OnJpZ2h0O3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjExMCU7Zm9udC1zaXplOjMwMCUiPiA8L2Rpdj4nKwogICAgICAgIAkJJzwvZGl2Pic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgIH0KICAgIHQuc3R5bGUud2lkdGggPSAiMTIwMHB4IjsKICAgIHQuc3R5bGUubWFyZ2luID0gImF1dG8iOwoKICAgIG1zZy5hcHBlbmRDaGlsZCh0KTsKCgl2YXIgdGhpbmcxID0gZ2V0KCJXS2x2bHVwSW1nIik7CglpZiAodGhpbmcxICYmIHRoZUltZykgewoJCXRoaW5nMS5zcmMgPSB0aGVJbWc7Cgl9CgoJdmFyIHRoaW5nMiA9IGdldCgiV0tsdmx1cFR4dCIpOwoKCWlmICh0aGluZzIgJiYgdGhlVHh0KSB7CgkJaWYgKHRoZVR4dC5zdWJzdHJpbmcoMCwgOCkgPT0gIiUjVEVTVCUjIikgewoJCQkvLyBpbmRpY2F0ZXMgdGVzdCBtb2RlOyBzdHJpcCB0aGUgdGVzdCBmbGFnIG91dCBvZiB0aGUgdGV4dAoJCQl0aGVUeHQgPSB0aGVUeHQucmVwbGFjZSgiJSNURVNUJSMiLCAiIik7CgkJfQoJCQoJCXRoZVR4dCA9IHRoZVR4dC5yZXBsYWNlKC8jTEVWRUxOVU0jL2csIGN1ckxldmVsKTsgIC8vIHN1cHBvcnQgI0xFVkVMTlVNIyB2YXJpYWJsZSBpbiB0ZXh0IHN0cmluZ3MKCgkJdGhpbmcyLmlubmVySFRNTD0gdGhlVHh0OwoJfSAKCgljb25zb2xlLmxvZygnZGlzcGxheUxldmVsVXBNZXNzYWdlKCkgZW5kJyk7Cn0KCgpmdW5jdGlvbiBnZXROZXh0TWlsZXN0b25lKCBudW1UdXJ0bGVzICkgewoKCWNvbnNvbGUubG9nKCJnZXROZXh0TWlsZXN0b25lKCkiKTsKCgl2YXIgbWlsZXN0b25lcyA9IFsxLCAxMDAsIDI1MCwgNTAwLCA3NTAsIDEwMDAsIDE1MDAsIDIwMDAsIDI1MDAsIDMwMDAsIDQwMDAsIDUwMDAsIDYwMDAsIDcwMDAsIDgwMDAsIDkwMDAsIDEwMDAwLCA5OTk5OTldOwoJdmFyIGk9MDsKCgljb25zb2xlLmxvZygibnVtVHVydGxlcyA9ICIsIG51bVR1cnRsZXMpOwoKCXdoaWxlICggbWlsZXN0b25lc1tpXSA8PSBudW1UdXJ0bGVzICkgewoKCQlpKys7Cgl9Cgljb25zb2xlLmxvZygibmV4dCBtaWxlc3RvbmUgPSAiLCBtaWxlc3RvbmVzW2ldKTsKCXJldHVybiBtaWxlc3RvbmVzW2ldOwp9CgoKZnVuY3Rpb24gZ2V0VHVydGxlQ291bnRzKCkgewkvLyBjdW11bGF0aXZlIChlbmwgPSBlbmwgKyBidXIsIGV0Yy4pCgoJY29uc29sZS5sb2coImdldFR1cnRsZUNvdW50cygpIik7CgoJLy8gSSdtIGRvaW5nIHRoZSBzdHJpbmcgc3BsaXQoIiAiKSBhbmQgcmVwbGFjZSgpIHNvIHdlIHdpbGwgcGxheSBuaWNlbHkgd2l0aCBvbmUgb2YgbXkgb3RoZXIgc2NyaXB0cyBqdXN0IGluIGNhc2UgdGhlIG90aGVyIG9uZSBydW5zIGZpcnN0CgoJdmFyIGJzdHIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYnVybmVkIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXS5pbm5lckhUTUwuc3BsaXQoIiAiKVswXSB8fCAiMCI7Cgl2YXIgZXN0ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbmxpZ2h0ZW5lZCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzcGFuIilbMF0uaW5uZXJIVE1MLnNwbGl0KCIgIilbMF0gfHwgIjAiOwoJdmFyIG1zdHIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFzdGVyIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXS5pbm5lckhUTUwuc3BsaXQoIiAiKVswXSB8fCAiMCI7Cgl2YXIgZ3N0ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJndXJ1IikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXS5pbm5lckhUTUwuc3BsaXQoIiAiKVswXSB8fCAiMCI7Cgl2YXIgYXN0ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhcHByZW50aWNlIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXS5pbm5lckhUTUwuc3BsaXQoIiAiKVswXSB8fCAiMCI7CgoJdmFyIHVwYXJyb3cgPSAi4oaRIjsKCXZhciBkb3duYXJyb3cgPSAi4oaTIjsKCglic3RyID0gYnN0ci5yZXBsYWNlKHVwYXJyb3csICIiKTsKCWVzdHIgPSBlc3RyLnJlcGxhY2UodXBhcnJvdywgIiIpOwoJbXN0ciA9IG1zdHIucmVwbGFjZSh1cGFycm93LCAiIik7Cglnc3RyID0gZ3N0ci5yZXBsYWNlKHVwYXJyb3csICIiKTsKCWFzdHIgPSBhc3RyLnJlcGxhY2UodXBhcnJvdywgIiIpOwoKCWJzdHIgPSBic3RyLnJlcGxhY2UoZG93bmFycm93LCAiIik7Cgllc3RyID0gZXN0ci5yZXBsYWNlKGRvd25hcnJvdywgIiIpOwoJbXN0ciA9IG1zdHIucmVwbGFjZShkb3duYXJyb3csICIiKTsKCWdzdHIgPSBnc3RyLnJlcGxhY2UoZG93bmFycm93LCAiIik7Cglhc3RyID0gYXN0ci5yZXBsYWNlKGRvd25hcnJvdywgIiIpOwoKCXZhciBidXJuZWQgPSBOdW1iZXIoIGJzdHIgKTsKCXZhciBlbmxpZ2h0ZW5lZCA9IE51bWJlciggZXN0ciApOwoJdmFyIG1hc3RlciA9IE51bWJlciggbXN0ciApOwoJdmFyIGd1cnUgPSBOdW1iZXIoIGdzdHIgKTsKCXZhciBhcHByZW50aWNlID0gTnVtYmVyKCBhc3RyICk7CgoJY29uc29sZS5sb2coInJhdyBjb3VudHM6ICIsIGFwcHJlbnRpY2UsIGd1cnUsIG1hc3RlciwgZW5saWdodGVuZWQsIGJ1cm5lZCk7CgoJZW5saWdodGVuZWQgKz0gYnVybmVkOwoJbWFzdGVyICs9IGVubGlnaHRlbmVkOwoJZ3VydSArPSBtYXN0ZXI7CglhcHByZW50aWNlICs9IGd1cnU7CgoJY29uc29sZS5sb2coImN1bXVsYXRpdmUgY291bnRzOiAiLCBhcHByZW50aWNlLCBndXJ1LCBtYXN0ZXIsIGVubGlnaHRlbmVkLCBidXJuZWQpOwoKCXJldHVybiBbYXBwcmVudGljZSwgZ3VydSwgbWFzdGVyLCBlbmxpZ2h0ZW5lZCwgYnVybmVkXTsKfQoKCgpmdW5jdGlvbiBpbml0ICgpIHsKCWNvbnNvbGUubG9nKCdpbml0KCkgc3RhcnQnKTsKCiAJdmFyIHRoZUltZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJXS2x2bHVwSW1nVVJMIik7Cgl2YXIgdGhlVHh0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBUZXh0Iik7Cgl2YXIgbmV4dE1pbGVzdG9uZXMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cE1pbGVzdG9uZXMiKTsKICAgIAogICAgICAJaWYgKCF0aGVJbWcpIHsKCQl0aGVJbWcgPSAiaHR0cHM6Ly9pLmltZ3VyLmNvbS9LNlVRTDFaLmdpZiI7CiAgICAgICAgCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJXS2x2bHVwSW1nVVJMIiwgdGhlSW1nKTsKICAgICAgCX0KICAgICAgCiAgICAgIAlpZiAoIXRoZVR4dCkgewoJCXRoZVR4dCA9ICc8YnIvPllvdSBsZXZlbGVkIHVwITxici8+Q29uZ3JhdHVsYXRpb25zISc7CiAgICAgICAgCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJXS2x2bHVwVGV4dCIsIHRoZVR4dCk7CiAgICAgIAl9CgoJaWYgKCFuZXh0TWlsZXN0b25lcykgewoKCQlpbml0aWFsaXplTWlsZXN0b25lcygpOwoJCQoJfQoKCWNvbnNvbGUubG9nKCdpbml0KCkgZW5kJyk7Cn0KCgpmdW5jdGlvbiBpbml0aWFsaXplTWlsZXN0b25lcyAoKSB7CgoJY29uc29sZS5sb2coImluaXRpYWxpemVNaWxlc3RvbmVzKCkiKTsKCgl2YXIgdHVydGxlQ291bnRzID0gZ2V0VHVydGxlQ291bnRzKCk7CS8vIGN1bXVsYXRpdmUgKGVubCA9IGVubCArIGJ1ciwgZXRjLikKCXZhciBuZXh0TWlsZXN0b25lcyA9IG5ldyBBcnJheSgpOwoKCWZvciAodmFyIHg9MTsgeCA8IHR1cnRsZUNvdW50cy5sZW5ndGg7IHgrKykgewoKCQluZXh0TWlsZXN0b25lc1t4LTFdID0gZ2V0TmV4dE1pbGVzdG9uZSggdHVydGxlQ291bnRzW3hdICk7ICAvLyB0dXJ0bGVDb3VudHNbXSBpbmNsdWRlcyBBcHByZW50aWNlIGl0ZW1zLCBuZXh0TWlsZXN0b25lc1tdIGRvZXMgbm90Cgl9CgoJbG9jYWxTdG9yYWdlLnNldEl0ZW0oIldLbHZsdXBNaWxlc3RvbmVzIiwgSlNPTi5zdHJpbmdpZnkobmV4dE1pbGVzdG9uZXMpKTsKfQoKCmZ1bmN0aW9uIGNoZWNrTWlsZXN0b25lcyggbGV2ZWwgKSB7CgoJY29uc29sZS5sb2coImNoZWNrTWlsZXN0b25lcygpIik7CgoJdmFyIG5leHRNaWxlc3RvbmVzID0gSlNPTi5wYXJzZSggbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBNaWxlc3RvbmVzIikgKTsKCXZhciB0dXJ0bGVDb3VudHMgPSBnZXRUdXJ0bGVDb3VudHMoKTsKCXZhciBhY2hpZXZlbWVudHMgPSBuZXcgQXJyYXkoKTsKCXZhciBnb3RPbmUgPSAwOwoJdmFyIHRlc3RBbGxEb25lID0gbnVsbDsgLy9zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJXS2x2bHVwVGVzdEFsbEJ1cm5lZCIpOwoKCWNvbnNvbGUubG9nKCJuZXh0TWlsZXN0b25lczogIiwgSlNPTi5zdHJpbmdpZnkobmV4dE1pbGVzdG9uZXMpKTsKCglpZiAoIHRlc3RBbGxEb25lIHx8IChsZXZlbCA+PSA1MCAgJiYgKHR1cnRsZUNvdW50c1swXSA9PSB0dXJ0bGVDb3VudHNbNF0pKSkgewoKCQkvLyBhbHNvIGNoZWNrIHRoYXQgbGVzc29ucyA9PSAwIGFuZCByZXZpZXdzID09IDAKCgkJdmFyIHJ2d3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJyZXZpZXdzIilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNwYW4iKVswXTsKCQl2YXIgbHNucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImxlc3NvbnMiKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3BhbiIpWzBdOwoJCgkJaWYgKHRlc3RBbGxEb25lIHx8IChydndzID09IDAgJiYgbHNucyA9PSAwKSkgewoKCQkJY29uc29sZS5sb2coImFsbCB0dXJ0bGVzIGJ1cm5lZCEiKTsKCgkJCS8vIHNldCBmbGFnCgkJCXNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIldLbHZsdXBBbGxCdXJuZWQiLCAxKTsKCgkJCS8vIHJldHVybiBzb21lIG90aGVyd2lzZS1pbXBvc3NpYmxlIGFycmF5IHNvIHRoYXQgd2UnbGwgZ2V0IGludG8gZGlzcGxheU1pbGVzdG9uZXMoKQoJCQljb25zb2xlLmxvZygicmV0dXJuaW5nIFsxLDEsMSwxXSIpOwkKCQkJcmV0dXJuIFsxLCAxLCAxLCAxXTsKCQl9Cgl9CgoJZm9yICh2YXIgeD0wOyB4IDwgbmV4dE1pbGVzdG9uZXMubGVuZ3RoOyB4KyspIHsKCgkJaWYgKHR1cnRsZUNvdW50c1t4KzFdID49IG5leHRNaWxlc3RvbmVzW3hdKSB7IC8vIHR1cnRsZUNvdW50c1tdIGluY2x1ZGVzIEFwcHJlbnRpY2UgaXRlbXMsIG5leHRNaWxlc3RvbmVzW10gZG9lcyBub3QKCQkJCgkJCWFjaGlldmVtZW50c1t4XSA9IG5leHRNaWxlc3RvbmVzW3hdOwoJCQluZXh0TWlsZXN0b25lc1t4XSA9IGdldE5leHRNaWxlc3RvbmUoIHR1cnRsZUNvdW50c1t4KzFdICk7CgkJCWdvdE9uZSsrOwoKCQl9IGVsc2UgewoJCQlhY2hpZXZlbWVudHNbeF0gPSAwOwoJCX0KCX0KCgljb25zb2xlLmxvZygiYWNoaWV2ZW1lbnRzOiAiLCBKU09OLnN0cmluZ2lmeShhY2hpZXZlbWVudHMpKTsKCglpZiAoZ290T25lICE9IDApIHsKCgkJY29uc29sZS5sb2coImNoZWNrTWlsZXN0b25lcygpIHJldHVybmluZyBhY2hpZXZlbWVudHMiKTsKCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0tsdmx1cE1pbGVzdG9uZXMiLCBKU09OLnN0cmluZ2lmeShuZXh0TWlsZXN0b25lcykpOwoJCXJldHVybiBhY2hpZXZlbWVudHM7CgoJfSBlbHNlIHsKCQljb25zb2xlLmxvZygiY2hlY2tNaWxlc3RvbmVzKCkgcmV0dXJuaW5nIG51bGwiKTsKCQlyZXR1cm4gbnVsbDsKCX0KfQoKCmZ1bmN0aW9uIGRpc3BsYXlNaWxlc3RvbmVzICggbWlsZXN0b25lcyApIHsKCgljb25zb2xlLmxvZygnZGlzcGxheU1pbGVzdG9uZXMoKSBzdGFydCcpOwoJdmFyIG1zZyA9IGdldCgic2VhcmNoIik7CiAgICAJdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKIAl2YXIgdGhlSW1nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBJbWdVUkwiKTsKCXZhciB0aGVUeHQgPSAiPGJyLz4iOwoJdmFyIGxhYmVscyA9IFsiIEd1cnUgdHVydGxlISIsICIgTWFzdGVyIHR1cnRsZSEiLCAiIEVubGlnaHRlbmVkIHR1cnRsZSEiLCAiIEJ1cm5lZCB0dXJ0bGUhIl07CiAJdmFyIHRoZVBvcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJXS2x2bHVwSW1nUG9zIikgfHwgIkxFRlQiOwoKICAgIHN3aXRjaCh0aGVQb3MudG9VcHBlckNhc2UoKSkgewoKICAgICAgICBjYXNlICJCRUxPVyI6CiAgICAgICAgY2FzZSAiVU5ERVIiOgogICAgICAgIGNhc2UgIlVOREVSTkVBVEgiOgogICAgICAgIGNhc2UgIkRPV04iOgogICAgICAgIGNhc2UgIkJPVFRPTSI6CiAgICAgICAgY2FzZSAi44GX44GfIjoKICAgICAgICBjYXNlICLkuIsiOgogICAgICAgICAgICB0LmlubmVySFRNTCA9ICc8ZGl2IGlkPSJXS2x2bHVwVHh0IiBzdHlsZT0ibWFyZ2luOmF1dG87dGV4dC1hbGlnbjpjZW50ZXI7bGluZS1oZWlnaHQ6MTEwJTtmb250LXNpemU6MzAwJSI+IDwvZGl2PicrCiAgICAgICAgICAgICAgICAnPGltZyBpZD0iV0tsdmx1cEltZyIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG8iPiA8L2ltZz4nKwogICAgICAgIAkJJzwvZGl2Pic7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJBQk9WRSI6CiAgICAgICAgY2FzZSAiVE9QIjoKICAgICAgICBjYXNlICJVUCI6CiAgICAgICAgY2FzZSAiT1ZFUiI6CiAgICAgICAgY2FzZSAiT04gVE9QIE9GIjoKICAgICAgICBjYXNlICJDRU5URVIiOgogICAgICAgIGNhc2UgIkNFTlRFUkVEIjoKICAgICAgICBjYXNlICLjgYbjgYgiOgogICAgICAgIGNhc2UgIuS4iiI6CiAgICAgICAgY2FzZSAi44Gq44GLIjoKICAgICAgICBjYXNlICLkuK0iOgogICAgICAgIGNhc2UgIuOBoeOCheOBhuOBiuOBhiI6CiAgICAgICAgY2FzZSAi5Lit5aSuIjoKICAgICAgICAgICAgdC5pbm5lckhUTUwgPSAnPGltZyBpZD0iV0tsdmx1cEltZyIgc3R5bGU9ImRpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG8iPiA8L2ltZz4nKwogICAgICAgICAgICAgICAgJzxkaXYgaWQ9IldLbHZsdXBUeHQiIHN0eWxlPSJtYXJnaW46YXV0bzt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoxMTAlO2ZvbnQtc2l6ZTozMDAlIj4gPC9kaXY+JysKICAgICAgICAJCSc8L2Rpdj4nOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiTEVGVCI6CiAgICAgICAgY2FzZSAiQVQgTEVGVCI6CiAgICAgICAgY2FzZSAiT04gTEVGVCI6CiAgICAgICAgY2FzZSAiT04gVEhFIExFRlQiOgogICAgICAgIGNhc2UgIkxFRlQgT0YiOgogICAgICAgIGNhc2UgIlRPIFRIRSBMRUZUIE9GIjoKICAgICAgICBjYXNlICLjgbLjgaDjgooiOgogICAgICAgIGNhc2UgIuW3piI6CiAgICAgICAgY2FzZSAi44Gy44Gg44KK44GM44KPIjoKICAgICAgICBjYXNlICLlt6blgbQiOgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHQuaW5uZXJIVE1MID0gJzxpbWcgaWQ9IldLbHZsdXBJbWciIHN0eWxlPSJmbG9hdDpsZWZ0O21hcmdpbjoyMHB4Ij4gPC9pbWc+JysKICAgICAgICAgICAgICAgICc8ZGl2IGlkPSJXS2x2bHVwVHh0IiBzdHlsZT0ibWFyZ2luOjIwcHg7ZmxvYXQ6bGVmdDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoxMTAlO2ZvbnQtc2l6ZTozMDAlIj4gPC9kaXY+JysKICAgICAgICAJCSc8L2Rpdj4nOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiUklHSFQiOgogICAgICAgIGNhc2UgIkFUIFJJR0hUIjoKICAgICAgICBjYXNlICJPTiBSSUdIVCI6CiAgICAgICAgY2FzZSAiT04gVEhFIFJJR0hUIjoKICAgICAgICBjYXNlICJSSUdIVCBPRiI6CiAgICAgICAgY2FzZSAiVE8gVEhFIFJJR0hUIE9GIjoKICAgICAgICBjYXNlICJNSUdJIjoKICAgICAgICBjYXNlICLjgb/jgY4iOgogICAgICAgIGNhc2UgIuWPsyI6CiAgICAgICAgY2FzZSAi44G/44GO44GM44KPIjoKICAgICAgICBjYXNlICLlj7PlgbQiOgogICAgICAgICAgICB0LmlubmVySFRNTCA9ICc8aW1nIGlkPSJXS2x2bHVwSW1nIiBzdHlsZT0iZmxvYXQ6cmlnaHQ7bWFyZ2luOjIwcHgiPiA8L2ltZz4nKwogICAgICAgICAgICAgICAgJzxkaXYgaWQ9IldLbHZsdXBUeHQiIHN0eWxlPSJtYXJnaW46MjBweDtmbG9hdDpyaWdodDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoxMTAlO2ZvbnQtc2l6ZTozMDAlIj4gPC9kaXY+JysKICAgICAgICAJCSc8L2Rpdj4nOwogICAgICAgICAgICBicmVhazsKCiAgICB9CgogICAgdC5zdHlsZS53aWR0aCA9ICIxMjAwcHgiOwogICAgdC5zdHlsZS5tYXJnaW4gPSAiYXV0byI7CgogICAgbXNnLmFwcGVuZENoaWxkKHQpOwoKCXZhciB0aGluZzEgPSBnZXQoIldLbHZsdXBJbWciKTsKCWlmICh0aGluZzEgJiYgdGhlSW1nKSB7CgkJdGhpbmcxLnNyYyA9IHRoZUltZzsKCX0KCgl2YXIgYWxsRG9uZVdLID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiV0tsdmx1cEFsbEJ1cm5lZCIpOwoJCglpZiAoYWxsRG9uZVdLICYmIGFsbERvbmVXSyA9PSAxKSB7CgoJCXRoZVR4dCArPSAiQUxMIFRVUlRMRVMgQlVSTkVEITxici8+V0FOSUtBTkkgQ09NUExFVEUhIjsKCQkvL3Nlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oIldLbHZsdXBUZXN0QWxsQnVybmVkIik7Cgl9IGVsc2UgewoKCQlmb3IgKHZhciB4ID0gbWlsZXN0b25lcy5sZW5ndGggLSAxOyB4ID49IDA7IHgtLSkgewoKCQkJaWYgKG1pbGVzdG9uZXNbeF0gPT0gMSkgewoKCQkJCXRoZVR4dCArPSAiRmlyc3QiICsgbGFiZWxzW3hdICsgIjxici8+IjsKCQkJfQoJCQllbHNlIGlmIChtaWxlc3RvbmVzW3hdICE9IDApIHsKCgkJCQl0aGVUeHQgKz0gbWlsZXN0b25lc1t4XSArICJ0aCIgKyBsYWJlbHNbeF0gKyAiPGJyLz4iOwoJCQl9CgkJfQoJfQoKICAgIHZhciBjdXN0b21CdXJuTGFiZWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0tCTFJCdXJuTGV2ZWxOYW1lIikgfHwgIkJ1cm5lZCI7CiAgICBpZiAoY3VzdG9tQnVybkxhYmVsICYmIChjdXN0b21CdXJuTGFiZWwgIT0gIkJ1cm5lZCIpKSB7CiAgICAgICAgdmFyIG5ld1RleHQgPSB0aGVUeHQucmVwbGFjZSgiQnVybmVkIiwgY3VzdG9tQnVybkxhYmVsKTsKICAgICAgICBpZiAobmV3VGV4dCA9PSB0aGVUeHQpIHsKICAgICAgICAgICAgdmFyIG5ld0NCTCA9IGN1c3RvbUJ1cm5MYWJlbC50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICBuZXdUZXh0ID0gdGhlVHh0LnJlcGxhY2UoIkJVUk5FRCIsIG5ld0NCTCk7CiAgICAgICAgfQogICAgICAgIHRoZVR4dCA9IG5ld1RleHQ7CiAgICB9CgoJdmFyIHRoaW5nMiA9IGdldCgiV0tsdmx1cFR4dCIpOwoKCWlmICh0aGluZzIpIHsKCgkJdGhpbmcyLmlubmVySFRNTD0gdGhlVHh0OwoJfSAKCgljb25zb2xlLmxvZygnZGlzcGxheU1pbGVzdG9uZXMoKSBlbmQnKTsKfQoKCgpmdW5jdGlvbiBtYWluICgpIHsKCgl2YXIgY3VyTGV2ZWw7CgoJY29uc29sZS5sb2coIm1haW4oKSIpOwoKCWluaXQoKTsKCglHTXNldHVwKCk7CgoJY3VyTGV2ZWwgPSBjaGVja0xldmVsKCk7CgoJdmFyIGxhc3RLbm93bkxldmVsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIldLbHZsdXBQcmV2TGV2ZWwiKSB8fCAxOwoKCWlmIChjdXJMZXZlbCAhPSBsYXN0S25vd25MZXZlbCkgeyByZXR1cm47IH0KCglpZiAoc2hvdWxkRGlzcGxheSgpKSB7CgoJCXZhciBkdXJ0ZXh0ID0gZ2V0KCJXS2x2bGR1clR4dCIpOwoKCQlpZiAoZHVydGV4dCkgeyBkdXJ0ZXh0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZHVydGV4dCk7IH0gIC8vIG92ZXJyaWRlIFdLIExldmVsIER1cmF0aW9uIHNjcmlwdAoKCQlkaXNwbGF5TGV2ZWxVcE1lc3NhZ2UoIGN1ckxldmVsICk7CgoJfSBlbHNlIHsKCgkJdmFyIG1pbGVzdG9uZXMgPSBjaGVja01pbGVzdG9uZXMoIGN1ckxldmVsICk7CgoJCWlmIChtaWxlc3RvbmVzKSB7CgoJCQl2YXIgZHVydGV4dCA9IGdldCgiV0tsdmxkdXJUeHQiKTsKCgkJCWlmIChkdXJ0ZXh0KSB7IGR1cnRleHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkdXJ0ZXh0KTsgfSAgLy8gb3ZlcnJpZGUgV0sgTGV2ZWwgRHVyYXRpb24gc2NyaXB0CgoJCQlkaXNwbGF5TWlsZXN0b25lcyggbWlsZXN0b25lcyApOwoKCQl9IAoJfQp9Cgp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIG1haW4sIGZhbHNlKTsKCmNvbnNvbGUubG9nKCdzY3JpcHQgbG9hZCBlbmQnKTsK",
            "storage": {
                "data": {},
                "ts": 1607436649632
            },
            "uuid": "f56e4394-b554-42b3-b894-0263a9d2f095"
        },
        {
            "enabled": false,
            "file_url": "https://greasyfork.org/scripts/26481-wanikani-katakana-madness/code/WaniKani%20Katakana%20Madness.user.js",
            "name": "WaniKani Katakana Madness",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://www.wanikani.com/*",
                        "http://www.wanikani.com/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-end",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [
                        "https://www.wanikani.com/lesson/*"
                    ],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 8,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBXYW5pS2FuaSBLYXRha2FuYSBNYWRuZXNzCi8vIEBhdXRob3IgICAgICAgTHVrZS1GaWxld2Fsa2VyCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9lbi9zY3JpcHRzLzI2NDgxLXdhbmlrYW5pLWthdGFrYW5hLW1hZG5lc3MKLy8gQGluY2x1ZGUgICAgICBodHRwczovL3d3dy53YW5pa2FuaS5jb20vKgovLyBAaW5jbHVkZSAgICAgIGh0dHA6Ly93d3cud2FuaWthbmkuY29tLyoKLy8gQHZlcnNpb24gICAgICAxLjAuOAovLyBAZGVzY3JpcHRpb24gIFRyYW5zZm9ybXMgZXZlcnl0aGluZyByZWxhdGVkIHRvIG9uJ3lvbWkgaW50byBrYXRha2FuYQovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LWVuZAovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQGxpY2Vuc2UgICAgICBHUEwgdjMuMAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qCiogS2FuamkgaW1wb3J0YW50IHJlYWRpbmcgKDE6IG9ueW9taSwgMDoga3VueW9taSkKKiBTYXZlZCBsb2NhbHksIHRvIHVwZGF0ZSBlbnRlciBhcGlLZXkgYW5kIHVzZSBmdW5jdGlvbiBvbiB0aGUgYm90dG9tIG9mIHRoZSBzY3JpcHQKKi8KdmFyIGFwaUtleSA9ICJrZXkiOwp2YXIga2FuamlZb21pUExFQVNBTlQgPSB7IuS4gCI6MSwi5LqMIjoxLCLkuZ0iOjEsIuS4gyI6MSwi5Lq6IjoxLCLlhaUiOjEsIuWFqyI6MSwi5YqbIjoxLCLljYEiOjEsIuS4iSI6MSwi5LiKIjoxLCLkuIsiOjEsIuWPoyI6MSwi5aSnIjoxLCLlpbMiOjEsIuWxsSI6MSwi5bedIjowLCLlt6UiOjEsIuWIgCI6MSwi5ZyfIjoxLCLljYMiOjEsIuWklSI6MCwi5a2QIjoxLCLlsI8iOjEsIuS4gSI6MSwi5LqGIjoxLCLlj4giOjAsIuS4uCI6MCwi5omNIjoxLCLkuK0iOjEsIuS6lCI6MSwi5YWtIjoxLCLlhoYiOjEsIuWkqSI6MSwi5omLIjowLCLmlociOjEsIuaXpSI6MSwi5pyIIjoxLCLmnKgiOjEsIuawtCI6MSwi54GrIjoxLCLniqwiOjAsIueOiyI6MSwi5Ye6IjoxLCLlm5siOjEsIuWPsyI6MSwi5bemIjoxLCLmnKwiOjEsIuatoyI6MSwi55SwIjowLCLnjokiOjAsIueZvSI6MSwi55uuIjowLCLnq4siOjEsIuOAhSI6MCwi5rC3IjowLCLomasiOjAsIuefsyI6MSwi5LiWIjoxLCLkuLsiOjEsIuS7liI6MSwi5LujIjoxLCLlhpkiOjEsIuWOuyI6MSwi5Y+3IjoxLCLlubMiOjEsIuaJkyI6MSwi55SzIjowLCLnmr8iOjAsIuekvCI6MSwi5LyRIjoxLCLlhYgiOjEsIuWQjSI6MSwi5a2XIjoxLCLlubQiOjEsIuaXqSI6MSwi5rCXIjoxLCLnmb4iOjEsIueruSI6MCwi57O4IjowLCLmnZEiOjAsIuiAsyI6MCwi55S3IjoxLCLnlLoiOjEsIuiKsSI6MCwi6KaLIjowLCLosp0iOjAsIui1pCI6MCwi6LazIjoxLCLou4oiOjEsIuS4jSI6MSwi5LuVIjoxLCLlrp0iOjEsIuWkriI6MSwi5LqhIjoxLCLljJYiOjEsIuS4oSI6MSwi5ZywIjoxLCLlhagiOjEsIuWQkSI6MSwi5a6JIjoxLCLlt54iOjEsIuaciSI6MSwi5puyIjoxLCLmrKEiOjEsIuatuyI6MSwi576KIjoxLCLooYAiOjEsIuS6rCI6MSwi5Zu9IjoxLCLlpJwiOjEsIuWmuSI6MSwi5aeJIjoxLCLlupciOjEsIuaYjiI6MSwi5p2xIjoxLCLmrakiOjEsIueUuyI6MSwi55u0IjoxLCLnn6UiOjEsIumVtyI6MSwi5YmNIjoxLCLljZciOjEsIuWupCI6MSwi5b6MIjoxLCLmgJ0iOjEsIuaYnyI6MSwi5rW3IjoxLCLmtLsiOjEsIuenkSI6MSwi54K5IjoxLCLojLYiOjEsIumjnyI6MSwi6aaWIjowLCLnp4EiOjEsIum7hCI6MCwi6buSIjoxLCLmrKAiOjEsIuawjyI6MSwi55SxIjoxLCLmnK0iOjEsIuawkSI6MSwi6L66IjoxLCLku5giOjAsIuS7pSI6MSwi5aSxIjoxLCLlv4UiOjEsIuacqiI6MSwi5pyrIjoxLCLmoKEiOjEsIuWkjyI6MCwi5a62IjoxLCLlvLEiOjEsIuaZgiI6MSwi57SZIjowLCLoqJgiOjEsIumrmCI6MSwi6YCaIjoxLCLlvLciOjEsIuaVmSI6MSwi55CGIjoxLCLntYQiOjEsIuiIuSI6MSwi6YCxIjoxLCLpm6oiOjAsIumtmiI6MSwi6bOlIjoxLCLpoqgiOjEsIumdkiI6MSwi6IKJIjoxLCLnsbMiOjEsIuWFhCI6MSwi55quIjoxLCLkuqQiOjEsIuS8miI6MSwi5YWJIjoxLCLlkIwiOjEsIuWbniI6MSwi5aSaIjoxLCLlvZMiOjEsIuavjiI6MSwi5769IjowLCLogIMiOjEsIuiHqiI6MSwi6ImyIjowLCLooYwiOjEsIuilvyI6MSwi5L2VIjowLCLkvZMiOjEsIuS9nCI6MSwi5ZuzIjoxLCLlo7AiOjAsIuW8nyI6MSwi5b2iIjoxLCLmnaUiOjEsIuekviI6MSwi6KeSIjoxLCLoqIAiOjEsIui1sCI6MSwi6LC3IjowLCLov5EiOjEsIumHjCI6MCwi6bqmIjowLCLlraYiOjEsIuaelyI6MCwi56m6IjoxLCLph5EiOjEsIumbqCI6MCwi6I2JIjowLCLpn7MiOjEsIuaxoCI6MSwi5Y+NIjoxLCLmlK8iOjEsIuS9jyI6MSwi5YqpIjoxLCLlkJsiOjEsIuWMuyI6MSwi5a++IjoxLCLlsYAiOjEsIuaKlSI6MSwi5b25IjoxLCLmsboiOjEsIueptiI6MSwi6LqrIjoxLCLogIUiOjEsIueglCI6MSwi5aC0IjoxLCLmnJ0iOjAsIueVqiI6MSwi562UIjowLCLntbUiOjEsIuiytyI6MCwi6YGTIjoxLCLplpMiOjEsIumbsiI6MCwi5pWwIjoxLCLoqbEiOjEsIualvSI6MSwi5omAIjoxLCLmo64iOjAsIumbuyI6MSwi6aasIjoxLCLkuIciOjEsIuS7iiI6MSwi5YWDIjoxLCLlhawiOjEsIuWGhSI6MSwi5YiGIjoxLCLliIciOjEsIuWPiyI6MSwi5Y2IIjoxLCLlpKoiOjEsIuWwkSI6MSwi5byVIjowLCLlv4MiOjEsIuaIuCI6MCwi5pa5IjoxLCLniZsiOjEsIueItiI6MCwi5q+bIjoxLCLlhqwiOjAsIuWMlyI6MSwi5Y2KIjoxLCLlj6QiOjEsIuWPsCI6MSwi5aSWIjoxLCLluIIiOjEsIuW6gyI6MCwi5q+NIjowLCLnlKgiOjEsIuefoiI6MCwi55SfIjoxLCLmraIiOjEsIuiQvSI6MSwi6IGeIjoxLCLmqKoiOjAsIumAsiI6MSwi6LuiIjoxLCLovrIiOjEsIumJhCI6MSwi6JGJIjowLCLmnIAiOjEsIue1giI6MSwi57+SIjoxLCLmrYwiOjEsIuiqniI6MSwi6KqtIjowLCLps7QiOjAsIue3miI6MSwi6ZuGIjoxLCLpo7IiOjAsIualrSI6MSwi5ryiIjoxLCLlp4siOjEsIui1tyI6MCwi6YCfIjoxLCLphY0iOjEsIumFkiI6MSwi6ZmiIjoxLCLot68iOjEsIui7vSI6MCwi6YGLIjoxLCLplosiOjEsIueulyI6MSwi6aCtIjowLCLoqr8iOjEsIuimqiI6MSwi6aGUIjowLCLnl4UiOjEsIuaxgiI6MSwi5pawIjoxLCLov5QiOjEsIuWumiI6MSwi5aOyIjoxLCLkuosiOjEsIuS9vyI6MSwi5YW3IjoxLCLlj5ciOjEsIuWSjCI6MSwi5a6fIjoxLCLmnI0iOjEsIuazsyI6MCwi54mpIjoxLCLoi6YiOjEsIuihqCI6MSwi6YOoIjoxLCLkuZciOjAsIuWuoiI6MSwi5bGLIjowLCLluqYiOjEsIueVjCI6MSwi5oyBIjoxLCLnmboiOjEsIuebuCI6MSwi55yMIjoxLCLnvo4iOjEsIuiyoCI6MSwi6YCBIjoxLCLph40iOjEsIuirhyI6MSwi6KaBIjoxLCLli50iOjEsIuS7riI6MSwi5LqIIjoxLCLkv50iOjEsIuippiI6MSwi6aiTIjoxfTsKdmFyIGthbmppWW9taVBBSU5GVUwgPSB7IuW7uiI6MSwi54yrIjowLCLlj7giOjEsIuWkqyI6MSwi6aOvIjoxLCLli4ciOjEsIuWNmCI6MSwi5a+6IjowLCLlsqkiOjAsIuaZtCI6MCwi56eLIjowLCLluLAiOjAsIuaYpSI6MCwi5pi8IjowLCLoqIgiOjEsIuWIlyI6MSwi5Yy6IjoxLCLlnYIiOjAsIuS/oSI6MSwi5byPIjoxLCLlpIkiOjEsIuaYqCI6MSwi5q+SIjoxLCLms5UiOjEsIuazoyI6MCwi5rWFIjowLCLoi7EiOjEsIue0gCI6MSwi6LuNIjoxLCLnr4kiOjEsIuS7jyI6MSwi5pmpIjoxLCLkuIgiOjEsIumKgCI6MSwi6KydIjoxLCLnhLYiOjEsIumkiiI6MSwi5oSfIjoxLCLmqYsiOjAsIuipqSI6MSwi6aGMIjoxLCLlrr8iOjEsIumhmCI6MSwi6aeFIjoxLCLlmagiOjEsIuWjqyI6MSwi6KqyIjoxLCLllY8iOjEsIuaVtCI6MSwi5pqXIjoxLCLmp5giOjAsIuemjyI6MSwi57eRIjowLCLnt7QiOjEsIumkqCI6MSwi5YSEIjoxLCLmlpkiOjEsIuaomSI6MSwi5q66IjoxLCLnhrEiOjEsIuizniI6MSwi6YG4IjoxLCLovKoiOjEsIumPoSI6MCwi5oOFIjoxLCLmmKAiOjEsIueWkSI6MSwi55qGIjowLCLmg7MiOjEsIuWDjyI6MSwi5bmyIjoxLCLpnZ4iOjEsIueEoSI6MSwi5pivIjoxLCLntZAiOjEsIue0sCI6MSwi5oKyIjoxLCLolqwiOjEsIuWOnyI6MSwi6by7IjowLCLlgbQiOjAsIuWFtSI6MSwi5aCCIjoxLCLloakiOjAsIuW4rSI6MSwi5pWXIjoxLCLmooUiOjAsIuWboCI6MSwi5bi4IjoxLCLorZgiOjEsIua4iSI6MSwi6JmaIjoxLCLlrpgiOjEsIuWvnyI6MSwi5bqVIjowLCLmhJsiOjEsIue9siI6MSwi6K2mIjoxLCLmgYsiOjEsIuimmiI6MSwi6KqsIjoxLCLlubsiOjEsIuipsyI6MSwi5YqHIjoxLCLllpwiOjEsIuaenCI6MSwi5qCEIjoxLCLoiIwiOjAsIue2miI6MSwi5YqgIjoxLCLnr4AiOjEsIua4myI6MSwi6aCGIjoxLCLlrrkiOjEsIuW4gyI6MSwi5piTIjoxLCLoi6UiOjAsIuiyoSI6MSwi6KmeIjoxLCLmmIYiOjEsIumWpSI6MSwi5q20IjoxLCLlhooiOjEsIuWuhyI6MSwi5a6ZIjoxLCLlv5kiOjEsIuWxpSI6MSwi5ZujIjoxLCLmmrQiOjEsIua3tyI6MSwi5LmxIjoxLCLlvpIiOjEsIuW+lyI6MSwi5pS5IjoxLCLpgKMiOjEsIuWWhCI6MSwi57WhIjoxLCLmr5QiOjEsIuWPsiI6MSwi56ybIjoxLCLoirgiOjEsIuauiyI6MSwi5Y2SIjoxLCLlrowiOjEsIuW/tSI6MSwi5pybIjoxLCLmoLwiOjEsIuiDvSI6MSwi5aalIjoxLCLmnZ8iOjEsIumbsCI6MSwi5p2+IjowLCLkvosiOjEsIuWNlCI6MSwi5Y+CIjoxLCLlkagiOjEsIuWbuiI6MSwi5ZuyIjoxLCLlraMiOjEsIuW4jCI6MSwi5oqYIjoxLCLmnZAiOjEsIue0hCI6MSwi55qEIjoxLCLln7oiOjEsIuaApyI6MSwi5oqAIjoxLCLooZMiOjEsIumqqCI6MSwi6aCRIjoxLCLoqLwiOjEsIumBoCI6MSwi5ZOBIjoxLCLnrJEiOjAsIueVmSI6MSwi5ZySIjoxLCLmm5wiOjEsIuabuCI6MSwi6ZaAIjoxLCLlj5YiOjEsIuS/giI6MSwi5YW4IjoxLCLlrogiOjEsIuW5uCI6MSwi5oClIjoxLCLnnJ8iOjEsIueusSI6MCwi6I23IjowLCLpnaIiOjEsIuW6nCI6MSwi5rK7IjoxLCLmtbQiOjEsIui+niI6MSwi6ZaiIjoxLCLmlL8iOjEsIuW8gSI6MSwi6Zm6IjoxLCLljbEiOjEsIuWtmCI6MSwi5bCCIjoxLCLlhpIiOjEsIuWGlyI6MSwi6ZiqIjoxLCLlk6EiOjEsIumajiI6MSwi5YuJIjoxLCLnrKwiOjEsIumDvSI6MSwi5b6FIjoxLCLmt7EiOjEsIuerpSI6MSwi5bqtIjoxLCLml4UiOjEsIuaguSI6MSwi5rWBIjoxLCLmtogiOjEsIuWAjSI6MSwi5bO2IjowLCLnpa0iOjEsIueroCI6MSwi5YuVIjoxLCLllYYiOjEsIuaCqiI6MSwi5pePIjoxLCLnkIMiOjEsIumZvSI6MSwi5a+SIjowLCLmmpEiOjAsIuacnyI6MSwi5qSNIjoxLCLmra8iOjAsIua4qSI6MSwi5rivIjoxLCLmua8iOjAsIueZuyI6MSwi552AIjoxLCLph44iOjEsIuefrSI6MSwi5rOJIjoxLCLlkIgiOjEsIuaBryI6MSwi5YOVIjoxLCLoqJMiOjEsIuW8kyI6MSwi5ZGKIjoxLCLnqK4iOjEsIumBlCI6MSwi6aGeIjoxLCLloLEiOjEsIuetiSI6MSwi56WIIjoxLCLmsb0iOjEsIuWAnyI6MSwi54S8IjowLCLlv5giOjEsIuW6pyI6MSwi5rSXIjoxLCLog7giOjAsIuWDpyI6MSwi6ISzIjoxLCLnpoUiOjEsIuWPryI6MSwi6KixIjoxLCLmnpoiOjEsIuWPpSI6MSwi6Z2ZIjoxLCLnpoEiOjEsIuWWqyI6MSwi54WZIjoxLCLlpKIiOjEsIueBvSI6MSwi55SjIjoxLCLnqbQiOjAsIuWbsCI6MSwi5qmfIjoxLCLlrrMiOjEsIueOhyI6MSwi6aObIjoxLCLkvZkiOjEsIumboyI6MSwi5aaoIjoxLCLooqsiOjEsIuijlSI6MSwi5bC7IjowLCLpnIciOjEsIuWwviI6MSwi5qKwIjoxLCLnoroiOjEsIuWrjCI6MSwi5YCLIjoxLCLlnKciOjEsIuWcqCI6MSwi5YCSIjoxLCLoh60iOjAsIuWOmiI6MCwi5aa7IjoxLCLorbAiOjEsIueKryI6MSwi572qIjoxLCLpmLIiOjEsIuirliI6MSwi57WMIjoxLCLmiJAiOjEsIuWRsyI6MSwi5L2OIjoxLCLmi74iOjAsIuS8nSI6MSwi6ICBIjoxLCLkvY0iOjEsIuWIqSI6MSwi5YqqIjoxLCLnibkiOjEsIuaUviI6MSwi5LqJIjoxLCLku7IiOjAsIuWFsSI6MSwi5aW9IjoxLCLliJ0iOjEsIuWIpSI6MSwi5Yq0IjoxLCLlkb0iOjEsIuWyuCI6MSwi5piUIjowLCLms6IiOjEsIuazqCI6MSwi6IKyIjoxLCLmjIciOjEsIua0iyI6MSwi56WeIjoxLCLmiKYiOjEsIuenkiI6MSwi57SaIjoxLCLov70iOjAsIuertiI6MSwi6ImvIjoxLCLlip8iOjEsIuS+vyI6MSwi5LukIjoxLCLlg40iOjEsIuaEjyI6MX07CnZhciBrYW5qaVlvbWlERUFUSCA9IHsi5bGFIjoxLCLoo5wiOjEsIumuriI6MSwi6ZmQIjoxLCLkuI4iOjEsIuWQqyI6MSwi5b2xIjoxLCLms4EiOjEsIua4oSI6MCwi6Z+/IjoxLCLnpagiOjEsIuaZryI6MSwi5oqcIjowLCLoqLQiOjEsIuionyI6MSwi6YCuIjoxLCLlgJkiOjEsIuaniyI6MSwi5qihIjoxLCLmjZUiOjEsIuWKuSI6MSwi5bGeIjoxLCLmhaMiOjEsIuixiiI6MSwi5rqAIjoxLCLogqUiOjEsIuW3uyI6MSwi5o2cIjoxLCLntZ4iOjEsIumaoCI6MSwi6LypIjoxLCLmjpsiOjAsIuabvyI6MCwi576pIjoxLCLmlbUiOjEsIua4iCI6MSwi5aeUIjoxLCLmjJkiOjEsIuWItiI6MSwi5YikIjoxLCLli5kiOjEsIuafuyI6MSwi57ePIjoxLCLoqK0iOjEsIuizhyI6MSwi5qipIjoxLCLku7YiOjEsIua0viI6MSwi5bKhIjowLCLntKAiOjEsIuaWrSI6MSwi6KmVIjoxLCLku7siOjEsIuaJuSI6MSwi5qScIjoxLCLlr6kiOjEsIuadoSI6MSwi6LKsIjoxLCLnnIEiOjEsIueojiI6MSwi5aKXIjoxLCLop6MiOjEsIumamyI6MSwi6KqNIjoxLCLkvIEiOjEsIumsvCI6MSwi6Z2pIjoxLCLkv7MiOjEsIuijgSI6MSwi5ZG8IjowLCLlj44iOjEsIuWBnCI6MSwi6IG3IjoxLCLopo8iOjEsIuittyI6MSwi5YmyIjowLCLltI4iOjAsIua8lCI6MSwi5b6LIjoxLCLluKsiOjEsIueciyI6MSwi5rqWIjoxLCLliYciOjEsIuWwjiI6MSwi5YKZIjoxLCLlubkiOjEsIuW8tSI6MSwi5YSqIjoxLCLmsqIiOjEsIuWuhSI6MSwi5pa9IjoxLCLotIUiOjEsIuePviI6MSwi5LmzIjoxLCLln44iOjAsIuengCI6MSwi5oKpIjowLCLmmociOjEsIuiDgyI6MSwi6YOOIjoxLCLmi5siOjEsIuautSI6MSwi6IW5IjoxLCLnl5siOjEsIumAgCI6MSwi5bGIIjoxLCLnuZQiOjEsIuiyuCI6MCwi6L+3IjoxLCLmg5EiOjEsIuiqmCI6MSwi5bCxIjoxLCLnl4ciOjEsIuioqiI6MSwi5oCSIjoxLCLmmIciOjEsIuecoCI6MSwi552hIjoxLCLnt6AiOjEsIui/qyI6MSwi6Z20IjowLCLmv4MiOjEsIuerryI6MSwi5qW1IjoxLCLlgaUiOjEsIumAlCI6MSwi5bq3IjoxLCLntaYiOjEsIumbhCI6MSwi5aiYIjowLCLkub4iOjEsIueboyI6MSwi5p2vIjoxLCLlgqwiOjEsIuS/gyI6MSwi5qynIjoxLCLmsZ8iOjAsIuiriyI6MSwi6Z+TIjoxLCLlo4oiOjEsIuiouiI6MSwi6ZajIjoxLCLlg5oiOjEsIuepjSI6MSwi552jIjoxLCLnlaUiOjEsIuiHoyI6MSwi6IiqIjoxLCLlr4QiOjEsIuadvyI6MSwi6KGXIjoxLCLlrpciOjEsIue3iiI6MSwi5a60IjoxLCLmgZAiOjEsIuaAliI6MSwi5re7IjoxLCLnjJsiOjEsIueDiCI6MSwi57SiIjoxLCLoqbAiOjAsIuelnSI6MSwi5ouFIjoxLCLpoY0iOjEsIuijvSI6MSwi54eDIjoxLCLpgZUiOjAsIui8uCI6MSwi5bGKIjowLCLni60iOjAsIuiCqSI6MCwi6IWVIjowLCLohbAiOjAsIuinpiI6MSwi6KaWIjoxLCLovIkiOjEsIuWxpCI6MSwi5Z6LIjoxLCLluoEiOjEsIuW3riI6MSwi5q2mIjoxLCLnrqEiOjEsIuixoSI6MSwi6YePIjoxLCLlooMiOjEsIueSsCI6MSwi6LOqIjoxLCLov7AiOjEsIuS+myI6MSwi5bGVIjoxLCLosqkiOjEsIuagqiI6MCwi6LOAIjoxLCLlkIQiOjEsIuiqlSI6MSwi572wIjoxLCLohLEiOjEsIumBjiI6MSwi5Z2KIjoxLCLlr50iOjAsIuWuriI6MCwi5qGIIjoxLCLnva4iOjEsIuS+oSI6MSwi6LK7IjoxLCLli6IiOjEsIuWWtiI6MSwi56S6IjoxLCLntbEiOjEsIumgmCI6MSwi562WIjoxLCLol6QiOjAsIuWJryI6MSwi6KazIjoxLCLlgKQiOjEsIuWQuCI6MSwi5ae/IjoxLCLln58iOjEsIuW/nCI6MSwi5o+QIjoxLCLmj7QiOjEsIueKtiI6MSwi5oWLIjoxLCLpgKAiOjEsIuaOiCI6MSwi5Y2wIjoxLCLlibUiOjEsIuW+gCI6MSwi5b6pIjoxLCLovIMiOjEsIuethiI6MSwi6YmbIjoxLCLosq8iOjEsIuaIkSI6MSwi5pWFIjoxLCLpmpwiOjEsIuW+kyI6MSwi5r+AIjoxLCLliLoiOjEsIuWKsSI6MSwi6KiOIjoxLCLpg7UiOjEsIumHnSI6MSwi5b60IjoxLCLmgKoiOjEsIueNoyI6MSwi56qBIjoxLCLoj5MiOjEsIuaysyI6MSwi5rGXIjowLCLmjK8iOjEsIuixmiI6MCwi5YaNIjoxLCLmjqUiOjEsIueLrCI6MSwi5Y2gIjoxLCLlt6giOjEsIuWmmSI6MSwi6bqXIjoxLCLkuKYiOjEsIuWGtyI6MSwi5YemIjoxLCLpgIYiOjEsIuW6qyI6MSwi5YWQIjoxLCLlh40iOjEsIuW5vCI6MSwi56iaIjoxLCLljZoiOjEsIuWlhyI6MSwi5riFIjoxLCLmvZQiOjEsIumMsiI6MSwi5L+uIjoxLCLpmooiOjEsIuWIuCI6MSwi5ammIjoxLCLlvq4iOjEsIuebiiI6MSwi56e7IjoxLCLnsr4iOjEsIueoiyI6MSwi57W2IjoxLCLmhrIiOjEsIuihhiI6MSwi5YKYIjowLCLmtZwiOjAsIuaSgyI6MSwi5pS7IjoxLCLntroiOjEsIumthSI6MSwi57O7IjoxLCLmuIciOjAsIuWpmiI6MSwi6YGKIjoxLCLml5ciOjEsIueFpyI6MSwi5b+rIjoxLCLniYgiOjEsIuiypyI6MSwi5LmPIjoxLCLpgakiOjEsIumgkCI6MSwi5bu2IjoxLCLnv4wiOjEsIuimpyI6MSwi5oeQIjowLCLmirwiOjAsIuabtCI6MSwi5rWuIjowLCLmnpUiOjAsIua8jyI6MSwi56ymIjoxLCLos7wiOjEsIui2iiI6MSwi6aO+IjoxLCLpqJIiOjEsIuiDjCI6MSwi5pKuIjoxLCLnm5ciOjF9Owp2YXIga2FuamlZb21pSEVMTCA9IHsi6b2iIjoxLCLpnIAiOjEsIuWunCI6MCwi57mwIjowLCLpgb8iOjEsIuWmiiI6MSwi5aigIjoxLCLoh7QiOjEsIuWIiiI6MSwi5aWPIjoxLCLkvLQiOjEsIuS9tSI6MSwi5YK+IjoxLCLljbQiOjEsIuWlpSI6MCwi5oWuIjoxLCLmh7giOjEsIuaIvyI6MSwi5omxIjowLCLmipEiOjEsIuaKniI6MSwi5o+PIjoxLCLnm6QiOjEsIue3kiI6MSwi56ewIjoxLCLnt6kiOjAsIuiolyI6MSwi6LOEIjoxLCLos4IiOjEsIui0iCI6MSwi6YCDIjoxLCLpgoQiOjEsIuaLkiI6MSwi6Yi0IjoxLCLpgqYiOjEsIumYnCI6MSwi5bKQIjoxLCLpm4ciOjEsIumahiI6MSwi5o6nIjowLCLlo4EiOjAsIuajiyI6MSwi5riLIjoxLCLnvqQiOjEsIueJhyI6MCwi5LuZIjoxLCLlhYUiOjEsIuWFjSI6MSwi5YunIjoxLCLlnI8iOjEsIuWfiyI6MCwi5Z+8IjowLCLlpaoiOjAsIuW+oSI6MSwi5oWOIjoxLCLnlLIiOjEsIuaeoCI6MCwi5paQIjoxLCLnpYkiOjEsIueosiI6MCwi6KyZIjoxLCLorbIiOjEsIui6jSI6MSwi6YqDIjoxLCLpi7wiOjEsIumghSI6MSwi5aCAIjowLCLpmqMiOjEsIumhpyI6MSwi6aeQIjoxLCLpp4YiOjAsIuWUsSI6MSwi5p+xIjoxLCLlrZ0iOjEsIuS/iiI6MSwi5YW8IjoxLCLlkLkiOjAsIuWJpCI6MSwi5behIjoxLCLmiJIiOjEsIuaOkiI6MSwi5pC6IjoxLCLpi60iOjEsIuaVjyI6MSwi5pW3IjowLCLmrr8iOjEsIueKoCI6MSwi542yIjoxLCLojIIiOjEsIumbhSI6MSwi6aC7IjoxLCLnuYEiOjEsIuauliI6MSwi6KGdIjoxLCLoloQiOjEsIuiqiSI6MSwi6KSSIjoxLCLpgI8iOjEsIuWtqyI6MSwi5a+MIjoxLCLono0iOjEsIumboiI6MSwi57eoIjoxLCLoj68iOjEsIuaXoiI6MSwi5pmuIjoxLCLosaoiOjEsIumRkSI6MSwi6ZmkIjoxLCLlsIsiOjEsIuW5viI6MCwi5buKIjoxLCLmjoMiOjEsIuazpSI6MSwi6amaIjoxLCLmo5IiOjEsIuWYhiI6MSwi5YCJIjoxLCLlt6MiOjAsIuaVkSI6MSwi5bivIjoxLCLlvoQiOjEsIuaVoyI6MSwi57KJIjoxLCLohIgiOjEsIuiPnCI6MSwi6LKoIjoxLCLpmbgiOjEsIuS8vCI6MSwi5aKTIjoxLCLlnYciOjEsIuW+syI6MSwi5o6iIjoxLCLlgbUiOjEsIueUmCI6MCwi5bCGIjoxLCLml6ciOjEsIuWnkyI6MSwi6LK/IjoxLCLnm58iOjEsIumBuiI6MSwi5YK1IjoxLCLkvLgiOjAsIuWPiiI6MSwi5aWIIjoxLCLluYUiOjAsIuW7gyI6MSwi5o+bIjoxLCLmkZgiOjEsIuaguCI6MSwi57iEIjoxLCLmspYiOjAsIua0pSI6MCwi54yuIjoxLCLnmYIiOjEsIue2mSI6MSwi57atIjoxLCLkvI4iOjEsIuiIniI6MSwi6LiPIjoxLCLoiKwiOjEsIumgvCI6MSwi5L6dIjoxLCLoq74iOjEsIum5vyI6MCwi54mZIjoxLCLotoUiOjEsIuWFhiI6MSwi5oqxIjowLCLot6EiOjEsIuaIuyI6MCwi6LezIjoxLCLmmK0iOjEsIua8gSI6MSwi5YSfIjoxLCLli58iOjEsIuWIkSI6MSwi5Z+3IjoxLCLloYEiOjEsIuW0qSI6MSwi5oKjIjoxLCLmipciOjEsIuaKtSI6MSwi5pesIjoxLCLniIYiOjEsIua5viI6MSwi5by+IjoxLCLogbQiOjEsIumBoyI6MSwi6ZeYIjoxLCLpppkiOjEsIumZoyI6MSwi6IeoIjoxLCLliYoiOjEsIuWlkSI6MSwi5o6yIjoxLCLni5kiOjEsIuiRrCI6MSwi5oG1IjoxLCLolLUiOjEsIuewoSI6MSwi6ZaJIjoxLCLoqowiOjEsIueqkyI6MCwi5ZCmIjoxLCLnrYsiOjEsIuWegiI6MSwi5a6jIjoxLCLlsIoiOjEsIuW/oCI6MSwi5ouhIjoxLCLmk40iOjEsIuaVrCI6MSwi54GwIjowLCLnhp8iOjEsIueVsCI6MSwi55qHIjoxLCLnm5siOjEsIueggiI6MSwi5rygIjoxLCLns5YiOjEsIue0jSI6MSwi6IK6IjoxLCLokZciOjEsIuiSuCI6MSwi6KOFIjoxLCLoo48iOjAsIuiruCI6MSwi6LODIjoxLCLmmq4iOjEsIumGpCI6MSwi54KOIjoxLCLnoLQiOjEsIuadiSI6MCwi54aKIjowLCLphaIiOjAsIueNhCI6MSwi6YqFIjoxLCLpgYUiOjEsIua4rCI6MSwi5b2rIjoxLCLoiI4iOjEsIuismyI6MSwi5rueIjoxLCLku4siOjEsIue0uSI6MSwi5bexIjoxLCLljoQiOjEsIuS6gCI6MCwi5LqSIjoxLCLliaMiOjEsIuW9vCI6MCwi5a+/IjoxLCLmgaUiOjAsIuaxgSI6MSwi5ZmMIjoxLCLngroiOjEsIumFlCI6MSwi6Y2LIjowLCLmuZYiOjEsIuaJlSI6MCwi5rK5IjoxLCLkuYUiOjEsIuWNtSI6MCwi6L68IjowLCLluo8iOjEsIuW/lyI6MSwi6L+OIjoxLCLmgakiOjEsIuaOoSI6MSwi5qGcIjowLCLmsLgiOjEsIua2siI6MSwi55y8IjoxLCLnpZYiOjEsIue4viI6MSwi6IiIIjoxLCLooZsiOjEsIuikhyI6MSwi6ZuRIjoxLCLphbgiOjEsIuizmyI6MSwi6YqtIjoxLCLpo7wiOjAsIuWCtyI6MSwi5YWaIjoxLCLljrMiOjEsIuaNqCI6MCwi5a+GIjoxLCLmsZoiOjEsIuaaliI6MSwi5qyyIjoxLCLmnLoiOjAsIuenmCI6MSwi6KizIjoxLCLmn5MiOjEsIueIqiI6MCwi5oudIjoxLCLlpbQiOjEsIuixhiI6MSwi6KqkIjoxLCLoh5MiOjEsIuiytCI6MSwi6ZmNIjoxLCLkuLwiOjEsIuWQkCI6MCwi6Zq3IjoxLCLoiosiOjAsIue4riI6MSwi57SUIjoxLCLnuKYiOjAsIueyiyI6MSwi56OBIjoxLCLntIUiOjEsIuWwhCI6MSwi5bmVIjoxLCLolqYiOjEsIuaPriI6MSwi5o6oIjoxLCLmsr8iOjEsIua6kCI6MSwi5YukIjoxLCLmrZMiOjEsIuaJvyI6MSwi5p6dIjoxLCLmkI0iOjEsIuWIuyI6MSwi6IWQIjoxLCLogZYiOjF9Owp2YXIga2FuamlZb21pUEFSQURJU0UgPSB7IuaPoSI6MSwi57SbIjoxLCLns74iOjEsIuaeoiI6MSwi6Lu4IjoxLCLlhYsiOjEsIuWPjCI6MSwi5YiwIjoxLCLlk7IiOjEsIuWWqiI6MSwi5aCFIjowLCLmi6wiOjEsIuW6iiI6MSwi5bynIjoxLCLmjJEiOjEsIuaOmCI6MSwi5o+6IjoxLCLmj5oiOjEsIuaWjiI6MSwi5p6QIjoxLCLmmqsiOjEsIuaziiI6MSwi5p+EIjowLCLmvZ8iOjAsIua7kSI6MSwi56+EIjoxLCLnhKYiOjEsIue2sSI6MCwi57ayIjoxLCLogp0iOjEsIuiKnSI6MCwi6I2SIjowLCLooosiOjAsIuehrCI6MSwi5puHIjowLCLmvoQiOjEsIuefmyI6MSwi6IKMIjowLCLoiJ8iOjAsIueLqSI6MCwi5Ye2IjoxLCLpkJgiOjEsIuWhiiI6MCwi6aCDIjowLCLohJoiOjEsIumtgiI6MSwi5LqVIjoxLCLkuZ8iOjAsIuWRqiI6MCwi5ayiIjoxLCLmmqYiOjEsIuecuiI6MSwi6LOtIjowLCLoo7giOjEsIueWsiI6MSwi5Y2TIjoxLCLlob4iOjEsIuiPjCI6MSwi56OoIjowLCLpmbAiOjEsIua5vyI6MSwi6ZyKIjoxLCLlq4EiOjAsIueovCI6MSwi5rqdIjoxLCLni4IiOjEsIua7nSI6MCwi57+UIjowLCLloqgiOjAsIumzqSI6MCwi56mPIjoxLCLpiI0iOjEsIumtlCI6MSwi5a+uIjoxLCLmo58iOjEsIuebhiI6MSwi5ZC+IjowLCLmlqwiOjEsIuWvpyI6MSwi5qSFIjoxLCLmrbMiOjEsIua2vCI6MSwi54y/IjowLCLnnrMiOjEsIumNtSI6MCwi6Zu2IjoxLCLnooEiOjEsIuW5vSI6MSwi56efIjoxLCLms6EiOjEsIueZliI6MCwi6Y2bIjoxLCLpjKwiOjEsIuepgiI6MCwi5bidIjoxLCLoj4oiOjEsIueerCI6MSwi6KqHIjoxLCLluoQiOjEsIumYuyI6MSwi5L+1IjoxLCLpu5kiOjEsIue2vyI6MSwi5p62IjoxLCLlrZQiOjEsIuWUhyI6MCwi56CVIjoxLCLnspgiOjEsIueypyI6MSwi5qy6IjoxLCLoqZAiOjEsIumcpyI6MCwi5p+zIjoxLCLkvIoiOjEsIuS9kCI6MSwi556tIjoxLCLlsLoiOjEsIuWTgCI6MSwi5aGAIjoxLCLlpoIiOjEsIuWinCI6MSwi5amGIjoxLCLltJYiOjEsIuW4vSI6MSwi5bmjIjoxLCLmgagiOjEsIuaGjiI6MSwi5oapIjoxLCLmiYciOjEsIuaJiSI6MSwi5o6MIjoxLCLmjL8iOjEsIua7tCI6MSwi54KKIjoxLCLnlbMiOjEsIueIvSI6MCwi5664IjowLCLoiq8iOjEsIuiDtCI6MSwi6Jm5IjowLCLlt74iOjEsIumcnCI6MCwi6JqKIjowLCLpqI4iOjEsIuW4syI6MSwi6JuHIjowLCLovrEiOjEsIuiyvCI6MCwi6YmiIjoxLCLpl4ciOjAsIumamSI6MCwi6aOiIjoxLCLppJMiOjEsIueVnCI6MSwi6L+FIjoxLCLok4QiOjEsIuWwvSI6MSwi5b2pIjoxLCLmurYiOjEsIuaGtiI6MSwi6ICQIjoxLCLouIoiOjAsIuizoiI6MSwi6LydIjoxLCLnga8iOjEsIuiEhSI6MSwi6bq7IjoxLCLlkrIiOjAsIuaClCI6MSwi5Z+5IjoxLCLohIciOjAsIumBgiI6MSwi5aGXIjoxLCLnj60iOjEsIuaWnCI6MSwi5q60IjoxLCLnm74iOjEsIuepqyI6MSwi6ba0IjowLCLmt6EiOjEsIue0qyI6MSwi6aeSIjowLCLmir0iOjEsIuiqkyI6MSwi5oKfIjoxLCLmi5MiOjEsIuaLmCI6MSwi56SOIjoxLCLliIgiOjAsIuWJmyI6MSwi5ZSvIjoxLCLlsLwiOjEsIuWjhyI6MSwi5qaCIjoxLCLmtbgiOjEsIueFriI6MCwi6KaGIjoxLCLorIAiOjEsIumalCI6MSwi6Zm2IjoxLCLkv5ciOjEsIuW+gSI6MSwi6ZmbIjoxLCLmoZEiOjAsIua9pCI6MSwi54+gIjoxLCLoobAiOjEsIuWKoyI6MSwi5aWoIjoxLCLli5giOjEsIuWmgyI6MSwi6YKqIjoxLCLmkKwiOjEsIuWisyI6MSwi5b2wIjoxLCLpp4QiOjEsIuW7tyI6MSwi6KiCIjoxLCLlo64iOjEsIua8giI6MSwi6bCQIjowLCLon7kiOjAsIuewvyI6MSwi5pm2IjoxLCLou4wiOjEsIua2ryI6MSwi5benIjoxLCLls7AiOjEsIuWUkCI6MSwi6ayxIjoxLCLmvKsiOjEsIuirriI6MSwi6YqYIjoxLCLloLAiOjAsIuWgpCI6MSwi57+7IjoxLCLlkI4iOjEsIuWlriI6MSwi5LuwIjoxLCLkuq0iOjEsIuS8ryI6MSwi5YG2IjoxLCLmt4AiOjAsIuaKiiI6MSwi5rSeIjoxLCLnlqsiOjEsIuijgiI6MSwi57GNIjoxLCLmn5QiOjEsIuayiCI6MSwi5rK8IjowLCLoqrAiOjAsIuilsiI6MSwi6LKiIjoxLCLotqMiOjEsIui3nSI6MSwi5pyXIjoxLCLljbMiOjEsIuaXqCI6MSwi5aiBIjoxLCLnrZIiOjEsIuePjSI6MSwi6ZyyIjoxLCLliLciOjEsIueJpyI6MSwi5r2uIjoxLCLlnqMiOjAsIuWwgSI6MSwi5bKzIjoxLCLmhbAiOjEsIuaHhyI6MSwi5oeyIjoxLCLmkakiOjEsIuaTpiI6MSwi5paJIjoxLCLmkrIiOjEsIua7hSI6MSwi5rOwIjoxLCLngokiOjEsIua7iyI6MSwi55C0IjowLCLoh7MiOjEsIuWEgCI6MSwi6JmOIjowLCLpgZwiOjEsIuS8uiI6MCwi5b65IjoxLCLngKwiOjAsIuaOqiI6MSwi5pKkIjoxLCLmi6AiOjEsIuaouSI6MSwi5qOEIjoxLCLom40iOjAsIuicgiI6MCwi6YWOIjoxLCLonJwiOjEsIuWinyI6MSwi5r2cIjoxLCLoiaYiOjEsIuaLsyI6MSwi54KtIjoxLCLnlZEiOjAsIuS7gSI6MSwi5YyFIjoxLCLooaMiOjEsIumJsSI6MSwi6KqgIjoxLCLpg7ciOjEsIuS+tSI6MSwi5YG9IjoxLCLpm7ciOjEsIui+myI6MSwi57KSIjoxLCLkuJgiOjEsIuWoryI6MSwi5paXIjoxLCLorI4iOjAsIuacsSI6MSwi5aGUIjoxLCLpq6oiOjAsIuegsiI6MSwi5a+4IjoxLCLnq5wiOjEsIue4gSI6MSwi57+8IjoxLCLlkIkiOjEsIuWIgyI6MCwi5b+NIjoxLCLmoYMiOjAsIuS+jSI6MCwi5L+6IjowLCLlj7EiOjAsIuaiqCI6MCwi5Yy5IjowLCLph6MiOjAsIuWPqyI6MSwi56ygIjowLCLltZAiOjAsIue8tiI6MSwi5raZIjoxLCLmo5oiOjAsIuWnqyI6MCwi6Iq9IjowfTsKdmFyIGthbmppWW9taVJFQUxJVFkgPSB7Iui7kiI6MSwi5aqbIjowLCLnjoQiOjEsIuWBiSI6MSwi6aCCIjoxLCLlj6wiOjEsIuaeryI6MSwi5oyfIjowLCLmsrgiOjEsIua/ryI6MSwi54elIjoxLCLnk7YiOjEsIuiCryI6MSwi6ICVIjoxLCLohIIiOjEsIuiGmiI6MSwi6LufIjoxLCLpg4oiOjEsIumahSI6MCwi6Zq7IjoxLCLpgrgiOjEsIua4piI6MSwi6YOhIjoxLCLph4giOjEsIuiCqiI6MSwi5ZaaIjoxLCLosp4iOjEsIuiLlyI6MSwi5oWIIjoxLCLopZ8iOjAsIuiTriI6MSwi6IGhIjoxLCLkuq4iOjEsIua1piI6MCwi5aGaIjowLCLmvLgiOjAsIuiXuyI6MSwi5aaEIjoxLCLlgLkiOjEsIueLkCI6MCwi6YCdIjoxLCLljL8iOjEsIuWvoSI6MSwi55eiIjoxLCLol40iOjAsIuWdkSI6MSwi55WUIjoxLCLllIQiOjAsIuaLtyI6MSwi5riTIjoxLCLlu4kiOjEsIuisuSI6MSwi5rmnIjoxLCLphpwiOjEsIuWNhyI6MCwi5q6JIjoxLCLnhakiOjEsIuWKviI6MSwi5qGfIjoxLCLlqb8iOjAsIuaFlSI6MSwi5723IjoxLCLnn68iOjEsIuWbmiI6MSwi5p+QIjoxLCLms4wiOjEsIuibriI6MSwi5bq2IjoxLCLpr6giOjEsIuiNmCI6MSwi5qC9IjoxLCLlhqAiOjEsIuaLkCI6MSwi5YuyIjoxLCLphawiOjEsIuashCI6MSwi57SLIjoxLCLljbgiOjAsIumAuCI6MSwi5bCaIjoxLCLpoZUiOjEsIueymyI6MSwi5oSaIjoxLCLot7UiOjEsIuWRiCI6MSwi55aOIjoxLCLnlr4iOjEsIuisoSI6MSwi6Y6MIjowLCLphbciOjEsIuWPmSI6MSwi5LiUIjowLCLnl7QiOjEsIuWRhiI6MSwi5ZO6IjoxLCLmgqAiOjEsIuWCsiI6MSwi6IyOIjowLCLpmL8iOjEsIuadjyI6MSwi6IycIjowLCLmoJ4iOjAsIuS8jyI6MSwi6Y6uIjoxLCLlpYkiOjEsIuaGgiI6MSwi5qCDIjowLCLmnLQiOjEsIue0ryI6MSwi5oOcIjoxLCLkvbMiOjEsIuaCvCI6MSwi6KmyIjoxLCLotbQiOjEsIumrhCI6MSwi5YKNIjoxLCLnmZIiOjEsIumDrSI6MSwi5bC/IjoxLCLomZwiOjEsIuizkyI6MSwi5oa+IjoxLCLlvKUiOjAsIueylyI6MSwi5b6qIjoxLCLohIoiOjEsIuWHnSI6MSwi5piMIjoxLCLml6YiOjEsIuaEiSI6MSwi5qCTIjoxLCLmirkiOjEsIuS5iyI6MCwi6b6NIjoxLCLnkZsiOjEsIumBvCI6MSwi6YKjIjoxLCLlr4IiOjEsIuW6uCI6MSwi5ouNIjoxLCLnjLYiOjEsIuWusCI6MSwi57irIjoxLCLlkYkiOjEsIuWHoSI6MSwi5oGtIjowLCLpjK8iOjEsIuepgCI6MSwi5byKIjoxLCLpmbUiOjEsIuiItiI6MSwi5oKmIjoxLCLnqq4iOjEsIue4myI6MSwi6L2EIjoxLCLlvKYiOjEsIua0qiI6MSwi56qSIjoxLCLmkYIiOjEsIumjvSI6MSwi6Z2WIjowLCLntLMiOjEsIuWYiSI6MSwi5pC+IjoxLCLonbYiOjEsIueikSI6MSwi5bCJIjoxLCLljKAiOjEsIuWHmyI6MSwi6YGlIjowLCLmmboiOjEsIuaftCI6MCwi55GgIjoxLCLmlaIiOjEsIualkyI6MSwi5Ye5IjoxLCLlh7giOjEsIuiQjCI6MSwi54OPIjowLCLos4oiOjEsIuaXiyI6MSwi6byTIjoxLCLohbgiOjEsIuanvSI6MSwi5LyQIjoxLCLloJUiOjEsIua8rCI6MCwi5Z2qIjowLCLntLoiOjEsIue+hSI6MSwi5bOhIjoxLCLkv7giOjEsIumGuCI6MSwi5byUIjoxLCLkuZkiOjEsIuihoSI6MSwi6YGNIjoxLCLmrL4iOjEsIumWsiI6MSwi5ZadIjoxLCLohpwiOjEsIuebsiI6MSwi6YW1IjoxLCLog44iOjEsIumBriI6MSwi5ZOJIjowLCLokrwiOjEsIuWHhiI6MSwi5a+bIjoxLCLog54iOjEsIua1hCI6MSwi6ZqPIjoxLCLnqL8iOjEsIuS4uSI6MSwi5aOMIjoxLCLoiJciOjEsIumosCI6MSwi57evIjoxLCLoiYciOjEsIuaKqyI6MSwi6YymIjowLCLlibAiOjEsIue5iiI6MSwi6KutIjoxLCLmg6giOjEsIuiZkCI6MSwi5o2uIjowLCLlvpAiOjEsIuaQrSI6MSwi6JKZIjoxLCLnk5wiOjEsIumviSI6MCwi5oi0IjoxLCLnt4siOjEsIuabmSI6MCwi6IOhIjoxLCLluKUiOjEsIuWVkyI6MSwi6JG1IjowLCLpp78iOjEsIuirkiI6MSwi6I6JIjoxLCLpgYciOjEsIumZpSI6MSwi6LKrIjoxLCLopociOjEsIuiMqCI6MCwi5ZGCIjoxLCLmk4EiOjEsIuWtpCI6MSwi6Y6WIjoxLCLos6AiOjEsIuWZtCI6MSwi56WlIjoxLCLnibIiOjEsIuWUhiI6MSwi56epIjoxLCLohqgiOjEsIuiKsyI6MSwi5oGSIjoxLCLlgKsiOjEsIumZsyI6MSwi6aCIIjoxLCLlgY8iOjEsIuezpyI6MSwi5q6KIjoxLCLmhaIiOjEsIuayoSI6MSwi5oCgIjoxLCLpga0iOjEsIuaDsCI6MSwi54yfIjoxLCLkuYMiOjEsIumiryI6MSwi57a+IjoxLCLpmrwiOjAsIui8lCI6MCwi56GrIjoxLCLotaYiOjEsIueqgyI6MSwi5oWoIjoxLCLmiK8iOjEsIuaJtiI6MSwi5r+BIjoxLCLlpZQiOjEsIuiCliI6MSwi5py9IjoxLCLkuqsiOjEsIuauuyI6MSwi6JepIjoxLCLpto8iOjEsIuWqkiI6MSwi5ZixIjoxLCLmpI4iOjEsIui/rSI6MSwi57W5IjoxLCLpmaoiOjEsIuitnCI6MSwi5YmWIjoxLCLmt5EiOjEsIuW4hiI6MSwi6YWMIjoxLCLmhqQiOjEsIuaagSI6MCwi5YKRIjoxLCLpjKAiOjEsIuWHjCI6MCwi55GeIjowLCLoj4UiOjAsIueSgyI6MSwi5ryjIjoxLCLlkJ8iOjEsIuS+riI6MSwi6YuzIjoxLCLolJEiOjEsIuiDhiI6MSwi5rWqIjoxLCLnpo0iOjEsIumFqiI6MSwi5oanIjowLCLkupwiOjEsIuaFtiI6MSwi5qKTIjowLCLmsbAiOjEsIuaymSI6MSwi5b+MIjoxLCLpgbciOjEsIuaLmSI6MSwi56+kIjoxLCLls6AiOjAsIuWPlCI6MCwi6ZuMIjowLCLloKoiOjAsIuW0hyI6MSwi55SaIjoxLCLmvIYiOjEsIuWyrCI6MCwi57ShIjoxLCLnpIEiOjEsIuWxryI6MSwi5ae7IjoxLCLnnaYiOjEsIuaTrCI6MSwi6ZaRIjoxLCLmm7kiOjEsIuWNkSI6MSwi6KmgIjoxfTsKCi8qCiogVXNlZCBmb3Igc3dpdGNoaW5nIGJldHdlZW4gaGlyYSBhbmQga2F0YSAodmljZSB2ZXJzYSkKKi8KdmFyIGhpcmFUb0thdGEgPSB7IuOCgSI6ICLjg6EiLCAi44KAIjogIuODoCIsICLjgoMiOiAi44OjIiwgIuOCgiI6ICLjg6IiLCAi44KFIjogIuODpSIsICLjgoQiOiAi44OkIiwgIuOChyI6ICLjg6ciLCAi44KGIjogIuODpiIsICLjgokiOiAi44OpIiwgIuOCiCI6ICLjg6giLCAi44KLIjogIuODqyIsICLjgooiOiAi44OqIiwgIuOCjSI6ICLjg60iLCAi44KMIjogIuODrCIsICLjgo8iOiAi44OvIiwgIuOCkyI6ICLjg7MiLCAi44KSIjogIuODsiIsICLjgYIiOiAi44KiIiwgIuOBhCI6ICLjgqQiLCAi44GGIjogIuOCpiIsICLjgYgiOiAi44KoIiwgIuOBiyI6ICLjgqsiLCAi44GKIjogIuOCqiIsICLjgY0iOiAi44KtIiwgIuOBjCI6ICLjgqwiLCAi44GPIjogIuOCryIsICLjgY4iOiAi44KuIiwgIuOBkSI6ICLjgrEiLCAi44GQIjogIuOCsCIsICLjgZMiOiAi44KzIiwgIuOBkiI6ICLjgrIiLCAi44GVIjogIuOCtSIsICLjgZQiOiAi44K0IiwgIuOBlyI6ICLjgrciLCAi44GWIjogIuOCtiIsICLjgZkiOiAi44K5IiwgIuOBmCI6ICLjgrgiLCAi44GbIjogIuOCuyIsICLjgZoiOiAi44K6IiwgIuOBnSI6ICLjgr0iLCAi44GcIjogIuOCvCIsICLjgZ8iOiAi44K/IiwgIuOBniI6ICLjgr4iLCAi44GhIjogIuODgSIsICLjgaAiOiAi44OAIiwgIuOBoyI6ICLjg4MiLCAi44GiIjogIuODgiIsICLjgaUiOiAi44OFIiwgIuOBpCI6ICLjg4QiLCAi44GnIjogIuODhyIsICLjgaYiOiAi44OGIiwgIuOBqSI6ICLjg4kiLCAi44GoIjogIuODiCIsICLjgasiOiAi44OLIiwgIuOBqiI6ICLjg4oiLCAi44GtIjogIuODjSIsICLjgawiOiAi44OMIiwgIuOBryI6ICLjg48iLCAi44GuIjogIuODjiIsICLjgbEiOiAi44ORIiwgIuOBsCI6ICLjg5AiLCAi44GzIjogIuODkyIsICLjgbIiOiAi44OSIiwgIuOBtSI6ICLjg5UiLCAi44G0IjogIuODlCIsICLjgbciOiAi44OXIiwgIuOBtiI6ICLjg5YiLCAi44G5IjogIuODmSIsICLjgbgiOiAi44OYIiwgIuOBuyI6ICLjg5siLCAi44G6IjogIuODmiIsICLjgb0iOiAi44OdIiwgIuOBvCI6ICLjg5wiLCAi44G/IjogIuODnyIsICLjgb4iOiAi44OeIn07CnZhciBrYXRhVG9IaXJhID0geyLjg6EiOiAi44KBIiwgIuODoCI6ICLjgoAiLCAi44OjIjogIuOCgyIsICLjg6IiOiAi44KCIiwgIuODpSI6ICLjgoUiLCAi44OkIjogIuOChCIsICLjg6ciOiAi44KHIiwgIuODpiI6ICLjgoYiLCAi44OpIjogIuOCiSIsICLjg6giOiAi44KIIiwgIuODqyI6ICLjgosiLCAi44OqIjogIuOCiiIsICLjg60iOiAi44KNIiwgIuODrCI6ICLjgowiLCAi44OvIjogIuOCjyIsICLjg7MiOiAi44KTIiwgIuODsiI6ICLjgpIiLCAi44KiIjogIuOBgiIsICLjgqQiOiAi44GEIiwgIuOCpiI6ICLjgYYiLCAi44KoIjogIuOBiCIsICLjgqsiOiAi44GLIiwgIuOCqiI6ICLjgYoiLCAi44KtIjogIuOBjSIsICLjgqwiOiAi44GMIiwgIuOCryI6ICLjgY8iLCAi44KuIjogIuOBjiIsICLjgrEiOiAi44GRIiwgIuOCsCI6ICLjgZAiLCAi44KzIjogIuOBkyIsICLjgrIiOiAi44GSIiwgIuOCtSI6ICLjgZUiLCAi44K0IjogIuOBlCIsICLjgrciOiAi44GXIiwgIuOCtiI6ICLjgZYiLCAi44K5IjogIuOBmSIsICLjgrgiOiAi44GYIiwgIuOCuyI6ICLjgZsiLCAi44K6IjogIuOBmiIsICLjgr0iOiAi44GdIiwgIuOCvCI6ICLjgZwiLCAi44K/IjogIuOBnyIsICLjgr4iOiAi44GeIiwgIuODgSI6ICLjgaEiLCAi44OAIjogIuOBoCIsICLjg4MiOiAi44GjIiwgIuODgiI6ICLjgaIiLCAi44OFIjogIuOBpSIsICLjg4QiOiAi44GkIiwgIuODhyI6ICLjgaciLCAi44OGIjogIuOBpiIsICLjg4kiOiAi44GpIiwgIuODiCI6ICLjgagiLCAi44OLIjogIuOBqyIsICLjg4oiOiAi44GqIiwgIuODjSI6ICLjga0iLCAi44OMIjogIuOBrCIsICLjg48iOiAi44GvIiwgIuODjiI6ICLjga4iLCAi44ORIjogIuOBsSIsICLjg5AiOiAi44GwIiwgIuODkyI6ICLjgbMiLCAi44OSIjogIuOBsiIsICLjg5UiOiAi44G1IiwgIuODlCI6ICLjgbQiLCAi44OXIjogIuOBtyIsICLjg5YiOiAi44G2IiwgIuODmSI6ICLjgbkiLCAi44OYIjogIuOBuCIsICLjg5siOiAi44G7IiwgIuODmiI6ICLjgboiLCAi44OdIjogIuOBvSIsICLjg5wiOiAi44G8IiwgIuODnyI6ICLjgb8iLCAi44OeIjogIuOBviJ9OwoKaWYgKC9kYXNoYm9hcmQvLnRlc3QoZG9jdW1lbnQuVVJMKSB8fCBkb2N1bWVudC5VUkwgPT0gImh0dHA6Ly93d3cud2FuaWthbmkuY29tLyIgfHwgZG9jdW1lbnQuVVJMID09ICJodHRwczovL3d3dy53YW5pa2FuaS5jb20vIikgLy8gSG9tZXBhZ2UKewogICAgdmFyIHJlcGxhY2VQb3B1cCA9IGZ1bmN0aW9uKCkKICAgIHsKICAgICAgICBpZiAoIGlzT255b21pQWxsKCQodGhpcykudGV4dCgpKSA9PSAxKSAkKHRoaXMpLmF0dHIoKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyksIGNvbnZlcnRUb0thdGEoJCh0aGlzKS5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJykpICk7CiAgICB9OwogICAgJCgnLmxhdHRpY2Utc2luZ2xlLWNoYXJhY3RlciBhW2RhdGEtb3JpZ2luYWwtdGl0bGVdJykuZWFjaChyZXBsYWNlUG9wdXApOwoKICAgIC8vIHRoaXMgaXMgZm9yIHNjcmlwdHMgd2hvIG1vZGlmeSB0aGUgaG9tZXNjcmVlbiBhZnRlciB0aGUgcGFnZSBmaW5pc2hlZCBsb2FkaW5nCiAgICAkKCcua2FuamktcHJvZ3Jlc3MgLmxhdHRpY2Utc2luZ2xlLWNoYXJhY3RlciAuc21hbGwtY2FwcyA+IHNwYW4nKS5iaW5kKCJET01TdWJ0cmVlTW9kaWZpZWQiLGZ1bmN0aW9uKCl7CiAgICAgICAgJCgnLmthbmppLXByb2dyZXNzIC5sYXR0aWNlLXNpbmdsZS1jaGFyYWN0ZXIgYVtkYXRhLW9yaWdpbmFsLXRpdGxlXScpLmVhY2gocmVwbGFjZVBvcHVwKTsKICAgIH0pOwoKfQplbHNlIGlmICgvXC9sYXR0aWNlXC9rYW5qaS8udGVzdChkb2N1bWVudC5VUkwpKSAvLyBMYXR0aWNlCnsKICAgIHZhciByZXBsYWNlUG9wdXAgPSBmdW5jdGlvbigpCiAgICB7CiAgICAgICAgaWYgKCBpc09ueW9taUFsbCgkKHRoaXMpLnRleHQoKSkgPT0gMSkgJCh0aGlzKS5hdHRyKCgnZGF0YS1vcmlnaW5hbC10aXRsZScpLCBjb252ZXJ0VG9LYXRhKCQodGhpcykuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpKSApOwogICAgfTsKICAgICQoJy5sYXR0aWNlLXNpbmdsZS1jaGFyYWN0ZXIgYVtkYXRhLW9yaWdpbmFsLXRpdGxlXScpLmVhY2gocmVwbGFjZVBvcHVwKTsKCn0KZWxzZSBpZiAoL1wva2FuamlcLy8udGVzdChkb2N1bWVudC5VUkwpKSAvLyBLYW5qaSBkZXRhaWwgcGFnZQp7CiAgICB2YXIgcmVwbGFjZVJlYWRpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoJCh0aGlzKS5jaGlsZHJlbignaDMnKS50ZXh0KCkgPT0gIk9u4oCZeW9taSIpCiAgICAgICAgewogICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdwJykudGV4dChjb252ZXJ0VG9LYXRhKCQodGhpcykuY2hpbGRyZW4oJ3AnKS50ZXh0KCkpKTsKICAgICAgICB9CiAgICB9OwogICAgJCgnLnNwYW40JykuZWFjaChyZXBsYWNlUmVhZGluZyk7CgogICAgLy8tLS0tLS0tLS0gVmlzdWFsbHkgU2ltaWxhciBLYW5qaSAtLS0tLS0tLS0vLwogICAgdmFyIHJlcGxhY2VTaW1pbGFyID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGlzT255b21pQWxsKCQodGhpcykuZmluZCgnLmNoYXJhY3RlcicpLnRleHQoKSkgPT0gMSkgJCh0aGlzKS5maW5kKCdsaScpLmVxKDApLnRleHQoY29udmVydFRvS2F0YSgkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMCkudGV4dCgpKSk7CiAgICB9OwogICAgJCgnLnNpbmdsZS1jaGFyYWN0ZXItZ3JpZCcpLmZpbmQoJ2EnKS5lYWNoKHJlcGxhY2VTaW1pbGFyKTsKfQplbHNlIGlmICgvXC9rYW5qaVw/ZGlmZmljdWx0Ly50ZXN0KGRvY3VtZW50LlVSTCkgfHwgZG9jdW1lbnQuVVJMID09ICJodHRwOi8vd3d3LndhbmlrYW5pLmNvbS9rYW5qaSIpIC8vIEJpZyBrYW5qaSBwYWdlIGJhc2VkIG9uIGRpZmZpY3VsdHkKewogICAgdmFyIG4gPSBkb2N1bWVudC5VUkwubGFzdEluZGV4T2YoJz0nKTsKICAgIHZhciBkaWZmaWN1bHR5ID0gZG9jdW1lbnQuVVJMLnN1YnN0cmluZyhuICsgMSk7CgogICAgdmFyIHJlcGxhY2VMZXZlbFBvcnRpb24gPSBmdW5jdGlvbigpIHsKICAgICAgICAkKHRoaXMpLmZpbmQoJy5jaGFyYWN0ZXItaXRlbScpLmVhY2gocmVwbGFjZVJlYWRpbmcpOwogICAgfTsKCiAgICB2YXIgcmVwbGFjZVJlYWRpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoaXNPbnlvbWkoJCh0aGlzKS5maW5kKCcuY2hhcmFjdGVyJykudGV4dCgpLnJlcGxhY2UoL1xzL2csJycpLCBkaWZmaWN1bHR5KSkgJCh0aGlzKS5maW5kKCdsaScpLmVxKDApLnRleHQoY29udmVydFRvS2F0YSgkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMCkudGV4dCgpKSk7CiAgICB9OwogICAgJCgnLnNpbmdsZS1jaGFyYWN0ZXItZ3JpZCcpLmVhY2gocmVwbGFjZUxldmVsUG9ydGlvbik7Cn0KZWxzZSBpZiAoL1wvcmFkaWNhbHNcLy8udGVzdChkb2N1bWVudC5VUkwpIHx8wqAvXC92b2NhYnVsYXJ5XC8vLnRlc3QoZG9jdW1lbnQuVVJMKSkgLy8gUmFkaWNhbCBhbmQgVm9jYWJ1bGFyeSBwYWdlCnsKICAgIC8vLS0tLS0tLS0tIEZvdW5kIEluIGFuZCBVdGlsaXplZCBLYW5qaSAtLS0tLS0tLS0vLwogICAgdmFyIHJlcGxhY2VSZWFkaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGlzT255b21pQWxsKCQodGhpcykuZmluZCgnLmNoYXJhY3RlcicpLnRleHQoKSkgPT0gMSkgJCh0aGlzKS5maW5kKCdsaScpLmVxKDApLnRleHQoY29udmVydFRvS2F0YSgkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMCkudGV4dCgpKSk7CiAgICB9OwogICAgJCgnLnNpbmdsZS1jaGFyYWN0ZXItZ3JpZCcpLmZpbmQoJ2EnKS5lYWNoKHJlcGxhY2VSZWFkaW5nKTsKfQplbHNlIGlmICgvXC9sZXZlbFwvLy50ZXN0KGRvY3VtZW50LlVSTCkpIC8vIExldmVsIHBhZ2UKewogICAgdmFyIG4gPSBkb2N1bWVudC5VUkwubGFzdEluZGV4T2YoJy8nKTsKICAgIHZhciBsZXZlbCA9IGRvY3VtZW50LlVSTC5zdWJzdHJpbmcobiArIDEpOwoKICAgIHZhciByZXBsYWNlUmVhZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChpc09ueW9taSgkKHRoaXMpLmNoaWxkcmVuKCcuY2hhcmFjdGVyJykudGV4dCgpLnJlcGxhY2UoL1xzL2csJycpLCBsZXZlbCkpCiAgICAgICAgewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMCkudGV4dChjb252ZXJ0VG9LYXRhKCQodGhpcykuZmluZCgnbGknKS5lcSgwKS50ZXh0KCkpKTsKICAgICAgICB9CiAgICB9OwogICAgJCgnLnNpbmdsZS1jaGFyYWN0ZXItZ3JpZCcpLmVxKDEpLmZpbmQoJ2EnKS5lYWNoKHJlcGxhY2VSZWFkaW5nKTsKfQplbHNlIGlmICgvcmV2aWV3XC9zZXNzaW9uLy50ZXN0KGRvY3VtZW50LlVSTCkpIC8vIFJldmlldyB0ZXN0IHBhZ2UKewogICAgYW5zd2VyQ2hlY2tlci5vbGRJc0FzY2lpUHJlc2VudEtNID0gYW5zd2VyQ2hlY2tlci5pc0FzY2lpUHJlc2VudDsKICAgIGFuc3dlckNoZWNrZXIuaXNBc2NpaVByZXNlbnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgLy8gdGhpcyBpcyBmb3IgdHJhaWxpbmcgTiB0byDjg7MKICAgICAgICBpZihlW2UubGVuZ3RoLTFdID09PSAnTicpIHsKICAgICAgICAgICAgZSA9IGUuc3Vic3RyKDAsIGUubGVuZ3RoLTEpICsgJ+ODsycgKyBlLnN1YnN0cihlLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhbnN3ZXJDaGVja2VyLm9sZElzQXNjaWlQcmVzZW50S00oZSk7CiAgICB9OwoKICAgIGFuc3dlckNoZWNrZXIub2xkRXZhbHVhdGVLTSA9IGFuc3dlckNoZWNrZXIuZXZhbHVhdGU7CiAgICBhbnN3ZXJDaGVja2VyLmV2YWx1YXRlID0gZnVuY3Rpb24oZSx0KSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygkLmpTdG9yYWdlLmdldCgnY3VycmVudEl0ZW0nKSk7CiAgICAgICAgLy8gdGhpcyBpcyBmb3IgdHJhaWxpbmcgTiB0byDjg7MKICAgICAgICBpZihlID09PSAicmVhZGluZyIgJiYgdFt0Lmxlbmd0aC0xXSA9PT0gJ04nKSB7CiAgICAgICAgICAgIHQgPSB0LnN1YnN0cigwLCB0Lmxlbmd0aC0xKSArICfjg7MnICsgdC5zdWJzdHIodC5sZW5ndGgpOwogICAgICAgIH0KICAgICAgICBpZihpc09ueW9taVJldmlldygpKSB7CiAgICAgICAgICAgIC8vIHRoaXMgaXMgZm9yIHRoZSAiV2FuaUthbmkgaXMgbG9va2luZyBmb3IgdGhlIG9ueW9taSByZWFkaW5nIiBmdW5jdGlvbgogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICQualN0b3JhZ2UuZ2V0KCdjdXJyZW50SXRlbScpLmt1bi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5nZXQoJ2N1cnJlbnRJdGVtJykua3VuW2ldID0gY29udmVydFRvS2F0YSgkLmpTdG9yYWdlLmdldCgnY3VycmVudEl0ZW0nKS5rdW5baV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJC5qU3RvcmFnZS5nZXQoJ2N1cnJlbnRJdGVtJykub24ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICQualN0b3JhZ2UuZ2V0KCdjdXJyZW50SXRlbScpLm9uW2ldID0gY29udmVydFRvS2F0YSgkLmpTdG9yYWdlLmdldCgnY3VycmVudEl0ZW0nKS5vbltpXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy9jb25zb2xlLmxvZygkLmpTdG9yYWdlLmdldCgnY3VycmVudEl0ZW0nKSk7CiAgICAgICAgcmV0dXJuIGFuc3dlckNoZWNrZXIub2xkRXZhbHVhdGVLTShlLHQpOwogICAgfTsKCiAgICAkKCcjdXNlci1yZXNwb25zZScpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmKGlzT255b21pUmV2aWV3KCkpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGNvbnZlcnRUb0thdGEoJCh0aGlzKS52YWwoKS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICB9CiAgICB9KTsKCiAgICB2YXIgb2JzZXJ2ZU1lID0gJCgnI2l0ZW0taW5mbyAucHVyZS11LTEtNCcpWzBdOwogICAgb2JzZXJ2ZURPTSgpKCBvYnNlcnZlTWUgLGZ1bmN0aW9uKCkgewogICAgICAgIGlmKGlzT255b21pUmV2aWV3KCkpIHsKICAgICAgICAgICAgJCgnI2l0ZW0taW5mby1yZWFkaW5nID4gc3BhbicpLnRleHQoY29udmVydFRvS2F0YSgkKCcjaXRlbS1pbmZvLXJlYWRpbmcgPiBzcGFuJykudGV4dCgpKSk7CiAgICAgICAgfQogICAgfSk7CgogICAgLy8gY2hhbmdlIGxhc3QgMTAgaXRlbXMKICAgIHZhciBsYXN0MTBDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYoaXNPbnlvbWlBbGwoJCh0aGlzKS5maW5kKCdsaScpLmVxKDApLnRleHQoKSkpewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMSkudGV4dChjb252ZXJ0VG9LYXRhKCQodGhpcykuZmluZCgnbGknKS5lcSgxKS50ZXh0KCkpKTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIG9ic2VydmVNZSA9ICQoJyNsYXN0LWl0ZW1zLWxpc3QnKVswXTsKICAgIG9ic2VydmVET00oKSggb2JzZXJ2ZU1lICxmdW5jdGlvbigpIHsKICAgICAgICAkKCcjbGFzdC1pdGVtcy1saXN0IC5rYW5qaScpLmVhY2gobGFzdDEwQ2hhbmdlKTsKICAgIH0pOwp9CmVsc2UgaWYgKC9yZXZpZXcvLnRlc3QoZG9jdW1lbnQuVVJMKSkgLy8gUmV2aWV3IGluZm8gcGFnZSBhdCB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGEgcmV2aWV3CnsKICAgIHZhciBvYnNlcnZlTWUgPSAkKCcjcmV2aWV3cy1zdW1tYXJ5JylbMF07CiAgICBvYnNlcnZlRE9NKCkoIG9ic2VydmVNZSAsZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGUgPSAkKCcua2FuamkgLmhvdmVyJyk7CiAgICAgICAgaWYoZS5sZW5ndGggIT09IDAgJiYgaXNPbnlvbWlBbGwoZS5wcmV2KCdhJykuZXEoMCkudGV4dCgpKSkgewogICAgICAgICAgICB2YXIgb255b21pTm9kZSA9IGUuZmluZCgndWwnKS5maW5kKCdsaScpLmVxKDEpOwogICAgICAgICAgICBvbnlvbWlOb2RlLnRleHQoY29udmVydFRvS2F0YShvbnlvbWlOb2RlLnRleHQoKSkpOwogICAgICAgIH0KICAgIH0pOwp9CmVsc2UgaWYgKC9sZXNzb25cL3Nlc3Npb24vLnRlc3QoZG9jdW1lbnQuVVJMKSkgLy8gTGVzc29uIGFuZCBsZXNzb24gdGVzdCBwYWdlCnsKICAgIC8vLS0tLS0tLS0tIExlc3NvbiBQYXJ0IC0tLS0tLS0tLS8vCiAgICB2YXIgd2hlbkxlc3NvblNsaWRlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBLYW5qaSBpbmZvCiAgICAgICAgdmFyIHR5cGUgPSAkKCIjc3VwcGxlbWVudC1rYW4tcmVhZGluZy10eXBlIikudGV4dCgpOwogICAgICAgIGlmKHR5cGUgPT09ICJvbid5b21pIikgewogICAgICAgICAgICAkKCcjc3VwcGxlbWVudC1rYW4tcmVhZGluZyBzcGFuJykuZXEoMSkudGV4dChjb252ZXJ0VG9LYXRhKCQoJyNzdXBwbGVtZW50LWthbi1yZWFkaW5nIHNwYW4nKS5lcSgxKS50ZXh0KCkpKTsKICAgICAgICB9CiAgICAgICAgLy8gVm9jYWJsZSBicmVha2Rvd24gaW5mbwogICAgICAgICQoIiNzdXBwbGVtZW50LXZvYy1icmVha2Rvd24iKS5maW5kKCcua2FuamknKS5lYWNoKHJlcGxhY2VCcmVha2Rvd24pOwogICAgfTsKICAgIHZhciByZXBsYWNlQnJlYWtkb3duID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmKGlzT255b21pQWxsKCQodGhpcykudGV4dCgpKSkgewogICAgICAgICAgICAkKHRoaXMpLmF0dHIoInRpdGxlIiwgY29udmVydFRvS2F0YSgkKHRoaXMpLmF0dHIoJ3RpdGxlJykpKTsKICAgICAgICB9CiAgICB9OwogICAgJCgnI2JhdGNoLWl0ZW1zJykuY2xpY2sod2hlbkxlc3NvblNsaWRlcyk7CgogICAgLy8tLS0tLS0tLS0gVGVzdCBQYXJ0IC0tLS0tLS0tLS8vCiAgICBhbnN3ZXJDaGVja2VyLm9sZElzQXNjaWlQcmVzZW50S00gPSBhbnN3ZXJDaGVja2VyLmlzQXNjaWlQcmVzZW50OwogICAgYW5zd2VyQ2hlY2tlci5pc0FzY2lpUHJlc2VudCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAvLyB0aGlzIGlzIGZvciB0cmFpbGluZyBOIHRvIOODswogICAgICAgIGlmKGVbZS5sZW5ndGgtMV0gPT09ICdOJykgewogICAgICAgICAgICBlID0gZS5zdWJzdHIoMCwgZS5sZW5ndGgtMSkgKyAn44OzJyArIGUuc3Vic3RyKGUubGVuZ3RoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFuc3dlckNoZWNrZXIub2xkSXNBc2NpaVByZXNlbnRLTShlKTsKICAgIH07CgogICAgYW5zd2VyQ2hlY2tlci5vbGRFdmFsdWF0ZUtNID0gYW5zd2VyQ2hlY2tlci5ldmFsdWF0ZTsKICAgIGFuc3dlckNoZWNrZXIuZXZhbHVhdGUgPSBmdW5jdGlvbihlLHQpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKCQualN0b3JhZ2UuZ2V0KCdsL2N1cnJlbnRRdWl6SXRlbScpKTsKICAgICAgICAvLyB0aGlzIGlzIGZvciB0cmFpbGluZyBOIHRvIOODswogICAgICAgIGlmKGUgPT09ICJyZWFkaW5nIiAmJiB0W3QubGVuZ3RoLTFdID09PSAnTicpIHsKICAgICAgICAgICAgdCA9IHQuc3Vic3RyKDAsIHQubGVuZ3RoLTEpICsgJ+ODsycgKyB0LnN1YnN0cih0Lmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIGlmKGlzT255b21pTGVzc29uKCkpIHsKICAgICAgICAgICAgLy8gdGhpcyBpcyBmb3IgdGhlICJXYW5pS2FuaSBpcyBsb29raW5nIGZvciB0aGUgb255b21pIHJlYWRpbmciIGZ1bmN0aW9uCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJC5qU3RvcmFnZS5nZXQoJ2wvY3VycmVudFF1aXpJdGVtJykua3VuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAkLmpTdG9yYWdlLmdldCgnbC9jdXJyZW50UXVpekl0ZW0nKS5rdW5baV0gPSBjb252ZXJ0VG9LYXRhKCQualN0b3JhZ2UuZ2V0KCdsL2N1cnJlbnRRdWl6SXRlbScpLmt1bltpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkLmpTdG9yYWdlLmdldCgnbC9jdXJyZW50UXVpekl0ZW0nKS5vbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5nZXQoJ2wvY3VycmVudFF1aXpJdGVtJykub25baV0gPSBjb252ZXJ0VG9LYXRhKCQualN0b3JhZ2UuZ2V0KCdsL2N1cnJlbnRRdWl6SXRlbScpLm9uW2ldKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYW5zd2VyQ2hlY2tlci5vbGRFdmFsdWF0ZUtNKGUsdCk7CiAgICB9OwoKICAgICQoJyN1c2VyLXJlc3BvbnNlJykub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoaXNPbnlvbWlMZXNzb24oKSkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gY29udmVydFRvS2F0YSgkKHRoaXMpLnZhbCgpLnRvVXBwZXJDYXNlKCkpOwogICAgICAgIH0KICAgIH0pOwoKICAgIHZhciBvYnNlcnZlTWUgPSAkKCcjaXRlbS1pbmZvIC5wdXJlLXUtMS00JylbMF07CiAgICBvYnNlcnZlRE9NKCkoIG9ic2VydmVNZSAsZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoaXNPbnlvbWlMZXNzb24oKSkgewogICAgICAgICAgICAkKCcjaXRlbS1pbmZvLXJlYWRpbmcgc3BhbicpLnRleHQoY29udmVydFRvS2F0YSgkKCcjaXRlbS1pbmZvLXJlYWRpbmcgc3BhbicpLnRleHQoKSkpOwogICAgICAgIH0KICAgIH0pOwoKfWVsc2UgaWYgKC9sZXNzb24vLnRlc3QoZG9jdW1lbnQuVVJMKSkgLy8gTGVzc29uIGluZm8gcGFnZSBhdCB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGEgcnVuCnsKICAgIHZhciBvYnNlcnZlTWUgPSAkKCcja2FuamknKVswXTsKICAgIG9ic2VydmVET00oKSggb2JzZXJ2ZU1lICxmdW5jdGlvbigpIHsKICAgICAgICB2YXIgZSA9ICQoJy5rYW5qaSAuaG92ZXInKTsKICAgICAgICBpZihlLmxlbmd0aCAhPT0gMCAmJiBpc09ueW9taUFsbChlLnByZXYoJ2EnKS5lcSgwKS50ZXh0KCkpKSB7CiAgICAgICAgICAgIHZhciBvbnlvbWlOb2RlID0gZS5maW5kKCd1bCcpLmZpbmQoJ2xpJykuZXEoMSk7CiAgICAgICAgICAgIG9ueW9taU5vZGUudGV4dChjb252ZXJ0VG9LYXRhKG9ueW9taU5vZGUudGV4dCgpKSk7CiAgICAgICAgfQogICAgfSk7Cn0KCi8vIFNlYXJjaCByZXN1bHQKaWYoIC9kYXNoYm9hcmQvLnRlc3QoZG9jdW1lbnQuVVJMKSB8fCBkb2N1bWVudC5VUkwgPT0gImh0dHA6Ly93d3cud2FuaWthbmkuY29tLyIgfHwgZG9jdW1lbnQuVVJMID09ICJodHRwczovL3d3dy53YW5pa2FuaS5jb20vIiB8fCAvXC9sZXZlbC8udGVzdChkb2N1bWVudC5VUkwpIHx8CiAgIC9cL2xhdHRpY2UvLnRlc3QoZG9jdW1lbnQuVVJMKSB8fCAvXC9yYWRpY2Fscy8udGVzdChkb2N1bWVudC5VUkwpIHx8IC9cL2thbmppLy50ZXN0KGRvY3VtZW50LlVSTCkgfHwgL1wvdm9jYWJ1bGFyeS8udGVzdChkb2N1bWVudC5VUkwpIHx8CiAgIC9cL2NvbW11bml0eS8udGVzdChkb2N1bWVudC5VUkwpIHx8IC9cL2NoYXQvLnRlc3QoZG9jdW1lbnQuVVJMKSB8fCAvXC9hY2NvdW50Ly50ZXN0KGRvY3VtZW50LlVSTCkgKSB7CiAgICB2YXIgc2VhcmNoQ2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoaXNPbnlvbWlBbGwoJCh0aGlzKS5maW5kKCdzcGFuJykudGV4dCgpKSkgewogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuZXEoMCkudGV4dChjb252ZXJ0VG9LYXRhKCQodGhpcykuZmluZCgnbGknKS5lcSgwKS50ZXh0KCkpKTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIG9ic2VydmVNZSA9ICQoJy5zZWFyY2gtcmVzdWx0cycpWzBdOwogICAgb2JzZXJ2ZURPTSgpKCBvYnNlcnZlTWUgLGZ1bmN0aW9uKCkgewogICAgICAgICQoJy5zZWFyY2gtcmVzdWx0cyAja2FuamktJykuZWFjaChzZWFyY2hDaGFuZ2UpOwogICAgfSk7Cn0KCgoKLy8tLSBIZWxwZXIgZnVuY3Rpb25zIGZvciB0cmFuc2Zvcm1pbmcga2F0YSA8LT4gaGlyYSAtLS8vCmZ1bmN0aW9uIGlzT255b21pUmV2aWV3KCkgewoKICAgIHZhciBvYmpDdXJJdGVtID0gJC5qU3RvcmFnZS5nZXQoImN1cnJlbnRJdGVtIik7CiAgICB2YXIgc3RyUXVlc3Rpb25UeXBlID0gJC5qU3RvcmFnZS5nZXQoInF1ZXN0aW9uVHlwZSIpOwoKICAgIGlmICgia2FuIiBpbiBvYmpDdXJJdGVtKSB7CiAgICAgICAgLy8gS2FuamkKICAgICAgICBpZiAoc3RyUXVlc3Rpb25UeXBlID09PSAicmVhZGluZyIpIHsKICAgICAgICAgICAgaWYob2JqQ3VySXRlbS5lbXBoID09PSAib255b21pIikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGlzT255b21pTGVzc29uKCkgewoKICAgIHZhciBvYmpDdXJJdGVtID0gJC5qU3RvcmFnZS5nZXQoImwvY3VycmVudFF1aXpJdGVtIik7CiAgICB2YXIgc3RyUXVlc3Rpb25UeXBlID0gJC5qU3RvcmFnZS5nZXQoImwvcXVlc3Rpb25UeXBlIik7CgogICAgaWYgKCJrYW4iIGluIG9iakN1ckl0ZW0pCiAgICB7CiAgICAgICAgLy8gS2FuamkKICAgICAgICBpZiAoc3RyUXVlc3Rpb25UeXBlID09PSAicmVhZGluZyIpIHsKICAgICAgICAgICAgaWYob2JqQ3VySXRlbS5lbXBoID09PSAib255b21pIil7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gaXNPbnlvbWkoa2FuamksIGxldmVsKQp7CiAgICBzd2l0Y2gobGV2ZWwudG9VcHBlckNhc2UoKSkgewogICAgICAgIGNhc2UgJ1BMRUFTQU5UJzogY2FzZSAnMSc6IGNhc2UgJzInOiBjYXNlICczJzogY2FzZSAnNCc6IGNhc2UgJzUnOiBjYXNlICc2JzogY2FzZSAnNyc6IGNhc2UgJzgnOiBjYXNlICc5JzogY2FzZSAnMTAnOgogICAgICAgICAgICByZXR1cm4ga2FuamlZb21pUExFQVNBTlRba2FuamldOwogICAgICAgIGNhc2UgJ1BBSU5GVUwnOiBjYXNlICcxMSc6IGNhc2UgJzEyJzogY2FzZSAnMTMnOiBjYXNlICcxNCc6IGNhc2UgJzE1JzogY2FzZSAnMTYnOiBjYXNlICcxNyc6IGNhc2UgJzE4JzogY2FzZSAnMTknOiBjYXNlICcyMCc6CiAgICAgICAgICAgIHJldHVybiBrYW5qaVlvbWlQQUlORlVMW2thbmppXTsKICAgICAgICBjYXNlICdERUFUSCc6IGNhc2UgJzIxJzogY2FzZSAnMjInOiBjYXNlICcyMyc6IGNhc2UgJzI0JzogY2FzZSAnMjUnOiBjYXNlICcyNic6IGNhc2UgJzI3JzogY2FzZSAnMjgnOiBjYXNlICcyOSc6IGNhc2UgJzMwJzoKICAgICAgICAgICAgcmV0dXJuIGthbmppWW9taURFQVRIW2thbmppXTsKICAgICAgICBjYXNlICdIRUxMJzogY2FzZSAnMzEnOiBjYXNlICczMic6IGNhc2UgJzMzJzogY2FzZSAnMzQnOiBjYXNlICczNSc6IGNhc2UgJzM2JzogY2FzZSAnMzcnOiBjYXNlICczOCc6IGNhc2UgJzM5JzogY2FzZSAnNDAnOgogICAgICAgICAgICByZXR1cm4ga2FuamlZb21pSEVMTFtrYW5qaV07CiAgICAgICAgY2FzZSAnUEFSQURJU0UnOiBjYXNlICc0MSc6IGNhc2UgJzQyJzogY2FzZSAnNDMnOiBjYXNlICc0NCc6IGNhc2UgJzQ1JzogY2FzZSAnNDYnOiBjYXNlICc0Nyc6IGNhc2UgJzQ4JzogY2FzZSAnNDknOiBjYXNlICc1MCc6CiAgICAgICAgICAgIHJldHVybiBrYW5qaVlvbWlQQVJBRElTRVtrYW5qaV07CiAgICAgICAgY2FzZSAnUkVBTElUWSc6IGNhc2UgJzUxJzogY2FzZSAnNTInOiBjYXNlICc1Myc6IGNhc2UgJzU0JzogY2FzZSAnNTUnOiBjYXNlICc1Nic6IGNhc2UgJzU3JzogY2FzZSAnNTgnOiBjYXNlICc1OSc6IGNhc2UgJzYwJzoKICAgICAgICAgICAgcmV0dXJuIGthbmppWW9taVJFQUxJVFlba2FuamldOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiAwOwogICAgfQp9CmZ1bmN0aW9uIGlzT255b21pQWxsKGthbmppKQp7CgogICAgaWYoa2FuamlZb21pUExFQVNBTlRba2FuamldKSByZXR1cm4gMTsKICAgIGlmKGthbmppWW9taVBBSU5GVUxba2FuamldKSByZXR1cm4gMTsKICAgIGlmKGthbmppWW9taURFQVRIW2thbmppXSkgcmV0dXJuIDE7CiAgICBpZihrYW5qaVlvbWlIRUxMW2thbmppXSkgcmV0dXJuIDE7CiAgICBpZihrYW5qaVlvbWlQQVJBRElTRVtrYW5qaV0pIHJldHVybiAxOwogICAgaWYoa2FuamlZb21pUkVBTElUWVtrYW5qaV0pIHJldHVybiAxOwogICAgcmV0dXJuIDA7Cgp9CmZ1bmN0aW9uIGNvbnZlcnRUb0thdGEoY2hhaW4pCnsKICAgIGNoYWluID0gY2hhaW4udHJpbSgpOwogICAgZm9yICh2YXIgaSA9IDAsIGMgPSBjaGFpbi5sZW5ndGg7IGkgPCBjOyBpKyspCiAgICB7CiAgICAgICAgY2hhaW4gPSByZXBsYWNlQXQoY2hhaW4sIGksIGhpcmFUb0thdGFbY2hhaW5baV1dIHx8IGNoYWluW2ldKTsKICAgIH0KICAgIHJldHVybiBjaGFpbjsKfQoKZnVuY3Rpb24gY29udmVydFRvSGlyYShjaGFpbikKewogICAgY2hhaW4gPSBjaGFpbi50cmltKCk7CiAgICBmb3IgKHZhciBpID0gMCwgYyA9IGNoYWluLmxlbmd0aDsgaSA8IGM7IGkrKykKICAgIHsKICAgICAgICBjaGFpbiA9IHJlcGxhY2VBdChjaGFpbiwgaSwga2F0YVRvSGlyYVtjaGFpbltpXV0gfHwgY2hhaW5baV0pOwogICAgfQogICAgcmV0dXJuIGNoYWluOwp9CgpmdW5jdGlvbiByZXBsYWNlQXQocywgbiwgdCkKewogICAgcmV0dXJuIHMuc3Vic3RyaW5nKDAsIG4pICsgdCArIHMuc3Vic3RyaW5nKG4gKyAxKTsKfQoKLyoKKiBXYWl0IGZvciBlbGVtZW50cyB0byBhcHBlYXIKKiBjYWxsIHdpdGggb2JzZXJ2ZURvbSgpKG9ic2Vydk5vZGUsIGNhbGxiYWNrRnVuY3Rpb24pOwoqIGZyb20gc3RhY2tvdmVyZmxvdzogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQ1NzA2MTQKKi8KZnVuY3Rpb24gb2JzZXJ2ZURPTSgpIHsKICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsCiAgICAgICAgZXZlbnRMaXN0ZW5lclN1cHBvcnRlZCA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyOwogICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgY2FsbGJhY2spewogICAgICAgIGlmKCBNdXRhdGlvbk9ic2VydmVyICkgewogICAgICAgICAgICAvLyBkZWZpbmUgYSBuZXcgb2JzZXJ2ZXIKICAgICAgICAgICAgdmFyIG9icyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucywgb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgICAgIGlmKCBtdXRhdGlvbnNbMF0uYWRkZWROb2Rlcy5sZW5ndGggKQogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBoYXZlIHRoZSBvYnNlcnZlciBvYnNlcnZlIGZvbyBmb3IgY2hhbmdlcyBpbiBjaGlsZHJlbgogICAgICAgICAgICBvYnMub2JzZXJ2ZSggb2JqLCB7IGNoaWxkTGlzdDp0cnVlLCBzdWJ0cmVlOnRydWUgfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoIGV2ZW50TGlzdGVuZXJTdXBwb3J0ZWQgKSB7CiAgICAgICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCBjYWxsYmFjaywgZmFsc2UpOwogICAgICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWQnLCBjYWxsYmFjaywgZmFsc2UpOwogICAgICAgIH0KICAgIH07Cn0KCi8qCiogT25seSB1c2VkIGZvciBnZW5lcmF0aW5nIG9ueW9taUxpc3QKKiBDYW4gYWxzbyBiZSB1c2VkIHRvIGxvYWQga2Fuamkgb255b21pIGluZm9ybWF0aW9ucyBmcm9tIHNlcnZlciAoc2xvdykKKgoqIFVwZGF0ZToKKiBDYWxsIHdpdGggcGFyYW1ldGVyIG9mIGxldmVsIGFuZCBjb3B5IHRoZSBzdHJpbmcgZnJvbSB0aGUgbG9nIHdpbmRvdyBpbiBvbmUgb2YgdGhlIHZhcmlhYmxlcyBvbiB0aGUgdG9wCiogZS5nLgoqIGNvbnNvbGUubG9nKGxvYWRLYXRhRnJvbUFwaSgiUExFQVNBTlQiKSk7CiogY29uc29sZS5sb2cobG9hZEthdGFGcm9tQXBpKCJQQUlORlVMIikpOwoqIGNvbnNvbGUubG9nKGxvYWRLYXRhRnJvbUFwaSgiREVBVEgiKSk7CiogY29uc29sZS5sb2cobG9hZEthdGFGcm9tQXBpKCJIRUxMIikpOwoqIGNvbnNvbGUubG9nKGxvYWRLYXRhRnJvbUFwaSgiUEFSQURJU0UiKSk7CiogY29uc29sZS5sb2cobG9hZEthdGFGcm9tQXBpKCJSRUFMSVRZIikpOwoqLwpmdW5jdGlvbiBsb2FkS2F0YUZyb21BcGkobGV2ZWwpIHsKICAgIHZhciBsZXZlbHM7CiAgICBzd2l0Y2gobGV2ZWwpIHsKICAgICAgICBjYXNlICdQTEVBU0FOVCc6CiAgICAgICAgICAgIGxldmVscyA9ICIxLDIsMyw0LDUsNiw3LDgsOSwxMCI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ1BBSU5GVUwnOgogICAgICAgICAgICBsZXZlbHMgPSAiMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAiOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdERUFUSCc6CiAgICAgICAgICAgIGxldmVscyA9ICIyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0hFTEwnOgogICAgICAgICAgICBsZXZlbHMgPSAiMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAiOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdQQVJBRElTRSc6CiAgICAgICAgICAgIGxldmVscyA9ICI0MSw0Miw0Myw0NCw0NSw0Niw0Nyw0OCw0OSw1MCI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ1JFQUxJVFknOgogICAgICAgICAgICBsZXZlbHMgPSAiNTEsNTIsNTMsNTQsNTUsNTYsNTcsNTgsNTksNjAiOwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBsZXZlbHMgPSAnMSc7CiAgICB9CgogICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgcmVxLm9wZW4oJ0dFVCcsICdodHRwczovL3d3dy53YW5pa2FuaS5jb20vYXBpL3VzZXIvJyArIGFwaUtleSArICcva2FuamkvJyArIGxldmVscywgdHJ1ZSk7CiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDIwMCAmJiByZXEuc3RhdHVzIDwgNDAwKSB7CiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCkucmVxdWVzdGVkX2luZm9ybWF0aW9uOwogICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IHt9OwoKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvdXRwdXRbbGlzdFtpXS5jaGFyYWN0ZXJdID0gbGlzdFtpXS5pbXBvcnRhbnRfcmVhZGluZyA9PSAib255b21pIiA/IDEgOiAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkob3V0cHV0KSk7CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQoImVycm9yIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgcmVxLnNlbmQoKTsKfQo=",
            "storage": {
                "data": {},
                "ts": 1607436649633
            },
            "uuid": "8e97bd94-02cf-48f1-a58b-ff272dd5aadb"
        },
        {
            "enabled": false,
            "file_url": "https://raw.githubusercontent.com/selslack/codingame-sync-userscript/master/codingame-sync.user.js",
            "name": "Codingame File Sync",
            "options": {
                "awareOfChrome": false,
                "check_for_updates": true,
                "comment": null,
                "compat_arrayleft": false,
                "compat_foreach": false,
                "compat_forvarin": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_uW_gmonkey": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "*://www.codingame.com/*"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 9,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgIENvZGluZ2FtZSBGaWxlIFN5bmMKLy8gQG1hdGNoICAgICo6Ly93d3cuY29kaW5nYW1lLmNvbS8qCi8vIEB2ZXJzaW9uICAyLjAKLy8gQGdyYW50ICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyIGlucHV0ID0gbnVsbDsKICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHsKICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24uYWRkZWROb2Rlc1tpXS5ub2RlVHlwZSAhPT0gMSkgeyAvLyBFTEVNRU5UX05PREUKICAgICAgICAgICAgICAgICAgICBjb250aW51ZSA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IGJ1dHRvbnMgPSBtdXRhdGlvbi5hZGRlZE5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoImRpdi5jb2RlLWJ1dHRvbnMiKTsKCiAgICAgICAgICAgICAgICBpZiAoIWJ1dHRvbnMpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZSA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gImlkZS10YWIiOwogICAgICAgICAgICAgICAgaW5wdXQudHlwZSA9ICJmaWxlIjsKCiAgICAgICAgICAgICAgICBidXR0b25zLmluc2VydEJlZm9yZShpbnB1dCwgYnV0dG9ucy5maXJzdENoaWxkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbi5yZW1vdmVkTm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi5yZW1vdmVkTm9kZXNbaV0ubm9kZVR5cGUgIT09IDEpIHsgLy8gRUxFTUVOVF9OT0RFCiAgICAgICAgICAgICAgICAgICAgY29udGludWUgOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghbXV0YXRpb24ucmVtb3ZlZE5vZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoImRpdi5jb2RlLWJ1dHRvbnMiKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpbnB1dCA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwoKICAgIHZhciBzeW5jID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghaW5wdXQgfHwgaW5wdXQuZmlsZXMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChpbnB1dC5maWxlc1swXSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIC8vIFNhZmVseSBpZ25vcmUgYW55IGVycm9yCiAgICAgICAgfQogICAgfTsKCiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgd2luZG93LmRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJFeHRlcm5hbEVkaXRvclRvSURFIiwgewogICAgICAgICAgICBkZXRhaWw6IHsKICAgICAgICAgICAgICAgIHN0YXR1czogInVwZGF0ZUNvZGUiLAogICAgICAgICAgICAgICAgY29kZTogZXZlbnQudGFyZ2V0LnJlc3VsdC5yZXBsYWNlKC9cclxuL2csICJcbiIpLnJlcGxhY2UoL1xyL2csICJcbiIpCiAgICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICB9OwoKICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgewogICAgICAgIHN1YnRyZWU6IHRydWUsCiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICAgIGF0dHJpYnV0ZXM6IGZhbHNlLAogICAgICAgIGNoYXJhY3RlckRhdGE6IGZhbHNlCiAgICB9KTsKCiAgICBzZXRJbnRlcnZhbChzeW5jLCAxMDAwKTsKfSkoKTsK",
            "storage": {
                "data": {},
                "ts": 1607436649634
            },
            "uuid": "7c2e57a8-c3c9-405e-93b2-c4bb6a4312aa"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/396170-bunpro-disable-backspace-undo/code/Bunpro:%20Disable%20Backspace%20Undo.user.js",
            "name": "Bunpro: Disable Backspace Undo",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [
                        "*community.bunpro.jp*"
                    ],
                    "orig_includes": [
                        "*bunpro.jp/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 10,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBCdW5wcm86IERpc2FibGUgQmFja3NwYWNlIFVuZG8KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAxLjAuNgovLyBAZGVzY3JpcHRpb24gIERpc2FibGVzIHRoZSBiYWNrc3BhY2UgZnVuY3Rpb25hbGl0eSBpbiByZXZpZXdzCi8vIEBhdXRob3IgICAgICAgS3VtaXJlaQovLyBAaW5jbHVkZSAgICAgICpidW5wcm8uanAvKgovLyBAZXhjbHVkZSAgICAgICpjb21tdW5pdHkuYnVucHJvLmpwKgovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNzA2MjMtYnVucHJvLWhlbHBmdWwtZXZlbnRzL2NvZGUvQnVucHJvOiUyMEhlbHBmdWwlMjBFdmVudHMuanM/dmVyc2lvbj05NzQzNjkKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgdmFyICQgPSB3aW5kb3cuJDsKICAgICQoJ2h0bWwnKVswXS5hZGRFdmVudExpc3RlbmVyKCdxdWl6LXBhZ2UnLCAoKT0+ewogICAgICAgIHZhciBpbnB1dF9lbGVtID0gJCgnI3N0dWR5LWFuc3dlci1pbnB1dCcpOwogICAgICAgICQoJ2JvZHknKS5rZXlkb3duKChldmVudCk9PnsKICAgICAgICAgICAgdmFyIGNvbG9ycyA9IGlucHV0X2VsZW0uY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJykubWF0Y2goL1xkKy9nKTsKICAgICAgICAgICAgdmFyIHN1bSA9IGNvbG9ycy5yZWR1Y2UoKGEsIGIpPT5OdW1iZXIoYSkrTnVtYmVyKGIpKTsKICAgICAgICAgICAgdmFyIHJlZG5lc3MgPSBjb2xvcnNbMF0vc3VtOwogICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSA4ICYmIHJlZG5lc3MgPiAwLjQpIHsKICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgaW5wdXRfZWxlbS5ibHVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwp9KSgpOwo=",
            "storage": {
                "data": {},
                "ts": 1607436649636
            },
            "uuid": "a83ba4d2-a68b-45d6-b98f-e0c8a83de351"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/35063-wanikani-double-check/code/Wanikani%20Double-Check.user.js",
            "name": "Wanikani Double-Check",
            "options": {
                "check_for_updates": false,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "https://www.wanikani.com/extra_study/session*",
                        "https://www.wanikani.com/review/session*",
                        "https://preview.wanikani.com/extra_study/session*",
                        "https://preview.wanikani.com/review/session*"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-end",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "sandbox": null,
                "tab_types": null,
                "unwrap": null
            },
            "position": 11,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFdhbmlrYW5pIERvdWJsZS1DaGVjawovLyBAbmFtZXNwYWNlICAgd2tkb3VibGVjaGVjawovLyBAZGVzY3JpcHRpb24gQWxsb3dzIHJldHlwaW5nIHR5cG8nZCBhbnN3ZXJzLCBvciBtYXJraW5nIHdyb25nIHdoZW4gV0sncyB0eXBvIHRvbGVyYW5jZSBpcyB0b28gbGF4LgovLyBAbWF0Y2ggICAgICAgaHR0cHM6Ly93d3cud2FuaWthbmkuY29tL2V4dHJhX3N0dWR5L3Nlc3Npb24qCi8vIEBtYXRjaCAgICAgICBodHRwczovL3d3dy53YW5pa2FuaS5jb20vcmV2aWV3L3Nlc3Npb24qCi8vIEBtYXRjaCAgICAgICBodHRwczovL3ByZXZpZXcud2FuaWthbmkuY29tL2V4dHJhX3N0dWR5L3Nlc3Npb24qCi8vIEBtYXRjaCAgICAgICBodHRwczovL3ByZXZpZXcud2FuaWthbmkuY29tL3Jldmlldy9zZXNzaW9uKgovLyBAdmVyc2lvbiAgICAgMi4zLjMKLy8gQGF1dGhvciAgICAgIFJvYmluIEZpbmRsZXkKLy8gQGNvcHlyaWdodCAgIDIwMTcrLCBSb2JpbiBGaW5kbGV5Ci8vIEBsaWNlbnNlICAgICBNSVQ7IGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyBAZ3JhbnQgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCi8vIENSRURJVFM6IFRoaXMgaXMgYSByZXBsYWNlbWVudCBmb3IgYW4gb3JpZ2luYWwgc2NyaXB0IGJ5IFdhbmlrYW5pIHVzZXIgQEV0aGFuLgovLyBFdGhhbidzIHNjcmlwdCBzdG9wcGVkIHdvcmtpbmcgZHVlIHRvIHNvbWUgV2FuaWthbmkgY2hhbmdlcy4gIFRoZSBjb2RlIGJlbG93IGlzCi8vIDEwMCUgbXkgb3duLCBidXQgaXQgY2xvc2VseSByZXBsaWNhdGVzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIEV0aGFuJ3Mgb3JpZ2luYWwgc2NyaXB0LgoKLy8gSE9US0VZUzoKLy8gICAiKyIgICAgICAtIE1hcmtzIGFuc3dlciBhcyAnY29ycmVjdCcuCi8vICAgIi0iICAgICAgLSBNYXJrcyBhbnN3ZXIgYXMgJ2luY29ycmVjdCcuCi8vICAgIkVzY2FwZSIgb3IgIkJhY2tzcGFjZSIgLSBSZXNldHMgcXVlc3Rpb24sIGFsbG93aW5nIHlvdSB0byByZXR5cGUuCgovLyBTRUUgU0VUVElOR1MgQkVMT1cuCgp3aW5kb3cuZG91YmxlY2hlY2sgPSB7fTsKCihmdW5jdGlvbihnb2JqKSB7CgogICAgLyogZ2xvYmFsIHdrb2YsIGFkZGl0aW9uYWxDb250ZW50LCBsYXN0SXRlbXMsIFNycywgd2FuYWthbmEsIFdhbmlLYW5pICovCgogICAgdmFyIHNldHRpbmdzOwoKICAgIHdrb2YuaW5jbHVkZSgnTWVudSxTZXR0aW5ncycpOwogICAgd2tvZi5yZWFkeSgnZG9jdW1lbnQsTWVudSxTZXR0aW5ncycpLnRoZW4oc2V0dXApOwogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIHNldHVwKCkgLSBTZXQgdXAgdGhlIG1lbnUgbGluayBhbmQgZGVmYXVsdCBzZXR0aW5ncy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzZXR1cCgpIHsKICAgICAgICB3a29mLk1lbnUuaW5zZXJ0X3NjcmlwdF9saW5rKHtuYW1lOidkb3VibGVjaGVjaycsc3VibWVudTonU2V0dGluZ3MnLHRpdGxlOidEb3VibGUtQ2hlY2snLG9uX2NsaWNrOm9wZW5fc2V0dGluZ3N9KTsKCiAgICAgICAgdmFyIGRlZmF1bHRzID0gewogICAgICAgICAgICBhbGxvd19yZXR5cGluZzogdHJ1ZSwKICAgICAgICAgICAgYWxsb3dfY2hhbmdlX2NvcnJlY3Q6IGZhbHNlLAogICAgICAgICAgICBzaG93X2NvcnJlY3RlZF9hbnN3ZXI6IGZhbHNlLAogICAgICAgICAgICBhbGxvd19jaGFuZ2VfaW5jb3JyZWN0OiBmYWxzZSwKICAgICAgICAgICAgdHlwb19hY3Rpb246ICdpZ25vcmUnLAogICAgICAgICAgICB3cm9uZ19hbnN3ZXJfdHlwZV9hY3Rpb246ICd3YXJuJywKICAgICAgICAgICAgd3JvbmdfbnVtYmVyX25fYWN0aW9uOiAnd2FybicsCiAgICAgICAgICAgIHNtYWxsX2thbmFfYWN0aW9uOiAnd2FybicsCiAgICAgICAgICAgIGthbmppX3JlYWRpbmdfZm9yX3ZvY2FiX2FjdGlvbjogJ3dhcm4nLAogICAgICAgICAgICBrYW5qaV9tZWFuaW5nX2Zvcl92b2NhYl9hY3Rpb246ICd3YXJuJywKICAgICAgICAgICAgZGVsYXlfd3Jvbmc6IHRydWUsCiAgICAgICAgICAgIGRlbGF5X211bHRpX21lYW5pbmc6IGZhbHNlLAogICAgICAgICAgICBkZWxheV9zbGlnaHRseV9vZmY6IGZhbHNlLAogICAgICAgICAgICBkZWxheV9wZXJpb2Q6IDEuNSwKICAgICAgICAgICAgd2Fybl9idXJuOiAnbmV2ZXInLAogICAgICAgICAgICBidXJuX2RlbGF5X3BlcmlvZDogMS41LAogICAgICAgICAgICBzaG93X2xpZ2h0bmluZ19idXR0b246IHRydWUsCiAgICAgICAgICAgIGxpZ2h0bmluZ19lbmFibGVkOiBmYWxzZSwKICAgICAgICAgICAgc3JzX21zZ19wZXJpb2Q6IDEuMiwKICAgICAgICAgICAgYXV0b2luZm9fY29ycmVjdDogZmFsc2UsCiAgICAgICAgICAgIGF1dG9pbmZvX2luY29ycmVjdDogZmFsc2UsCiAgICAgICAgICAgIGF1dG9pbmZvX211bHRpX21lYW5pbmc6IGZhbHNlLAogICAgICAgICAgICBhdXRvaW5mb19zbGlnaHRseV9vZmY6IGZhbHNlCiAgICAgICAgfQogICAgICAgIHJldHVybiB3a29mLlNldHRpbmdzLmxvYWQoJ2RvdWJsZWNoZWNrJywgZGVmYXVsdHMpCiAgICAgICAgICAgIC50aGVuKGluaXRfdWkuYmluZChudWxsLCB0cnVlIC8qIGZpcnN0X3RpbWUgKi8pKTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gb3Blbl9zZXR0aW5ncygpIC0gT3BlbiB0aGUgU2V0dGluZ3MgZGlhbG9nLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIG9wZW5fc2V0dGluZ3MoKSB7CiAgICAgICAgdmFyIGRpYWxvZyA9IG5ldyB3a29mLlNldHRpbmdzKHsKICAgICAgICAgICAgc2NyaXB0X2lkOiAnZG91YmxlY2hlY2snLAogICAgICAgICAgICB0aXRsZTogJ0RvdWJsZS1DaGVjayBTZXR0aW5ncycsCiAgICAgICAgICAgIG9uX3NhdmU6IGluaXRfdWksCiAgICAgICAgICAgIHByZV9vcGVuOiBzZXR0aW5nc19wcmVvcGVuLAogICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICB0YWJBbnN3ZXJzOiB7dHlwZToncGFnZScsbGFiZWw6J0Fuc3dlcnMnLGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgIGdycENoYW5nZUFuc3dlcnM6IHt0eXBlOidncm91cCcsbGFiZWw6J0NoYW5nZSBBbnN3ZXInLGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd19yZXR5cGluZzoge3R5cGU6J2NoZWNrYm94JyxsYWJlbDonQWxsb3cgcmV0eXBpbmcgYW5zd2VyJyxkZWZhdWx0OnRydWUsaG92ZXJfdGlwOidXaGVuIGVuYWJsZWQsIHlvdSBjYW4gcmV0eXBlIHlvdXIgYW5zd2VyIGJ5IHByZXNzaW5nIEVzY2FwZSBvciBCYWNrc3BhY2UuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93X2NoYW5nZV9pbmNvcnJlY3Q6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J0FsbG93IGNoYW5naW5nIHRvICJpbmNvcnJlY3QiJyxkZWZhdWx0OnRydWUsaG92ZXJfdGlwOidXaGVuIGVuYWJsZWQsIHlvdSBjYW4gY2hhbmdlIHlvdXIgYW5zd2VyXG50byAiaW5jb3JyZWN0IiBieSBwcmVzc2luZyB0aGUgIi0iIGtleS4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dfY2hhbmdlX2NvcnJlY3Q6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J0FsbG93IGNoYW5naW5nIHRvICJjb3JyZWN0IicsZGVmYXVsdDp0cnVlLGhvdmVyX3RpcDonV2hlbiBlbmFibGVkLCB5b3UgY2FuIGNoYW5nZSB5b3VyIGFuc3dlclxudG8gImNvcnJlY3QiIGJ5IHByZXNzaW5nIHRoZSAiKyIga2V5Lid9LAogICAgICAgICAgICAgICAgICAgICAgICBzaG93X2NvcnJlY3RlZF9hbnN3ZXI6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J1Nob3cgY29ycmVjdGVkIGFuc3dlcicsZGVmYXVsdDpmYWxzZSxob3Zlcl90aXA6J1doZW4gZW5hYmxlZCwgcHJlc3NpbmcgXCcrXCcgdG8gY29ycmVjdCB5b3VyIGFuc3dlciBwdXRzIHRoZVxuY29ycmVjdGVkIGFuc3dlciBpbiB0aGUgaW5wdXQgZmllbGQuIFByZXNzaW5nIFwnK1wnIG11bHRpcGxlXG50aW1lcyBjeWNsZXMgdGhyb3VnaCBhbGwgYWNjZXB0YWJsZSBhbnN3ZXJzLid9LAogICAgICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgICAgICAgICAgIGdycENhcmVsZXNzTWlzdGFrZXM6IHt0eXBlOidncm91cCcsbGFiZWw6J0NhcmVsZXNzIE1pc3Rha2VzJyxjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwb19hY3Rpb246IHt0eXBlOidkcm9wZG93bicsbGFiZWw6J1R5cG9zIGluIG1lYW5pbmcnLGRlZmF1bHQ6J2lnbm9yZScsY29udGVudDp7aWdub3JlOidJZ25vcmUnLHdhcm46J1dhcm4vc2hha2UnLHdyb25nOidNYXJrIHdyb25nJ30saG92ZXJfdGlwOidDaG9vc2UgYW4gYWN0aW9uIHRvIHRha2Ugd2hlbiBtZWFuaW5nIGNvbnRhaW5zIHR5cG9zLid9LAogICAgICAgICAgICAgICAgICAgICAgICB3cm9uZ19hbnN3ZXJfdHlwZV9hY3Rpb246IHt0eXBlOidkcm9wZG93bicsbGFiZWw6J1dyb25nIGFuc3dlciB0eXBlJyxkZWZhdWx0Oid3YXJuJyxjb250ZW50Ont3YXJuOidXYXJuL3NoYWtlJyx3cm9uZzonTWFyayB3cm9uZyd9LGhvdmVyX3RpcDonQ2hvb3NlIGFuIGFjdGlvbiB0byB0YWtlIHdoZW4gcmVhZGluZyB3YXMgZW50ZXJlZCBpbnN0ZWFkIG9mIG1lYW5pbmcsIG9yIHZpY2UgdmVyc2EuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHdyb25nX251bWJlcl9uX2FjdGlvbjoge3R5cGU6J2Ryb3Bkb3duJyxsYWJlbDonV3JvbmcgbnVtYmVyIG9mIG5cJ3MnLGRlZmF1bHQ6J3dhcm4nLGNvbnRlbnQ6e3dhcm46J1dhcm4vc2hha2UnLHdyb25nOidNYXJrIHdyb25nJ30saG92ZXJfdGlwOidDaG9vc2UgYW4gYWN0aW9uIHRvIHRha2Ugd2hlbiB5b3UgdHlwZSB0aGUgd3JvbmcgbnVtYmVyIG9mIG5cJ3MgaW4gY2VydGFpbiByZWFkaW5nIHF1ZXN0aW9ucy4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgc21hbGxfa2FuYV9hY3Rpb246IHt0eXBlOidkcm9wZG93bicsbGFiZWw6J0JpZyBrYW5hIGluc3RlYWQgb2Ygc21hbGwnLGRlZmF1bHQ6J3dhcm4nLGNvbnRlbnQ6e3dhcm46J1dhcm4vc2hha2UnLHdyb25nOidNYXJrIHdyb25nJ30saG92ZXJfdGlwOidDaG9vc2UgYW4gYWN0aW9uIHRvIHRha2Ugd2hlbiB5b3UgdHlwZSBhIGJpZyBrYW5hIGluc3RlYWQgb2Ygc21hbGwgKGUuZy4g44KGIGluc3RlYWQgb2Yg44KFKS4nfSwKICAgICAgICAgICAgICAgICAgICAgICAga2FuamlfcmVhZGluZ19mb3Jfdm9jYWJfYWN0aW9uOiB7dHlwZTonZHJvcGRvd24nLGxhYmVsOidLYW5qaSByZWFkaW5nIGluc3RlYWQgb2Ygdm9jYWInLGRlZmF1bHQ6J3dhcm4nLGNvbnRlbnQ6e3dhcm46J1dhcm4vc2hha2UnLHdyb25nOidNYXJrIHdyb25nJ30saG92ZXJfdGlwOidDaG9vc2UgYW4gYWN0aW9uIHRvIHRha2Ugd2hlbiB0aGUgcmVhZGluZyBvZiBhIGthbmppIGlzIGVudGVyZWQgZm9yIGEgc2luZ2xlIGNoYXJhY3RlciB2b2NhYiB3b3JkIGluc3RlYWQgb2YgdGhlIGNvcnJlY3Qgdm9jYWIgcmVhZGluZy4nfSwKICAgICAgICAgICAgICAgICAgICAgICAga2FuamlfbWVhbmluZ19mb3Jfdm9jYWJfYWN0aW9uOiB7dHlwZTonZHJvcGRvd24nLGxhYmVsOidLYW5qaSBtZWFuaW5nIGluc3RlYWQgb2Ygdm9jYWInLGRlZmF1bHQ6J3dhcm4nLGNvbnRlbnQ6e3dhcm46J1dhcm4vc2hha2UnLHdyb25nOidNYXJrIHdyb25nJ30saG92ZXJfdGlwOidDaG9vc2UgYW4gYWN0aW9uIHRvIHRha2Ugd2hlbiB0aGUgbWVhbmluZyBvZiBhIGthbmppIGlzIGVudGVyZWQgZm9yIGEgc2luZ2xlIGNoYXJhY3RlciB2b2NhYiB3b3JkIGluc3RlYWQgb2YgdGhlIGNvcnJlY3Qgdm9jYWIgbWVhbmluZy4nfSwKICAgICAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgICAgICAgdGFiTWlzdGFrZURlbGF5OiB7dHlwZToncGFnZScsbGFiZWw6J01pc3Rha2UgRGVsYXknLGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgIGdycERlbGF5OiB7dHlwZTonZ3JvdXAnLGxhYmVsOidEZWxheSBOZXh0IFF1ZXN0aW9uJyxjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlfd3Jvbmc6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J0RlbGF5IHdoZW4gd3JvbmcnLGRlZmF1bHQ6dHJ1ZSxyZWZyZXNoX29uX2NoYW5nZTp0cnVlLGhvdmVyX3RpcDonSWYgeW91ciBhbnN3ZXIgaXMgd3JvbmcsIHlvdSBjYW5ub3QgYWR2YW5jZVxudG8gdGhlIG5leHQgcXVlc3Rpb24gZm9yIGF0IGxlYXN0IE4gc2Vjb25kcy4nfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlfbXVsdGlfbWVhbmluZzoge3R5cGU6J2NoZWNrYm94JyxsYWJlbDonRGVsYXkgd2hlbiBtdWx0aXBsZSBtZWFuaW5ncycsZGVmYXVsdDpmYWxzZSxob3Zlcl90aXA6J0lmIHRoZSBpdGVtIGhhcyBtdWx0aXBsZSBtZWFuaW5ncywgeW91IGNhbm5vdCBhZHZhbmNlXG50byB0aGUgbmV4dCBxdWVzdGlvbiBmb3IgYXQgbGVhc3QgTiBzZWNvbmRzLid9LAogICAgICAgICAgICAgICAgICAgICAgICBkZWxheV9zbGlnaHRseV9vZmY6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J0RlbGF5IHdoZW4gYW5zd2VyIGhhcyB0eXBvcycsZGVmYXVsdDpmYWxzZSxob3Zlcl90aXA6J0lmIHlvdXIgYW5zd2VyIGNvbnRhaW5zIHR5cG9zLCB5b3UgY2Fubm90IGFkdmFuY2VcbnRvIHRoZSBuZXh0IHF1ZXN0aW9uIGZvciBhdCBsZWFzdCBOIHNlY29uZHMuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5X3BlcmlvZDoge3R5cGU6J251bWJlcicsbGFiZWw6J0RlbGF5IHBlcmlvZCAoaW4gc2Vjb25kcyknLGRlZmF1bHQ6MS41LGhvdmVyX3RpcDonTnVtYmVyIG9mIHNlY29uZHMgdG8gZGVsYXkgYmVmb3JlIGFsbG93aW5nXG55b3UgdG8gYWR2YW5jZSB0byB0aGUgbmV4dCBxdWVzdGlvbi4nfSwKICAgICAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgICAgICAgdGFiQnVyblJldmlld3M6IHt0eXBlOidwYWdlJyxsYWJlbDonQnVybiBSZXZpZXdzJyxjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICBncnBCdXJuUmV2aWV3czoge3R5cGU6J2dyb3VwJyxsYWJlbDonQnVybiBSZXZpZXdzJyxjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgd2Fybl9idXJuOiB7dHlwZTonZHJvcGRvd24nLGxhYmVsOidXYXJuIGJlZm9yZSBidXJuaW5nJyxkZWZhdWx0OiduZXZlcicsY29udGVudDp7bmV2ZXI6J05ldmVyJyxjaGVhdGVkOidJZiB5b3UgY2hhbmdlZCBhbnN3ZXInLGFsd2F5czonQWx3YXlzJ30saG92ZXJfdGlwOidDaG9vc2Ugd2hlbiB0byB3YXJuIGJlZm9yZSBidXJuaW5nIGFuIGl0ZW0uJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cm5fZGVsYXlfcGVyaW9kOiB7dHlwZTonbnVtYmVyJyxsYWJlbDonRGVsYXkgYWZ0ZXIgd2FybmluZyAoaW4gc2Vjb25kcyknLGRlZmF1bHQ6MS41LGhvdmVyX3RpcDonTnVtYmVyIG9mIHNlY29uZHMgdG8gZGVsYXkgYmVmb3JlIGFsbG93aW5nXG55b3UgdG8gYWR2YW5jZSB0byB0aGUgbmV4dCBxdWVzdGlvbiBhZnRlciBzZWVpbmcgYSBidXJuIHdhcm5pbmcuJ30sCiAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgICAgICAgIHRhYkxpZ2h0bmluZzoge3R5cGU6J3BhZ2UnLGxhYmVsOidMaWdodG5pbmcnLGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgIGdycExpZ2h0bmluZzoge3R5cGU6J2dyb3VwJyxsYWJlbDonTGlnaHRuaW5nIE1vZGUnLGNvbnRlbnQ6ewogICAgICAgICAgICAgICAgICAgICAgICBzaG93X2xpZ2h0bmluZ19idXR0b246IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J1Nob3cgIkxpZ2h0bmluZyBNb2RlIiBidXR0b24nLGRlZmF1bHQ6dHJ1ZSxob3Zlcl90aXA6J1Nob3cgdGhlICJMaWdodG5pbmcgTW9kZSIgdG9nZ2xlXG5idXR0b24gb24gdGhlIHJldmlldyBzY3JlZW4uJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0bmluZ19lbmFibGVkOiB7dHlwZTonY2hlY2tib3gnLGxhYmVsOidFbmFibGUgIkxpZ2h0bmluZyBNb2RlIicsZGVmYXVsdDp0cnVlLHJlZnJlc2hfb25fY2hhbmdlOnRydWUsaG92ZXJfdGlwOidFbmFibGUgIkxpZ2h0bmluZyBNb2RlIiwgd2hpY2ggYXV0b21hdGljYWxseSBhZHZhbmNlcyB0b1xudGhlIG5leHQgcXVlc3Rpb24gaWYgeW91IGFuc3dlciBjb3JyZWN0bHkuJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIHNyc19tc2dfcGVyaW9kOiB7dHlwZTonbnVtYmVyJyxsYWJlbDonU1JTIHBvcHVwIHRpbWUgKGluIHNlY29uZHMpJyxkZWZhdWx0OjEuMixtaW46MCxob3Zlcl90aXA6J0hvdyBsb25nIHRvIHNob3cgU1JTIHVwL2Rvd24gcG9wdXAgd2hlbiBpbiBsaWdodG5pbmcgbW9kZS4gICgwID0gZG9uXCd0IHNob3cpJ30sCiAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgICAgICAgIHRhYkF1dG9JbmZvOiB7dHlwZToncGFnZScsbGFiZWw6J0l0ZW0gSW5mbycsY29udGVudDp7CiAgICAgICAgICAgICAgICAgICAgZ3JwQXV0b0luZm86IHt0eXBlOidncm91cCcsbGFiZWw6J1Nob3cgSXRlbSBJbmZvJyxjb250ZW50OnsKICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2luZm9fY29ycmVjdDoge3R5cGU6J2NoZWNrYm94JyxsYWJlbDonQWZ0ZXIgY29ycmVjdCBhbnN3ZXInLGRlZmF1bHQ6ZmFsc2UsaG92ZXJfdGlwOidBdXRvbWF0aWNhbGx5IHNob3cgdGhlIEl0ZW0gSW5mbyBhZnRlciBjb3JyZWN0IGFuc3dlcnMuJywgdmFsaWRhdGU6dmFsaWRhdGVfYXV0b2luZm9fY29ycmVjdH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9pbmZvX2luY29ycmVjdDoge3R5cGU6J2NoZWNrYm94JyxsYWJlbDonQWZ0ZXIgaW5jb3JyZWN0IGFuc3dlcicsZGVmYXVsdDpmYWxzZSxob3Zlcl90aXA6J0F1dG9tYXRpY2FsbHkgc2hvdyB0aGUgSXRlbSBJbmZvIGFmdGVyIGluY29ycmVjdCBhbnN3ZXJzLicsIHZhbGlkYXRlOnZhbGlkYXRlX2F1dG9pbmZvX2luY29ycmVjdH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9pbmZvX211bHRpX21lYW5pbmc6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J1doZW4gbXVsdGlwbGUgbWVhbmluZ3MnLGRlZmF1bHQ6ZmFsc2UsaG92ZXJfdGlwOidBdXRvbWF0aWNhbGx5IHNob3cgdGhlIEl0ZW0gSW5mbyB3aGVuIGFuIGl0ZW0gaGFzIG11bHRpcGxlIG1lYW5pbmdzLicsIHZhbGlkYXRlOnZhbGlkYXRlX2F1dG9pbmZvX2NvcnJlY3R9LAogICAgICAgICAgICAgICAgICAgICAgICBhdXRvaW5mb19zbGlnaHRseV9vZmY6IHt0eXBlOidjaGVja2JveCcsbGFiZWw6J1doZW4gYW5zd2VyIGhhcyB0eXBvcycsZGVmYXVsdDpmYWxzZSxob3Zlcl90aXA6J0F1dG9tYXRpY2FsbHkgc2hvdyB0aGUgSXRlbSBJbmZvIHdoZW4geW91ciBhbnN3ZXIgaGFzIHR5cG9zLicsIHZhbGlkYXRlOnZhbGlkYXRlX2F1dG9pbmZvX2NvcnJlY3R9LAogICAgICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkaWFsb2cub3BlbigpOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyB2YWxpZGF0ZV9hdXRvaW5mb19jb3JyZWN0KCkgLSBOb3RpZnkgdXNlciBpZiBpdGVtaW5mbyBhbmQgbGlnaHRuaW5nIGFyZSBib3RoIGVuYWJsZWQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdmFsaWRhdGVfYXV0b2luZm9fY29ycmVjdChlbmFibGVkKSB7CiAgICAgICAgaWYgKGVuYWJsZWQgJiYgc2V0dGluZ3MubGlnaHRuaW5nX2VuYWJsZWQpIHsKICAgICAgICAgICAgcmV0dXJuICdEaXNhYmxlICJMaWdodG5pbmcgTW9kZSIhJzsKICAgICAgICB9CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIHZhbGlkYXRlX2F1dG9pbmZvX2luY29ycmVjdCgpIC0gTm90aWZ5IHVzZXIgaWYgaXRlbWluZm8gYW5kIGxpZ2h0bmluZyBhcmUgYm90aCBlbmFibGVkLCBhbmQgd3JvbmdfZGVsYXkgZGlzYWJsZWQuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gdmFsaWRhdGVfYXV0b2luZm9faW5jb3JyZWN0KGVuYWJsZWQpIHsKICAgICAgICBpZiAoZW5hYmxlZCAmJiBzZXR0aW5ncy5saWdodG5pbmdfZW5hYmxlZCAmJiAhc2V0dGluZ3MuZGVsYXlfd3JvbmcpIHsKICAgICAgICAgICAgcmV0dXJuICdEaXNhYmxlICJMaWdodG5pbmcgTW9kZSIsIG9yPGJyPmVuYWJsZSAiRGVsYXkgd2hlbiB3cm9uZyIhJzsKICAgICAgICB9CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIHNldHRpbmdzX3ByZW9wZW4oKSAtIE5vdGlmeSB1c2VyIGlmIGl0ZW1pbmZvIGFuZCBsaWdodG5pbmcgYXJlIGJvdGggZW5hYmxlZC4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzZXR0aW5nc19wcmVvcGVuKGRpYWxvZykgewogICAgICAgIGRpYWxvZy5kaWFsb2coe3dpZHRoOjUyNX0pOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBpbml0X3VpKCkgLSBJbml0aWFsaXplIHRoZSB1c2VyIGludGVyZmFjZS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgZmlyc3RfdGltZSA9IHRydWU7CiAgICBmdW5jdGlvbiBpbml0X3VpKCkgewogICAgICAgIHNldHRpbmdzID0gd2tvZi5zZXR0aW5ncy5kb3VibGVjaGVjazsKCiAgICAgICAgaWYgKGZpcnN0X3RpbWUpIHsKICAgICAgICAgICAgZmlyc3RfdGltZSA9IGZhbHNlOwogICAgICAgICAgICBzdGFydHVwKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBNaWdyYXRlICdsaWdodG5pbmcnIHNldHRpbmcgZnJvbSBsb2NhbFN0b3JhZ2UuCiAgICAgICAgdmFyIGxpZ2h0bmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsaWdodG5pbmcnKTsKICAgICAgICBpZiAobGlnaHRuaW5nID09PSAnZmFsc2UnIHx8IGxpZ2h0bmluZyA9PT0gJ3RydWUnKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsaWdodG5pbmcnKTsKICAgICAgICAgICAgc2V0dGluZ3MubGlnaHRuaW5nX2VuYWJsZWQgPSBsaWdodG5pbmc7CiAgICAgICAgICAgIHdrb2YuU2V0dGluZ3Muc2F2ZSgnZG91YmxlY2hlY2snKTsKICAgICAgICB9CgogICAgICAgIC8vIEluaXRpYWxpemUgdGhlIExpZ2h0bmluZyBNb2RlIGJ1dHRvbi4KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGlnaHRuaW5nLW1vZGUnKS5jbGFzc0xpc3QudG9nZ2xlKCdkb3VibGVjaGVjay1hY3RpdmUnLCBzZXR0aW5ncy5saWdodG5pbmdfZW5hYmxlZCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpZ2h0bmluZy1tb2RlJykuaGlkZGVuID0gIXNldHRpbmdzLnNob3dfbGlnaHRuaW5nX2J1dHRvbjsKCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1kb3VibGUtY2hlY2snKS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nLCAhKHNldHRpbmdzLmFsbG93X2NoYW5nZV9jb3JyZWN0IHx8IHNldHRpbmdzLmFsbG93X2NoYW5nZV9pbmNvcnJlY3QpKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3B0aW9uLXJldHlwZScpLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicsICFzZXR0aW5ncy5hbGxvd19yZXR5cGluZyk7CiAgICAgICAgcmVzaXplX2J1dHRvbnMoKTsKCiAgICAgICAgaWYgKHN0YXRlID09PSAnc2Vjb25kX3N1Ym1pdCcpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1kb3VibGUtY2hlY2snKS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcsICEoCiAgICAgICAgICAgICAgICAobmV3X2Fuc3dlci5wYXNzZWQgJiYgKHNldHRpbmdzLmFsbG93X2NoYW5nZV9pbmNvcnJlY3QgfHwgIWZpcnN0X2Fuc3dlci5wYXNzZWQpKSB8fAogICAgICAgICAgICAgICAgKCFuZXdfYW5zd2VyLnBhc3NlZCAmJiAoc2V0dGluZ3MuYWxsb3dfY2hhbmdlX2NvcnJlY3QgfHwgZmlyc3RfYW5zd2VyLnBhc3NlZCkpCiAgICAgICAgICAgICkpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3B0aW9uLXJldHlwZScpLmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJywgIXNldHRpbmdzLmFsbG93X3JldHlwaW5nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3B0aW9uLWRvdWJsZS1jaGVjaycpLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7CiAgICAgICAgfQogICAgfQoKICAgIHZhciBvbGRfc3VibWl0X2hhbmRsZXIsIG9sZF9hbnN3ZXJfY2hlY2tlciwgaWdub3JlX3N1Ym1pdCA9IGZhbHNlLCBzdGF0ZSA9ICdmaXJzdF9zdWJtaXQnLCBzaG93X3Nycywgc3JzX2xvYWQsIGRlbGF5X3RpbWVyOwogICAgdmFyIGl0ZW0sIGl0eXBlLCBpdGVtX2lkLCBpdGVtX3N0YXR1cywgcXR5cGUsIHZhbGlkX2Fuc3dlcnMsIHdyb25nX2NudCwgcXVlc3Rpb25fY250LCBjb21wbGV0ZWRfY250LCBhbnN3ZXIsIG5ld19hbnN3ZXIsIGFjdGl2ZV9xdWV1ZTsKICAgIHZhciBsYXN0X2l0ZW1faWQsIGxhc3RfcXR5cGUsIGZpcnN0X2Fuc3dlcjsKCiAgICBmdW5jdGlvbiBwcm9taXNlKCl7dmFyIGEsYixjPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGQsZSl7YT1kO2I9ZTt9KTtjLnJlc29sdmU9YTtjLnJlamVjdD1iO3JldHVybiBjO30KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gbGlnaHRuaW5nX2NsaWNrZWQoKSAtIExpZ2h0bmluZyBidXR0b24gaGFuZGxlci4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBsaWdodG5pbmdfY2xpY2tlZCgpIHsKICAgICAgICBzZXR0aW5ncy5saWdodG5pbmdfZW5hYmxlZCA9ICFzZXR0aW5ncy5saWdodG5pbmdfZW5hYmxlZDsKICAgICAgICB3a29mLlNldHRpbmdzLnNhdmUoJ2RvdWJsZWNoZWNrJyk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpZ2h0bmluZy1tb2RlJykuY2xhc3NMaXN0LnRvZ2dsZSgnZG91YmxlY2hlY2stYWN0aXZlJywgc2V0dGluZ3MubGlnaHRuaW5nX2VuYWJsZWQpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gZ2V0X2NvcnJlY3RfYW5zd2VycygpIC0gUmV0dXJucyBhbiBhcnJheSBvZiBhY2NlcHRhYmxlIGFuc3dlcnMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZ2V0X2NvcnJlY3RfYW5zd2VycygpIHsKICAgICAgICBpZiAocXR5cGUgPT09ICdyZWFkaW5nJykgewogICAgICAgICAgICBpZiAoaXR5cGUgPT09ICdrJykgewogICAgICAgICAgICAgICAgc3dpdGNoIChpdGVtLmVtcGgpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJvbnlvbWkiOiByZXR1cm4gaXRlbS5vbjsKICAgICAgICAgICAgICAgICAgICBjYXNlICJrdW55b21pIjogcmV0dXJuIGl0ZW0ua3VuOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIm5hbm9yaSI6IHJldHVybiBpdGVtLm5hbm9yaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmthbmE7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gW10uY29uY2F0KGl0ZW0uc3luLGl0ZW0uZW4pOwogICAgICAgIH0KICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gZ2V0X25leHRfY29ycmVjdF9hbnN3ZXIoKSAtIFJldHVybnMgdGhlIG5leHQgYWNjZXB0YWJsZSBhbnN3ZXIgZnJvbSB0aGUKICAgIC8vICAgIGFycmF5IHJldHVybmVkIGJ5IGdldF9jb3JyZWN0X2Fuc3dlcnMoKS4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBnZXRfbmV4dF9jb3JyZWN0X2Fuc3dlcigpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gZmlyc3RfYW5zd2VyLmNvcnJlY3RfYW5zd2Vyc1tmaXJzdF9hbnN3ZXIuY29ycmVjdF9hbnN3ZXJfaW5kZXhdOwogICAgICAgIGZpcnN0X2Fuc3dlci5jb3JyZWN0X2Fuc3dlcl9pbmRleCA9IChmaXJzdF9hbnN3ZXIuY29ycmVjdF9hbnN3ZXJfaW5kZXggKyAxKSAlIGZpcnN0X2Fuc3dlci5jb3JyZWN0X2Fuc3dlcnMubGVuZ3RoOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIHRvZ2dsZV9yZXN1bHQoKSAtIFRvZ2dsZSBhbiBhbnN3ZXIgZnJvbSByaWdodC0+d3Jvbmcgb3Igd3JvbmctPnJpZ2h0LgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIHRvZ2dsZV9yZXN1bHQobmV3X3N0YXRlKSB7CiAgICAgICAgaWYgKG5ld19zdGF0ZSA9PT0gJ3RvZ2dsZScpIG5ld19zdGF0ZSA9IChuZXdfYW5zd2VyLnBhc3NlZCA/ICdpbmNvcnJlY3QnIDogJ2NvcnJlY3QnKTsKICAgICAgICBpZiAoc3RhdGUgIT09ICdzZWNvbmRfc3VibWl0JykgcmV0dXJuIGZhbHNlOwoKICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYW5zd2VyLWZvcm0gZmllbGRzZXQgaW5wdXQnKTsKICAgICAgICB2YXIgY3VycmVudF9yZXNwb25zZSA9IGlucHV0LnZhbHVlOwogICAgICAgIGNsZWFyX2RlbGF5KCk7CiAgICAgICAgc3dpdGNoIChuZXdfc3RhdGUpIHsKICAgICAgICAgICAgY2FzZSAnY29ycmVjdCc6CiAgICAgICAgICAgICAgICBpZiAoIShzZXR0aW5ncy5hbGxvd19jaGFuZ2VfY29ycmVjdCB8fCBmaXJzdF9hbnN3ZXIucGFzc2VkKSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKGZpcnN0X2Fuc3dlci5wYXNzZWQpIHsKICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGZpcnN0X2Fuc3dlci5yZXNwb25zZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBnZXRfbmV4dF9jb3JyZWN0X2Fuc3dlcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbmV3X2Fuc3dlciA9IHtwYXNzZWQ6dHJ1ZSwgYWNjdXJhdGU6dHJ1ZSwgbXVsdGlwbGVBbnN3ZXJzOmZhbHNlLCBleGNlcHRpb246ZmFsc2V9OwogICAgICAgICAgICAgICAgc2V0X2Fuc3dlcl9zdGF0ZShuZXdfYW5zd2VyLCBmYWxzZSAvKiBzaG93X21zZ3MgKi8pOwogICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5zaG93X2NvcnJlY3RlZF9hbnN3ZXIpIGlucHV0LnZhbHVlID0gY3VycmVudF9yZXNwb25zZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdpbmNvcnJlY3QnOgogICAgICAgICAgICAgICAgaWYgKCEobmV3X2Fuc3dlci5wYXNzZWQgJiYgKHNldHRpbmdzLmFsbG93X2NoYW5nZV9pbmNvcnJlY3QgfHwgIWZpcnN0X2Fuc3dlci5wYXNzZWQpKSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKGZpcnN0X2Fuc3dlci5wYXNzZWQpIHsKICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICd4eHh4eHgnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGZpcnN0X2Fuc3dlci5yZXNwb25zZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5ld19hbnN3ZXIgPSB7cGFzc2VkOmZhbHNlLCBhY2N1cmF0ZTpmYWxzZSwgbXVsdGlwbGVBbnN3ZXJzOmZhbHNlLCBleGNlcHRpb246ZmFsc2V9OwogICAgICAgICAgICAgICAgc2V0X2Fuc3dlcl9zdGF0ZShuZXdfYW5zd2VyLCBmYWxzZSAvKiBzaG93X21zZ3MgKi8pOwogICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5zaG93X2NvcnJlY3RlZF9hbnN3ZXIpIGlucHV0LnZhbHVlID0gY3VycmVudF9yZXNwb25zZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyZXR5cGUnOgogICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5hbGxvd19yZXR5cGluZykgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgc2V0X2Fuc3dlcl9zdGF0ZSh7cmVzZXQ6dHJ1ZSwgZHVlX3RvX3JldHlwZTp0cnVlfSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIGRvX2RlbGF5KCkgLSBEaXNhYmxlIHRoZSBzdWJtaXQgYnV0dG9uIGJyaWVmbHkgdG8gcHJldmVudCBjbGlja2luZyBwYXN0IHdyb25nIGFuc3dlcnMuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gZG9fZGVsYXkocGVyaW9kKSB7CiAgICAgICAgaWYgKHBlcmlvZCA9PT0gdW5kZWZpbmVkKSBwZXJpb2QgPSBzZXR0aW5ncy5kZWxheV9wZXJpb2Q7CiAgICAgICAgaWdub3JlX3N1Ym1pdCA9IHRydWU7CiAgICAgICAgZGVsYXlfdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBkZWxheV90aW1lciA9IC0xOwogICAgICAgICAgICBpZ25vcmVfc3VibWl0ID0gZmFsc2U7CiAgICAgICAgfSwgcGVyaW9kKjEwMDApOwogICAgfQoKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBjbGVhcl9kZWxheSgpIC0gQ2xlYXIgdGhlIGRlbGF5IHRpbWVyLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIGNsZWFyX2RlbGF5KCkgewogICAgICAgIGlmIChkZWxheV90aW1lcikgewogICAgICAgICAgICBpZ25vcmVfc3VibWl0ID0gZmFsc2U7CiAgICAgICAgICAgIGNsZWFyVGltZW91dChkZWxheV90aW1lcik7CiAgICAgICAgICAgIGRlbGF5X3RpbWVyID0gdW5kZWZpbmVkOwogICAgICAgIH0KICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gcmV0dXJuX25ld19hbnN3ZXIoKSAtIEFsdGVybmF0ZSBhbnN3ZXIgY2hlY2tlciB0aGF0IG92ZXJyaWRlcyBvdXIgcmVzdWx0cy4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiByZXR1cm5fbmV3X2Fuc3dlcigpIHsKICAgICAgICByZXR1cm4gbmV3X2Fuc3dlcjsKICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gc2V0X2Fuc3dlcl9zdGF0ZSgpIC0gVXBkYXRlIHRoZSBzY3JlZW4gdG8gc2hvdyByZXN1bHRzIG9mIGFuc3dlci1jaGVjay4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzZXRfYW5zd2VyX3N0YXRlKGFuc3dlciwgc2hvd19tc2dzKSB7CiAgICAgICAgLy8gSWYgdXNlciByZXF1ZXN0ZWQgdG8gcmV0eXBlIGFuc3dlciwgcmVzZXQgdGhlIHF1ZXN0aW9uLgogICAgICAgIHZhciBkYmxjaGsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3B0aW9uLWRvdWJsZS1jaGVjaycpOwogICAgICAgIGlmIChhbnN3ZXIucmVzZXQpIHsKICAgICAgICAgICAgY2xlYXJfZGVsYXkoKTsKICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnc2Vjb25kX3N1Ym1pdCcpIHsKICAgICAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCd3cm9uZ0NvdW50Jywgd3JvbmdfY250KTsKICAgICAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCdxdWVzdGlvbkNvdW50JywgcXVlc3Rpb25fY250KTsKICAgICAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCdjb21wbGV0ZWRDb3VudCcsIGNvbXBsZXRlZF9jbnQpOwogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ2FjdGl2ZVF1ZXVlJywgYWN0aXZlX3F1ZXVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZSA9ICdmaXJzdF9zdWJtaXQnOwoKICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHJlc2V0dGluZyBkdWUgdG8gdGhlIHVzZXIgY2xpY2tpbmcgJ3JldHlwZScsIHRoZW4gd2UgbmVlZCB0byB0cmlnZ2VyCiAgICAgICAgICAgIC8vIGEgcmVmcmVzaCB0aGUgaW5wdXQgZmllbGQgYW5kIHN0YXRzIGJ5IHVwZGF0aW5nICdjdXJyZW50SXRlbScgaW4galN0b3JhZ2UuCiAgICAgICAgICAgIGlmIChhbnN3ZXIuZHVlX3RvX3JldHlwZSkgewogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ2N1cnJlbnRJdGVtJywgJC5qU3RvcmFnZS5nZXQoJ2N1cnJlbnRJdGVtJykpOwogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdpbmRvdy53a1JlZnJlc2hBdWRpbygpOwogICAgICAgICAgICB0cnkge2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNhbnN3ZXItZXhjZXB0aW9uIikucmVtb3ZlKCk7fSBjYXRjaChlKSB7fQogICAgICAgICAgICBkYmxjaGsuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgZGJsY2hrLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywnTWFyayBSaWdodCcpOwogICAgICAgICAgICBkYmxjaGsucXVlcnlTZWxlY3Rvcignc3BhbiBpJykuY2xhc3NOYW1lID0gJ2ZhIGZhLXRodW1icy11cCc7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24tcmV0eXBlJykuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBTcnMgPT09ICdvYmplY3QnKSBTcnMucmVtb3ZlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIElmIGFuc3dlciBpcyBpbnZhbGlkIGZvciBzb21lIHJlYXNvbiwgZG8gdGhlIHNoYWtlIHRoaW5nLgogICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLXJlc3BvbnNlJyk7CiAgICAgICAgdmFyIGZpZWxkc2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1mb3JtIGZpZWxkc2V0Jyk7CiAgICAgICAgaWYgKGFuc3dlci5leGNlcHRpb24pIHsKICAgICAgICAgICAgdHJ5IHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYW5zd2VyLWV4Y2VwdGlvbicpLnJlbW92ZSgpO30gY2F0Y2goZSkge30KICAgICAgICAgICAgaWYgKGFuc3dlci5jb25maXJtaW5nX2J1cm4pIHsKICAgICAgICAgICAgICAgIC8vIE5PVEU6IFdlIGNhbiBvbmx5IHJlYWNoIHRoaXMgYnJhbmNoIGlmIHRoZSBjdXJyZW50IGFuc3dlciBpcyBjb3JyZWN0LCBvdGhlcndpc2Ugd2Ugd291bGRuJ3QgYmUgYnVybmluZyBpdC4KICAgICAgICAgICAgICAgIGRibGNoay5xdWVyeVNlbGVjdG9yKCdzcGFuJykuc2V0QXR0cmlidXRlKCd0aXRsZScsJ01hcmsgV3JvbmcnKQogICAgICAgICAgICAgICAgZGJsY2hrLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4gaScpLmNsYXNzTmFtZSA9ICdmYSBmYS10aHVtYnMtZG93bic7CiAgICAgICAgICAgICAgICBkYmxjaGsuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCAhKHNldHRpbmdzLmFsbG93X2NoYW5nZV9pbmNvcnJlY3QgfHwgIWZpcnN0X2Fuc3dlci5wYXNzZWQpKTsKICAgICAgICAgICAgICAgIGZpZWxkc2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2luY29ycmVjdCcsJ2NvcnJlY3QnKTsKICAgICAgICAgICAgICAgIGZpZWxkc2V0LmNsYXNzTGlzdC5hZGQoJ2NvbmZidXJuJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkaXRpb25hbC1jb250ZW50JykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCc8ZGl2IGlkPSJhbnN3ZXItZXhjZXB0aW9uIj48c3Bhbj4nK2Fuc3dlci5leGNlcHRpb24rJzwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItZXhjZXB0aW9uJykuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCdmYWRlSW5VcCcpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghJCgiI2Fuc3dlci1mb3JtIGZvcm0iKS5pcygiOmFuaW1hdGVkIikpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXZpZXdzJykuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICAkKCcjYW5zd2VyLWZvcm0gZm9ybScpLmVmZmVjdCgnc2hha2UnLCB7fSwgMzAwLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmV2aWV3cycpLnN0eWxlLm92ZXJmbG93WCA9ICd2aXNpYmxlJzsKICAgICAgICAgICAgICAgICAgICBpZiAoIWFuc3dlci5hY2N1cmF0ZSAmJiBpbnB1dC52YWx1ZSAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhbnN3ZXIuZXhjZXB0aW9uID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1mb3JtIGZvcm0nKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsJzxkaXYgaWQ9ImFuc3dlci1leGNlcHRpb24iIGNsYXNzPSJhbnN3ZXItZXhjZXB0aW9uLWZvcm0iPjxzcGFuPicgKyBhbnN3ZXIuZXhjZXB0aW9uICsgJzwvc3Bhbj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItZXhjZXB0aW9uJykuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCdmYWRlSW5VcCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuZmluZCgiaW5wdXQiKS5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1mb3JtIGZvcm0gaW5wdXQnKS5ibHVyKCk7CgogICAgICAgIC8vIERyYXcgJ2NvcnJlY3QnIG9yICdpbmNvcnJlY3QnIHJlc3VsdHMsIGVuYWJsZSBEb3VibGUtQ2hlY2sgYnV0dG9uLCBhbmQgY2FsY3VsYXRlIHVwZGF0ZWQgc3RhdGlzdGljcy4KICAgICAgICB0cnkge2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItZXhjZXB0aW9uJykuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCdmYWRlSW5VcCcpO30gY2F0Y2goZSkge30KICAgICAgICB2YXIgbmV3X3N0YXR1cyA9IE9iamVjdC5hc3NpZ24oe30saXRlbV9zdGF0dXMpOwogICAgICAgIHZhciByZXR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3B0aW9uLXJldHlwZScpOwogICAgICAgIHJldHlwZS5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcsICFzZXR0aW5ncy5hbGxvd19yZXR5cGluZyk7CiAgICAgICAgaWYgKGFuc3dlci5wYXNzZWQpIHsKICAgICAgICAgICAgZmllbGRzZXQuY2xhc3NMaXN0LnJlbW92ZSgnaW5jb3JyZWN0JywnY29uZmJ1cm4nKTsKICAgICAgICAgICAgZmllbGRzZXQuY2xhc3NMaXN0LmFkZCgnY29ycmVjdCcpOwogICAgICAgICAgICBkYmxjaGsucXVlcnlTZWxlY3Rvcignc3BhbicpLnNldEF0dHJpYnV0ZSgndGl0bGUnLCdNYXJrIFdyb25nJyk7CiAgICAgICAgICAgIGRibGNoay5xdWVyeVNlbGVjdG9yKCdzcGFuIGknKS5jbGFzc05hbWUgPSAnZmEgZmEtdGh1bWJzLWRvd24nOwogICAgICAgICAgICBkYmxjaGsuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCAhKHNldHRpbmdzLmFsbG93X2NoYW5nZV9pbmNvcnJlY3QgfHwgIWZpcnN0X2Fuc3dlci5wYXNzZWQpKTsKICAgICAgICAgICAgaWYgKHF0eXBlID09PSAnbWVhbmluZycpIHsKICAgICAgICAgICAgICAgIG5ld19zdGF0dXMubWMgPSAobmV3X3N0YXR1cy5tYyB8fCAwKSArIDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuZXdfc3RhdHVzLnJjID0gKG5ld19zdGF0dXMucmMgfHwgMCkgKyAxOwogICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlLnNsaWNlKC0xKSA9PT0gJ24nKSBpbnB1dC52YWx1ZSA9IGlucHV0LnZhbHVlLnNsaWNlKDAsLTEpKyfjgpMnOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCd3cm9uZ0NvdW50Jywgd3JvbmdfY250KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaWVsZHNldC5jbGFzc0xpc3QucmVtb3ZlKCdjb3JyZWN0JywnY29uZmJ1cm4nKTsKICAgICAgICAgICAgZmllbGRzZXQuY2xhc3NMaXN0LmFkZCgnaW5jb3JyZWN0Jyk7CiAgICAgICAgICAgIGRibGNoay5xdWVyeVNlbGVjdG9yKCdzcGFuJykuc2V0QXR0cmlidXRlKCd0aXRsZScsJ01hcmsgUmlnaHQnKTsKICAgICAgICAgICAgZGJsY2hrLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4gaScpLmNsYXNzTmFtZSA9ICdmYSBmYS10aHVtYnMtdXAnOwogICAgICAgICAgICBkYmxjaGsuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCAhKHNldHRpbmdzLmFsbG93X2NoYW5nZV9jb3JyZWN0IHx8IGZpcnN0X2Fuc3dlci5wYXNzZWQpKTsKICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ3dyb25nQ291bnQnLCB3cm9uZ19jbnQgKyAxKTsKICAgICAgICB9CiAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ3F1ZXN0aW9uQ291bnQnLCBxdWVzdGlvbl9jbnQgKyAxKTsKCiAgICAgICAgaWYgKCgoaXR5cGUgPT09ICdyJykgfHwgKChuZXdfc3RhdHVzLnJjIHx8IDApID49IDEpKSAmJiAoKG5ld19zdGF0dXMubWMgfHwgMCkgPj0gMSkpIHsKICAgICAgICAgICAgaWYgKHNob3dfc3JzKSB7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubGlnaHRuaW5nX2VuYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3JzX21zZ19wZXJpb2QgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBPYmplY3QuYXNzaWduKHt9LG5ld19zdGF0dXMpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JzID0gaXRlbS5zcnM7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgU3JzID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChTcnMubG9hZC5iaW5kKFNycywgc3RhdHVzLCBzcnMpLCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChTcnMucmVtb3ZlLCBzZXR0aW5ncy5zcnNfbXNnX3BlcmlvZCAqIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFNycyA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3JzLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBTcnMubG9hZChuZXdfc3RhdHVzLGl0ZW0uc3JzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ2NvbXBsZXRlZENvdW50JywgY29tcGxldGVkX2NudCArIDEpOwogICAgICAgICAgICAkLmpTdG9yYWdlLnNldCgnYWN0aXZlUXVldWUnLCBhY3RpdmVfcXVldWUuc2xpY2UoMSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCdjb21wbGV0ZWRDb3VudCcsIGNvbXBsZXRlZF9jbnQpOwogICAgICAgICAgICAkLmpTdG9yYWdlLnNldCgnYWN0aXZlUXVldWUnLCBhY3RpdmVfcXVldWUpOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VzZXItcmVzcG9uc2UiKS5kaXNhYmxlZCA9IHRydWU7CgogICAgICAgIHdpbmRvdy53a1JlZnJlc2hBdWRpbygpOwogICAgICAgIGFkZGl0aW9uYWxDb250ZW50LmVuYWJsZUJ1dHRvbnMoKTsKICAgICAgICBpZiAodHlwZW9mIGxhc3RJdGVtcyA9PT0gJ29iamVjdCcpIGxhc3RJdGVtcy5kaXNhYmxlU2Vzc2lvblN0YXRzKCk7CiAgICAgICAgdHJ5IHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYW5zd2VyLWV4Y2VwdGlvbiIpLnJlbW92ZSgpO30gY2F0Y2goZSkge30KCiAgICAgICAgLy8gT3BlbiBpdGVtIGluZm8sIGRlcGVuZGluZyBvbiBzZXR0aW5ncy4KICAgICAgICB2YXIgc2hvd2luZ19pbmZvID0gZmFsc2U7CiAgICAgICAgaWYgKGFuc3dlci5wYXNzZWQgJiYgIXNldHRpbmdzLmxpZ2h0bmluZ19lbmFibGVkICYmCiAgICAgICAgICAgIChzZXR0aW5ncy5hdXRvaW5mb19jb3JyZWN0IHx8CiAgICAgICAgICAgICAoc2V0dGluZ3MuYXV0b2luZm9fc2xpZ2h0bHlfb2ZmICYmICFhbnN3ZXIuYWNjdXJhdGUpIHx8CiAgICAgICAgICAgICAoc2V0dGluZ3MuYXV0b2luZm9fbXVsdGlfbWVhbmluZyAmJiBhbnN3ZXIubXVsdGlwbGVBbnN3ZXJzKQogICAgICAgICAgICApKSB7CiAgICAgICAgICAgIHNob3dpbmdfaW5mbyA9IHRydWU7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24taXRlbS1pbmZvJykuY2xpY2soKTsKICAgICAgICB9IGVsc2UgaWYgKCFhbnN3ZXIucGFzc2VkICYmICEoc2V0dGluZ3MubGlnaHRuaW5nX2VuYWJsZWQgJiYgIXNldHRpbmdzLmRlbGF5X3dyb25nKSAmJiBzZXR0aW5ncy5hdXRvaW5mb19pbmNvcnJlY3QpIHsKICAgICAgICAgICAgc2hvd2luZ19pbmZvID0gdHJ1ZTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1pdGVtLWluZm8nKS5jbGljaygpOwogICAgICAgIH0KCiAgICAgICAgLy8gV2hlbiB1c2VyIGlzIHN1Ym1pdHRpbmcgYW4gYW5zd2VyLCBkaXNwbGF5IHRoZSBvbi1zY3JlZW4gbWVzc2FnZSB0aGF0IFdhbmlrYW5pIG5vcm1hbGx5IHNob3dzLgogICAgICAgIGlmIChzaG93X21zZ3MpIHsKICAgICAgICAgICAgdmFyIG1zZzsKICAgICAgICAgICAgaWYgKGFuc3dlci5wYXNzZWQpIHsKICAgICAgICAgICAgICAgIGlmICghYW5zd2VyLmFjY3VyYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgbXNnID0gJ1lvdXIgYW5zd2VyIHdhcyBhIGJpdCBvZmYuIENoZWNrIHRoZSAnK3F0eXBlKycgdG8gbWFrZSBzdXJlIHlvdSBhcmUgY29ycmVjdCc7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFuc3dlci5tdWx0aXBsZUFuc3dlcnMpIHsKICAgICAgICAgICAgICAgICAgICBtc2cgPSAnRGlkIHlvdSBrbm93IHRoaXMgaXRlbSBoYXMgbXVsdGlwbGUgcG9zc2libGUgJytxdHlwZSsncz8nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGFuc3dlci5jdXN0b21fbXNnKSB7CiAgICAgICAgICAgICAgICBtc2cgPSBhbnN3ZXIuY3VzdG9tX21zZzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1zZyA9ICdOZWVkIGhlbHA/IFZpZXcgdGhlIGNvcnJlY3QgJytxdHlwZSsnIGFuZCBtbmVtb25pYyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1zZykgewogICAgICAgICAgICAgICAgaWYgKHNob3dpbmdfaW5mbykgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbmZvcm1hdGlvbicpLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsJzxkaXYgaWQ9ImFuc3dlci1leGNlcHRpb24iIHN0eWxlPSJ0b3A6MDsiPjxzcGFuPicrbXNnKyc8L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1leGNlcHRpb24nKS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsJ2ZhZGVJblVwJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGRpdGlvbmFsLWNvbnRlbnQnKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsJzxkaXYgaWQ9ImFuc3dlci1leGNlcHRpb24iPjxzcGFuPicrbXNnKyc8L3NwYW4+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fuc3dlci1leGNlcHRpb24nKS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsJ2ZhZGVJblVwJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgaXRlbV9pbmZvX2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24taXRlbS1pbmZvJyk7CiAgICAgICAgICAgICAgICBsZXQgaWlwb3MgPSBpdGVtX2luZm9fYnRuLm9mZnNldExlZnQgKyBpdGVtX2luZm9fYnRuLm9mZnNldFdpZHRoLzI7CiAgICAgICAgICAgICAgICBsZXQgYW5zd2VyX2V4Y2VwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItZXhjZXB0aW9uPnNwYW4nKTsKICAgICAgICAgICAgICAgIGFuc3dlcl9leGNlcHRpb24uc3R5bGUudHJhbnNmb3JtID0gJyc7CiAgICAgICAgICAgICAgICBsZXQgYWVwb3MgPSBhbnN3ZXJfZXhjZXB0aW9uLm9mZnNldExlZnQgKyBhbnN3ZXJfZXhjZXB0aW9uLm9mZnNldFdpZHRoLzI7CiAgICAgICAgICAgICAgICBhbnN3ZXJfZXhjZXB0aW9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKCcrKGlpcG9zLWFlcG9zKSsncHgpJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gbmV3X3N1Ym1pdF9oYW5kbGVyKCkgLSBJbnRlcmNlcHQgaGFuZGxlciBmb3IgJ3N1Ym1pdCcgYnV0dG9uLiAgT3ZlcnJpZGVzIGRlZmF1bHQgYmVoYXZpb3IgYXMgbmVlZGVkLgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGZ1bmN0aW9uIG5ld19zdWJtaXRfaGFuZGxlcihlKSB7CiAgICAgICAgLy8gRG9uJ3QgcHJvY2VzcyAnc3VibWl0JyBpZiB3ZSBhcmUgaWdub3JpbmcgdGVtcG9yYXJpbHkgKHRvIHByZXZlbnQgZG91YmxlLXRhcHBpbmcgcGFzdCBpbXBvcnRhbnQgaW5mbykKCiAgICAgICAgaWYgKGlnbm9yZV9zdWJtaXQpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlc3NlcyA8ZW50ZXI+IGR1cmluZyBkZWxheSBwZXJpb2QsCiAgICAgICAgICAgIC8vIFdLIGVuYWJsZXMgdGhlIHVzZXIgaW5wdXQgZmllbGQsIHdoaWNoIG1ha2VzIEl0ZW0gSW5mbyBub3Qgd29yay4KICAgICAgICAgICAgLy8gTGV0J3MgbWFrZSBzdXJlIHRoZSBpbnB1dCBmaWVsZCBpcyBkaXNhYmxlZC4KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VzZXItcmVzcG9uc2UiKS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0sMSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBzdWJtaXR0ZWRfaW1tZWRpYXRlbHkgPSBmYWxzZTsKICAgICAgICBzd2l0Y2goc3RhdGUpIHsKICAgICAgICAgICAgY2FzZSAnZmlyc3Rfc3VibWl0JzoKICAgICAgICAgICAgICAgIC8vIFdlIGludGVyY2VwdCB0aGUgZmlyc3QgJ3N1Ym1pdCcgY2xpY2ssIGFuZCBzaW11bGF0ZSBub3JtYWwgV2FuaWthbmkgc2NyZWVuIGJlaGF2aW9yLgogICAgICAgICAgICAgICAgc3RhdGUgPSAnc2Vjb25kX3N1Ym1pdCc7CgogICAgICAgICAgICAgICAgLy8gQ2FwdHVyZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSBiZWZvcmUgc3VibWl0dGluZyB0aGUgYW5zd2VyLgogICAgICAgICAgICAgICAgaXRlbSA9ICQualN0b3JhZ2UuZ2V0KCdjdXJyZW50SXRlbScpOwogICAgICAgICAgICAgICAgaXR5cGUgPSAoaXRlbS5yYWQgPyAncicgOiAoaXRlbS5rYW4gPyAnaycgOiAndicpKTsKICAgICAgICAgICAgICAgIGl0ZW1faWQgPSBpdHlwZSArIGl0ZW0uaWQ7CiAgICAgICAgICAgICAgICBpdGVtX3N0YXR1cyA9ICQualN0b3JhZ2UuZ2V0KGl0ZW1faWQpIHx8IHt9OwogICAgICAgICAgICAgICAgcXR5cGUgPSAkLmpTdG9yYWdlLmdldCgncXVlc3Rpb25UeXBlJyk7CiAgICAgICAgICAgICAgICB3cm9uZ19jbnQgPSAkLmpTdG9yYWdlLmdldCgnd3JvbmdDb3VudCcpIHx8IDA7CiAgICAgICAgICAgICAgICBxdWVzdGlvbl9jbnQgPSAkLmpTdG9yYWdlLmdldCgncXVlc3Rpb25Db3VudCcpIHx8IDA7CiAgICAgICAgICAgICAgICBjb21wbGV0ZWRfY250ID0gJC5qU3RvcmFnZS5nZXQoJ2NvbXBsZXRlZENvdW50JykgfHwgMDsKICAgICAgICAgICAgICAgIGFjdGl2ZV9xdWV1ZSA9ICQualN0b3JhZ2UuZ2V0KCdhY3RpdmVRdWV1ZScpIHx8IFtdOwogICAgICAgICAgICAgICAgc2hvd19zcnMgPSAkLmpTdG9yYWdlLmdldCgnci9zcnNJbmRpY2F0b3InKTsKCiAgICAgICAgICAgICAgICAvLyBBc2sgV2FuaWthbmkgaWYgdGhlIGFuc3dlciBpcyByaWdodCAoYnV0IHdlIGRvbid0IGFjdHVhbGx5IHN1Ym1pdCB0aGUgYW5zd2VyKS4KICAgICAgICAgICAgICAgIGFuc3dlciA9IG9sZF9hbnN3ZXJfY2hlY2tlcihxdHlwZSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VzZXItcmVzcG9uc2UiKS52YWx1ZSk7CgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzY3JlZW4gdG8gcmVmbGVjdCB0aGUgcmVzdWx0cyBvZiBvdXIgY2hlY2tlZCBhbnN3ZXIuCiAgICAgICAgICAgICAgICAkKCJodG1sLCBib2R5IikuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgMjAwKTsKCiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBbbWVhbmluZyBoYXMga2FuYV0gb3IgW3JlYWRpbmcgaGFzIGxhdGluXQogICAgICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1yZXNwb25zZScpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKChxdHlwZSA9PT0gJ3JlYWRpbmcnICYmIHdpbmRvdy5hbnN3ZXJDaGVja2VyLmlzTm9uS2FuYVByZXNlbnQodGV4dCkpIHx8CiAgICAgICAgICAgICAgICAgICAgKHF0eXBlID09PSAnbWVhbmluZycgJiYgd2luZG93LmFuc3dlckNoZWNrZXIuaXNLYW5hUHJlc2VudCh0ZXh0KSkgfHwKICAgICAgICAgICAgICAgICAgICAodGV4dCA9PT0gJycpKSB7CiAgICAgICAgICAgICAgICAgICAgYW5zd2VyLmV4Y2VwdGlvbiA9IGFuc3dlci5leGNlcHRpb24gfHwgdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBOb24tZXhhY3QgYW5zd2VyIChpLmUuICJDbG9zZSBidXQgbm8gY2lnYXIiIHNjcmlwdCkKICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIucGFzc2VkICYmICFhbnN3ZXIuYWNjdXJhdGUpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNldHRpbmdzLnR5cG9fYWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dhcm4nOiBhbnN3ZXIuZXhjZXB0aW9uID0gJ1lvdXIgYW5zd2VyIHdhcyBjbG9zZSwgYnV0IG5vdCBleGFjdCc7IGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd3cm9uZyc6IGFuc3dlci5wYXNzZWQgPSBmYWxzZTsgYW5zd2VyLmN1c3RvbV9tc2cgPSAnWW91ciBhbnN3ZXIgd2FzIG5vdCBleGFjdCwgYXMgcmVxdWlyZWQgYnkgeW91ciBzZXR0aW5ncy4nOyBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHJlYWRpbmcvbWVhbmluZyBtaXh1cHMKICAgICAgICAgICAgICAgIGlmICghYW5zd2VyLnBhc3NlZCkgewogICAgICAgICAgICAgICAgICAgIGlmIChxdHlwZSA9PT0gJ21lYW5pbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY2NlcHRlZF9yZWFkaW5ncyA9IFtdLmNvbmNhdChpdGVtLmthbmEsIGl0ZW0ub24sIGl0ZW0ua3VuLCBpdGVtLm5hbm9yaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnN3ZXJfYXNfa2FuYSA9IHRvX2thbmEoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItcmVzcG9uc2UnKS52YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZF9yZWFkaW5ncy5pbmRleE9mKGFuc3dlcl9hc19rYW5hKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud3JvbmdfYW5zd2VyX3R5cGVfYWN0aW9uID09PSAnd2FybicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXIuZXhjZXB0aW9uID0gJ09vcHMsIHdlIHdhbnQgdGhlIG1lYW5pbmcsIG5vdCB0aGUgcmVhZGluZy4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXIuZXhjZXB0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbHRob3VnaCBXYW5pa2FuaSBub3cgY2hlY2tzIGZvciByZWFkaW5ncyBlbnRlcmVkIGFzIG1lYW5pbmdzLCBpdCBvbmx5CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrcyB0aGUgJ3ByZWZlcnJlZCcgcmVhZGluZy4gIEhlcmUsIHdlIGNoZWNrIGFsbCByZWFkaW5ncy4KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2VwdGVkX21lYW5pbmdzID0gaXRlbS5lbjsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkX21lYW5pbmdzID0gYWNjZXB0ZWRfbWVhbmluZ3MuY29uY2F0KGl0ZW0uc3luLCBpdGVtLmF1eGlsaWFyeV9tZWFuaW5ncwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigobWVhbmluZykgPT4gbWVhbmluZy50eXBlID09PSAnd2hpdGVsaXN0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKG1lYW5pbmcpID0+IG1lYW5pbmcubWVhbmluZykpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZWFuaW5nc19hc19oaXJhZ2FuYSA9IGFjY2VwdGVkX21lYW5pbmdzLm1hcChtID0+IHRvX2thbmEobS50b0xvd2VyQ2FzZSgpKS5yZXBsYWNlKC9ccy9nLCcnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnN3ZXJfYXNfaGlyYWdhbmEgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLXJlc3BvbnNlJykudmFsdWUudG9Mb3dlckNhc2UoKSkubWFwKGMgPT4gd2FuYWthbmEudG9IaXJhZ2FuYShjKSkuam9pbignJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZWFuaW5nc19hc19oaXJhZ2FuYS5pbmRleE9mKGFuc3dlcl9hc19oaXJhZ2FuYSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLndyb25nX2Fuc3dlcl90eXBlX2FjdGlvbiA9PT0gJ3dhcm4nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyLmV4Y2VwdGlvbiA9ICdPb3BzLCB3ZSB3YW50IHRoZSByZWFkaW5nLCBub3QgdGhlIG1lYW5pbmcuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyLmV4Y2VwdGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBXYW5pa2FuaSB3YXJuaW5ncyB0aGF0IHNob3VsZCBiZSBjaGFuZ2VkIHRvICd3cm9uZycsIGJhc2VkIG9uIHNldHRpbmdzLgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhbnN3ZXIuZXhjZXB0aW9uID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGlmICgoKHNldHRpbmdzLmthbmppX21lYW5pbmdfZm9yX3ZvY2FiX2FjdGlvbiA9PT0gJ3dyb25nJykgJiYgYW5zd2VyLmV4Y2VwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3YW50IHRoZSB2b2NhYnVsYXJ5IG1lYW5pbmcsIG5vdCB0aGUga2FuamkgbWVhbmluZycpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAoKHNldHRpbmdzLmthbmppX3JlYWRpbmdfZm9yX3ZvY2FiX2FjdGlvbiA9PT0gJ3dyb25nJykgJiYgYW5zd2VyLmV4Y2VwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3YW50IHRoZSB2b2NhYnVsYXJ5IHJlYWRpbmcsIG5vdCB0aGUga2FuamkgcmVhZGluZycpKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAoKHNldHRpbmdzLndyb25nX251bWJlcl9uX2FjdGlvbiA9PT0gJ3dyb25nJykgJiYgYW5zd2VyLmV4Y2VwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdmb3JnZXQgdGhhdCDjgpMnKSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgKChzZXR0aW5ncy5zbWFsbF9rYW5hX2FjdGlvbiA9PT0gJ3dyb25nJykgJiYgYW5zd2VyLmV4Y2VwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3YXRjaCBvdXQgZm9yIHRoZSBzbWFsbCcpKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3dlci5leGNlcHRpb24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyLnBhc3NlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBtb2RpZmllZCBhbnN3ZXIgdG8gbmV3X2Fuc3dlciwgd2hpY2ggaXMgd2hhdCB3aWxsIGJlIHN1Ym1pdHRlZCB0byBXYW5pa2FuaS4KICAgICAgICAgICAgICAgIG5ld19hbnN3ZXIgPSBPYmplY3QuYXNzaWduKHt9LCBhbnN3ZXIpOwoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBleGNlcHRpb25zIHRoYXQgYXJlIHByZXZlbnRpbmcgdGhlIGFuc3dlciBmcm9tIGJlaW5nIHN1Ym1pdHRlZC4KICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIuZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0X2Fuc3dlcl9zdGF0ZShhbnN3ZXIsIHRydWUgLyogc2hvd19tc2dzICovKTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9ICdmaXJzdF9zdWJtaXQnOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB0aGUgYW5zd2VyIGlzIHJlYWR5IGZvciBzdWJtaXNzaW9uIChpLmUuIG5vIGV4Y2VwdGlvbnMpLgogICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgdXNlcidzIGZpcnN0IGF0dGVtcHQgYXQgdGhpcyBxdWVzdGlvbiwgcmVtZW1iZXIgdGhlIHJlc3VsdCBzbwogICAgICAgICAgICAgICAgLy8gd2UgY2FuIGRldGVybWluZSB3aGV0aGVyIHRoZXkgYWx0ZXJlZCB0aGVpciBhbnN3ZXIgbGF0ZXIuCiAgICAgICAgICAgICAgICBpZiAoISgoaXRlbV9pZCA9PT0gbGFzdF9pdGVtX2lkKSAmJiAocXR5cGUgPT09IGxhc3RfcXR5cGUpKSkgewogICAgICAgICAgICAgICAgICAgIGZpcnN0X2Fuc3dlciA9IE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZTpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdXNlci1yZXNwb25zZSIpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0X2Fuc3dlcnM6Z2V0X2NvcnJlY3RfYW5zd2VycygpLAogICAgICAgICAgICAgICAgICAgICAgICBjb3JyZWN0X2Fuc3dlcl9pbmRleDogMCwKICAgICAgICAgICAgICAgICAgICB9LCBhbnN3ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGFzdF9pdGVtX2lkID0gaXRlbV9pZDsKICAgICAgICAgICAgICAgIGxhc3RfcXR5cGUgPSBxdHlwZTsKCiAgICAgICAgICAgICAgICAvLyBPcHRpb25hbGx5IChhY2NvcmRpbmcgdG8gc2V0dGluZ3MpLCB0ZW1wb3JhcmlseSBpZ25vcmUgYW55IGFkZGl0aW9uYWwgY2xpY2tzIG9uIHRoZQogICAgICAgICAgICAgICAgLy8gJ3N1Ym1pdCcgYnV0dG9uIHRvIHByZXZlbnQgdGhlIHVzZXIgZnJvbSBjbGlja2luZyBwYXN0IGltcG9ydGFudCBpbmZvIGFib3V0IHRoZSBhbnN3ZXIuCiAgICAgICAgICAgICAgICBpZiAoKCFhbnN3ZXIucGFzc2VkICYmIHNldHRpbmdzLmRlbGF5X3dyb25nKSB8fAogICAgICAgICAgICAgICAgICAgIChhbnN3ZXIucGFzc2VkICYmCiAgICAgICAgICAgICAgICAgICAgICgoIWFuc3dlci5hY2N1cmF0ZSAmJiBzZXR0aW5ncy5kZWxheV9zbGlnaHRseV9vZmYpIHx8CiAgICAgICAgICAgICAgICAgICAgICAoYW5zd2VyLm11bHRpcGxlQW5zd2VycyAmJiBzZXR0aW5ncy5kZWxheV9tdWx0aV9tZWFuaW5nKSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgc2V0X2Fuc3dlcl9zdGF0ZShhbnN3ZXIsIHRydWUgLyogc2hvd19tc2dzICovKTsKICAgICAgICAgICAgICAgICAgICBkb19kZWxheSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzZXRfYW5zd2VyX3N0YXRlKGFuc3dlciwgdHJ1ZSAvKiBzaG93X21zZ3MgKi8pOwogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxpZ2h0bmluZ19lbmFibGVkKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3X3N1Ym1pdF9oYW5kbGVyKGUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGNhc2UgJ3NlY29uZF9zdWJtaXQnOgoKICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGNoYW5nZWQgdGhlaXIgYW5zd2VyIHRvICdjb3JyZWN0JywgbWFyayB0aGUgaXRlbQogICAgICAgICAgICAgICAgLy8gaW4gc3RvcmFnZSwgc28gd2UgY2FuIHdhcm4gdGhlIHVzZXIgaWYgaXQgY29tZXMgdXAgZm9yIGJ1cm4uCiAgICAgICAgICAgICAgICAvLyBUaGUgbWFyayBpcyBrZXB0IGZvciAxMCBkYXlzIGluIGNhc2UgdGhlIHVzZXIgZG9lc24ndCBjb21wbGV0ZQogICAgICAgICAgICAgICAgLy8gdGhlIGl0ZW0gKHJlYWRpbmcgYW5kIG1lYW5pbmcpIHdpdGhpbiBvbmUgc2Vzc2lvbi4KICAgICAgICAgICAgICAgIGlmICghZmlyc3RfYW5zd2VyLnBhc3NlZCAmJiBuZXdfYW5zd2VyLnBhc3NlZCkgewogICAgICAgICAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KCdjb25mYnVybi8nICsgaXRlbS5pZCwgdHJ1ZSwge1RUTDoxMDAwKjM2MDAqMjQqMTB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBCZWZvcmUgYWNjZXB0aW5nIGEgZmluYWwgc3VibWl0LCBub3RpZnkgdGhlIHVzZXIgaWYgaXRlbSB3aWxsIGJ1cm4gKGRlcGVuZGluZyBvbiBzZXR0aW5ncykuCiAgICAgICAgICAgICAgICBuZXdfYW5zd2VyLmV4Y2VwdGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKCFuZXdfYW5zd2VyLmNvbmZpcm1pbmdfYnVybikgewogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gd2FybiB0aGUgdXNlciB0aGF0IHRoaXMgaXMgYSAnYnVybicgcmV2aWV3LgogICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6ICJpdGVtX3N0YXR1cy5uaSIgc2VlbXMgdG8gYmUgdXNlZCBieSBvdGhlciBzY3JpcHRzLgogICAgICAgICAgICAgICAgICAgIHZhciB3aWxsX2J1cm4gPSAoaXRlbS5zcnMgPT09IDgpICYmIG5ld19hbnN3ZXIucGFzc2VkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICEoaXRlbV9zdGF0dXMubWkgfHwgaXRlbV9zdGF0dXMucmkgfHwgaXRlbV9zdGF0dXMubmkpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoaXR5cGUgPT09ICdyJykgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICgoKGl0ZW1fc3RhdHVzLnJjIHx8IDApICsgKHF0eXBlID09PSAncmVhZGluZycgPyAxIDogMCkgPiAwKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICgoaXRlbV9zdGF0dXMubWMgfHwgMCkgKyAocXR5cGUgPT09ICdtZWFuaW5nJyA/IDEgOiAwKSA+IDApKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGNoZWF0ZWQgPSAkLmpTdG9yYWdlLmdldCgnY29uZmJ1cm4vJyArIGl0ZW0uaWQpID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmICh3aWxsX2J1cm4gJiYgKHNldHRpbmdzLndhcm5fYnVybiAhPT0gJ25ldmVyJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvbXB0IGJlZm9yZSBidXJuaW5nLCBhbmQgc3VwcHJlc3MgcHJvY2VlZGluZyBmb3IgYSBtb21lbnQuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVhdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfYW5zd2VyLmV4Y2VwdGlvbiA9ICdZb3UgbW9kaWZpZWQgYW4gYW5zd2VyIG9uIHRoaXMgaXRlbS4gSXQgd2lsbCBiZSBidXJuZWQgaWYgeW91IGNvbnRpbnVlLic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3Mud2Fybl9idXJuID09PSAnYWx3YXlzJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3X2Fuc3dlci5leGNlcHRpb24gPSAnVGhpcyBpdGVtIHdpbGwgYmUgYnVybmVkIGlmIHlvdSBjb250aW51ZS4nCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld19hbnN3ZXIuZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdfYW5zd2VyLmNvbmZpcm1pbmdfYnVybiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRfYW5zd2VyX3N0YXRlKG5ld19hbnN3ZXIsIHRydWUgLyogc2hvd19tc2dzICovKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBzdXJlIHdoYXQncyBjYXVzaW5nIHRoZSBpbnB1dCBmaWVsZCB0byBiZSByZS1lbmFibGVkLCBidXQgd2UgaGF2ZSB0byBkaXNhYmxlIGl0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VzZXItcmVzcG9uc2UiKS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5idXJuX2RlbGF5X3BlcmlvZCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb19kZWxheShzZXR0aW5ncy5idXJuX2RlbGF5X3BlcmlvZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBidXJuaW5nIHRoZSBpdGVtIG5vdywgc28gd2UgY2FuIHJlbW92ZSB0aGUgbWFya2VyLgogICAgICAgICAgICAgICAgICAgICQualN0b3JhZ2UuZGVsZXRlS2V5KCdjb25mYnVybi8nICsgaXRlbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld19hbnN3ZXIuY29uZmlybWluZ19idXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFdlIGludGVyY2VwdGVkIHRoZSBmaXJzdCBzdWJtaXQsIGFsbG93aW5nIHRoZSB1c2VyIHRvIG9wdGlvbmFsbHkgbW9kaWZ5IHRoZWlyIGFuc3dlci4KICAgICAgICAgICAgICAgIC8vIE5vdywgZWl0aGVyIHRoZSB1c2VyIGhhcyBjbGlja2VkIHN1Ym1pdCBhZ2Fpbiwgb3IgbGlnaHRuaW5nIGlzIGVuYWJsZWQgYW5kIHdlIGFyZSBhdXRvbWF0aWNhbGx5IGNsaWNraW5nIHN1Ym1pdCBhZ2Fpbi4KICAgICAgICAgICAgICAgIC8vIFNpbmNlIFdhbmlrYW5pIGRpZG4ndCBzZWUgdGhlIGZpcnN0IHN1Ym1pdCAoYmVjYXVzZSB3ZSBpbnRlcmNlcHRlZCBpdCksIG5vdyB3ZSBuZWVkIHRvIHNpbXVsYXRlIHR3byBzdWJtaXRzIGZvciBXYW5pa2FuaToKICAgICAgICAgICAgICAgIC8vICAgMS4gT25lIGZvciBXYW5pa2FuaSB0byBjaGVjayB0aGUgKHBvc3NpYmx5IGNvcnJlY3RlZCkgcmVzdWx0LCBhbmQKICAgICAgICAgICAgICAgIC8vICAgMi4gT25lIGZvciBXYW5pa2FuaSB0byBtb3ZlIG9uIHRvIHRoZSBuZXh0IHF1ZXN0aW9uLgoKICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBzY3JlZW4gdG8gcHJlLXN1Ym1pdHRlZCBzdGF0ZSwgc28gV2FuaWthbmkgd29uJ3QgZ2V0IGNvbmZ1c2VkIHdoZW4gaXQgdHJpZXMgdG8gcHJvY2VzcyB0aGUgYW5zd2VyLgogICAgICAgICAgICAgICAgLy8gV2FuaWthbmkgY29kZSB3aWxsIHRoZW4gdXBkYXRlIHRoZSBzY3JlZW4gYWNjb3JkaW5nIHRvIG91ciBmb3JjZWQgYW5zd2VyLWNoZWNrIHJlc3VsdC4KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24tZG91YmxlLWNoZWNrJykuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24tZG91YmxlLWNoZWNrIHNwYW4nKS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywnRG91YmxlLUNoZWNrJykKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvcHRpb24tZG91YmxlLWNoZWNrIHNwYW4gaScpLmNsYXNzTmFtZSA9ICdmYSBmYS10aHVtYnMtdXAnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1yZXR5cGUnKS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItcmVzcG9uc2UnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ3dyb25nQ291bnQnLCB3cm9uZ19jbnQpOwogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ3F1ZXN0aW9uQ291bnQnLCBxdWVzdGlvbl9jbnQpOwogICAgICAgICAgICAgICAgJC5qU3RvcmFnZS5zZXQoJ2NvbXBsZXRlZENvdW50JywgY29tcGxldGVkX2NudCk7CiAgICAgICAgICAgICAgICAkLmpTdG9yYWdlLnNldCgnYWN0aXZlUXVldWUnLCBhY3RpdmVfcXVldWUpOwoKICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgV0sgZnJvbSBwb3N0aW5nIGEgc2Vjb25kIFNSUyBub3RpY2UuCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFNycyA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICBzcnNfbG9hZCA9IFNycy5sb2FkOwogICAgICAgICAgICAgICAgICAgIFNycy5sb2FkID0gZnVuY3Rpb24oKXt9OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IHN1Ym1pdCBhY3R1YWxseSBmb3J3YXJkZWQgdG8gV2FuaWthbmkuCiAgICAgICAgICAgICAgICAvLyBJdCB3aWxsIGNoZWNrIG91ciAocG9zc2libHkgY29ycmVjdGVkKSBhbnN3ZXIuCiAgICAgICAgICAgICAgICB2YXIgb2xkX2F1ZGlvQXV0b3BsYXkgPSB3aW5kb3cuYXVkaW9BdXRvcGxheTsKICAgICAgICAgICAgICAgIHdpbmRvdy5hdWRpb0F1dG9wbGF5ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgY2xpY2tfc3VibWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGhpZGRlbiB0aGlyZCBjbGljayBmcm9tIGFib3ZlLCB3aGljaCBXYW5pa2FuaSB0aGlua3MgaXMgdGhlIHNlY29uZCBjbGljay4KICAgICAgICAgICAgICAgICAgICAvLyBXYW5pa2FuaSB3aWxsIG1vdmUgdG8gdGhlIG5leHQgcXVlc3Rpb24uCiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAnZmlyc3Rfc3VibWl0JzsKCiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkaXNhYmxlIHRoZSBpbnB1dCBmaWVsZCwgc28gV2FuaWthbmkgd2lsbCBzZWUgdGhpcyBhcyB0aGUgc2Vjb25kIGNsaWNrLgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLXJlc3BvbnNlJykuZGlzYWJsZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBTUlMgbWVzc2FnZSBmdW5jdGlvbiwgd2hpY2ggd2UgZGlzYWJsZWQgaW4gc2Vjb25kX3N1Ym1pdCBhYm92ZS4KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFNycyA9PT0gJ29iamVjdCcpIFNycy5sb2FkID0gc3JzX2xvYWQ7CgogICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIHNlY29uZCBzdWJtaXQgYWN0dWFsbHkgZm9yd2FyZGVkIHRvIFdhbmlrYW5pLgogICAgICAgICAgICAgICAgICAgIC8vIEl0IHdpbGwgbW92ZSBvbiB0byB0aGUgbmV4dCBxdWVzdGlvbi4KICAgICAgICAgICAgICAgICAgICBjbGlja19zdWJtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmF1ZGlvQXV0b3BsYXkgPSBvbGRfYXVkaW9BdXRvcGxheTsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LndrUmVmcmVzaEF1ZGlvKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFNpbXVsYXRlIGlucHV0IGNoYXJhY3RlciBieSBjaGFyYWN0ZXIgYW5kIGNvbnZlcnQgd2l0aCBXYW5hS2FuYSB0byBrYW5hCiAgICAvLyAgLS0gQ29udHJpYnV0ZWQgYnkgdXNlciBAU2lueWF2ZW4KICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiB0b19rYW5hKHRleHQpIHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0ZXh0KS5yZWR1Y2UoKHRvdGFsLCBjKSA9PiB3YW5ha2FuYS50b0thbmEodG90YWwgKyBjLCB7SU1FTW9kZTogdHJ1ZX0pLCAiIikucmVwbGFjZSgvbiQvLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDEyNDM1KSk7CiAgICB9CgogICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIFJlc2l6ZSB0aGUgYnV0dG9ucyBhY2NvcmRpbmcgdG8gaG93IG1hbnkgYXJlIHZpc2libGUuCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZnVuY3Rpb24gcmVzaXplX2J1dHRvbnMoKSB7CiAgICAgICAgdmFyIGJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhZGRpdGlvbmFsLWNvbnRlbnQgdWw+bGknKSk7CiAgICAgICAgdmFyIGJ0bl9jb3VudCA9IGJ1dHRvbnMubGVuZ3RoIC0gYnV0dG9ucy5maWx0ZXIoKGVsZW0pPT5lbGVtLm1hdGNoZXMoJy5oaWRkZW4sW2hpZGRlbl0nKSkubGVuZ3RoOwogICAgICAgIGZvciAobGV0IGJ0biBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjYWRkaXRpb25hbC1jb250ZW50IHVsID4gbGknKSkgewogICAgICAgICAgYnRuLnN0eWxlLndpZHRoID0gTWF0aC5mbG9vcig5OTAwL2J0bl9jb3VudCkvMTAwICsgJyUnOwogICAgICAgIH0KICAgIH0KCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gRXh0ZXJuYWwgaG9vayBmb3IgQHBvbHYncyBzY3JpcHQsICJXYW5pS2FuaSBEaXNhYmxlIERlZmF1bHQgQW5zd2VycyIKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBnb2JqLnNldF9zdGF0ZSA9IGZ1bmN0aW9uKF9zdGF0ZSkgewogICAgICAgIHN0YXRlID0gX3N0YXRlOwogICAgfTsKCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gc3RhcnR1cCgpIC0gSW5zdGFsbCBvdXIgaW50ZXJjZXB0IGhhbmRsZXJzLCBhbmQgYWRkIG91ciBEb3VibGUtQ2hlY2sgYnV0dG9uIGFuZCBob3RrZXkKICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBmdW5jdGlvbiBzdGFydHVwKCkgewogICAgICAgIC8vIEludGVyY2VwdCB0aGUgc3VibWl0IGJ1dHRvbiBoYW5kbGVyLgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBpbnRlcmNlcHRlZCA9IGZhbHNlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2xkX3N1Ym1pdF9oYW5kbGVyID0gJC5fZGF0YSggJCgnI2Fuc3dlci1mb3JtIGZvcm0nKVswXSwgJ2V2ZW50cycpLnN1Ym1pdFswXS5oYW5kbGVyOwogICAgICAgICAgICAgICAgJC5fZGF0YSggJCgnI2Fuc3dlci1mb3JtIGZvcm0nKVswXSwgJ2V2ZW50cycpLnN1Ym1pdFswXS5oYW5kbGVyID0gbmV3X3N1Ym1pdF9oYW5kbGVyOwogICAgICAgICAgICAgICAgaW50ZXJjZXB0ZWQgPSB0cnVlOwogICAgICAgICAgICB9IGNhdGNoKGVycikge30KICAgICAgICAgICAgaWYgKCFpbnRlcmNlcHRlZCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBvbGRfc3VibWl0X2hhbmRsZXIgPSAkLl9kYXRhKCAkKCcjYW5zd2VyLWZvcm0gYnV0dG9uJylbMF0sICdldmVudHMnKS5jbGlja1swXS5oYW5kbGVyOwogICAgICAgICAgICAgICAgICAgICQuX2RhdGEoICQoJyNhbnN3ZXItZm9ybSBidXR0b24nKVswXSwgJ2V2ZW50cycpLmNsaWNrWzBdLmhhbmRsZXIgPSBuZXdfc3VibWl0X2hhbmRsZXI7CiAgICAgICAgICAgICAgICAgICAgaW50ZXJjZXB0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHt9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGludGVyY2VwdGVkKSB7CiAgICAgICAgICAgICAgICBvbGRfYW5zd2VyX2NoZWNrZXIgPSB3aW5kb3cuZW5oYW5jZUFuc3dlckNoZWNrZXIoe2V2YWx1YXRlOndpbmRvdy5hbnN3ZXJDaGVja2VyLmV2YWx1YXRlfSkuZXZhbHVhdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGVycikge30KICAgICAgICBpZiAodHlwZW9mIG9sZF9zdWJtaXRfaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2Ygb2xkX2Fuc3dlcl9jaGVja2VyICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGFsZXJ0KCdXYW5pa2FuaSBEb3VibGUtQ2hlY2sgc2NyaXB0IGlzIG5vdCB3b3JraW5nLicpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBDbGVhciB3YXJuaW5nIHBvcHVwcyBpZiBxdWVzdGlvbiBjaGFuZ2VzIGR1ZSB0byByZWFzb25zIG91dHNpZGUgb2YgdGhpcyBzY3JpcHQKICAgICAgICAkLmpTdG9yYWdlLmxpc3RlbktleUNoYW5nZSgiY3VycmVudEl0ZW0iLCBmdW5jdGlvbihrZXksIGFjdGlvbil7CiAgICAgICAgICAgIHNldF9hbnN3ZXJfc3RhdGUoe3Jlc2V0OnRydWV9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gSW5zdGFsbCB0aGUgTGlnaHRuaW5nIE1vZGUgYnV0dG9uLgogICAgICAgIGRvY3VtZW50LmhlYWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCc8c3R5bGU+I2xpZ2h0bmluZy1tb2RlLmRvdWJsZWNoZWNrLWFjdGl2ZSB7Y29sb3I6I2ZmMDsgb3BhY2l0eToxLjA7fTwvc3R5bGU+Jyk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1bW1hcnktYnV0dG9uJykuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCc8YSBpZD0ibGlnaHRuaW5nLW1vZGUiIGhyZWY9IiMiIGhpZGRlbiA+PGkgY2xhc3M9ImZhIGZhLWJvbHQiIHRpdGxlPSJMaWdodG5pbmcgTW9kZSAtIFdoZW4gZW5hYmxlZCwgYXV0by1cbmFkdmFuY2UgYWZ0ZXIgYW5zd2VyaW5nIGNvcnJlY3RseS4iPjwvaT48L2E+Jyk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpZ2h0bmluZy1tb2RlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaWdodG5pbmdfY2xpY2tlZCk7CgogICAgICAgIC8vIEluc3RhbGwgdGhlIERvdWJsZS1DaGVjayBmZWF0dXJlcy4KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkaXRpb25hbC1jb250ZW50IHVsJykuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZGl0aW9uYWwtY29udGVudCB1bCcpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywKICAgICAgICAgICAgYDxsaSBpZD0ib3B0aW9uLWRvdWJsZS1jaGVjayIgY2xhc3M9ImRpc2FibGVkIj48c3BhbiB0aXRsZT0iRG91YmxlIENoZWNrIj48aSBjbGFzcz0iZmEgZmEtdGh1bWJzLXVwIj48L2k+PC9zcGFuPjwvbGk+CiAgICAgICAgICAgIDxsaSBpZD0ib3B0aW9uLXJldHlwZSIgY2xhc3M9ImRpc2FibGVkIj48c3BhbiB0aXRsZT0iUmV0eXBlIj48aSBjbGFzcz0iZmEgZmEtdW5kbyI+PC9pPjwvc3Bhbj48L2xpPjwvdWw+YAogICAgICAgICk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1kb3VibGUtY2hlY2snKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZV9yZXN1bHQuYmluZChudWxsLCd0b2dnbGUnKSk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wdGlvbi1yZXR5cGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZV9yZXN1bHQuYmluZChudWxsLCdyZXR5cGUnKSk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGV2ZW50KXsKICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA0MykgdG9nZ2xlX3Jlc3VsdCgnY29ycmVjdCcpOwogICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDQ1KSB0b2dnbGVfcmVzdWx0KCdpbmNvcnJlY3QnKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpewogICAgICAgICAgICBpZiAoKGV2ZW50LndoaWNoID09PSAyNyB8fCBldmVudC53aGljaCA9PT0gOCkgJiYKICAgICAgICAgICAgICAgIChzdGF0ZSAhPT0gJ2ZpcnN0X3N1Ym1pdCcpICYmCiAgICAgICAgICAgICAgICAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnQk9EWScpICYmCiAgICAgICAgICAgICAgICAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3a29mc19kb3VibGVjaGVjaycpKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9nZ2xlX3Jlc3VsdCgncmV0eXBlJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXkgPT09ICdsJykgewogICAgICAgICAgICAgICAgbGlnaHRuaW5nX2NsaWNrZWQoKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5oZWFkLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywKICAgICAgICAgICAgYDxzdHlsZT4KICAgICAgICAgICAgI2FkZGl0aW9uYWwtY29udGVudD51bD5saS5oaWRkZW4ge2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgICAgICNhbnN3ZXItZm9ybSBmaWVsZHNldC5jb25mYnVybiBidXR0b24sICNhbnN3ZXItZm9ybSBmaWVsZHNldC5jb25mYnVybiBpbnB1dFt0eXBlPXRleHRdLCAjYW5zd2VyLWZvcm0gZmllbGRzZXQuY29uZmJ1cm4gaW5wdXRbdHlwZT10ZXh0XTpkaXNhYmxlZCB7CiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMCAhaW1wb3J0YW50OwogICAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgICAgICAgIHRleHQtc2hhZG93OiAycHggMnB4IDAgcmdiYSgwLDAsMCwwLjIpOwogICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xcyBlYXNlLWluOwogICAgICAgICAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDsKICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPmAKICAgICAgICApOwoKICAgICAgICAvLyBPdmVycmlkZSB0aGUgYW5zd2VyIGNoZWNrZXIuCiAgICAgICAgd2luZG93LmFuc3dlckNoZWNrZXIuZXZhbHVhdGUgPSByZXR1cm5fbmV3X2Fuc3dlcjsKICAgICAgICB3aW5kb3cuZW5oYW5jZUFuc3dlckNoZWNrZXIgPSBmdW5jdGlvbihhbnN3ZXJDaGVja2VyKSB7cmV0dXJuIGFuc3dlckNoZWNrZXI7fTsKCiAgICAgICAgLy8gVG8gcHJldmVudCBXYW5pa2FuaSBmcm9tIGN1dHRpbmcgdGhlIGF1ZGlvIG9mZiBpbiBsaWdodG5pbmcgbW9kZSwKICAgICAgICAvLyBXZSBpbnN0cnVjdCBhbnkgY3VycmVudGx5IHBsYXlpbmcgYXVkaW8gdG8gdW5sb2FkIHdoZW4gaXQncyBkb25lLAogICAgICAgIC8vIHJhdGhlciB0aGFuIHVubG9hZGluZyBpdCBpbW1lZGlhdGVseS4KICAgICAgICB3aW5kb3cuSG93bGVyLnVubG9hZCA9IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSB3aW5kb3cuSG93bGVyLl9ob3dscy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgIHZhciBob3dsID0gd2luZG93Lkhvd2xlci5faG93bHNbaV07CiAgICAgICAgICAgICAgICBpZiAoaG93bC5wbGF5aW5nKCkgfHwgaG93bC5fcXVldWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGhvd2wub24oJ2VuZCcsIGhvd2wudW5sb2FkLmJpbmQoaG93bCkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBob3dsLnVubG9hZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGlja19zdWJtaXQoKSB7CiAgICAgICAgdmFyIHAgPSBwcm9taXNlKCk7CiAgICAgICAgb2xkX3N1Ym1pdF9oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYW5zd2VyLWZvcm0gYnV0dG9uJykuZGlzYWJsZWQpIHsKICAgICAgICAgICAgLy8gU2V0IHVwIGNhbGxiYWNrIGZvciB3aGVuICdzdWJtaXQnIGJ1dHRvbiBpcyByZS1lbmFibGVkIGFmdGVyIGJlaW5nIGNsaWNrZWQuCiAgICAgICAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbikgPT4gewogICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnBvcCgpLnRhcmdldC5kaXNhYmxlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgbW8uZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgbW8gPSB1bmRlZmluZWQ7CgogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9leHRyYV9zdHVkeS9zZXNzaW9uJykgewogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBFeHRyYSBTdHVkeSBwYWdlIG5lZWRzIGEgdGlueSBwYXVzZSBiZWZvcmUgYWR2YW5jaW5nLgogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBwLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcC5yZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtby5vYnNlcnZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhbnN3ZXItZm9ybSBidXR0b24nKSwge2F0dHJpYnV0ZUZpbHRlcjogWydkaXNhYmxlZCddfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9leHRyYV9zdHVkeS9zZXNzaW9uJykgewogICAgICAgICAgICAgICAgLy8gVGhlIEV4dHJhIFN0dWR5IHBhZ2UgbmVlZHMgYSB0aW55IHBhdXNlIGJlZm9yZSBhZHZhbmNpbmcuCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBwLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgIH0sIDEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcC5yZXNvbHZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBwOwogICAgfQoKfSkod2luZG93LmRvdWJsZWNoZWNrKTsK",
            "storage": {
                "data": {},
                "ts": 1606921521559
            },
            "uuid": "462d24eb-4e66-4f82-b8dd-79a94b1c8872"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/371388-bunpro-mistake-delay/code/Bunpro:%20Mistake%20Delay.user.js",
            "name": "Bunpro: Mistake Delay",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [
                        "*community.bunpro.jp*"
                    ],
                    "orig_includes": [
                        "*bunpro.jp/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 12,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBCdW5wcm86IE1pc3Rha2UgRGVsYXkKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjIuOAovLyBAZGVzY3JpcHRpb24gIFByZXZlbnRzIHByZW1hdHVyZSB3cm9uZyBhbnN3ZXIgc3VibWlzc2lvbi4KLy8gQGF1dGhvciAgICAgICBLdW1pcmVpCi8vIEBpbmNsdWRlICAgICAgKmJ1bnByby5qcC8qCi8vIEBleGNsdWRlICAgICAgKmNvbW11bml0eS5idW5wcm8uanAqCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM3MDYyMy1idW5wcm8taGVscGZ1bC1ldmVudHMvY29kZS9CdW5wcm86JTIwSGVscGZ1bCUyMEV2ZW50cy5qcz92ZXJzaW9uPTk3NDM2OQovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CgkvLyBTZWNvbmRzIG9mIGRlbGF5Cgljb25zdCBkZWxheSA9IDI7CgoJLy8gV2FpdCB1bnRpbCB3ZSdyZSByZXZpZXdpbmcKCSQoJ0hUTUwnKVswXS5hZGRFdmVudExpc3RlbmVyKCdxdWl6LXBhZ2UnLCBmdW5jdGlvbigpIHsKCQkvLyBBZGQgdGhlIHN0YW5kYXJkIHN0eWxpbmcgdG8gdGhlIGRpc2FibGVkIGJ1dHRvbgoJCWFkZENTUygpOwoKCQkvLyBEbyBzdHVmZiB3aGVuIHdlIHByZXNzIGVudGVyIG9yIGJhY2tzcGFjZQoJCSQoJyNzdHVkeS1hbnN3ZXItaW5wdXQnKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXZhciBlbGVtID0gJCgnI3N0dWR5LWFuc3dlci1pbnB1dCcpOwoJCQkvLyBJbml0aWF0ZSBkZWxhdGUgd2hlbiB3ZSBwcmVzcyBlbnRlciwgZ2V0IHRoZSBhbnN3ZXIgd3JvbmcsIGFuZCBubyBkZWxheSBpcyBhbHJlYWR5IGFjdGl2ZQoJCQl2YXIgYmtnID0gZWxlbVswXS5zdHlsZS5iYWNrZ3JvdW5kOwoJCQlpZiAoYmtnICE9ICIiKSB7CgkJCQl2YXIgYmtnX2xzdCA9IGJrZy5zbGljZSg1LCBia2cubGVuZ3RoLTEpLnNwbGl0KCcsICcpOwoJCQkJaWYgKGV2ZW50LndoaWNoID09IDEzICYmIE51bWJlcihia2dfbHN0WzBdKSA+IE51bWJlcihia2dfbHN0WzFdKSArIE51bWJlcihia2dfbHN0WzJdKSAmJiAhJCgnI3N1Ym1pdC1zdHVkeS1hbnN3ZXItZGlzYWJsZWQnKS5sZW5ndGgpIHsKCQkJCQllbmFibGVEZWxheSgpOwoJCQkJCXNldFRpbWVvdXQoZGlzYWJsZURlbGF5LCBkZWxheSoxMDAwKTsKCQkJCX0KCQkJfQoJCX0pOwoJCSQoJ2JvZHknKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCS8vIENhbmNlbCBkZWxheSBpZiB3ZSBwcmVzcyBiYWNrc3BhY2UgYWZ0ZXIgZ2V0dGluZyBhbiBhbnN3ZXIgd3JvbmcKCQkJaWYgKGV2ZW50LndoaWNoID09IDggJiYgJCgnI3N1Ym1pdC1zdHVkeS1hbnN3ZXItZGlzYWJsZWQnKS5sZW5ndGgpIGRpc2FibGVEZWxheSgpOwoJCX0pOwoJfSk7CgoJLy8gTWFrZXMgdXNlciB1bmFibGUgdG8gY29udGludWUgdG8gdGhlIG5leHQgaXRlbQoJZnVuY3Rpb24gZW5hYmxlRGVsYXkoKSB7CgkJJCgnI3N0dWR5LWFuc3dlci1pbnB1dCcpWzBdLmJsdXIoKTsKCQkkKCcjc3VibWl0LXN0dWR5LWFuc3dlcicpLmF0dHIoJ2lkJywgJ3N1Ym1pdC1zdHVkeS1hbnN3ZXItZGlzYWJsZWQnKTsKCX0KCgkvLyBNYWtlcyB1c2VyIGFibGUgdG8gY29udGludWUgdG8gdGhlIG5leHQgaXRlbSBhZ2FpbgoJZnVuY3Rpb24gZGlzYWJsZURlbGF5KCkgewoJCSQoJyNzdWJtaXQtc3R1ZHktYW5zd2VyLWRpc2FibGVkJykuYXR0cignaWQnLCAnc3VibWl0LXN0dWR5LWFuc3dlcicpOwoJfQoKCS8vIEFkZHMgdGhlIG5lZWRlZCBDU1MKCWZ1bmN0aW9uIGFkZENTUygpIHsKCQkkKCdoZWFkJykuYXBwZW5kKCc8c3R5bGU+I3N1Ym1pdC1zdHVkeS1hbnN3ZXItZGlzYWJsZWQgeycgKwoJCQkJCQkgJ3dpZHRoOiAxNSU7JyArCgkJCQkJCSAncmlnaHQ6IDA7JyArCgkJCQkJCSAndGV4dC1hbGlnbjogY2VudGVyOycgKwoJCQkJCQkgJ3Bvc2l0aW9uOiBhYnNvbHV0ZTsnICsKCQkJCQkJICdmb250LXdlaWdodDogNDAwOycgKwoJCQkJCQkgJ2ZvbnQtc2l6ZTogMjBweDsnICsKCQkJCQkJICd6LWluZGV4OiAxMDA7JyArCgkJCQkJCSAnYm9yZGVyLXJhZGl1czogMDsnICsKCQkJCQkJICdjb2xvcjogd2hpdGU7JyArCgkJCQkJCSAnYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7JyArCgkJCQkJCSAnfScgKwoJCQkJCQkgJ0BtZWRpYSAobWF4LXdpZHRoOiA0ODBweCkgI3N1Ym1pdC1zdHVkeS1hbnN3ZXItZGlzYWJsZWQge2ZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50O308L3N0eWxlPicpCgl9Cn0pKCk7Cg==",
            "storage": {
                "data": {},
                "ts": 1607436649639
            },
            "uuid": "0550b6ba-fa53-4ccf-823b-54b3cacc7116"
        },
        {
            "enabled": true,
            "file_url": "https://greasyfork.org/scripts/370019-bunpro-auto-show-info/code/Bunpro:%20Auto-show%20Info.user.js",
            "name": "Bunpro: Auto-show Info",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [
                        "*community.bunpro.jp*"
                    ],
                    "orig_includes": [
                        "*bunpro.jp/study*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 13,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBCdW5wcm86IEF1dG8tc2hvdyBJbmZvCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RhbXBlcm1vbmtleS5uZXQvCi8vIEB2ZXJzaW9uICAgICAgMC4yLjEwCi8vIEBkZXNjcmlwdGlvbiAgQXV0b21hdGljYWxseSBleHBhbmRzIHRoZSBmdWxsIGdyYW1tYXIgaW5mbyB3aGVuIHlvdSBnZXQgYSByZXZpZXcgd3JvbmcuCi8vIEBhdXRob3IgICAgICAgS3VtaXJlaQovLyBAaW5jbHVkZSAgICAgICpidW5wcm8uanAvc3R1ZHkqCi8vIEBleGNsdWRlICAgICAgKmNvbW11bml0eS5idW5wcm8uanAqCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzQzMjQxOC13YWl0LWZvci1zZWxlY3Rvci9jb2RlL1dhaXQlMjBGb3IlMjBTZWxlY3Rvci5qcz92ZXJzaW9uPTk5MDIwNwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNzA2MjMtYnVucHJvLWhlbHBmdWwtZXZlbnRzL2NvZGUvQnVucHJvOiUyMEhlbHBmdWwlMjBFdmVudHMuanM/dmVyc2lvbj05OTAyMTEKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKOyhmdW5jdGlvbiAoKSB7CiAgICAvL3dhaXQgdW50aWwgd2UncmUgcmV2aWV3aW5nCiAgICAkKCdIVE1MJylbMF0uYWRkRXZlbnRMaXN0ZW5lcigncXVpei1wYWdlJywgZnVuY3Rpb24gKCkgewogICAgICAgIC8vZG8gc3R1ZmYgd2hlbiB3ZSBwcmVzcyBlbnRlciBhbmQgZ2V0IHRoZSBhbnN3ZXIgd3JvbmcKICAgICAgICAkKCcjc3R1ZHktYW5zd2VyLWlucHV0Jykub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDEzKSB7CiAgICAgICAgICAgICAgICBvcGVuSWZXcm9uZygpCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC8vZG8gc3R1ZmYgd2hlbiB3ZSBjbGljayBzdWJtaXQgYW5kIGdldCB0aGUgYW5zd2VyIHdyb25nCiAgICAgICAgJCgnI3N1Ym1pdC1zdHVkeS1hbnN3ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9wZW5JZldyb25nKCkKICAgICAgICB9KQogICAgfSkKCiAgICAvL29wZW5zIHRoZSBpbmZvIGlmIHlvdSBnZXQgdGhlIGl0ZW0gd3JvbmcKICAgIGZ1bmN0aW9uIG9wZW5JZldyb25nKCkgewogICAgICAgIGlmICgkKCcub29wcy1idXR0b24nKVswXS5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycgfHwgJCgnI2xlYXJuLW5ldy1ncmFtbWFyLXBhZ2UnKS5sZW5ndGgpIHsKICAgICAgICAgICAgJCgnLnNob3ctZ3JhbW1hci10ZXh0JykuY2xpY2soKQogICAgICAgIH0KICAgIH0KfSkoKQo=",
            "storage": {
                "data": {},
                "ts": 1607436649642
            },
            "uuid": "ea2cd70b-7fb9-4481-9ec5-2e5761f5ad46"
        },
        {
            "enabled": true,
            "file_url": "https://raw.githubusercontent.com/Mottie/Github-userscripts/master/github-code-folding.user.js",
            "name": "GitHub Code Folding",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://github.com/*",
                        "https://gist.github.com/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "sandbox": null,
                "tab_types": null,
                "unwrap": null
            },
            "position": 14,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdpdEh1YiBDb2RlIEZvbGRpbmcKLy8gQHZlcnNpb24gICAgIDEuMS41Ci8vIEBkZXNjcmlwdGlvbiBBIHVzZXJzY3JpcHQgdGhhdCBhZGRzIGNvZGUgZm9sZGluZyB0byBHaXRIdWIgZmlsZXMKLy8gQGxpY2Vuc2UgICAgIE1JVAovLyBAYXV0aG9yICAgICAgUm9iIEdhcnJpc29uCi8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vTW90dGllCi8vIEBpbmNsdWRlICAgICBodHRwczovL2dpdGh1Yi5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vKgovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtaWRsZQovLyBAZ3JhbnQgICAgICAgR00uYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgIEdNX2FkZFN0eWxlCi8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzZW1vbmtleS5naXRodWIuaW8vZ200LXBvbHlmaWxsL2dtNC1wb2x5ZmlsbC5qcz91cGRhdGVkPTIwMTgwMTAzCi8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjg3MjEtbXV0YXRpb25zL2NvZGUvbXV0YXRpb25zLmpzP3ZlcnNpb249MTEwODE2MwovLyBAcmVxdWlyZSAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzM5ODg3Ny11dGlscy1qcy9jb2RlL3V0aWxzanMuanM/dmVyc2lvbj0xMDc5NjM3Ci8vIEBpY29uICAgICAgICBodHRwczovL2dpdGh1Yi5naXRodWJhc3NldHMuY29tL3Bpbm5lZC1vY3RvY2F0LnN2ZwovLyBAdXBkYXRlVVJMICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01vdHRpZS9HaXRodWItdXNlcnNjcmlwdHMvbWFzdGVyL2dpdGh1Yi1jb2RlLWZvbGRpbmcudXNlci5qcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01vdHRpZS9HaXRodWItdXNlcnNjcmlwdHMvbWFzdGVyL2dpdGh1Yi1jb2RlLWZvbGRpbmcudXNlci5qcwovLyBAc3VwcG9ydFVSTCAgaHR0cHM6Ly9naXRodWIuY29tL01vdHRpZS9HaXRIdWItdXNlcnNjcmlwdHMvaXNzdWVzCi8vID09L1VzZXJTY3JpcHQ9PQovKiBnbG9iYWwgJCAkJCBvbiAqLwovKioKICogVGhpcyB1c2Vyc2NyaXB0IGhhcyBiZWVuIGhlYXZpbHkgbW9kaWZpZWQgZnJvbSB0aGUgImdpdGh1Yi1jb2RlLWZvbGRpbmciCiAqIENocm9tZSBleHRlbnNpb24gQ29weXJpZ2h0IDIwMTYgYnkgTm9hbSBMdXN0aWdlcjsgdW5kZXIgYW4gTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9naXRodWIuY29tL25vYW0zMTI3L2dpdGh1Yi1jb2RlLWZvbGRpbmcKICovCigoKSA9PiB7CgkidXNlIHN0cmljdCI7CgoJR00uYWRkU3R5bGUoYAoJCXRkLmJsb2ItY29kZS5ibG9iLWNvZGUtaW5uZXIgeyBwb3NpdGlvbjpyZWxhdGl2ZTsgcGFkZGluZy1sZWZ0OjEwcHg7IH0KCQkuZ2hjZi1jb2xsYXBzZXIgeyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDoycHg7IHdpZHRoOjEwcHg7IGN1cnNvcjpwb2ludGVyOyB9CgkJLmdoY2YtY29sbGFwc2VyOmFmdGVyIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwoJCQljb250ZW50OiJcdTI1YmMiOyBvcGFjaXR5Oi41OyB0cmFuc2l0aW9uOi4xNXM7IH0KCQkuZ2hjZi1jb2xsYXBzZXI6aG92ZXI6YWZ0ZXIgeyBvcGFjaXR5OjE7IH0KCQkuZ2hjZi1jb2xsYXBzZWQuZ2hjZi1jb2xsYXBzZXI6YWZ0ZXIgeyB0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7CgkJCW9wYWNpdHk6Ljg7IH0KCQkuZ2hjZi1oaWRkZW4tbGluZSB7IGRpc3BsYXk6bm9uZTsgfQoJCS5naGNmLWVsbGlwc2lzIHsgcGFkZGluZzoxcHggMnB4OyBtYXJnaW4tbGVmdDoycHg7IGN1cnNvcjpwb2ludGVyOwoJCQliYWNrZ3JvdW5kOnJnYmEoMjU1LDIzNSw1OSwuNCk7IHBvc2l0aW9uOnJlbGF0aXZlOyB6LWluZGV4OjE7IH0KCQkuZ2hjZi1lbGxpcHNpczpob3ZlciB7IGJhY2tncm91bmQ6cmdiYSgyNTUsMjM1LDU5LC43KTsgfQoJYCk7CgoJY29uc3QgYmxvY2tzID0ge307Cgljb25zdCBlbGxpcHNpcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCWNvbnN0IHRyaWFuZ2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoKCXRyaWFuZ2xlLmNsYXNzTmFtZSA9ICJnaGNmLWNvbGxhcHNlciI7CgllbGxpcHNpcy5jbGFzc05hbWUgPSAicGwtc21pIGdoY2YtZWxsaXBzaXMiOwoJZWxsaXBzaXMuaW5uZXJIVE1MID0gIiZoZWxsaXA7IjsKCglmdW5jdGlvbiBjb3VudEluaXRpYWxXaGl0ZVNwYWNlKGFycikgewoJCWNvbnN0IGdldFdoaXRlU3BhY2VJbmRleCA9IGkgPT4gewoJCQlpZiAoYXJyW2ldICE9PSAiICIgJiYgYXJyW2ldICE9PSAiXHQiICYmIGFycltpXSAhPT0gIlx4YTAiKSB7CgkJCQlyZXR1cm4gaTsKCQkJfQoJCQlyZXR1cm4gZ2V0V2hpdGVTcGFjZUluZGV4KCsraSk7CgkJfTsKCQlyZXR1cm4gZ2V0V2hpdGVTcGFjZUluZGV4KDApOwoJfQoKCWZ1bmN0aW9uIGdldFByZXZpb3VzU3BhY2VzKG1hcCwgbGluZU51bSkgewoJCWxldCBwcmV2ID0gbWFwLmdldChsaW5lTnVtIC0gMSk7CgkJcmV0dXJuIHByZXYgPT09IC0xCgkJCT8gZ2V0UHJldmlvdXNTcGFjZXMobWFwLCBsaW5lTnVtIC0gMSkKCQkJOiB7CgkJCQlsaW5lTnVtOiBsaW5lTnVtIC0gMSwKCQkJCWNvdW50OiBwcmV2CgkJCX07Cgl9CgoJZnVuY3Rpb24gZ2V0TGluZU51bWJlcihlbCkgewoJCWxldCBlbG0gPSBlbC5jbG9zZXN0KCJ0ciIpOwoJCWlmIChlbG0pIHsKCQkJZWxtID0gZWxtLnF1ZXJ5U2VsZWN0b3IoIltkYXRhLWxpbmUtbnVtYmVyXSIpOwoJCQlyZXR1cm4gZWxtID8gcGFyc2VJbnQoZWxtLmRhdGFzZXQubGluZU51bWJlciwgMTApIDogIiI7CgkJfQoJCXJldHVybiAiIjsKCX0KCglmdW5jdGlvbiBnZXRDb2RlTGluZXMoY29kZUJsb2NrKSB7CgkJcmV0dXJuICQkKCIuYmxvYi1jb2RlLWlubmVyIiwgY29kZUJsb2NrKTsKCX0KCglmdW5jdGlvbiB0b2dnbGVDb2RlKHsgYWN0aW9uLCBjb2RlQmxvY2ssIGluZGV4LCBkZXB0aCB9KSB7CgkJbGV0IGVscywgbGluZU51bXM7CgkJY29uc3QgY29kZUxpbmVzID0gZ2V0Q29kZUxpbmVzKGNvZGVCbG9jaykgfHwgW107CgkJY29uc3QgcGFpcnMgPSBibG9ja3NbY29kZUJsb2NrLmRhdGFzZXQuYmxvY2tJbmRleF07CgkJaWYgKCFwYWlycyB8fCBjb2RlTGluZXMubGVuZ3RoID09PSAwKSB7CgkJCXJldHVybjsKCQl9CgkJLy8gZGVwdGggaXMgYSBzdHJpbmcgY29udGFpbmluZyBhIHNwZWNpZmljIGRlcHRoIG51bWJlciB0byB0b2dnbGUKCQlpZiAoZGVwdGgpIHsKCQkJZWxzID0gJCQoYC5naGNmLWNvbGxhcHNlcltkYXRhLWRlcHRoPSIke2RlcHRofSJdYCwgY29kZUJsb2NrKTsKCQkJbGluZU51bXMgPSBlbHMubWFwKGVsID0+IHsKCQkJCWVsLmNsYXNzTGlzdC50b2dnbGUoImdoY2YtY29sbGFwc2VkIiwgYWN0aW9uID09PSAiaGlkZSIpOwoJCQkJcmV0dXJuIGdldExpbmVOdW1iZXIoZWwpOwoJCQl9KTsKCQl9IGVsc2UgewoJCQlsaW5lTnVtcyA9IFtpbmRleF07CgkJfQoKCQlpZiAoYWN0aW9uID09PSAiaGlkZSIpIHsKCQkJbGluZU51bXMuZm9yRWFjaChzdGFydCA9PiB7CgkJCQlsZXQgZWxtOwoJCQkJbGV0IGVuZCA9IHBhaXJzLmdldChzdGFydCAtIDEpOwoJCQkJY29kZUxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLmZvckVhY2goZWwgPT4gewoJCQkJCWVsbSA9IGVsLmNsb3Nlc3QoInRyIik7CgkJCQkJaWYgKGVsbSkgewoJCQkJCQllbG0uY2xhc3NMaXN0LmFkZCgiZ2hjZi1oaWRkZW4tbGluZSIpOwoJCQkJCX0KCQkJCX0pOwoJCQkJaWYgKCEkKCIuZ2hjZi1lbGxpcHNpcyIsIGNvZGVMaW5lc1tzdGFydCAtIDFdKSkgewoJCQkJCWVsbSA9ICQoIi5naGNmLWNvbGxhcHNlciIsIGNvZGVMaW5lc1tzdGFydCAtIDFdKTsKCQkJCQllbG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoCgkJCQkJCWVsbGlwc2lzLmNsb25lTm9kZSh0cnVlKSwKCQkJCQkJbnVsbAoJCQkJCSk7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSBpZiAoYWN0aW9uID09PSAic2hvdyIpIHsKCQkJbGluZU51bXMuZm9yRWFjaChzdGFydCA9PiB7CgkJCQlsZXQgZW5kID0gcGFpcnMuZ2V0KHN0YXJ0IC0gMSk7CgkJCQljb2RlTGluZXMuc2xpY2Uoc3RhcnQsIGVuZCkuZm9yRWFjaChlbCA9PiB7CgkJCQkJbGV0IGVsbSA9IGVsLmNsb3Nlc3QoInRyIik7CgkJCQkJaWYgKGVsbSkgewoJCQkJCQllbG0uY2xhc3NMaXN0LnJlbW92ZSgiZ2hjZi1oaWRkZW4tbGluZSIpOwoJCQkJCQlyZW1vdmVFbHMoIi5naGNmLWVsbGlwc2lzIiwgZWxtKTsKCQkJCQl9CgkJCQkJZWxtID0gJCgiLmdoY2YtY29sbGFwc2VkIiwgZWxtKTsKCQkJCQlpZiAoZWxtKSB7CgkJCQkJCWVsbS5jbGFzc0xpc3QucmVtb3ZlKCJnaGNmLWNvbGxhcHNlZCIpOwoJCQkJCX0KCQkJCX0pOwoJCQkJcmVtb3ZlRWxzKCIuZ2hjZi1lbGxpcHNpcyIsIGNvZGVMaW5lc1tzdGFydCAtIDFdKTsKCQkJfSk7CgkJfQoJCS8vIHNoaWZ0IGVuZHMgdXAgc2VsZWN0aW5nIHRleHQgb24gdGhlIHBhZ2UsIHNvIGNsZWFyIGl0CgkJaWYgKGxpbmVOdW1zLmxlbmd0aCA+IDEpIHsKCQkJcmVtb3ZlU2VsZWN0aW9uKCk7CgkJfQoJfQoKCWZ1bmN0aW9uIGFkZEJpbmRpbmdzKCkgewoJCW9uKGRvY3VtZW50LCAiY2xpY2siLCBldmVudCA9PiB7CgkJCWxldCBpbmRleCwgZWxtLCBpc0NvbGxhcHNlZDsKCQkJY29uc3QgZWwgPSBldmVudC50YXJnZXQ7CgkJCWNvbnN0IGNvZGVCbG9jayA9IGVsLmNsb3Nlc3QoIi5oaWdobGlnaHQiKTsKCgkJCS8vIGNsaWNrIG9uIGNvbGxhcHNlcgoJCQlpZiAoZWwgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJnaGNmLWNvbGxhcHNlciIpKSB7CgkJCQlpc0NvbGxhcHNlZCA9IGVsLmNsYXNzTGlzdC5jb250YWlucygiZ2hjZi1jb2xsYXBzZWQiKTsKCQkJCWluZGV4ID0gZ2V0TGluZU51bWJlcihlbCk7CgkJCQkvLyBTaGlmdCArIGNsaWNrIHRvIHRvZ2dsZSB0aGVtIGFsbAoJCQkJaWYgKGluZGV4ICYmIGV2ZW50LmdldE1vZGlmaWVyU3RhdGUoIlNoaWZ0IikpIHsKCQkJCQlyZXR1cm4gdG9nZ2xlQ29kZSh7CgkJCQkJCWFjdGlvbjogaXNDb2xsYXBzZWQgPyAic2hvdyIgOiAiaGlkZSIsCgkJCQkJCWNvZGVCbG9jaywKCQkJCQkJaW5kZXgsCgkJCQkJCWRlcHRoOiBlbC5kYXRhc2V0LmRlcHRoCgkJCQkJfSk7CgkJCQl9CgkJCQlpZiAoaW5kZXgpIHsKCQkJCQlpZiAoaXNDb2xsYXBzZWQpIHsKCQkJCQkJZWwuY2xhc3NMaXN0LnJlbW92ZSgiZ2hjZi1jb2xsYXBzZWQiKTsKCQkJCQkJdG9nZ2xlQ29kZSh7IGFjdGlvbjogInNob3ciLCBjb2RlQmxvY2ssIGluZGV4IH0pOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWVsLmNsYXNzTGlzdC5hZGQoImdoY2YtY29sbGFwc2VkIik7CgkJCQkJCXRvZ2dsZUNvZGUoeyBhY3Rpb246ICJoaWRlIiwgY29kZUJsb2NrLCBpbmRleCB9KTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIGNsaWNrIG9uIGVsbGlwc2lzCgkJCWlmIChlbCAmJiBlbC5jbGFzc0xpc3QuY29udGFpbnMoImdoY2YtZWxsaXBzaXMiKSkgewoJCQkJZWxtID0gJCgiLmdoY2YtY29sbGFwc2VkIiwgZWwucGFyZW50Tm9kZSk7CgkJCQlpZiAoZWxtKSB7CgkJCQkJZWxtLmNsYXNzTGlzdC5yZW1vdmUoImdoY2YtY29sbGFwc2VkIik7CgkJCQl9CgkJCQlpbmRleCA9IGdldExpbmVOdW1iZXIoZWwpOwoJCQkJaWYgKGluZGV4KSB7CgkJCQkJdG9nZ2xlQ29kZSh7IGFjdGlvbjogInNob3ciLCBjb2RlQmxvY2ssIGluZGV4IH0pOwoJCQkJfQoJCQl9CgkJfSk7Cgl9CgoJZnVuY3Rpb24gYWRkQ29kZUZvbGRpbmcoKSB7CgkJLy8gS2VlcCAuZmlsZSBpbiBjYXNlIHNvbWVvbmUgbmVlZHMgdGhpcyB1c2Vyc2NyaXB0IGZvciBHaXRIdWIgRW50ZXJwcmlzZQoJCWlmICgkKCIuZmlsZSB0YWJsZS5oaWdobGlnaHQsIC5ibG9iLXdyYXBwZXIgdGFibGUuaGlnaGxpZ2h0IikpIHsKCQkJJCQoInRhYmxlLmhpZ2hsaWdodCIpLmZvckVhY2goKGNvZGVCbG9jaywgYmxvY2tJbmRleCkgPT4gewoJCQkJaWYgKGNvZGVCbG9jayAmJiBjb2RlQmxvY2suY2xhc3NMaXN0LmNvbnRhaW5zKCJnaGNmLXByb2Nlc3NlZCIpKSB7CgkJCQkJLy8gQWxyZWFkeSBwcm9jZXNzZWQKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQljb25zdCBjb2RlTGluZXMgPSBnZXRDb2RlTGluZXMoY29kZUJsb2NrKTsKCQkJCXJlbW92ZUVscygic3Bhbi5naGNmLWNvbGxhcHNlciIsIGNvZGVCbG9jayk7CgkJCQlpZiAoY29kZUxpbmVzKSB7CgkJCQkJLy8gSW4gY2FzZSB0aGlzIHNjcmlwdCBoYXMgYWxyZWFkeSBiZWVuIHJ1biBhbmQgbW9kaWZpZWQgdGhlIERPTSBvbiBhCgkJCQkJLy8gcHJldmlvdXMgcGFnZSBpbiBnaXRodWIsIG1ha2Ugc3VyZSB0byByZXNldCBpdC4KCQkJCQljb2RlQmxvY2suY2xhc3NMaXN0LmFkZCgiZ2hjZi1wcm9jZXNzZWQiKTsKCQkJCQljb2RlQmxvY2suZGF0YXNldC5ibG9ja0luZGV4ID0gYmxvY2tJbmRleDsKCgkJCQkJY29uc3Qgc3BhY2VNYXAgPSBuZXcgTWFwKCk7CgkJCQkJY29uc3Qgc3RhY2sgPSBbXTsKCQkJCQljb25zdCBwYWlycyA9IGJsb2Nrc1tibG9ja0luZGV4XSA9IG5ldyBNYXAoKTsKCgkJCQkJY29kZUxpbmVzLmZvckVhY2goKGVsLCBsaW5lTnVtKSA9PiB7CgkJCQkJCWxldCBwcmV2U3BhY2VzOwoJCQkJCQlsZXQgbGluZSA9IGVsLnRleHRDb250ZW50OwoJCQkJCQlsZXQgY291bnQgPSBsaW5lLnRyaW0oKS5sZW5ndGgKCQkJCQkJCT8gY291bnRJbml0aWFsV2hpdGVTcGFjZShsaW5lLnNwbGl0KCIiKSkKCQkJCQkJCTogLTE7CgkJCQkJCXNwYWNlTWFwLnNldChsaW5lTnVtLCBjb3VudCk7CgoJCQkJCQlmdW5jdGlvbiB0cnlQYWlyKCkgewoJCQkJCQkJbGV0IGVsOwoJCQkJCQkJbGV0IHRvcCA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOwoJCQkJCQkJaWYgKGNvdW50ICE9PSAtMSAmJiBjb3VudCA8PSBzcGFjZU1hcC5nZXQodG9wKSkgewoJCQkJCQkJCXBhaXJzLnNldCh0b3AsIGxpbmVOdW0pOwoJCQkJCQkJCS8vIHByZXBlbmQgdHJpYW5nbGUKCQkJCQkJCQllbCA9IHRyaWFuZ2xlLmNsb25lTm9kZSgpOwoJCQkJCQkJCWVsLmRhdGFzZXQuZGVwdGggPSBjb3VudCArIDE7CgkJCQkJCQkJY29kZUxpbmVzW3RvcF0uaW5zZXJ0QmVmb3JlKGVsLCBjb2RlTGluZXNbdG9wXS5jaGlsZE5vZGVzWzBdKTsKCQkJCQkJCQlzdGFjay5wb3AoKTsKCQkJCQkJCQlyZXR1cm4gdHJ5UGFpcigpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCXRyeVBhaXIoKTsKCgkJCQkJCXByZXZTcGFjZXMgPSBnZXRQcmV2aW91c1NwYWNlcyhzcGFjZU1hcCwgbGluZU51bSk7CgkJCQkJCWlmIChjb3VudCA+IHByZXZTcGFjZXMuY291bnQpIHsKCQkJCQkJCXN0YWNrLnB1c2gocHJldlNwYWNlcy5saW5lTnVtKTsKCQkJCQkJfQoJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQl9Cgl9CgoJZnVuY3Rpb24gcmVtb3ZlRWxzKHNlbGVjdG9yLCBlbCkgewoJCWxldCBlbHMgPSAkJChzZWxlY3RvciwgZWwpOwoJCWxldCBpbmRleCA9IGVscy5sZW5ndGg7CgkJd2hpbGUgKGluZGV4LS0pIHsKCQkJZWxzW2luZGV4XS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsc1tpbmRleF0pOwoJCX0KCX0KCglmdW5jdGlvbiByZW1vdmVTZWxlY3Rpb24oKSB7CgkJLy8gcmVtb3ZlIHRleHQgc2VsZWN0aW9uIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNzEzNDgvMTQ1MzQ2CgkJY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbgoJCQk/IHdpbmRvdy5nZXRTZWxlY3Rpb24oKQoJCQk6IGRvY3VtZW50LnNlbGVjdGlvbjsKCQlpZiAoc2VsKSB7CgkJCWlmIChzZWwucmVtb3ZlQWxsUmFuZ2VzKSB7CgkJCQlzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7CgkJCX0gZWxzZSBpZiAoc2VsLmVtcHR5KSB7CgkJCQlzZWwuZW1wdHkoKTsKCQkJfQoJCX0KCX0KCglvbihkb2N1bWVudCwgImdobW86Y29udGFpbmVyIiwgYWRkQ29kZUZvbGRpbmcpOwoJYWRkQ29kZUZvbGRpbmcoKTsKCWFkZEJpbmRpbmdzKCk7Cgp9KSgpOwo=",
            "storage": {
                "data": {},
                "ts": 1636664956605
            },
            "uuid": "03039f55-1392-4e34-89d8-7a324da08087"
        },
        {
            "enabled": true,
            "file_url": "https://raw.githubusercontent.com/Mottie/GitHub-userscripts/master/github-sort-reactions.user.js",
            "name": "GitHub Sort Reactions",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://github.com/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "sandbox": null,
                "tab_types": null,
                "unwrap": null
            },
            "position": 15,
            "requires": [],
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdpdEh1YiBTb3J0IFJlYWN0aW9ucwovLyBAdmVyc2lvbiAgICAgMC4yLjE3Ci8vIEBkZXNjcmlwdGlvbiBBIHVzZXJzY3JpcHQgdGhhdCBzb3J0cyBjb21tZW50cyBieSByZWFjdGlvbgovLyBAbGljZW5zZSAgICAgTUlUCi8vIEBhdXRob3IgICAgICBSb2IgR2Fycmlzb24KLy8gQG5hbWVzcGFjZSAgIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb3R0aWUKLy8gQGluY2x1ZGUgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS8qCi8vIEBydW4tYXQgICAgICBkb2N1bWVudC1pZGxlCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX3NldFZhbHVlCi8vIEByZXF1aXJlICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvMjg3MjEtbXV0YXRpb25zL2NvZGUvbXV0YXRpb25zLmpzP3ZlcnNpb249MTEwODE2MwovLyBAaWNvbiAgICAgICAgaHR0cHM6Ly9naXRodWIuZ2l0aHViYXNzZXRzLmNvbS9waW5uZWQtb2N0b2NhdC5zdmcKLy8gQHVwZGF0ZVVSTCAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Nb3R0aWUvR2l0SHViLXVzZXJzY3JpcHRzL21hc3Rlci9naXRodWItc29ydC1yZWFjdGlvbnMudXNlci5qcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01vdHRpZS9HaXRIdWItdXNlcnNjcmlwdHMvbWFzdGVyL2dpdGh1Yi1zb3J0LXJlYWN0aW9ucy51c2VyLmpzCi8vIEBzdXBwb3J0VVJMICBodHRwczovL2dpdGh1Yi5jb20vTW90dGllL0dpdEh1Yi11c2Vyc2NyaXB0cy9pc3N1ZXMKLy8gPT0vVXNlclNjcmlwdD09CigoKSA9PiB7CgkidXNlIHN0cmljdCI7CgoJY29uc3Qgbm9uSW50ZWdlciA9IC9bXlxkXS9nOwoJY29uc3QgcmVhY3Rpb25WYWx1ZXMgPSB7CgkJIlRIVU1CU19VUCI6IDEsCgkJIkhPT1JBWSI6IDEsCgkJIkhFQVJUIjogMSwKCQkiTEFVR0giOiAwLjUsCgkJIkNPTkZVU0VEIjogLTAuNSwKCQkiVEhVTUJTX0RPV04iOiAtMQoJfTsKCWNvbnN0IGN1cnJlbnRTb3J0ID0gewoJCWluaXQ6IGZhbHNlLAoJCWVsOiBudWxsLAoJCWRpcjogMCwgLy8gMCA9IHVuc29ydGVkLCAxID0gZGVzYywgMiA9IGFzYwoJCWJ1c3k6IGZhbHNlLAoJCXR5cGU6IEdNX2dldFZhbHVlKCJzZWxlY3RlZC1yZWFjdGlvbiIsICJOT05FIikKCX07CgoJY29uc3QgZW1vamlTcmMgPSAiaHR0cHM6Ly9naXRodWIuZ2l0aHViYXNzZXRzLmNvbS9pbWFnZXMvaWNvbnMvZW1vamkvdW5pY29kZSI7CgoJY29uc3Qgc29ydEJsb2NrID0gYAo8ZGl2IGNsYXNzPSJUaW1lbGluZUl0ZW0gZ2hzci1zb3J0LWJsb2NrIGdoc3ItaXMtY29sbGFwc2VkIGpzLXRpbWVsaW5lLXByb2dyZXNzaXZlLWZvY3VzLWNvbnRhaW5lciI+Cgk8ZGl2IGNsYXNzPSJhdmF0YXItcGFyZW50LWNoaWxkIFRpbWVsaW5lSXRlbS1hdmF0YXIgYm9yZGVyIGdoc3Itc29ydC1hdmF0YXIgZ2hzci1uby1zZWxlY3Rpb24iPgoJCTxkaXYgY2xhc3M9Imdoc3ItaWNvbi13cmFwIHRvb2x0aXBwZWQgdG9vbHRpcHBlZC1uIiBhcmlhLWxhYmVsPSJDbGljayB0byB0b2dnbGUgcmVhY3Rpb24gc29ydCBtZW51Ij4KCQkJPHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im9jdGljb24gZ2hzci1zb3J0LWljb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI1IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgoJCQkJPHBhdGggZD0iTTE1IDggMSA4IDggMHpNMTUgOSAxIDkgOCAxNnoiLz4KCQkJPC9zdmc+CgkJPC9kaXY+CgkJPGctZW1vamk+PC9nLWVtb2ppPgoJCTxidXR0b24gY2xhc3M9Imdoc3Itc29ydC1idXR0b24gZ2hzci1hdmF0YXItc29ydCBidG4gYnRuLXNtIHRvb2x0aXBwZWQgdG9vbHRpcHBlZC1uIiBhcmlhLWxhYmVsPSJUb2dnbGUgc2VsZWN0ZWQgcmVhY3Rpb24gc29ydCBkaXJlY3Rpb24iPgoJCQk8c3Bhbj48L3NwYW4+CgkJPC9idXR0b24+Cgk8L2Rpdj4KCTxkaXYgY2xhc3M9InRpbWVsaW5lLWNvbW1lbnQgbWwtbjMiPgoJCTxkaXYgY2xhc3M9InRpbWVsaW5lLWNvbW1lbnQtaGVhZGVyIGNvbW1lbnQgY29tbWVudC1ib2R5Ij4KCQkJPGgzIGNsYXNzPSJ0aW1lbGluZS1jb21tZW50LWhlYWRlci10ZXh0IGY1IHRleHQtbm9ybWFsIj4KCQkJCTxidXR0b24gY2xhc3M9Imdoc3Itc29ydC1idXR0b24gYnRuIGJ0bi1zbSB0b29sdGlwcGVkIHRvb2x0aXBwZWQtbiIgdHlwZT0iYnV0dG9uIiBhcmlhLWxhYmVsPSJTb3J0IGJ5ICsxIHJlYWN0aW9uIiBkYXRhLXNvcnQ9IlRIVU1CU19VUCI+CgkJCQkJPGctZW1vamkgYWxpYXM9IisxIiBjbGFzcz0iZW1vamkiIGZhbGxiYWNrLXNyYz0iJHtlbW9qaVNyY30vMWY0NGQucG5nIj7wn5GNPC9nLWVtb2ppPgoJCQkJPC9idXR0b24+CgkJCQk8YnV0dG9uIGNsYXNzPSJnaHNyLXNvcnQtYnV0dG9uIGJ0biBidG4tc20gdG9vbHRpcHBlZCB0b29sdGlwcGVkLW4iIHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iU29ydCBieSAtMSByZWFjdGlvbiIgZGF0YS1zb3J0PSJUSFVNQlNfRE9XTiI+CgkJCQkJPGctZW1vamkgYWxpYXM9Ii0xIiBjbGFzcz0iZW1vamkiIGZhbGxiYWNrLXNyYz0iJHtlbW9qaVNyY30vMWY0NGUucG5nIj7wn5GOPC9nLWVtb2ppPgoJCQkJPC9idXR0b24+CgkJCQk8YnV0dG9uIGNsYXNzPSJnaHNyLXNvcnQtYnV0dG9uIGJ0biBidG4tc20gdG9vbHRpcHBlZCB0b29sdGlwcGVkLW4iIHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iU29ydCBieSBsYXVnaCByZWFjdGlvbiIgZGF0YS1zb3J0PSJMQVVHSCI+CgkJCQkJPGctZW1vamkgYWxpYXM9InNtaWxlIiBjbGFzcz0iZW1vamkiIGZhbGxiYWNrLXNyYz0iJHtlbW9qaVNyY30vMWY2MDQucG5nIj7wn5iEPC9nLWVtb2ppPgoJCQkJPC9idXR0b24+CgkJCQk8YnV0dG9uIGNsYXNzPSJnaHNyLXNvcnQtYnV0dG9uIGJ0biBidG4tc20gdG9vbHRpcHBlZCB0b29sdGlwcGVkLW4iIHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iU29ydCBieSBob29yYXkgcmVhY3Rpb24iIGRhdGEtc29ydD0iSE9PUkFZIj4KCQkJCQk8Zy1lbW9qaSBhbGlhcz0idGFkYSIgY2xhc3M9ImVtb2ppIiBmYWxsYmFjay1zcmM9IiR7ZW1vamlTcmN9LzFmMzg5LnBuZyI+8J+OiTwvZy1lbW9qaT4KCQkJCTwvYnV0dG9uPgoJCQkJPGJ1dHRvbiBjbGFzcz0iZ2hzci1zb3J0LWJ1dHRvbiBidG4gYnRuLXNtIHRvb2x0aXBwZWQgdG9vbHRpcHBlZC1uIiB0eXBlPSJidXR0b24iIGFyaWEtbGFiZWw9IlNvcnQgYnkgY29uZnVzZWQgcmVhY3Rpb24iIGRhdGEtc29ydD0iQ09ORlVTRUQiPgoJCQkJCTxnLWVtb2ppIGFsaWFzPSJ0aGlua2luZ19mYWNlIiBjbGFzcz0iZW1vamkiIGZhbGxiYWNrLXNyYz0iJHtlbW9qaVNyY30vMWY2MTUucG5nIj7wn5iVPC9nLWVtb2ppPgoJCQkJPC9idXR0b24+CgkJCQk8YnV0dG9uIGNsYXNzPSJnaHNyLXNvcnQtYnV0dG9uIGJ0biBidG4tc20gdG9vbHRpcHBlZCB0b29sdGlwcGVkLW4iIHR5cGU9ImJ1dHRvbiIgYXJpYS1sYWJlbD0iU29ydCBieSBoZWFydCByZWFjdGlvbiIgZGF0YS1zb3J0PSJIRUFSVCI+CgkJCQkJPGctZW1vamkgYWxpYXM9ImhlYXJ0IiBjbGFzcz0iZW1vamkiIGZhbGxiYWNrLXNyYz0iJHtlbW9qaVNyY30vMjc2NC5wbmciPuKdpO+4jzwvZy1lbW9qaT4KCQkJCTwvYnV0dG9uPgoJCQkJPGJ1dHRvbiBjbGFzcz0iZ2hzci1zb3J0LWJ1dHRvbiBidG4gYnRuLXNtIHRvb2x0aXBwZWQgdG9vbHRpcHBlZC1uIHRvb2x0aXBwZWQtbXVsdGlsaW5lIiB0eXBlPSJidXR0b24iIGFyaWEtbGFiZWw9IlNvcnQgYnkgcmVhY3Rpb24gZXZhbHVhdGlvbgoodGh1bWJzIHVwLCBob29yYXkgJiBoZWFydCA9ICsxOwpsYXVnaCA9ICswLjU7IGNvbmZ1c2VkID0gLTAuNTsKdGh1bWJzIGRvd24gPSAtMSkiIGRhdGEtc29ydD0iQUNUSVZFIj4KCQkJCQk8Zy1lbW9qaSBhbGlhcz0ic3BlYWtfbm9fZXZpbCIgY2xhc3M9ImVtb2ppIiBmYWxsYmFjay1zcmM9IiR7ZW1vamlTcmN9LzFmNjRhLnBuZyI+8J+ZijwvZy1lbW9qaT4KCQkJCTwvYnV0dG9uPgoJCQk8L2gzPgoJCTwvZGl2PgoJPC9kaXY+CjwvZGl2PmA7CgoJZnVuY3Rpb24gc3VtT2ZSZWFjdGlvbnMoZWwpIHsKCQlyZXR1cm4gT2JqZWN0LmtleXMocmVhY3Rpb25WYWx1ZXMpLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiB7CgkJCWNvbnN0IGVsbSA9ICQoYC5jb21tZW50LXJlYWN0aW9ucy1vcHRpb25zIGJ1dHRvblt2YWx1ZSo9IiR7aXRlbX0iXWAsIGVsKTsKCQkJcmV0dXJuIHN1bSArIChnZXRWYWx1ZShlbG0pICogcmVhY3Rpb25WYWx1ZXNbaXRlbV0pOwoJCX0sIDApOwoJfQoKCWZ1bmN0aW9uIGdldFZhbHVlKGVsbSkgewoJCXJldHVybiBlbG0gPwoJCQlwYXJzZUludChlbG0udGV4dENvbnRlbnQucmVwbGFjZShub25JbnRlZ2VyLCAiIikgfHwgIjAiLCAxMCkgOgoJCQkwOwoJfQoKCWZ1bmN0aW9uIGV4dHJhY3RTb3J0VmFsdWUoZWxtLCB0eXBlLCBkaXIpIHsKCQlpZiAoZGlyID09PSAwIHx8IHR5cGUgPT09ICJOT05FIiB8fCB0eXBlID09PSAiQUNUSVZFIikgewoJCQlyZXR1cm4gcGFyc2VGbG9hdCgKCQkJCWVsbS5kYXRhc2V0W2Bzb3J0Q29tbWVudCR7ZGlyID09PSAwID8gIkRhdGUiIDogIlN1bSJ9YF0KCQkJKTsKCQl9CgkJcmV0dXJuIGdldFZhbHVlKCQoYC5jb21tZW50LXJlYWN0aW9ucyBidXR0b25bdmFsdWUqPSIke3R5cGV9Il1gLCBlbG0pKTsKCX0KCglmdW5jdGlvbiBzdGFibGVTb3J0VmFsdWUoZWxtKSB7CgkJcmV0dXJuIHBhcnNlSW50KGVsbS5kYXRhc2V0LnNvcnRDb21tZW50RGF0ZSwgMTApOwoJfQoKCWZ1bmN0aW9uIHVwZGF0ZUF2YXRhcigpIHsKCQlHTV9zZXRWYWx1ZSgic2VsZWN0ZWQtcmVhY3Rpb24iLCBjdXJyZW50U29ydC50eXBlKTsKCQljb25zdCBibG9jayA9ICQoIi5naHNyLXNvcnQtYmxvY2siKSwKCQkJYXZhdGFyID0gJCgiLmdoc3Itc29ydC1hdmF0YXIiLCBibG9jayksCgkJCWljb24gPSAkKCIuZ2hzci1zb3J0LWJ1dHRvbiBzcGFuIiwgYXZhdGFyKTsKCQlpZiAoYXZhdGFyKSB7CgkJCWxldCBjdXJyZW50ID0gJChgLmNvbW1lbnQtYm9keSBbZGF0YS1zb3J0PSR7Y3VycmVudFNvcnQudHlwZX1dYCwgYmxvY2spOwoJCQlhdmF0YXIuY2xhc3NMaXN0LnJlbW92ZSgiZ2hzci1uby1zZWxlY3Rpb24iKTsKCQkJYXZhdGFyLnJlcGxhY2VDaGlsZCgKCQkJCSQoImctZW1vamkiLCBjdXJyZW50KS5jbG9uZU5vZGUodHJ1ZSksCgkJCQkkKCJnLWVtb2ppIiwgYXZhdGFyKQoJCQkpOwoJCQlpZiAoY3VycmVudFNvcnQuZGlyID09PSAwKSB7CgkJCQkvLyB1c2UgdW5zb3J0ZWQgc3ZnIGluIHNvcnQgYnV0dG9uCgkJCQljdXJyZW50ID0gJCgiLmdoc3Itc29ydC1pY29uIiwgYXZhdGFyKS5jbG9uZU5vZGUodHJ1ZSk7CgkJCQljdXJyZW50LmNsYXNzTGlzdC5yZW1vdmUoImdoc3Itc29ydC1pY29uIik7CgkJCQlpY29uLnRleHRDb250ZW50ID0gIiI7CgkJCQlpY29uLmFwcGVuZENoaWxkKGN1cnJlbnQpOwoJCQl9IGVsc2UgewoJCQkJaWNvbi50ZXh0Q29udGVudCA9IGN1cnJlbnRTb3J0LmRpciAhPT0gMSA/ICLilrIiIDogIuKWvCI7CgkJCX0KCQl9Cgl9CgoJZnVuY3Rpb24gc29ydCgpIHsKCQljdXJyZW50U29ydC5idXN5ID0gdHJ1ZTsKCQljb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwKCQkJY29udGFpbmVyID0gJCgiLmpzLWRpc2N1c3Npb24iKSwKCQkJc29ydEJsb2NrID0gJCgiLmdoc3Itc29ydC1ibG9jayIpLAoJCQlsb2FkTW9yZSA9ICQoIiNwcm9ncmVzc2l2ZS10aW1lbGluZS1pdGVtLWNvbnRhaW5lciIpLAoJCQlkaXIgPSBjdXJyZW50U29ydC5kaXIsCgkJCXNvcnRBc2MgPSBkaXIgIT09IDEsCgkJCXR5cGUgPSBjdXJyZW50U29ydC5lbCA/IGN1cnJlbnRTb3J0LmVsLmRhdGFzZXQuc29ydCA6ICJOT05FIjsKCQljdXJyZW50U29ydC50eXBlID0gdHlwZTsKCQl1cGRhdGVBdmF0YXIoKTsKCgkJJCQoIi5qcy10aW1lbGluZS1pdGVtIikKCQkJLnNvcnQoKGEsIGIpID0+IHsKCQkJCWNvbnN0IGF2ID0gZXh0cmFjdFNvcnRWYWx1ZShhLCB0eXBlLCBkaXIpLAoJCQkJCWJ2ID0gZXh0cmFjdFNvcnRWYWx1ZShiLCB0eXBlLCBkaXIpOwoJCQkJaWYgKGF2ID09PSBidikgewoJCQkJCXJldHVybiBzdGFibGVTb3J0VmFsdWUoYSkgLSBzdGFibGVTb3J0VmFsdWUoYik7CgkJCQl9CgkJCQlyZXR1cm4gc29ydEFzYyA/IGF2IC0gYnYgOiBidiAtIGF2OwoJCQl9KQoJCQkuZm9yRWFjaChlbCA9PiB7CgkJCQlmcmFnbWVudC5hcHBlbmRDaGlsZChlbCk7CgkJCX0pOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7CgkJaWYgKGxvYWRNb3JlKSB7CgkJCS8vIE1vdmUgbG9hZCBtb3JlIGNvbW1lbnRzIHRvIHRvcAoJCQlzb3J0QmxvY2sucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobG9hZE1vcmUsIHNvcnRCbG9jay5uZXh0U2libGluZyk7CgkJfQoJCXNldFRpbWVvdXQoKCkgPT4gewoJCQljdXJyZW50U29ydC5idXN5ID0gZmFsc2U7CgkJfSwgMTAwKTsKCX0KCglmdW5jdGlvbiB1cGRhdGUoKSB7CgkJaWYgKCFjdXJyZW50U29ydC5pbml0IHx8ICQkKCIuaGFzLXJlYWN0aW9ucyIpLmxlbmd0aCA8IDIpIHsKCQkJcmV0dXJuIHRvZ2dsZVNvcnRCbG9jayhmYWxzZSk7CgkJfQoJCXRvZ2dsZVNvcnRCbG9jayh0cnVlKTsKCQljb25zdCBpdGVtcyA9ICQkKCIuanMtdGltZWxpbmUtaXRlbTpub3QoW2RhdGEtc29ydC1jb21tZW50LWRhdGVdKSIpOwoJCWlmIChpdGVtcykgewoJCQlpdGVtcy5mb3JFYWNoKGVsID0+IHsKCQkJCWxldCBkYXRlID0gJCgiW2RhdGV0aW1lXSIsIGVsKTsKCQkJCWlmIChkYXRlKSB7CgkJCQkJZGF0ZSA9IGRhdGUuZ2V0QXR0cmlidXRlKCJkYXRldGltZSIpOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSgiZGF0YS1zb3J0LWNvbW1lbnQtZGF0ZSIsIERhdGUucGFyc2UoZGF0ZSkpOwoJCQkJfQoJCQkJLy8gQWRkIHJlc2V0IGRhdGUgJiBtb3N0IGFjdGl2ZSBzdW1tYXRpb24KCQkJCWVsLnNldEF0dHJpYnV0ZSgiZGF0YS1zb3J0LWNvbW1lbnQtc3VtIiwgc3VtT2ZSZWFjdGlvbnMoZWwpKTsKCQkJfSk7CgkJfQoJCWlmIChjdXJyZW50U29ydC5lbCAmJiAhY3VycmVudFNvcnQuYnVzeSkgewoJCQlzb3J0KCk7CgkJfQoJfQoKCWZ1bmN0aW9uIGluaXRTb3J0KGV2ZW50KSB7CgkJbGV0IGRpcmVjdGlvbiwKCQkJdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwoJCWlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJnaHNyLXNvcnQtYnV0dG9uIikpIHsKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgkJCWlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJnaHNyLWF2YXRhci1zb3J0IikpIHsKCQkJCS8vIFVzaW5nIGF2YXRhciBzb3J0IGJ1dHRvbjsgcmV0YXJnZXQgYnV0dG9uCgkJCQl0YXJnZXQgPSAkKGAuZ2hzci1zb3J0LWJ1dHRvbltkYXRhLXNvcnQ9IiR7Y3VycmVudFNvcnQudHlwZX0iXWApOwoJCQkJY3VycmVudFNvcnQuZWwgPSB0YXJnZXQ7CgkJCX0KCQkJJCQoIi5naHNyLXNvcnQtYnV0dG9uIikuZm9yRWFjaChlbCA9PiB7CgkJCQllbC5jbGFzc0xpc3QudG9nZ2xlKCJzZWxlY3RlZCIsIGVsID09PSB0YXJnZXQpOwoJCQkJZWwuY2xhc3NMaXN0LnJlbW92ZSgiYXNjIiwgImRlc2MiKTsKCQkJfSk7CgkJCWlmIChjdXJyZW50U29ydC5lbCA9PT0gdGFyZ2V0KSB7CgkJCQljdXJyZW50U29ydC5kaXIgPSAoY3VycmVudFNvcnQuZGlyICsgMSkgJSAzOwoJCQl9IGVsc2UgewoJCQkJY3VycmVudFNvcnQuZWwgPSB0YXJnZXQ7CgkJCQljdXJyZW50U29ydC5kaXIgPSAxOwoJCQl9CgkJCWlmIChjdXJyZW50U29ydC5kaXIgIT09IDApIHsKCQkJCWRpcmVjdGlvbiA9IGN1cnJlbnRTb3J0LmRpciA9PT0gMSA/ICJkZXNjIiA6ICJhc2MiOwoJCQkJY3VycmVudFNvcnQuZWwuY2xhc3NMaXN0LmFkZChkaXJlY3Rpb24pOwoJCQkJJCgiLmdoc3ItYXZhdGFyLXNvcnQiKS5jbGFzc0xpc3QuYWRkKGRpcmVjdGlvbik7CgkJCX0KCQkJc29ydCgpOwoJCX0gZWxzZSBpZiAodGFyZ2V0Lm1hdGNoZXMoIi5naHNyLXNvcnQtYXZhdGFyLCAuZ2hzci1pY29uLXdyYXAiKSkgewoJCQkkKCIuZ2hzci1zb3J0LWJsb2NrIikuY2xhc3NMaXN0LnRvZ2dsZSgiZ2hzci1pcy1jb2xsYXBzZWQiKTsKCQl9Cgl9CgoJZnVuY3Rpb24gdG9nZ2xlU29ydEJsb2NrKHNob3cpIHsKCQljb25zdCBibG9jayA9ICQoIi5naHNyLXNvcnQtYmxvY2siKTsKCQlpZiAoYmxvY2spIHsKCQkJYmxvY2suc3R5bGUuZGlzcGxheSA9IHNob3cgPyAiYmxvY2siIDogIm5vbmUiOwoJCX0gZWxzZSBpZiAoc2hvdykgewoJCQlhZGRTb3J0QmxvY2soKTsKCQl9Cgl9CgoJZnVuY3Rpb24gYWRkU29ydEJsb2NrKCkgewoJCWN1cnJlbnRTb3J0LmJ1c3kgPSB0cnVlOwoJCWNvbnN0IGZpcnN0ID0gJCgiLlRpbWVsaW5lSXRlbSIpOwoJCWlmIChmaXJzdCkgewoJCQlmaXJzdC5jbGFzc0xpc3QuYWRkKCJnaHNyLXNraXAtc29ydCIpOwoJCQlmaXJzdC5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyRW5kIiwgc29ydEJsb2NrKTsKCQl9CgkJY3VycmVudFNvcnQuYnVzeSA9IGZhbHNlOwoJfQoKCWZ1bmN0aW9uIGluaXQoKSB7CgkJaWYgKCFjdXJyZW50U29ydC5pbml0KSB7CgkJCUdNX2FkZFN0eWxlKGAKCQkJCS5naHNyLXNvcnQtYmxvY2sgLmNvbW1lbnQtYm9keSB7IHBhZGRpbmc6IDAgMTBweDsgfQoJCQkJLmdoc3Itc29ydC1ibG9jayAudGltZWxpbmUtY29tbWVudC1oZWFkZXIgeyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KCQkJCS5naHNyLXNvcnQtYmxvY2sgLmVtb2ppIHsgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOyBwb2ludGVyLWV2ZW50czogbm9uZTsgfQoJCQkJLmdoc3Itc29ydC1ibG9jayAuYnRuLmFzYyAuZW1vamk6YWZ0ZXIgeyBjb250ZW50OiAi4payIjsgfQoJCQkJLmdoc3Itc29ydC1ibG9jayAuYnRuLmRlc2MgLmVtb2ppOmFmdGVyIHsgY29udGVudDogIuKWvCI7IH0KCQkJCS5naHNyLXNvcnQtYXZhdGFyLCAuZ2hzci1pY29uLXdyYXAgeyBoZWlnaHQ6IDQ4cHg7IHdpZHRoOiA0NHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KCQkJCS5naHNyLXNvcnQtYXZhdGFyIHsgYmFja2dyb3VuZDogcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjIpOyBib3JkZXI6ICM3NzcgMXB4IHNvbGlkOyB9CgkJCQkuZ2hzci1zb3J0LWF2YXRhciAuZW1vamkgeyBwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogLTM2cHg7IH0KCQkJCS5naHNyLXNvcnQtYXZhdGFyIHN2ZyB7IHBvaW50ZXItZXZlbnRzOiBub25lOyB9CgkJCQkuZ2hzci1zb3J0LWF2YXRhci5naHNyLW5vLXNlbGVjdGlvbiB7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogMCA0cHggMCAwOyB9CgkJCQkuZ2hzci1zb3J0LWF2YXRhci5naHNyLW5vLXNlbGVjdGlvbiAuZW1vamksCgkJCQkuZ2hzci1zb3J0LWF2YXRhci5naHNyLW5vLXNlbGVjdGlvbiAuYnRuLAoJCQkJLmdoc3Itc29ydC1hdmF0YXI6bm90KC5naHNyLW5vLXNlbGVjdGlvbikgc3ZnLmdoc3Itc29ydC1pY29uIHsgZGlzcGxheTogbm9uZTsgfQoJCQkJLmdoc3Itc29ydC1hdmF0YXIgLmJ0biB7IGJvcmRlci1yYWRpdXM6IDIwcHg7IHdpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAtNXB4OyByaWdodDogLTVweDsgfQoJCQkJLmdoc3Itc29ydC1hdmF0YXIgLmJ0biBzcGFuIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiA1cHg7IHRvcDogMDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IH0KCQkJCS5naHNyLXNvcnQtYXZhdGFyIC5idG4uYXNjIHNwYW4geyB0b3A6IC0zcHg7IH0KCQkJCS5naHNyLXNvcnQtYXZhdGFyIC5idG4gc3BhbiBzdmcgeyBoZWlnaHQ6IDEwcHg7IHdpZHRoOiAxMHB4OyB2ZXJ0aWNhbC1hbGlnbjogdW5zZXQ7IH0KCQkJCS5naHNyLXNvcnQtYmxvY2suZ2hzci1pcy1jb2xsYXBzZWQgaDMsCgkJCQkuZ2hzci1zb3J0LWJsb2NrLmdoc3ItaXMtY29sbGFwc2VkIC50aW1lbGluZS1jb21tZW50OmJlZm9yZSwKCQkJCS5naHNyLXNvcnQtYmxvY2suZ2hzci1pcy1jb2xsYXBzZWQgLnRpbWVsaW5lLWNvbW1lbnQ6YWZ0ZXIgeyBkaXNwbGF5OiBub25lOyB9CgkJCQkuZ2hzci1zb3J0LWJsb2NrLmdoc3ItaXMtY29sbGFwc2VkIC50aW1lbGluZS1jb21tZW50IHsgbWFyZ2luOiAxMHB4IDA7IH0KCQkJCS5naHNyLXNvcnQtYmxvY2suZ2hzci1pcy1jb2xsYXBzZWQgLlRpbWVsaW5lSXRlbS1hdmF0YXIgeyB0b3A6IDZweDsgfQoJCQlgKTsKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZ2htbzpjb250YWluZXIiLCB1cGRhdGUpOwoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJnaG1vOmNvbW1lbnRzIiwgdXBkYXRlKTsKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBpbml0U29ydCk7CgkJCWN1cnJlbnRTb3J0LmluaXQgPSB0cnVlOwoJCQl1cGRhdGUoKTsKCQkJLy8gIk5PTkUiIGNhbiBvbmx5IGJlIHNlZW4gb24gdXNlcnNjcmlwdCBpbml0L2ZhY3RvcnkgcmVzZXQKCQkJaWYgKCQoIi5naHNyLXNvcnQtYmxvY2siKSAmJiBjdXJyZW50U29ydC50eXBlICE9PSAiTk9ORSIpIHsKCQkJCXVwZGF0ZUF2YXRhcigpOwoJCQl9CgkJfQoJfQoKCWZ1bmN0aW9uICQoc2VsZWN0b3IsIGVsKSB7CgkJcmV0dXJuIChlbCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7Cgl9CgoJZnVuY3Rpb24gJCQoc2VsZWN0b3IsIGVsKSB7CgkJcmV0dXJuIFsuLi4oZWwgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXTsKCX0KCglpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImxvYWRpbmciKSB7CgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIHVwZGF0ZSwge29uY2U6IHRydWV9KTsKCX0gZWxzZSB7CgkJaW5pdCgpOwoJfQp9KSgpOwo=",
            "storage": {
                "data": {},
                "ts": 1636665066915
            },
            "uuid": "31410fbe-5cc6-4a14-a3f3-339c85f4d804"
        },
        {
            "enabled": true,
            "file_url": "https://raw.githubusercontent.com/Mottie/GitHub-userscripts/master/github-update-fork.user.js",
            "name": "GitHub Update Fork",
            "options": {
                "check_for_updates": true,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [
                        "https://github.com/*"
                    ],
                    "orig_matches": [],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 16,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdpdEh1YiBVcGRhdGUgRm9yawovLyBAdmVyc2lvbiAgICAgMC4yLjAKLy8gQGRlc2NyaXB0aW9uIEEgdXNlcnNjcmlwdCB0aGF0IGFkZHMgYSBsaW5rIHRvIHVwZGF0ZSB5b3VyIGZvcmsKLy8gQGxpY2Vuc2UgICAgIE1JVAovLyBAYXV0aG9yICAgICAgUm9iIEdhcnJpc29uCi8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vTW90dGllCi8vIEBpbmNsdWRlICAgICBodHRwczovL2dpdGh1Yi5jb20vKgovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtaWRsZQovLyBAZ3JhbnQgICAgICAgbm9uZQovLyBAaWNvbiAgICAgICAgaHR0cHM6Ly9naXRodWIuZ2l0aHViYXNzZXRzLmNvbS9waW5uZWQtb2N0b2NhdC5zdmcKLy8gQHVwZGF0ZVVSTCAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Nb3R0aWUvR2l0SHViLXVzZXJzY3JpcHRzL21hc3Rlci9naXRodWItdXBkYXRlLWZvcmsudXNlci5qcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01vdHRpZS9HaXRIdWItdXNlcnNjcmlwdHMvbWFzdGVyL2dpdGh1Yi11cGRhdGUtZm9yay51c2VyLmpzCi8vIEBzdXBwb3J0VVJMICBodHRwczovL2dpdGh1Yi5jb20vTW90dGllL0dpdEh1Yi11c2Vyc2NyaXB0cy9pc3N1ZXMKLy8gPT0vVXNlclNjcmlwdD09CigoKSA9PiB7CgkidXNlIHN0cmljdCI7CgoJZnVuY3Rpb24gZ2V0VXBzdHJlYW1CcmFuY2goY29tcGFyZUxpbmssIGluZm8pIHsKCQkvLyBMb29rIGZvciAiY29tbWl0IGJlaGluZCIgb3IgImNvbW1pdHMgYmVoaW5kIgoJCWlmIChjb21wYXJlTGluayAmJiBpbmZvICYmIC9jb21taXRzP1xzYmVoaW5kLy50ZXN0KGluZm8udGV4dENvbnRlbnQpKSB7CgkJCS8vIGZvcmtlZCBmcm9tIGxpbmsgdGV4dCAiOnVzZXIvOnJlcG8iCgkJCWNvbnN0IHJlZ2V4cCA9IC9iZWhpbmRccyooLis6Wy1cdy5dKykvOwoJCQkvLyBUaGUgbWF0Y2ggd2lsbCBpbmNsdWRlIHRoZSBzZW50ZW5jZSBwZXJpb2QgYmVjYXVzZSBicmFuY2ggbmFtZXMgbWF5CgkJCS8vIGluY2x1ZGUgYSB2ZXJzaW9uIG51bWJlciwgZS5nLiAidXNlcjpteS1icmFuY2gtdjEuMCIKCQkJY29uc3QgYnJhbmNoID0gKGluZm8udGV4dENvbnRlbnQubWF0Y2gocmVnZXhwKSB8fCBbXSlbMV07CgkJCXJldHVybiBicmFuY2gKCQkJCT8gYnJhbmNoLnN1YnN0cmluZygwLCBicmFuY2gubGVuZ3RoIC0gMSkKCQkJCTogbnVsbDsKCQl9CgkJcmV0dXJuIG51bGw7Cgl9CgoJZnVuY3Rpb24gZ2V0VXNlckJyYW5jaCgpIHsKCQkvLyBUaGUgYnJhbmNoIHNlbGVjdG9yIG1heSBjb250YWluIGEgdHJ1bmNhdGVkIGJyYW5jaCBuYW1lLCBzbyB1c2UgdGhlIHVybAoJCWNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CgkJY29uc3QgaW5kZXggPSBwYXRoLmluZGV4T2YoIi90cmVlLyIpOwoJCXJldHVybiBpbmRleCA+IC0xCgkJCT8gcGF0aC5zdWJzdHJpbmcoaW5kZXggKyA2LCBwYXRoLmxlbmd0aCkKCQkJOiAibWFzdGVyIjsKCX0KCglmdW5jdGlvbiBhZGRMaW5rKGNvbXBhcmVMaW5rLCBpbmZvKSB7CgkJY29uc3QgYnJhbmNoID0gZ2V0VXBzdHJlYW1CcmFuY2goY29tcGFyZUxpbmssIGluZm8pOwoJCWlmIChicmFuY2gpIHsKCQkJY29uc3QgdXNlckJyYW5jaCA9IGdldFVzZXJCcmFuY2goKTsKCQkJY29uc3QgcHJMaW5rID0gY29tcGFyZUxpbmsucHJldmlvdXNFbGVtZW50U2libGluZzsKCQkJY29uc3QgbGluayA9IHByTGluay5jbG9uZU5vZGUoKTsKCQkJLy8gaHR0cHM6Ly9naXRodWIuY29tLzxGT1JLPi88UkVQTz4vY29tcGFyZS88QlJBTkNIPi4uLjxTT1VSQ0U+OjxCUkFOQ0g+CgkJCWxpbmsuaHJlZiA9IGAke2NvbXBhcmVMaW5rLmhyZWZ9LyR7dXNlckJyYW5jaH0uLi4ke2JyYW5jaH1gOwoJCQlsaW5rLmNsYXNzTGlzdC5hZGQoImdodWYtdXBkYXRlLWxpbmsiKTsKCQkJbGluay5hcHBlbmRDaGlsZCgkKCJzdmciLCBwckxpbmspLmNsb25lTm9kZSh0cnVlKSk7CgkJCWxpbmsuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiBVcGRhdGUgZm9yayIpKTsKCQkJcHJMaW5rLmluc2VydEFkamFjZW50RWxlbWVudCgiYmVmb3JlYmVnaW4iLCBsaW5rKTsKCQl9Cgl9CgoJZnVuY3Rpb24gaW5pdCgpIHsKCQljb25zdCBjb21wYXJlTGluayA9ICQoImFbaHJlZio9J3B1bGwvbmV3J10gKyBhW2hyZWYkPScvY29tcGFyZSddIik7CgkJY29uc3QgaW5mbyA9IGNvbXBhcmVMaW5rPy5jbG9zZXN0KCIuQm94Iik/LmZpcnN0RWxlbWVudENoaWxkOwoJCWlmIChjb21wYXJlTGluayAmJiBpbmZvKSB7CgkJCWFkZExpbmsoY29tcGFyZUxpbmssIGluZm8pOwoJCX0KCX0KCglmdW5jdGlvbiAkKHN0ciwgZWwgPSBkb2N1bWVudCkgewoJCXJldHVybiBlbC5xdWVyeVNlbGVjdG9yKHN0cik7Cgl9CgoJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigicGpheDplbmQiLCBpbml0KTsKCWluaXQoKTsKCn0pKCk7Cg==",
            "storage": {
                "data": {},
                "ts": 1636665106109
            },
            "uuid": "20aad555-b97e-4d4a-bfe5-7853897de54d"
        },
        {
            "enabled": false,
            "file_url": "https://raw.githubusercontent.com/Mottie/Github-userscripts/master/github-title-notification.user.js",
            "name": "GitHub - Pin Repos to Sidebar",
            "options": {
                "check_for_updates": false,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "http*://github.com/*dashboard",
                        "http*://github.com/"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null
            },
            "position": 17,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIEdpdEh1YiAtIFBpbiBSZXBvcyB0byBTaWRlYmFyCi8vIEB2ZXJzaW9uICAgICAwLjEuMAovLyBAZGVzY3JpcHRpb24gQSB1c2Vyc2NyaXB0IHRoYXQgYWxsb3dzIHlvdSB0byBwaW4gcmVwb3NpdG9yaWVzIHRvIHRoZSBHaXRIdWIgZGFzaGJvYXJkIHNpZGViYXIKLy8gQGxpY2Vuc2UgICAgIE1JVAovLyBAYXV0aG9yICAgICAgSWFuIENoYW1iZXJsYWluCi8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vaWFuLWgtY2hhbWJlcmxhaW4KLy8gQG1hdGNoICAgICAgIGh0dHAqOi8vZ2l0aHViLmNvbS8qZGFzaGJvYXJkCi8vIEBtYXRjaCAgICAgICBodHRwKjovL2dpdGh1Yi5jb20vCi8vIEBncmFudCAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR01fc2V0VmFsdWUKLy8gQGdyYW50ICAgICAgIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIKLy8gQGljb24gICAgICAgIGh0dHBzOi8vZ2l0aHViLmdpdGh1YmFzc2V0cy5jb20vcGlubmVkLW9jdG9jYXQuc3ZnCi8vID09L1VzZXJTY3JpcHQ9PQoKCi8qKgpHZW5lcmFsIFRPRE9TOgogIC0gRE9NIHVwZGF0ZSBhZnRlciBjbGlja2luZyAidW5waW4iCiAgLSB1cGRhdGUgRE9NIGFmdGVyIHVzZXIgY2xpY2tzICJTaG93IG1vcmUiLCBvciB0eXBlcyBpbiBmaWx0ZXIgYm94ICh0byBnZXQgcGluIGJ1dHRvbikKICAtIGdlbmVyYWwgZWZmaWNpZW5jeSwgcHJvYmFibHkgZG9pbmcgd2F5IG1vcmUgZmV0Y2hlcyB0aGFuIG5lZWRlZC4gTWF5YmUgc29tZSBraW5kIG9mIGNhY2hlCiAgLSBmaW5hbGl6ZSA9VXNlclNjcmlwdD0gaGVhZGVyIGFzIG5lZWRlZCwgVVJMcyBldGMuCiovCgooZnVuY3Rpb24oKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgbG9jYWxTdG9yYWdlS2V5ID0gJ3Bpbm5lZFJlcG9zJzsKICAgIGNvbnN0IHJlcG9TZWxlY3RvcnMgPSBbJ2xpLnNvdXJjZScsICdsaS5mb3JrJ107CgogICAgZnVuY3Rpb24gbG9nKC4uLmFyZ3MpIHsKICAgICAgICBjb25zdCBkZWJ1Z0xvZ3MgPSBmYWxzZTsKCiAgICAgICAgaWYgKGRlYnVnTG9ncykgewogICAgICAgICAgICBjb25zb2xlLmxvZyguLi5hcmdzKTsKICAgICAgICB9CiAgICB9CgogICAgbGV0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKCiAgICBhc3luYyBmdW5jdGlvbiBnZXRCb29rbWFya0ljb24oZmlsbGVkKSB7CiAgICAgICAgbGV0IGZpbGxlZEJvb2ttYXJrID0gbnVsbDsKICAgICAgICBsZXQgdW5maWxsZWRCb29rbWFyayA9IG51bGw7CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoSWNvbih1cmwsIGZpbGxlZCkgewogICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9ICdpbWFnZS9zdmcreG1sJzsKCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdBY2NlcHQnOiBtaW1lVHlwZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuaW5nKCdVbmFibGUgdG8gbG9hZCBib29rbWFyayBpY29uJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7CiAgICAgICAgICAgIGxldCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRleHQsIG1pbWVUeXBlKTsKICAgICAgICAgICAgaWYgKGRvYyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm5pbmcoJ1VuYWJsZSB0byBwYXJzZSBib29rbWFyayBpY29uJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGVsZW0gPSBkb2MuZmlyc3RDaGlsZDsKCiAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCd3aWR0aCcsIDE2KTsKICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIDE2KTsKICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdvY3RpY29uJyk7CiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChmaWxsZWQgPyAnb2N0aWNvbi1ib29rbWFyay1maWxsJyA6ICdvY3RpY29uLWJvb2ttYXJrJyk7CiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChmaWxsZWQgPyAnanMtYm9va21hcmstZmlsbGVkJyA6ICdqcy1ib29rbWFyaycpOwoKICAgICAgICAgICAgcmV0dXJuIGVsZW07CiAgICAgICAgfQoKICAgICAgICBpZiAoZmlsbGVkKSB7CiAgICAgICAgICAgIGlmIChmaWxsZWRCb29rbWFyayA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBmaWxsZWRCb29rbWFyayA9IGF3YWl0IGZldGNoSWNvbignaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3ByaW1lci9vY3RpY29ucy9tYWluL2ljb25zL2Jvb2ttYXJrLWZpbGwtMjQuc3ZnJywgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZpbGxlZEJvb2ttYXJrLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodW5maWxsZWRCb29rbWFyayA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB1bmZpbGxlZEJvb2ttYXJrID0gYXdhaXQgZmV0Y2hJY29uKCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcHJpbWVyL29jdGljb25zL21haW4vaWNvbnMvYm9va21hcmstMjQuc3ZnJywgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB1bmZpbGxlZEJvb2ttYXJrLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICAgIGNvbnN0IGNvbnRleHRQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5TZWxlY3RNZW51JykuYXR0cmlidXRlcy5zcmMudmFsdWUpOwogICAgICAgIGNvbnN0IHJlcG9Db250ZXh0ID0gY29udGV4dFBhcmFtcy5nZXQoJy9kYXNoYm9hcmQvYWpheF9jb250ZXh0X2xpc3Q/Y3VycmVudF9jb250ZXh0Jyk7CgogICAgICAgIGxvZyhgQ3VycmVudCBkYXNoYm9hcmQgcmVwbyBjb250ZXh0OiAiJHtyZXBvQ29udGV4dH0iYCk7CgogICAgICAgIGNvbnN0IHJlcG9FbGVtU2VsZWN0b3IgPSByZXBvU2VsZWN0b3JzLm1hcChzID0+IGAke3N9IGFgKS5qb2luKCcsJyk7CgogICAgICAgIC8vIFRPRE86IHNob3VsZCB0aGlzIGJlIGluIGFuIGluaXQgZnVuY3Rpb24gaW5zdGVhZCBvZiBoZXJlPwogICAgICAgIGxldCBsb2FkZWRSZXBvRWxlbXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocmVwb0VsZW1TZWxlY3RvcikpOwoKICAgICAgICBhd2FpdCB1cGRhdGVSZXBvRE9NKGxvYWRlZFJlcG9FbGVtcyk7CgogICAgICAgIC8vIGZpbmQgYW5kIGZldGNoIHRoZSAiU2hvdyBtb3JlIiByZXBvcyBiYXNlZCBvbiB0aGUgY29udGV4dAogICAgICAgIGxldCBmZXRjaFVybCA9IG51bGw7CiAgICAgICAgbGV0IHNob3dNb3JlU2VsZWN0b3IgPSAnLmpzLW1vcmUtcmVwb3MtZm9ybSA+IGlucHV0W25hbWU9InlvdXJfcmVwb3NfY3Vyc29yIl0nOwoKICAgICAgICBsZXQgcmVwb3NDdXJzb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNob3dNb3JlU2VsZWN0b3IpOwogICAgICAgIGlmIChyZXBvc0N1cnNvciA9PSBudWxsKSB7CiAgICAgICAgICAgIHNob3dNb3JlU2VsZWN0b3IgPSAnLmpzLW1vcmUtcmVwb3MtZm9ybSA+IGlucHV0W25hbWU9InJlcG9zX2N1cnNvciJdJzsKCiAgICAgICAgICAgIHJlcG9zQ3Vyc29yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzaG93TW9yZVNlbGVjdG9yKTsKICAgICAgICAgICAgaWYgKHJlcG9zQ3Vyc29yICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vIFdlJ3JlIGluIHVzZXIgY29udGV4dCBhbmQgbmVlZCB0byBsb2FkIG1vcmUgcmVwb3MKICAgICAgICAgICAgICAgIGZldGNoVXJsID0gYC9kYXNoYm9hcmQvYWpheF9yZXBvc2l0b3JpZXM/bG9jYXRpb249Y2VudGVyJmJ1dHRvbj0mcmVwb3NfY3Vyc29yPWA7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJbiBvcmcgY29udGV4dCwgbG9hZCBtb3JlIHJlcG9zCiAgICAgICAgICAgIGZldGNoVXJsID0gYC9vcmdhbml6YXRpb25zLyR7cmVwb0NvbnRleHR9L2FqYXhfeW91cl9yZXBvcz9pbnB1dF9pZD1vcmctcmVwb3MtZmlsdGVyLXNtJmJ1dHRvbj0meW91cl9yZXBvc19jdXJzb3I9YDsKICAgICAgICB9CgogICAgICAgIGxldCBwaW5uZWRSZXBvSHJlZnMgPSBnZXRQaW5uZWRSZXBvcygpOwoKICAgICAgICAvLyBUT0RPIG1heWJlIGRvIHNvbWUgY2FjaGluZyBvZiB0aGUgcmVzcG9uc2VzLCBidXQgaWRrIGhvdyB3b3J0aCBpdCB0aGF0IGlzLgogICAgICAgIHdoaWxlIChyZXBvc0N1cnNvciAhPSBudWxsKSB7CiAgICAgICAgICAgIGNvbnN0IGN1cnNvclZhbHVlID0gcmVwb3NDdXJzb3IuYXR0cmlidXRlcy52YWx1ZS52YWx1ZTsKCiAgICAgICAgICAgIGxvZyhgRmV0Y2hpbmcgJHtmZXRjaFVybCtjdXJzb3JWYWx1ZX1gKTsKCiAgICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gJ3RleHQvaHRtbCc7CiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6ICJpbmNsdWRlIiwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogbWltZVR5cGUsCiAgICAgICAgICAgICAgICAgICAgIngtcmVxdWVzdGVkLXdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtRGVzdCI6ICJlbXB0eSIsCiAgICAgICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjogImNvcnMiLAogICAgICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtU2l0ZSI6ICJzYW1lLW9yaWdpbiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWZlcnJlcjogZG9jdW1lbnQuVVJMLAogICAgICAgICAgICAgICAgbW9kZTogImNvcnMiCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBuZXh0UmVwb1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmV0Y2hVcmwgKyBjdXJzb3JWYWx1ZSwgcmVxdWVzdFBhcmFtcyk7CgogICAgICAgICAgICBpZiAoIW5leHRSZXBvUmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybmluZygiVW5hYmxlIHRvIGxvYWQgYWxsIHJlcG9zIGZvciB0aGUgY3VycmVudCBkYXNoYm9hcmQiKQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB0ZXh0ID0gYXdhaXQgbmV4dFJlcG9SZXNwb25zZS50ZXh0KCk7CiAgICAgICAgICAgIGxldCBuZXh0UmVwb3NEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHRleHQsIG1pbWVUeXBlKTsKCiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVJlcG9ET00oQXJyYXkuZnJvbShuZXh0UmVwb3NEb2MucXVlcnlTZWxlY3RvckFsbChyZXBvRWxlbVNlbGVjdG9yKSkpOwoKICAgICAgICAgICAgcmVwb3NDdXJzb3IgPSBuZXh0UmVwb3NEb2MucXVlcnlTZWxlY3RvcihzaG93TW9yZVNlbGVjdG9yKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0UGlubmVkUmVwb3MoKSB7CiAgICAgICAgY29uc3QgcmVwb3MgPSBKU09OLnBhcnNlKEdNX2dldFZhbHVlKGxvY2FsU3RvcmFnZUtleSwgJ1tdJykpOwogICAgICAgIGxvZyhgUGlubmVkIHJlcG9zIGZyb20gc3RvcmFnZTogJHtyZXBvc31gKTsKICAgICAgICByZXR1cm4gcmVwb3M7CiAgICB9CgogICAgLyoqCiAgICAgICogUmV0dXJucyBhIGxpc3Qgb2YgbGl2ZSBgdWxgIGVsZW1lbnRzIHdoZXJlIHBpbm5lZCByZXBvcyBzaG91bGQgYmUgaW5zZXJ0ZWQKICAgICAqLwogICAgZnVuY3Rpb24gZmluZE9yQ3JlYXRlUGlubmVkUmVwb0xpc3RzKCkgewogICAgICAgIGxldCBwaW5uZWRSZXBvTGlzdEVsZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtcGlubmVkLXJlcG9zJyk7CgogICAgICAgIGlmIChwaW5uZWRSZXBvTGlzdEVsZW1zLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIGxldCBwaW5uZWRSZXBvTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CgogICAgICAgICAgICAvLyBmb3IgZGVidWdnaW5nIGFuZCBmaW5kaW5nIHRvIGFkZCByZXBvcyB0byBpdCBsYXRlcjoKICAgICAgICAgICAgcGlubmVkUmVwb0xpc3QuY2xhc3NMaXN0LmFkZCgnanMtcGlubmVkLXJlcG9zJyk7CgogICAgICAgICAgICAvLyBGb3Igc3R5bGUgbWF0Y2hpbmcgd2l0aCBvdGhlciB1bCBmb3IgcmVwb3M6CiAgICAgICAgICAgIHBpbm5lZFJlcG9MaXN0LmNsYXNzTGlzdC5hZGQoJ2xpc3Qtc3R5bGUtbm9uZScpOwogICAgICAgICAgICBwaW5uZWRSZXBvTGlzdC5jbGFzc0xpc3QuYWRkKCdtdC1tZC0zJyk7CiAgICAgICAgICAgIHBpbm5lZFJlcG9MaXN0LmNsYXNzTGlzdC5hZGQoJ21iLW1kLTMnKTsKCiAgICAgICAgICAgIGZvciAobGV0IHJlcG9zRmlsdGVyIG9mIFsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtcmVwb3MtZmlsdGVyLWxlZnQnKSwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmctcmVwb3MtZmlsdGVyLXNtJyksCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JnLXJlcG9zLWZpbHRlci14bCcpLAogICAgICAgICAgICBdKSB7CiAgICAgICAgICAgICAgICBpZiAocmVwb3NGaWx0ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJlcG9zRmlsdGVyLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHBpbm5lZFJlcG9MaXN0LmNsb25lTm9kZSh0cnVlKSwgcmVwb3NGaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtcGlubmVkLXJlcG9zJyk7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUmVwb0RPTShuZXdSZXBvRWxlbWVudHMpIHsKICAgICAgICBsZXQgcGlubmVkUmVwb0hyZWZzID0gZ2V0UGlubmVkUmVwb3MoKTsKCiAgICAgICAgbGV0IHBpbm5lZFJlcG9MaXN0cyA9IGZpbmRPckNyZWF0ZVBpbm5lZFJlcG9MaXN0cygpOwoKICAgICAgICBmb3IgKGNvbnN0IHJlcG9FbGVtIG9mIG5ld1JlcG9FbGVtZW50cykgewogICAgICAgICAgICBsZXQgcGFyZW50ID0gcmVwb0VsZW0ucGFyZW50RWxlbWVudDsKICAgICAgICAgICAgbGV0IGNoaWxkRGl2ID0gbnVsbDsKCiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT0gbnVsbCAmJiBwYXJlbnQudGFnTmFtZSAhPT0gJ0xJJykgewogICAgICAgICAgICAgICAgY2hpbGREaXYgPSBwYXJlbnQ7CiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgaHJlZiA9IHJlcG9FbGVtLmF0dHJpYnV0ZXMuaHJlZi52YWx1ZTsKCiAgICAgICAgICAgIGlmIChwYXJlbnQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29uc3QgaXNQaW5uZWQgPSBwaW5uZWRSZXBvSHJlZnMuaW5jbHVkZXMoaHJlZik7CgogICAgICAgICAgICAgICAgaWYgKHBhcmVudC5xdWVyeVNlbGVjdG9yKCcgYnV0dG9uLmpzLXJlcG8tcGluJykgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGxldCBwaW5CdXR0b24gPSBhd2FpdCBidWlsZFBpbkJ1dHRvbihpc1Bpbm5lZCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZERpdiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkRGl2LmFwcGVuZENoaWxkKHBpbkJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHBpbkJ1dHRvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdkLWZsZXgnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGlzUGlubmVkKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nKGBQaW5uaW5nIHJlcG8gJyR7aHJlZn0nYCk7CiAgICAgICAgICAgICAgICAgICAgLy8gVGFrZSBpdCBvdXQgb2YgdGhlICJ1bnBpbm5lZCIgbGlzdAogICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmUoKTsKCiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVwb0xpc3Qgb2YgcGlubmVkUmVwb0xpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBvTGlzdC5xdWVyeVNlbGVjdG9yKGBsaSBhW2hyZWY9JyR7aHJlZn0nXWApID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG9MaXN0LmFwcGVuZENoaWxkKHBhcmVudC5jbG9uZU5vZGUodHJ1ZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBQcm9iYWJseSBhbHNvIG5lZWQgdG8gcmVtb3ZlKCkgaGVyZSBpZiBpdCdzIGluIHRoZSBwaW4gbGlzdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKGxldCBlbGVtIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbi5qcy1yZXBvLXBpbicpKSB7CiAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQaW5DbGljayk7CiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGJ1aWxkUGluQnV0dG9uKHBpbm5lZCkgewogICAgICAgIGxldCB1bnBpbkxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICB1bnBpbkxpbmsuY2xhc3NMaXN0LmFkZCgnanMtcmVwby1waW4nKTsKICAgICAgICB1bnBpbkxpbmsuY2xhc3NMaXN0LmFkZCgnY29sb3ItZmctZGVmYXVsdCcpOwogICAgICAgIHVucGluTGluay5jbGFzc0xpc3QuYWRkKCdidG4tbGluaycpOwogICAgICAgIHVucGluTGluay5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ21hcmdpbi1sZWZ0OiBhdXRvOycpOwoKICAgICAgICBsZXQgcGlubmVkSWNvbiA9IGF3YWl0IGdldEJvb2ttYXJrSWNvbih0cnVlKTsKICAgICAgICBsZXQgdW5waW5uZWRJY29uID0gYXdhaXQgZ2V0Qm9va21hcmtJY29uKGZhbHNlKTsKCiAgICAgICAgaWYgKHBpbm5lZCkgewogICAgICAgICAgICB1bnBpbkxpbmsuY2xhc3NMaXN0LmFkZCgnanMtcGlubmVkLXJlcG8nKTsKICAgICAgICAgICAgdW5waW5uZWRJY29uLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHVucGluTGluay5jbGFzc0xpc3QuYWRkKCdqcy11bnBpbm5lZC1yZXBvJyk7CiAgICAgICAgICAgIHBpbm5lZEljb24uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7CiAgICAgICAgfQoKICAgICAgICB1bnBpbkxpbmsuYXBwZW5kQ2hpbGQocGlubmVkSWNvbik7CiAgICAgICAgdW5waW5MaW5rLmFwcGVuZENoaWxkKHVucGlubmVkSWNvbik7CgogICAgICAgIHJldHVybiB1bnBpbkxpbms7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlUGluQ2xpY2soZXZlbnQpIHsKICAgICAgICBsZXQgZWxlbSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CgogICAgICAgIGxldCByZXBvID0gZWxlbS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2EnKTsKICAgICAgICBpZiAocmVwbyA9PSBudWxsKSB7CiAgICAgICAgICAgIGxvZygnRmFpbGVkIHRvIGZpbmQgcmVwbyBmb3IgY2xpY2tlZCBidXR0b24nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbG9nKGBQaW4gbGluayBjbGlja2VkOiAke3JlcG8uYXR0cmlidXRlcy5ocmVmLnZhbHVlfWApOwogICAgICAgIH0KCiAgICAgICAgbGV0IHBpbm5lZEljb24gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2Zy5qcy1ib29rbWFyay1maWxsZWQnKTsKICAgICAgICBsZXQgdW5waW5uZWRJY29uID0gZWxlbS5xdWVyeVNlbGVjdG9yKCdzdmcuanMtYm9va21hcmsnKTsKCiAgICAgICAgY29uc3Qgd2FzVW5waW5uZWQgPSBlbGVtLmNsYXNzTGlzdC5yZXBsYWNlKCdqcy11bnBpbm5lZC1yZXBvJywgJ2pzLXBpbm5lZC1yZXBvJyk7CgogICAgICAgIGlmICh3YXNVbnBpbm5lZCkgewogICAgICAgICAgICB1bnBpbm5lZEljb24uc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7CiAgICAgICAgICAgIHBpbm5lZEljb24ucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsKCiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVBpblJlcG8ocmVwbyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVwbGFjZSgnanMtcGlubmVkLXJlcG8nLCAnanMtdW5waW5uZWQtcmVwbycpOwoKICAgICAgICAgICAgcGlubmVkSWNvbi5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTsKICAgICAgICAgICAgdW5waW5uZWRJY29uLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7CgogICAgICAgICAgICBhd2FpdCBoYW5kbGVVbnBpblJlcG8ocmVwbyk7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCB1cGRhdGUoKTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVQaW5SZXBvKHJlcG8pIHsKICAgICAgICBjb25zdCBocmVmID0gcmVwby5hdHRyaWJ1dGVzLmhyZWYudmFsdWU7CgogICAgICAgIGxldCBwaW5uZWRSZXBvcyA9IGdldFBpbm5lZFJlcG9zKCk7CgogICAgICAgIGlmICghcGlubmVkUmVwb3MuaW5jbHVkZXMoaHJlZikpIHsKICAgICAgICAgICAgcGlubmVkUmVwb3MucHVzaChocmVmKTsKICAgICAgICAgICAgR01fc2V0VmFsdWUobG9jYWxTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeShwaW5uZWRSZXBvcykpOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVVbnBpblJlcG8ocmVwbykgewogICAgICAgIGNvbnN0IHJlcG9IcmVmID0gcmVwby5hdHRyaWJ1dGVzLmhyZWYudmFsdWU7CiAgICAgICAgbGV0IHBpbm5lZFJlcG9zID0gZ2V0UGlubmVkUmVwb3MoKS5maWx0ZXIoaHJlZiA9PiBocmVmICE9PSByZXBvSHJlZik7CiAgICAgICAgR01fc2V0VmFsdWUobG9jYWxTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeShwaW5uZWRSZXBvcykpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdhaXRGb3JFbGVtZW50KHNlbGVjdG9yLCBjYWxsYmFjaykgewogICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxvZyhgRWxlbWVudCAnJHtzZWxlY3Rvcn0nIG5vdCBmb3VuZCwgd2FpdGluZyAzMDBtc2ApOwoKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB3YWl0Rm9yRWxlbWVudChzZWxlY3RvciwgY2FsbGJhY2spOwogICAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBXYWl0IGZvciB0aGUgcmVwb3MgdG8gYmUgcG9wdWxhdGVkIGluIHRoZSBzaWRlYmFyIGJlZm9yZSB0cnlpbmcgdG8gdXBkYXRlIHRoZSBET00KICAgIHdhaXRGb3JFbGVtZW50KHJlcG9TZWxlY3RvcnMuam9pbignLCcpLCB1cGRhdGUpOwoKICAgIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIobG9jYWxTdG9yYWdlS2V5LCBhc3luYyAobmFtZSwgb2xkX3ZhbHVlLCBuZXdfdmFsdWUsIHJlbW90ZSkgPT4gYXdhaXQgdXBkYXRlKCkpOwp9KSgpOw==",
            "storage": {
                "data": {
                    "pinnedRepos": "s[\"/mistsys/mist_go_utils\",\"/mistsys/mist-ap\",\"/corewa-rs/corewars\",\"/mistsys/mist-agent-go\",\"/128technology/rules_128tech\",\"/mistsys/demoapi\",\"/ian-h-chamberlain/dotfiles\",\"/Meziu/ctru-rs\",\"/Meziu/rust-linker-fix-3ds\",\"/Meziu/rust-horizon\",\"/Meziu/cargo-3ds\",\"/corewa-rs/vscode-redcode\",\"/Juniper-SSN/ssr\",\"/ian-h-chamberlain/docker-rust-devkitarm\"]"
                },
                "ts": 1650393027096
            },
            "uuid": "c8c37d2c-a4d8-4ddd-accd-51cc5f2ea6a4"
        },
        {
            "enabled": true,
            "name": "Openstack Firefox Console Fixer",
            "options": {
                "check_for_updates": false,
                "comment": null,
                "compat_foreach": false,
                "compat_metadata": false,
                "compat_powerful_this": null,
                "compat_prototypes": false,
                "compat_wrappedjsobject": false,
                "compatopts_for_requires": true,
                "noframes": null,
                "override": {
                    "merge_connects": true,
                    "merge_excludes": true,
                    "merge_includes": true,
                    "merge_matches": true,
                    "orig_connects": [],
                    "orig_excludes": [],
                    "orig_includes": [],
                    "orig_matches": [
                        "https://spaceport.lab.128technology.com:6082/spice_auto.html*"
                    ],
                    "orig_noframes": null,
                    "orig_run_at": "document-idle",
                    "use_blockers": [],
                    "use_connects": [],
                    "use_excludes": [],
                    "use_includes": [],
                    "use_matches": []
                },
                "run_at": null,
                "tab_types": null,
                "unwrap": null
            },
            "position": 18,
            "source": "Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBPcGVuc3RhY2sgRmlyZWZveCBDb25zb2xlIEZpeGVyCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9naXRodWIuY29tL2lhbi1oLWNoYW1iZXJsYWluCi8vIEB2ZXJzaW9uICAgICAgMC4xCi8vIEBkZXNjcmlwdGlvbiAgRml4IGEgaG9ycmlibGUgb3BlbnN0YWNrIGJ1ZyBieSBpbmplY3Rpbmcgc29tZSBrZXljb2RlcyBmb3IgRmlyZWZveAovLyBAYXV0aG9yICAgICAgIElhbiBDaGFtYmVybGFpbiAoR2l0SHViIEBpYW4taC1jaGFtYmVybGFpbikKLy8gQG1hdGNoICAgICAgICBodHRwczovL3NwYWNlcG9ydC5sYWIuMTI4dGVjaG5vbG9neS5jb206NjA4Mi9zcGljZV9hdXRvLmh0bWwqCi8vIEBpY29uICAgICAgICAgaHR0cHM6Ly9zcGFjZXBvcnQubGFiLjEyOHRlY2hub2xvZ3kuY29tL3N0YXRpYy9kYXNoYm9hcmQvaW1nL2Zhdmljb24uaWNvCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICBpZiAodHlwZW9mIGZpcmVmb3hfc2Nhbm1hcCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAvLyBGaXJlZm94IHNlZW1zIHRvIHNlbmQgMjI0IHdoZXRoZXIgdGhlIGxlZnQgb3IgcmlnaHQg4oyYIGtleSBpcyBwcmVzc2VkCiAgICAgICAgLy8gVmFsdWUgZnJvbSBodHRwczovL2dpdGxhYi5mcmVlZGVza3RvcC5vcmcvc3BpY2Uvc3BpY2UtaHRtbDUvLS9ibG9iL3NwaWNlLWh0bWw1LTAuMS43L3V0aWxzLmpzI0wyMTAKICAgICAgICBmaXJlZm94X3NjYW5tYXBbMjI0XSA9IDB4RTA1QjsgLy8gS0VZX0xNZXRhCgogICAgICAgIC8vIEVuYWJsZSBudW1sb2NrLCBmb3Igc29tZSByZWFzb24gdGhpcyBkb2Vzbid0IHdvcmsgYnkgZGVmYXVsdC4gTWF5YmUgYmVjYXVzZSBpdCBzZW5kcyBhIEtleV9DTEVBUiBpbnN0ZWFkPwogICAgICAgIGZpcmVmb3hfc2Nhbm1hcFsxMl0gPSBLRVlfTnVtTG9jazsKICAgIH0KfSkoKTs=",
            "storage": {
                "data": {},
                "ts": 1656605726968
            },
            "uuid": "ed158b6e-8995-48a5-8a2a-2e63f4546680"
        }
    ],
    "settings": {
        "configMode": 100,
        "editor_autoLint": true,
        "editor_autoLintMaxLen": "300000",
        "editor_autoSave": false,
        "editor_easySave": true,
        "editor_electricChars": true,
        "editor_enabled": true,
        "editor_fontSize": "100",
        "editor_highlightSelectionMatches": "cursor",
        "editor_highlightTrailingWhitespace": true,
        "editor_indentUnit": "4",
        "editor_indentWithTabs": "spaces",
        "editor_keyMap": "vim",
        "editor_lineWrapping": false,
        "editor_linter_config": null,
        "editor_tabMode": "indent",
        "editor_tabSize": "4",
        "editor_theme": "monokai",
        "editor_trimTrailingSpacesFromModifiedLines": true,
        "enabled": true,
        "favicon_service": "google",
        "layout": "default",
        "layout_user_css": "",
        "notification_showUpdate": "changelog",
        "script_blacklist_server": [
            {
                "rules": [
                    "/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"
                ],
                "severity": 2
            },
            {
                "name": "SaveFrom.net helper",
                "reason": "Shows advertisements",
                "rules": [
                    "/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/",
                    "/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"
                ],
                "severity": 3
            },
            {
                "reasons": {
                    "en": "Used for a phishing compain to compromise users of baon-nutrition.com"
                },
                "rules": [
                    "/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"
                ],
                "severity": 8
            },
            {
                "name": "Local YouTube Downloader",
                "reasons": {
                    "en": "Shows a disturbing alert message at every page with a youtube frame or iframe"
                },
                "rules": [
                    "/https?:\\/\\/greasyfork\\.org\\/scripts\\/369400-.*\\.user\\.js.*/"
                ],
                "severity": 8
            }
        ]
    }
}
